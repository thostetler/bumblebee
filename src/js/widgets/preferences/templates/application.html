<div class="panel-heading" style="display: flex; justify-content: space-between">
  Search Settings
  <button class="btn btn-link btn-xs reset-to-defaults" type="button">Reset to defaults</button>
</div>

<div class="panel-body" id="application-settings-container">
  <div class="row">
    <div class="col-md-12">
      <form class="form-horizontal" id="app-settings-form">

        <!-- NUM AUTHORS -->
        <div class="form-group">
          <label for="numAuthors">
            Authors Visible Per Result
            <button aria-controls="collapseNumAuthorsDesc" aria-expanded="false" aria-label="number of authors per result" class="btn-link"
                    data-toggle="collapse" href="#collapseNumAuthorsDesc">
              <i aria-hidden="true" class="fa fa-question-circle"></i>
            </button>
          </label>
          <p>
          <div class="collapse" id="collapseNumAuthorsDesc">
            <div class="card card-body">
              <p>
                Specifies the number of authors to show under each result before the list is truncated.
                <br> (
                <strong>default: {{numAuthorsDefault}}</strong>)
              </p>
            </div>
          </div>
          </p>
          <select aria-describedby="collapseNumAuthorsDesc" class="form-control" id="numAuthors">
            {{#each numAuthorsOptions}}
            <option .. this value="{{this}}" {{#compare
            /numAuthorsSelected}} selected="selected" {{/compare}}>{{this}}
            </option>
            {{/each}}
          </select>
        </div>

        <!-- Always Open Links In New Tab/Same Tab -->
        <div class="form-group">
          <label for="externalLinks">
            Default Action For External Links
            <button aria-controls="collapseExternalLinks" aria-expanded="false" aria-label="default action for external links" class="btn-link"
                    data-toggle="collapse" href="#collapseExternalLinks">
              <i aria-hidden="true" class="fa fa-question-circle"></i>
            </button>
          </label>
          <p>
          <div class="collapse" id="collapseExternalLinks">
            <div class="card card-body">
              <p>
                Select the default action when opening an external link.
                <br> (
                <strong>default: {{externalLinksDefault}}</strong>)
              </p>
            </div>
          </div>
          </p>
          <select aria-describedby="collapseExternalLinks" class="form-control" id="externalLinks">
            {{#each externalLinksOptions}}
            <option .. this value="{{this}}" {{#compare
            /externalLinksSelected}} selected="selected" {{/compare}}>
            {{this}}</option>
            {{/each}}
          </select>
        </div>

        <!-- Home Page Default -->
        <div class="form-group">
          <label for="homePage">
            Default Home Page
            <button aria-controls="collapseHomePage" aria-expanded="false" aria-label="default home page" class="btn-link"
                    data-toggle="collapse" href="#collapseHomePage">
              <i aria-hidden="true" class="fa fa-question-circle"></i>
            </button>
          </label>
          <p>
          <div class="collapse" id="collapseHomePage">
            <div class="card card-body">
              <p>
                Select the default landing page shown when loading the application or starting a new search.
                <br> (
                <strong>default: {{homePageDefault}}</strong>)
              </p>
            </div>
          </div>
          </p>
          <select aria-describedby="collapseHomePage" class="form-control" id="homePage">
            {{#each homePageOptions}}
            <option .. this value="{{this}}" {{#compare
            /homePageSelected}} selected="selected" {{/compare}}>
            {{this}}</option>
            {{/each}}
          </select>
        </div>

        <!-- Default Collection -->
        <div class="form-group">
          <div style="display:flex; align-items: center;">
            <label id="defaultDatabaseLabel" style="margin: 0;">
              Default Collection(s)
              <button aria-controls="collapseDatabase" aria-expanded="false" aria-label="default collection" class="btn-link"
                      data-toggle="collapse" href="#collapseDatabase">
                <i aria-hidden="true" class="fa fa-question-circle"></i>
              </button>
            </label>
            <div style="width: 40px"></div>
            {{#if (not (includes 'database' this.modifySections))}}
            <button class="btn btn-primary btn-xs section-modify" data-section="database" type="button">Modify
            </button>
            {{/if}}
            {{#if (includes 'database' this.modifySections)}}
            <button class="btn btn-link btn-xs section-reset" data-section="database" type="button">Reset</button>
            {{/if}}
          </div>
          <p>
          <div class="collapse" id="collapseDatabase">
            <div class="card card-body">
              <p>
                This will apply a default collection facet to each search. You can manually remove or alter it from
                there.
                <br> (
                <strong>default: none</strong>)
              </p>
            </div>
          </div>
          </p>

          {{#if (includes 'database' this.modifySections)}}
          <p>
            <label style="font-size: 1.5rem">
              <input (prop id="database_all" name="database" type="checkbox"
                     value="all" {{#if 'All' databaseSelected)}}checked{{/if}}
              >
              All Collections
            </label>
          </p>

          <div aria-labelledby="defaultDatabaseLabel" class="btn-group" data-toggle="buttons" role="group">
            {{#each databaseOptions}}
            <label
              (prop
              class="database-select btn btn-default{{#if
                    (and (prop this ../databaseSelected) (not (prop 'All' ../databaseSelected)))}} active{{/if}}"
              data-id="{{this}}" {{#if 'All' ../databaseSelected)}}disabled{{/if}}
            >
            {{#if (not (prop 'All' ../databaseSelected))}}
            <input
              (prop
              ..
              id="database_{{this}}"
              name="database"
              this type="checkbox" value="{{this}}" {{#if/databaseSelected)}}checked{{/if}}
            />
            {{/if}}
            {{this}}
            </label>
            {{/each}}
          </div>
          {{/if}}

        </div>

        <!-- Default Show/Hide Sidebars -->
        <div class="form-group">
          <label for="hideSideBars">
            Results List Side Bars
            <button aria-controls="collapseHideSideBars" aria-expanded="false" aria-label="results list side bars" class="btn-link"
                    data-toggle="collapse" href="#collapseHideSideBars">
              <i aria-hidden="true" class="fa fa-question-circle"></i>
            </button>
          </label>
          <p>
          <div class="collapse" id="collapseHideSideBars">
            <div class="card card-body">
              <p>
                Select the default state of the results list sidebars (hide/show)
                <br> (
                <strong>default: {{hideSideBarsDefault}}</strong>)
              </p>
            </div>
          </div>
          </p>
          <select aria-describedby="collapseHideSideBars" class="form-control" id="hideSideBars">
            {{#each hideSideBarsOptions}}
            <option .. this value="{{this}}" {{#compare
            /hideSideBarsSelected}} selected="selected" {{/compare}}>{{this}}
            </option>
            {{/each}}
          </select>
        </div>
      </form>

      <div class="col-md-6 col-md-offset-3 text-center" id="app-settings-msg">
        {{#if loading}}
        <i aria-hidden="true" class="text-muted fa fa-refresh fa-spin fa-3x"></i> {{/if}} {{#if updateSucceeded}}
        <div class="alert alert-success fade in h4" role="alert">
          <i aria-hidden="true" class="fa fa-check fa-2x"></i> Settings updated successfully
        </div>
        {{/if}} {{#if updateFailed}}
        <div class="alert alert-danger fade in h4" role="alert">
          <i aria-hidden="true" class="fa fa-times fa-3x"></i> Settings not updated, please try again.
        </div>
        {{/if}}
      </div>
    </div>
  </div>
</div>
