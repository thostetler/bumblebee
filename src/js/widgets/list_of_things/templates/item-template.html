<div tabindex="-1" class="{{#if chosen}}chosen{{/if}}"></div>
<div class="bs4">
  <div class="container py-3">
    <div class="row justify-content-between">
      <div class="col-xs-1">
        <label>
          <span class="d-none d-sm-inline">{{indexToShow}}</span>
          {{#if showCheckbox}}
            <input type="checkbox" name="identifier" value="{{identifier}}" {{#if checked}}checked{{/if}}
              aria-checked="{{checked}}" aria-label="select item {{indexToShow}}">
          {{/if}}
        </label>
      </div>
      <div class="col-xs-4 pl-0 mr-3">
        <a href="#abs/{{encodedIdentifier}}/abstract" aria-label="bibcode" class="abs-redirect-link">
          {{identifier}}
        </a>
      </div>
      <div class="col-xs-3 px-2 text-right">{{formattedDate}}</div>
      <div class="col-xs-1 px-1 text-right">
        {{#if citation_count }}
          {{#if normCiteSort}}
            <a href="#abs/{{encodedIdentifier}}/citations" title="citation count" class="citations-redirect-link">
              <span class="d-none d-sm-inline">cited (n):</span> {{citationCountNorm}}
            </a>
          {{else}}
            <a href="#abs/{{encodedIdentifier}}/citations" title="citation count" class="citations-redirect-link">
              <span class="d-none d-sm-inline">cited:</span> {{citation_count}}
            </a>
          {{/if}}
        {{/if}}
      </div>
      <div class="col d-inline-flex justify-content-end">
        {{#if links}}
          <div class="letter-icon s-letter-icon">

            {{#if links.text}}

              <a href="{{links.text.[0].url}}" target="_blank" rel="noopener" class="btn-link active-link s-active-link"
                aria-disabled="false">
                <i class="s-text-icon" aria-label="quick access to full text links"></i>
              </a>
              <ul class="hidden list-unstyled link-details s-link-details" role="menu">

                {{#each links.text}}
                  <li><a {{#if this.openAccess}} class="s-open-access" {{/if}} href="{{this.url}}" target="_blank"
                      rel="noopener">{{this.name}}</a></li>
                {{/each}}
              </ul>

            {{else}}

              <div title="full text links (none)">
                <a href="javascript:void(0)" class="btn-link disabled" aria-disabled="true"
                  aria-label="full text links">
                  <i class="s-text-icon" aria-hidden="true"></i>
                </a>
              </div>

            {{/if}}

          </div>
          <div class="letter-icon s-letter-icon">

            {{#if links.list}}

              <a href="{{links.list.[0].url}}" class="btn-link active-link s-active-link" aria-disabled="false">
                <i class="s-list-icon" aria-label="quick links to lists of references, citations and more"></i>
              </a>

              <ul class="hidden list-unstyled list-unstyled link-details s-link-details" role="menu">

                {{#each links.list}}
                  <li><a href="{{this.url}}">{{this.name}}</a></li>
                {{/each}}
              </ul>

            {{else}}
              <div title="references, citations (none)">
                <a href="javascript:void(0)" class="btn-link disabled" aria-disabled="true"
                  aria-label="quick links to lists of references, citations etc">
                  <i class="s-list-icon" aria-hidden="true"></i>
                </a>
              </div>

            {{/if}}

          </div>
          <div class="letter-icon s-letter-icon">

            {{#if links.data}}

              <a href="{{links.data.[0].url}}" target="_blank" rel="noopener" class="btn-link active-link s-active-link"
                aria-disabled="false">
                <i class="s-data-icon" aria-label="quick links to data associated with this article"></i>
              </a>

              <ul class="hidden list-unstyled link-details s-link-details" role="menu">

                {{#each links.data}}
                  <li><a {{#if this.openAccess}} class="s-open-access" {{/if}} href="{{this.url}}" target="_blank"
                      rel="noopener">{{this.name}}</a></li>
                {{/each}}
              </ul>

            {{else}}
              <div title="data products (none)">
                <a href="javascript:void(0)" class="btn-link disabled" aria-disabled="true"
                  aria-label="quick links to data associated with this article">
                  <i class="s-data-icon" aria-hidden="true"></i>
                </a>
              </div>

            {{/if}}

          </div>
        {{/if}}
      </div>
    </div>
    <div class="row justify-content-around">
      <div class="col">
        {{#if isOrcidWidget}}
          {{#if encodedIdentifier}}
            <a href="#abs/{{encodedIdentifier}}/abstract" class="abs-redirect-link">
              <h3 class="s-results-title">{{{title}}}</h3>
            </a>
          {{else}}
            <h3 class="s-results-title">{{{title}}}</h3>
          {{/if}}
        {{else}}
          <a href="#abs/{{encodedIdentifier}}/abstract" class="abs-redirect-link">
            <h3 class="s-results-title">{{{title}}}</h3>
          </a>
        {{/if}}
      </div>
    </div>
    <div class="row">
      <div class="col">
        {{#unless isOrcidWidget}}
          {{#if authorFormatted}}
            <ul class="list-inline just-authors s-results-authors less-authors" aria-label="authors">
              {{#each authorFormatted}}
                <li class="article-author">{{this}}</li>
              {{/each}}

              {{#if extraAuthors}}
                <li>
                  <a href="javascript:void(0)" class="show-all-authors">
                    <em>and {{extraAuthors}} more</em>
                  </a>
                </li>
              {{/if}}
            </ul>

            <ul class="list-inline just-authors s-results-authors all-authors hidden" aria-label="authors">
              {{#each allAuthorFormatted}}
                <li class="article-author">{{this}}</li>
              {{/each}}
              <li>
                <a href="javascript:void(0)" class="show-less-authors">
                  <em>show less</em>
                </a>
              </li>
            </ul>
          {{else}}
            <span class="text-faded">no author information available</span>
          {{/if}}
        {{/unless}}
      </div>
    </div>
    <div class="row highlight-row">
      {{#if showHighlights}}
        <div class="col s-more-info">
          {{#if highlights}}
            <h4 class="sr-only">Search Highlights</h4>
            <ul aria-label="search snippets" class="s-search-snippets">
              {{#each highlights}}
                <li>{{{this}}}</li>
              {{/each}}
            </ul>
          {{else}}
            <span class="text-muted"><i class="fa fa-spinner fa-pulse"></i> Loading Highlights...</span>
          {{/if}}
        </div>
      {{/if}}
    </div>
    <div class="row abstract-row">
      {{#if showAbstract}}
        <div class="col">
          {{#if abstract}}
            <h4 aria-label="read full abstract below"><a href="#abs/{{identifier}}">Abstract</a></h4>
            {{#if shortAbstract}}

              <div class="short-abstract" aria-label="a truncated version of the abstract">
                {{{shortAbstract}}}
                &nbsp; <button class="btn btn-xs btn-default show-full-abstract">more</button>
              </div>
              <div class="full-abstract hidden">
                {{{abstract}}}
                &nbsp; <button class="btn btn-xs btn-default hide-full-abstract">less</button>
              </div>
            {{else}}
              <!--the abstract is short enough to be shown all at once-->
              {{{abstract}}}
            {{/if}}
          {{/if}}
        </div>
      {{/if}}
    </div>
  </div>
</div>
