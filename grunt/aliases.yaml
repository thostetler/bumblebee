# Grunt Aliases File
# Use this file to create aliases for grunt commands

default: 'setup'

# Local Server
server: 'express:server'
'server:release':
  - 'env:release'
  - 'express:server'
server:once: 'express:once'
'server:release:once':
  - 'env:release'
  - 'express:once'

# 3rd Party Assets
assets:
  - 'clean:libs'
  - 'concurrent:install'
  - 'copy:libs'
  - 'concurrent:convert'

# CSS Processing
css:
  - 'sass'
  - 'autoprefixer'

# Testing
test:
  - 'server:once'
  - 'mocha-runner:all'

'test:release':
  - 'server:release:once'
  - 'mocha-runner:all'

coverage:
  - 'clean:coverage'
  - 'exec:nyc-instrument'
  - 'mocha-runner:coverage'
  - 'coverage-report:coveralls'
  - 'exec:coveralls-report'

# Initial Setup
setup:
  - 'assets'
  - 'copy:discovery_vars'
  - 'sass'

# Release
release:
  description: 'Build the assets and prepare for a release'
  tasks:
    - 'assets'
    - 'clean:release'
    - 'copy:release'
    - 'compile-handlebars:index'
    - 'exec:git_describe'
    - 'string-replace:dist'
    - 'babel:release'
    - 'requirejs:release_concatenated'
    - 'uglify:release'
    - 'requirejs:release_css'
    - 'concurrent:hash_require'
    - 'copy:keep_original'
    - 'copy:bumblebee_app'
    - 'assemble'
