/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (function() { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/404.html":
/*!**********************!*\
  !*** ./src/404.html ***!
  \**********************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<!DOCTYPE html>\\n<html>\\n<head>\\n  <link rel=\\\"preload\\\" href=\\\"./styles/css/styles.css\\\" as=\\\"style\\\"/>\\n  <link rel=\\\"stylesheet\\\" href=\\\"./styles/css/styles.css\\\"/>\\n  <link rel=\\\"preload\\\" href=\\\"./libs/require.js\\\" as=\\\"script\\\"/>\\n  <!-- favicon -->\\n  <link rel=\\\"apple-touch-icon\\\" sizes=\\\"180x180\\\" href=\\\"./styles/favicon/apple-touch-icon.png\\\"/>\\n  <link rel=\\\"icon\\\" type=\\\"image/png\\\" sizes=\\\"32x32\\\" href=\\\"./styles/favicon/favicon-32x32.png\\\"/>\\n  <link rel=\\\"icon\\\" type=\\\"image/png\\\" sizes=\\\"16x16\\\" href=\\\"./styles/favicon/favicon-16x16.png\\\"/>\\n  <link rel=\\\"manifest\\\" href=\\\"./styles/favicon/site.webmanifest\\\"/>\\n  <link rel=\\\"mask-icon\\\" href=\\\"./styles/favicon/safari-pinned-tab.svg\\\" color=\\\"#5bbad5\\\"/>\\n  <meta name=\\\"apple-mobile-web-app-title\\\" content=\\\"Astrophysics Data System\\\"/>\\n  <meta name=\\\"application-name\\\" content=\\\"Astrophysics Data System\\\"/>\\n  <meta name=\\\"msapplication-TileColor\\\" content=\\\"#ffc40d\\\"/>\\n  <meta name=\\\"theme-color\\\" content=\\\"#ffffff\\\"/>\\n  <!-- /favicon -->\\n  <script src=\\\"./libs/require.js\\\"></script>\\n  <!-- Google Tag Manager -->\\n  <script>(function (w, d, s, l, i) {\\n    w[l] = w[l] || [];\\n    w[l].push({\\n      'gtm.start':\\n        new Date().getTime(), event: 'gtm.js',\\n    });\\n    var f = d.getElementsByTagName(s)[0],\\n      j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';\\n    j.async = true;\\n    j.src =\\n      'https://www.googletagmanager.com/gtm.js?id=' + i + dl;\\n    f.parentNode.insertBefore(j, f);\\n  })(window, document, 'script', 'dataLayer', 'GTM-NT2453N');</script>\\n  <!-- End Google Tag Manager -->\\n  <script>\\n    require.config({\\n      paths: {\\n        underscore: [\\n          'https://unpkg.com/lodash@2.4.2/dist/lodash.compat.min',\\n          'libs/lodash',\\n        ],\\n        analytics: 'js/components/analytics',\\n        jquery: [\\n          'https://unpkg.com/jquery@2.2.4/dist/jquery.min',\\n          'libs/jquery',\\n        ],\\n      },\\n    });\\n    require(['analytics'], function (analytics) {\\n      analytics('send', 'virtual_page_view', '/404');\\n      analytics(\\n        'send',\\n        'event',\\n        'error',\\n        'automatic_redirection',\\n        '404.html',\\n      );\\n    });\\n  </script>\\n</head>\\n<body>\\n<div\\n  style=\\\"display: flex; flex-direction: column; min-height: screen; min-width: screen; justify-content: center; align-items: center;\\\"\\n>\\n  <h1>Bumblebee failed to load. Please try again.</h1>\\n\\n  <h2>\\n    <a href=\\\"javascript:history.back()\\\">Go Back</a>\\n  </h2>\\n</div>\\n</body>\\n</html>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/404.html?");

/***/ }),

/***/ "./src/config sync recursive":
/*!**************************!*\
  !*** ./src/config/ sync ***!
  \**************************/
/***/ (function(module) {

eval("function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = \"./src/config sync recursive\";\nmodule.exports = webpackEmptyContext;\n\n//# sourceURL=webpack://bumblebee/./src/config/_sync?");

/***/ }),

/***/ "./src/config/discovery.config.js":
/*!****************************************!*\
  !*** ./src/config/discovery.config.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {

eval("// Main config file for the Discovery application\n__webpack_require__(\"./src/config sync recursive\").config({\n  // Initialize the application with the main application file or if we run\n  // as a test, then load the test unittests\n  deps: function () {\n    if (typeof window !== 'undefined' && window.skipMain) {\n      return ['common.config'];\n    }\n\n    return ['config/common.config', 'js/apps/discovery/main'];\n  }(),\n  // this will be overridden in the compiled file\n  waitSeconds: 30,\n  // Configuration we want to make available to modules of ths application\n  // see: http://requirejs.org/docs/api.html#config-moduleconfig\n  config: {\n    es6: {\n      modules: undefined\n    },\n    'js/components/persistent_storage': {\n      // the unique namespace under which the local storage will be created\n      // so every new instance of the storage will be saving its data into\n      // <namespace>[other-name]\n      namespace: 'bumblebee'\n    },\n    'js/apps/discovery/main': {\n      core: {\n        controllers: {\n          FeedbackMediator: 'js/wraps/discovery_mediator',\n          QueryMediator: 'js/components/query_mediator',\n          Diagnostics: 'js/bugutils/diagnostics',\n          AlertsController: 'js/wraps/alerts_mediator',\n          Orcid: 'js/modules/orcid/module',\n          SecondOrderController: 'js/components/second_order_controller',\n          HotkeysController: 'js/components/hotkeys_controller',\n          Experiments: 'js/components/experiments'\n        },\n        services: {\n          Api: 'js/services/api',\n          PubSub: 'js/services/pubsub',\n          Navigator: 'js/apps/discovery/navigator',\n          PersistentStorage: 'js/services/storage',\n          HistoryManager: 'js/components/history_manager'\n        },\n        objects: {\n          User: 'js/components/user',\n          Session: 'js/components/session',\n          DynamicConfig: 'config/discovery.vars',\n          MasterPageManager: 'js/page_managers/master',\n          AppStorage: 'js/components/app_storage',\n          CSRFManager: 'js/components/csrf_manager',\n          LibraryController: 'js/components/library_controller',\n          DocStashController: 'js/components/doc_stash_controller',\n          Utils: 'utils'\n        },\n        modules: {\n          FacetFactory: 'js/widgets/facet/factory'\n        }\n      },\n      widgets: {\n        LandingPage: 'js/wraps/landing_page_manager/landing_page_manager',\n        SearchPage: 'js/wraps/results_page_manager',\n        DetailsPage: 'js/wraps/abstract_page_manager/abstract_page_manager',\n        AuthenticationPage: 'js/wraps/authentication_page_manager',\n        SettingsPage: 'js/wraps/user_settings_page_manager/user_page_manager',\n        OrcidPage: 'js/wraps/orcid_page_manager/orcid_page_manager',\n        OrcidInstructionsPage: 'js/wraps/orcid-instructions-page-manager/manager',\n        ReactPageManager: 'js/react/PageManager',\n        LibrariesPage: 'js/wraps/libraries_page_manager/libraries_page_manager',\n        HomePage: 'js/wraps/home_page_manager/home_page_manager',\n        PublicLibrariesPage: 'js/wraps/public_libraries_page_manager/public_libraries_manager',\n        ErrorPage: 'js/wraps/error_page_manager/error_page_manager',\n        Authentication: 'js/widgets/authentication/widget',\n        UserSettings: 'js/widgets/user_settings/widget',\n        UserPreferences: 'js/widgets/preferences/widget',\n        LibraryImport: 'js/widgets/library_import/widget',\n        BreadcrumbsWidget: 'js/widgets/filter_visualizer/widget',\n        NavbarWidget: 'js/widgets/navbar/widget',\n        UserNavbarWidget: 'js/widgets/user_navbar/widget',\n        AlertsWidget: 'js/widgets/alerts/widget',\n        ClassicSearchForm: 'js/widgets/classic_form/widget',\n        SearchWidget: 'js/widgets/search_bar/search_bar_widget',\n        PaperSearchForm: 'js/widgets/paper_search_form/widget',\n        Results: 'js/widgets/results/widget',\n        QueryInfo: 'js/widgets/query_info/query_info_widget',\n        QueryDebugInfo: 'js/widgets/api_query/widget',\n        ExportWidget: 'js/widgets/export/widget.jsx',\n        Sort: 'js/widgets/sort/widget.jsx',\n        ExportDropdown: 'js/wraps/export_dropdown',\n        VisualizationDropdown: 'js/wraps/visualization_dropdown',\n        AuthorNetwork: 'js/wraps/author_network',\n        PaperNetwork: 'js/wraps/paper_network',\n        ConceptCloud: 'js/widgets/wordcloud/widget',\n        BubbleChart: 'js/widgets/bubble_chart/widget',\n        AuthorAffiliationTool: 'js/widgets/author_affiliation_tool/widget.jsx',\n        Metrics: 'js/widgets/metrics/widget',\n        CitationHelper: 'js/widgets/citation_helper/widget',\n        OrcidBigWidget: 'js/modules/orcid/widget/widget',\n        OrcidSelector: 'js/widgets/orcid-selector/widget.jsx',\n        AffiliationFacet: 'js/wraps/affiliation_facet',\n        AuthorFacet: 'js/wraps/author_facet',\n        BibgroupFacet: 'js/wraps/bibgroup_facet',\n        BibstemFacet: 'js/wraps/bibstem_facet',\n        DataFacet: 'js/wraps/data_facet',\n        DatabaseFacet: 'js/wraps/database_facet',\n        GrantsFacet: 'js/wraps/grants_facet',\n        KeywordFacet: 'js/wraps/keyword_facet',\n        ObjectFacet: 'js/wraps/simbad_object_facet',\n        NedObjectFacet: 'js/wraps/ned_object_facet',\n        RefereedFacet: 'js/wraps/refereed_facet',\n        VizierFacet: 'js/wraps/vizier_facet',\n        GraphTabs: 'js/wraps/graph_tabs',\n        FooterWidget: 'js/widgets/footer/widget',\n        PubtypeFacet: 'js/wraps/pubtype_facet',\n        ShowAbstract: 'js/widgets/abstract/widget',\n        ShowGraphics: 'js/widgets/graphics/widget',\n        ShowGraphicsSidebar: 'js/wraps/sidebar-graphics-widget',\n        ShowReferences: 'js/wraps/references',\n        ShowCitations: 'js/wraps/citations',\n        ShowCoreads: 'js/wraps/coreads',\n        ShowSimilar: 'js/wraps/similar',\n        MetaTagsWidget: 'js/widgets/meta_tags/widget',\n        ShowToc: 'js/wraps/table_of_contents',\n        ShowResources: 'js/widgets/resources/widget.jsx',\n        ShowAssociated: 'js/widgets/associated/widget.jsx',\n        ShowRecommender: 'js/widgets/recommender/widget',\n        ShowMetrics: 'js/wraps/paper_metrics',\n        ShowExportcitation: 'js/wraps/paper_export',\n        ShowFeedback: 'reactify!js/react/BumblebeeWidget?FeedbackForms',\n        ShowLibraryAdd: 'js/wraps/abstract_page_library_add/widget',\n        IndividualLibraryWidget: 'js/widgets/library_individual/widget',\n        LibraryActionsWidget: 'js/widgets/library_actions/widget.jsx',\n        AllLibrariesWidget: 'js/widgets/libraries_all/widget',\n        LibraryListWidget: 'js/widgets/library_list/widget',\n        MyAdsFreeform: 'reactify!js/react/BumblebeeWidget?MyAdsFreeform',\n        MyAdsDashboard: 'reactify!js/react/BumblebeeWidget?MyAdsDashboard',\n        RecommenderWidget: 'reactify!js/react/BumblebeeWidget?Recommender'\n      },\n      plugins: {}\n    }\n  },\n  // Configuration for the facades (you can pick specific implementation, just for your\n  // application) see http://requirejs.org/docs/api.html#config-map\n  map: {\n    '*': {\n      pubsub_service_impl: 'js/services/default_pubsub'\n    }\n  },\n  paths: {\n    // bumblebee components (here we'll lists simple names), paths are relative\n    // to the config (the module that bootstraps our application; look at the html)\n    // as a convention, all modules should be loaded using 'symbolic' names\n    // **********************\n    // *** internal paths ***\n    // **********************\n    router: 'js/apps/discovery/router',\n    analytics: 'js/components/analytics',\n    utils: 'js/utils',\n    reactify: 'js/plugins/reactify',\n    cdn: 'js/plugins/cdn',\n    es6: 'js/plugins/es6',\n    suit: 'shared/dist/index.umd.development',\n    // **********************\n    // *************************************\n    // *** development-only dependencies ***\n    // *************************************\n    babel: 'libs/babel',\n    async: 'libs/requirejs-plugins/async',\n    hbs: 'libs/requirejs-plugins/hbs',\n    sinon: 'libs/sinon',\n    enzyme: 'libs/enzyme',\n    mocha: 'libs/mocha/mocha',\n    chai: 'libs/chai',\n    // *************************************\n    // *******************************\n    // *** production dependencies ***\n    // *******************************\n    sprintf: ['https://cdn.jsdelivr.net/npm/sprintf-js@1.1.3/src/sprintf.min', 'https://unpkg.com/sprintf-js@1.1.3/dist/sprintf.min', 'https://ads-assets.pages.dev/libs/sprintf', 'libs/sprintf'],\n    underscore: ['https://cdn.jsdelivr.net/npm/lodash@2.4.2/dist/lodash.compat.min', 'https://unpkg.com/lodash@2.4.2/dist/lodash.compat.min', 'https://ads-assets.pages.dev/libs/lodash', 'libs/lodash'],\n    backbone: ['https://cdn.jsdelivr.net/npm/backbone@1.1.2/backbone-min', 'https://unpkg.com/backbone@1.1.2/backbone-min', 'https://ads-assets.pages.dev/libs/backbone', 'libs/backbone'],\n    'backbone-validation': ['https://cdn.jsdelivr.net/npm/backbone-validation@0.11.3/dist/backbone-validation-amd-min', 'https://unpkg.com/backbone-validation@0.11.3/dist/backbone-validation-amd-min', 'https://ads-assets.pages.dev/libs/backbone', 'libs/backbone-validation'],\n    'backbone.stickit': ['https://cdn.jsdelivr.net/npm/backbone.stickit@0.9.2/backbone.stickit', 'https://unpkg.com/backbone.stickit@0.9.2/backbone.stickit', 'https://ads-assets.pages.dev/libs/backbone.stickit', 'libs/backbone.stickit'],\n    'backbone.wreqr': ['https://cdn.jsdelivr.net/npm/backbone.wreqr@1.4.0/lib/backbone.wreqr.min', 'https://unpkg.com/backbone.wreqr@1.4.0/lib/backbone.wreqr.min', 'https://ads-assets.pages.dev/libs/backbone.wreqr', 'libs/backbone.wreqr'],\n    bootstrap: ['https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min', 'https://unpkg.com/bootstrap@3.3.7/dist/js/bootstrap.min', 'https://ads-assets.pages.dev/libs/bootstrap/bootstrap', 'libs/bootstrap/bootstrap'],\n    bowser: ['https://cdn.jsdelivr.net/npm/bowser@2.11.0/es5', 'https://unpkg.com/bowser@2.11.0/es5', 'https://ads-assets.pages.dev/libs/bowser', 'libs/bowser'],\n    clipboard: ['https://cdn.jsdelivr.net/npm/clipboard@1.7.1/dist/clipboard.min', 'https://unpkg.com/clipboard@1.7.1/dist/clipboard.min', 'https://ads-assets.pages.dev/libs/clipboard', 'libs/clipboard'],\n    d3: ['https://cdn.jsdelivr.net/npm/d3@3.5.17/d3.min', 'https://unpkg.com/d3@3.5.17/d3.min', 'https://ads-assets.pages.dev/libs/d3', 'libs/d3'],\n    'd3-cloud': ['https://cdn.jsdelivr.net/npm/d3-cloud@1.2.5/build/d3.layout.cloud', 'https://unpkg.com/d3-cloud@1.2.5/build/d3.layout.cloud', 'https://ads-assets.pages.dev/libs/d3-cloud', 'libs/d3-cloud'],\n    filesaver: ['https://cdn.jsdelivr.net/npm/file-saver@1.3.8/FileSaver.min', 'https://unpkg.com/file-saver@1.3.8/FileSaver.min', 'https://ads-assets.pages.dev/libs/file-saver', 'libs/file-saver'],\n    hotkeys: ['https://cdn.jsdelivr.net/npm/hotkeys-js@3.8.7/dist/hotkeys.min', 'https://unpkg.com/hotkeys-js@3.8.7/dist/hotkeys.min', 'https://ads-assets.pages.dev/libs/hotkeys', 'libs/hotkeys'],\n    jquery: ['https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min', 'https://unpkg.com/jquery@2.2.4/dist/jquery.min', 'https://ads-assets.pages.dev/libs/jquery', 'libs/jquery'],\n    'jquery-ui': ['https://code.jquery.com/ui/1.12.1/jquery-ui.min', 'https://unpkg.com/jquery-ui@1.12.1/jquery-ui.min', 'https://ads-assets.pages.dev/libs/jquery-ui', 'libs/jquery-ui'],\n    jsonpath: ['https://cdn.jsdelivr.net/npm/jsonpath@0.2.12/jsonpath.min', 'https://unpkg.com/jsonpath@0.2.12/jsonpath.min', 'https://ads-assets.pages.dev/libs/jsonpath', 'libs/jsonpath'],\n    marionette: ['https://cdn.jsdelivr.net/npm/backbone.marionette@2.4.5/lib/backbone.marionette.min', 'https://unpkg.com/backbone.marionette@2.4.5/lib/backbone.marionette.min', 'https://ads-assets.pages.dev/libs/backbone.marionette', 'libs/backbone.marionette'],\n    mathjax: ['https://cdn.jsdelivr.net/npm/mathjax@2.7.4/MathJax.js?config=TeX-AMS_HTML&amp;delayStartupUntil=configured', 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_HTML&amp;delayStartupUntil=configured', 'https://ads-assets.pages.dev/libs/mathjax/mathjax', 'libs/mathjax/mathjax'],\n    moment: ['https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment.min', 'https://unpkg.com/moment@2.22.2/min/moment.min', 'https://ads-assets.pages.dev/libs/moment', 'libs/moment'],\n    'persist-js': ['https://cdn.jsdelivr.net/npm/persist-js@0.3.1/persist-min', 'https://unpkg.com/persist-js@0.3.1/persist-min', 'https://ads-assets.pages.dev/libs/persist-js', 'libs/persist-js'],\n    react: ['https://cdn.jsdelivr.net/npm/react@16/umd/react.development', 'https://unpkg.com/react@16/umd/react.development', 'https://ads-assets.pages.dev/libs/react', 'libs/react'],\n    'react-bootstrap': ['https://cdn.jsdelivr.net/npm/react-bootstrap@0.33.0/dist/react-bootstrap.min', 'https://unpkg.com/react-bootstrap@0.33.0/dist/react-bootstrap.min', 'https://ads-assets.pages.dev/libs/react-bootstrap', 'libs/react-bootstrap'],\n    'react-dom': ['https://cdn.jsdelivr.net/npm/react-dom@17.0.2/umd/react-dom.production.min', 'https://unpkg.com/react-dom@17.0.2/umd/react-dom.production.min', 'https://ads-assets.pages.dev/libs/react-dom', 'libs/react-dom'],\n    'prop-types': ['https://cdn.jsdelivr.net/npm/prop-types@15.6/prop-types.min', 'https://unpkg.com/prop-types@15.6/prop-types.min', 'https://ads-assets.pages.dev/libs/prop-types', 'libs/prop-types'],\n    'react-redux': ['https://cdn.jsdelivr.net/npm/react-redux@7.2.4/dist/react-redux.min', 'https://unpkg.com/react-redux@7.2.4/dist/react-redux.min', 'https://ads-assets.pages.dev/libs/react-redux', 'libs/react-redux'],\n    'react-transition-group': ['https://cdn.jsdelivr.net/npm/react-transition-group@2.4.0/dist/react-transition-group.min', 'https://unpkg.com/react-transition-group@2.4.0/dist/react-transition-group.min', 'https://ads-assets.pages.dev/libs/react-transition-group', 'libs/react-transition-group'],\n    redux: ['https://cdn.jsdelivr.net/npm/redux@4.0.5/dist/redux.min', 'https://unpkg.com/redux@4.0.5/dist/redux.min', 'https://ads-assets.pages.dev/libs/redux', 'libs/redux'],\n    'redux-thunk': ['https://cdn.jsdelivr.net/npm/redux-thunk@2.3.0/dist/redux-thunk.min', 'https://unpkg.com/redux-thunk@2.3.0/dist/redux-thunk.min', 'https://ads-assets.pages.dev/libs/redux-thunk', 'libs/redux-thunk'],\n    select2: ['https://cdn.jsdelivr.net/npm/select2@4.0.3/dist/js/select2.min', 'https://unpkg.com/select2@4.0.3/dist/js/select2.min', 'https://ads-assets.pages.dev/libs/select2/select2', 'libs/select2/select2'],\n    'react-aria-menubutton': ['https://cdn.jsdelivr.net/npm/react-aria-menubutton@7.0.3/umd/ReactAriaMenuButton', 'https://unpkg.com/react-aria-menubutton@7.0.3/umd/ReactAriaMenuButton', 'https://ads-assets.pages.dev/libs/react-aria-menubutton', 'libs/react-aria-menubutton'],\n    'react-hook-form': ['https://cdn.jsdelivr.net/npm/react-hook-form@6.11.0/dist/index.umd.production.min', 'https://unpkg.com/react-hook-form@6.11.0/dist/index.umd.production.min', 'https://ads-assets.pages.dev/libs/react-hook-form', 'libs/react-hook-form'],\n    'react-is': ['https://cdn.jsdelivr.net/npm/react-is@17.0.2/umd/react-is.production.min', 'https://unpkg.com/react-is@17.0.2/umd/react-is.production.min', 'https://ads-assets.pages.dev/libs/react-is', 'libs/react-is'],\n    'react-data-table-component': ['https://cdn.jsdelivr.net/npm/react-data-table-component@6.11.7/dist/react-data-table-component.umd', 'https://unpkg.com/react-data-table-component@6.11.7/dist/react-data-table-component.umd', 'https://ads-assets.pages.dev/libs/react-data-table-component', 'libs/react-data-table-component'],\n    'react-window': ['https://cdn.jsdelivr.net/npm/react-window@1.8.6/dist/index-prod.umd', 'https://unpkg.com/react-window@1.8.6/dist/index-prod.umd', 'https://ads-assets.pages.dev/libs/react-window', 'libs/react-window'],\n    'react-async': ['https://cdn.jsdelivr.net/npm/react-async@10.0.1/dist-umd/index', 'https://unpkg.com/react-async@10.0.1/dist-umd/index', 'https://ads-assets.pages.dev/libs/react-async', 'libs/react-async'],\n    'regenerator-runtime': ['https://cdn.jsdelivr.net/npm/regenerator-runtime@0.13.9/runtime', 'https://unpkg.com/regenerator-runtime@0.13.9/runtime', 'https://ads-assets.pages.dev/libs/regenerator-runtime', 'libs/regenerator-runtime'],\n    diff: ['https://cdn.jsdelivr.net/npm/diff@4.0.2/dist/diff.min', 'https://unpkg.com/diff@4.0.2/dist/diff.min', 'https://ads-assets.pages.dev/libs/diff', 'libs/diff'],\n    'styled-components': ['https://cdn.jsdelivr.net/npm/styled-components@5.1.0/dist/styled-components.min', 'https://unpkg.com/styled-components@5.1.0/dist/styled-components.min', 'https://ads-assets.pages.dev/libs/styled-components', 'libs/styled-components'],\n    '@hookform/resolvers': ['https://cdn.jsdelivr.net/npm/@hookform/resolvers@0.1.0/dist/index.umd.production.min', 'https://unpkg.com/@hookform/resolvers@0.1.0/dist/index.umd.production.min', 'https://ads-assets.pages.dev/libs/hookform', 'libs/hookform'],\n    // Google analytics loaded locally only\n    'google-analytics': [// to activate local tunnel (for us to collect all analytics data)\n    // uncomment this; k12 should have ingress-nginx-proxy image deployed\n    // that can proxy requests to /analytics\n    // '/analytics/analytics'\n    'https://ads-assets.pages.dev/libs/g', 'libs/g', 'data:application/javascript,'],\n    // require special handling, fetched via `grunt curl` task\n    yup: ['https://ads-assets.pages.dev/libs/yup', 'libs/yup'],\n    cache: ['https://ads-assets.pages.dev/libs/cache', 'libs/cache'],\n    polyfill: ['https://ads-assets.pages.dev/libs/polyfill', 'libs/polyfill'],\n    'react-flexview': ['https://ads-assets.pages.dev/libs/react-flexview', 'libs/react-flexview'],\n    'array-flat-polyfill': ['https://ads-assets.pages.dev/libs/array-flat-polyfill', 'libs/array-flat-polyfill'],\n    // *******************************\n    'config/common.config': ['https://ads-assets.pages.dev/config/common.config', '/config/common.config'],\n    'config/discovery.config': ['https://ads-assets.pages.dev/config/discovery.config', '/config/discovery.config'],\n    'config/discovery.vars': ['https://ads-assets.pages.dev/config/discovery.vars', '/config/discovery.vars'],\n    'config/init': ['https://ads-assets.pages.dev/config/init', '/config/init'],\n    'config/utils': ['https://ads-assets.pages.dev/config/utils', '/config/utils'],\n    'js/apps/bumblebox/bootstrap': ['https://ads-assets.pages.dev/js/apps/bumblebox/bootstrap', '/js/apps/bumblebox/bootstrap'],\n    'js/apps/bumblebox/main': ['https://ads-assets.pages.dev/js/apps/bumblebox/main', '/js/apps/bumblebox/main'],\n    'js/apps/bumblebox/navigator': ['https://ads-assets.pages.dev/js/apps/bumblebox/navigator', '/js/apps/bumblebox/navigator'],\n    'js/apps/bumblebox/page_manager': ['https://ads-assets.pages.dev/js/apps/bumblebox/page_manager', '/js/apps/bumblebox/page_manager'],\n    'js/apps/bumblebox/router': ['https://ads-assets.pages.dev/js/apps/bumblebox/router', '/js/apps/bumblebox/router'],\n    'js/apps/discovery/main': ['https://ads-assets.pages.dev/js/apps/discovery/main', '/js/apps/discovery/main'],\n    'js/apps/discovery/navigator': ['https://ads-assets.pages.dev/js/apps/discovery/navigator', '/js/apps/discovery/navigator'],\n    'js/apps/discovery/router': ['https://ads-assets.pages.dev/js/apps/discovery/router', '/js/apps/discovery/router'],\n    'js/bugutils/diagnostics': ['https://ads-assets.pages.dev/js/bugutils/diagnostics', '/js/bugutils/diagnostics'],\n    'js/bugutils/minimal_pubsub': ['https://ads-assets.pages.dev/js/bugutils/minimal_pubsub', '/js/bugutils/minimal_pubsub'],\n    'js/components/alerts': ['https://ads-assets.pages.dev/js/components/alerts', '/js/components/alerts'],\n    'js/components/alerts_mediator': ['https://ads-assets.pages.dev/js/components/alerts_mediator', '/js/components/alerts_mediator'],\n    'js/components/analytics': ['https://ads-assets.pages.dev/js/components/analytics', '/js/components/analytics'],\n    'js/components/api_feedback': ['https://ads-assets.pages.dev/js/components/api_feedback', '/js/components/api_feedback'],\n    'js/components/api_query': ['https://ads-assets.pages.dev/js/components/api_query', '/js/components/api_query'],\n    'js/components/api_query_updater': ['https://ads-assets.pages.dev/js/components/api_query_updater', '/js/components/api_query_updater'],\n    'js/components/api_request': ['https://ads-assets.pages.dev/js/components/api_request', '/js/components/api_request'],\n    'js/components/api_request_queue': ['https://ads-assets.pages.dev/js/components/api_request_queue', '/js/components/api_request_queue'],\n    'js/components/api_response': ['https://ads-assets.pages.dev/js/components/api_response', '/js/components/api_response'],\n    'js/components/api_targets': ['https://ads-assets.pages.dev/js/components/api_targets', '/js/components/api_targets'],\n    'js/components/app_storage': ['https://ads-assets.pages.dev/js/components/app_storage', '/js/components/app_storage'],\n    'js/components/application': ['https://ads-assets.pages.dev/js/components/application', '/js/components/application'],\n    'js/components/beehive': ['https://ads-assets.pages.dev/js/components/beehive', '/js/components/beehive'],\n    'js/components/csrf_manager': ['https://ads-assets.pages.dev/js/components/csrf_manager', '/js/components/csrf_manager'],\n    'js/components/default_request': ['https://ads-assets.pages.dev/js/components/default_request', '/js/components/default_request'],\n    'js/components/doc_stash_controller': ['https://ads-assets.pages.dev/js/components/doc_stash_controller', '/js/components/doc_stash_controller'],\n    'js/components/experiments': ['https://ads-assets.pages.dev/js/components/experiments', '/js/components/experiments'],\n    'js/components/facade': ['https://ads-assets.pages.dev/js/components/facade', '/js/components/facade'],\n    'js/components/feedback_mediator': ['https://ads-assets.pages.dev/js/components/feedback_mediator', '/js/components/feedback_mediator'],\n    'js/components/generic_module': ['https://ads-assets.pages.dev/js/components/generic_module', '/js/components/generic_module'],\n    'js/components/history_manager': ['https://ads-assets.pages.dev/js/components/history_manager', '/js/components/history_manager'],\n    'js/components/hotkeys_controller': ['https://ads-assets.pages.dev/js/components/hotkeys_controller', '/js/components/hotkeys_controller'],\n    'js/components/json_response': ['https://ads-assets.pages.dev/js/components/json_response', '/js/components/json_response'],\n    'js/components/library_controller': ['https://ads-assets.pages.dev/js/components/library_controller', '/js/components/library_controller'],\n    'js/components/multi_params': ['https://ads-assets.pages.dev/js/components/multi_params', '/js/components/multi_params'],\n    'js/components/navigator': ['https://ads-assets.pages.dev/js/components/navigator', '/js/components/navigator'],\n    'js/components/paginator': ['https://ads-assets.pages.dev/js/components/paginator', '/js/components/paginator'],\n    'js/components/persistent_storage': ['https://ads-assets.pages.dev/js/components/persistent_storage', '/js/components/persistent_storage'],\n    'js/components/pubsub_events': ['https://ads-assets.pages.dev/js/components/pubsub_events', '/js/components/pubsub_events'],\n    'js/components/pubsub_key': ['https://ads-assets.pages.dev/js/components/pubsub_key', '/js/components/pubsub_key'],\n    'js/components/query_builder/plugin': ['https://ads-assets.pages.dev/js/components/query_builder/plugin', '/js/components/query_builder/plugin'],\n    'js/components/query_builder/rules_translator': ['https://ads-assets.pages.dev/js/components/query_builder/rules_translator', '/js/components/query_builder/rules_translator'],\n    'js/components/query_mediator': ['https://ads-assets.pages.dev/js/components/query_mediator', '/js/components/query_mediator'],\n    'js/components/query_validator': ['https://ads-assets.pages.dev/js/components/query_validator', '/js/components/query_validator'],\n    'js/components/second_order_controller': ['https://ads-assets.pages.dev/js/components/second_order_controller', '/js/components/second_order_controller'],\n    'js/components/services_container': ['https://ads-assets.pages.dev/js/components/services_container', '/js/components/services_container'],\n    'js/components/session': ['https://ads-assets.pages.dev/js/components/session', '/js/components/session'],\n    'js/components/solr_params': ['https://ads-assets.pages.dev/js/components/solr_params', '/js/components/solr_params'],\n    'js/components/solr_response': ['https://ads-assets.pages.dev/js/components/solr_response', '/js/components/solr_response'],\n    'js/components/transition': ['https://ads-assets.pages.dev/js/components/transition', '/js/components/transition'],\n    'js/components/transition_catalog': ['https://ads-assets.pages.dev/js/components/transition_catalog', '/js/components/transition_catalog'],\n    'js/components/user': ['https://ads-assets.pages.dev/js/components/user', '/js/components/user'],\n    'js/dark-mode-switch': ['https://ads-assets.pages.dev/js/dark-mode-switch', '/js/dark-mode-switch'],\n    'js/mixins/add_secondary_sort': ['https://ads-assets.pages.dev/js/mixins/add_secondary_sort', '/js/mixins/add_secondary_sort'],\n    'js/mixins/add_stable_index_to_collection': ['https://ads-assets.pages.dev/js/mixins/add_stable_index_to_collection', '/js/mixins/add_stable_index_to_collection'],\n    'js/mixins/api_access': ['https://ads-assets.pages.dev/js/mixins/api_access', '/js/mixins/api_access'],\n    'js/mixins/dependon': ['https://ads-assets.pages.dev/js/mixins/dependon', '/js/mixins/dependon'],\n    'js/mixins/discovery_bootstrap': ['https://ads-assets.pages.dev/js/mixins/discovery_bootstrap', '/js/mixins/discovery_bootstrap'],\n    'js/mixins/expose_metadata': ['https://ads-assets.pages.dev/js/mixins/expose_metadata', '/js/mixins/expose_metadata'],\n    'js/mixins/form_view_functions': ['https://ads-assets.pages.dev/js/mixins/form_view_functions', '/js/mixins/form_view_functions'],\n    'js/mixins/formatter': ['https://ads-assets.pages.dev/js/mixins/formatter', '/js/mixins/formatter'],\n    'js/mixins/hardened': ['https://ads-assets.pages.dev/js/mixins/hardened', '/js/mixins/hardened'],\n    'js/mixins/link_generator_mixin': ['https://ads-assets.pages.dev/js/mixins/link_generator_mixin', '/js/mixins/link_generator_mixin'],\n    'js/mixins/openurl_generator': ['https://ads-assets.pages.dev/js/mixins/openurl_generator', '/js/mixins/openurl_generator'],\n    'js/mixins/papers_utils': ['https://ads-assets.pages.dev/js/mixins/papers_utils', '/js/mixins/papers_utils'],\n    'js/mixins/side_bar_manager': ['https://ads-assets.pages.dev/js/mixins/side_bar_manager', '/js/mixins/side_bar_manager'],\n    'js/mixins/user_change_rows': ['https://ads-assets.pages.dev/js/mixins/user_change_rows', '/js/mixins/user_change_rows'],\n    'js/mixins/widget_mixin_method': ['https://ads-assets.pages.dev/js/mixins/widget_mixin_method', '/js/mixins/widget_mixin_method'],\n    'js/mixins/widget_pagination': ['https://ads-assets.pages.dev/js/mixins/widget_pagination', '/js/mixins/widget_pagination'],\n    'js/mixins/widget_state_handling': ['https://ads-assets.pages.dev/js/mixins/widget_state_handling', '/js/mixins/widget_state_handling'],\n    'js/mixins/widget_state_manager': ['https://ads-assets.pages.dev/js/mixins/widget_state_manager', '/js/mixins/widget_state_manager'],\n    'js/mixins/widget_utility': ['https://ads-assets.pages.dev/js/mixins/widget_utility', '/js/mixins/widget_utility'],\n    'js/modules/hello': ['https://ads-assets.pages.dev/js/modules/hello', '/js/modules/hello'],\n    'js/modules/orcid/bio': ['https://ads-assets.pages.dev/js/modules/orcid/bio', '/js/modules/orcid/bio'],\n    'js/modules/orcid/extension': ['https://ads-assets.pages.dev/js/modules/orcid/extension', '/js/modules/orcid/extension'],\n    'js/modules/orcid/item_view_extension': ['https://ads-assets.pages.dev/js/modules/orcid/item_view_extension', '/js/modules/orcid/item_view_extension'],\n    'js/modules/orcid/module': ['https://ads-assets.pages.dev/js/modules/orcid/module', '/js/modules/orcid/module'],\n    'js/modules/orcid/orcid_api': ['https://ads-assets.pages.dev/js/modules/orcid/orcid_api', '/js/modules/orcid/orcid_api'],\n    'js/modules/orcid/profile': ['https://ads-assets.pages.dev/js/modules/orcid/profile', '/js/modules/orcid/profile'],\n    'js/modules/orcid/widget/widget': ['https://ads-assets.pages.dev/js/modules/orcid/widget/widget', '/js/modules/orcid/widget/widget'],\n    'js/modules/orcid/work': ['https://ads-assets.pages.dev/js/modules/orcid/work', '/js/modules/orcid/work'],\n    'js/page_managers/controller': ['https://ads-assets.pages.dev/js/page_managers/controller', '/js/page_managers/controller'],\n    'js/page_managers/master': ['https://ads-assets.pages.dev/js/page_managers/master', '/js/page_managers/master'],\n    'js/page_managers/one_column_view': ['https://ads-assets.pages.dev/js/page_managers/one_column_view', '/js/page_managers/one_column_view'],\n    'js/page_managers/three_column_view': ['https://ads-assets.pages.dev/js/page_managers/three_column_view', '/js/page_managers/three_column_view'],\n    'js/page_managers/toc_controller': ['https://ads-assets.pages.dev/js/page_managers/toc_controller', '/js/page_managers/toc_controller'],\n    'js/page_managers/toc_widget': ['https://ads-assets.pages.dev/js/page_managers/toc_widget', '/js/page_managers/toc_widget'],\n    'js/page_managers/view_mixin': ['https://ads-assets.pages.dev/js/page_managers/view_mixin', '/js/page_managers/view_mixin'],\n    'js/plugins/cdn': ['https://ads-assets.pages.dev/js/plugins/cdn', '/js/plugins/cdn'],\n    'js/plugins/es6': ['https://ads-assets.pages.dev/js/plugins/es6', '/js/plugins/es6'],\n    'js/plugins/reactify': ['https://ads-assets.pages.dev/js/plugins/reactify', '/js/plugins/reactify'],\n    'js/react/BumblebeeWidget': ['https://ads-assets.pages.dev/js/react/BumblebeeWidget', '/js/react/BumblebeeWidget'],\n    'js/react/FeedbackForms/actions': ['https://ads-assets.pages.dev/js/react/FeedbackForms/actions', '/js/react/FeedbackForms/actions'],\n    'js/react/FeedbackForms/components/App.jsx': ['https://ads-assets.pages.dev/js/react/FeedbackForms/components/App.jsx', '/js/react/FeedbackForms/components/App.jsx'],\n    'js/react/FeedbackForms/containers/main': ['https://ads-assets.pages.dev/js/react/FeedbackForms/containers/main', '/js/react/FeedbackForms/containers/main'],\n    'js/react/FeedbackForms/index': ['https://ads-assets.pages.dev/js/react/FeedbackForms/index', '/js/react/FeedbackForms/index'],\n    'js/react/FeedbackForms/middleware': ['https://ads-assets.pages.dev/js/react/FeedbackForms/middleware', '/js/react/FeedbackForms/middleware'],\n    'js/react/FeedbackForms/models/index': ['https://ads-assets.pages.dev/js/react/FeedbackForms/models/index', '/js/react/FeedbackForms/models/index'],\n    'js/react/FeedbackForms/reducer': ['https://ads-assets.pages.dev/js/react/FeedbackForms/reducer', '/js/react/FeedbackForms/reducer'],\n    'js/react/LibraryCollaborators/actions': ['https://ads-assets.pages.dev/js/react/LibraryCollaborators/actions', '/js/react/LibraryCollaborators/actions'],\n    'js/react/LibraryCollaborators/components/AddCollaboratorModal.jsx': ['https://ads-assets.pages.dev/js/react/LibraryCollaborators/components/AddCollaboratorModal.jsx', '/js/react/LibraryCollaborators/components/AddCollaboratorModal.jsx'],\n    'js/react/LibraryCollaborators/components/Dashboard.jsx': ['https://ads-assets.pages.dev/js/react/LibraryCollaborators/components/Dashboard.jsx', '/js/react/LibraryCollaborators/components/Dashboard.jsx'],\n    'js/react/LibraryCollaborators/components/ManageButton.jsx': ['https://ads-assets.pages.dev/js/react/LibraryCollaborators/components/ManageButton.jsx', '/js/react/LibraryCollaborators/components/ManageButton.jsx'],\n    'js/react/LibraryCollaborators/components/PermissionEntry.jsx': ['https://ads-assets.pages.dev/js/react/LibraryCollaborators/components/PermissionEntry.jsx', '/js/react/LibraryCollaborators/components/PermissionEntry.jsx'],\n    'js/react/LibraryCollaborators/components/PermissionList.jsx': ['https://ads-assets.pages.dev/js/react/LibraryCollaborators/components/PermissionList.jsx', '/js/react/LibraryCollaborators/components/PermissionList.jsx'],\n    'js/react/LibraryCollaborators/constants': ['https://ads-assets.pages.dev/js/react/LibraryCollaborators/constants', '/js/react/LibraryCollaborators/constants'],\n    'js/react/LibraryCollaborators/index': ['https://ads-assets.pages.dev/js/react/LibraryCollaborators/index', '/js/react/LibraryCollaborators/index'],\n    'js/react/LibraryCollaborators/middleware': ['https://ads-assets.pages.dev/js/react/LibraryCollaborators/middleware', '/js/react/LibraryCollaborators/middleware'],\n    'js/react/LibraryCollaborators/reducer': ['https://ads-assets.pages.dev/js/react/LibraryCollaborators/reducer', '/js/react/LibraryCollaborators/reducer'],\n    'js/react/MyAdsDashboard/actions': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/actions', '/js/react/MyAdsDashboard/actions'],\n    'js/react/MyAdsDashboard/components/ActionsDropdown.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/components/ActionsDropdown.jsx', '/js/react/MyAdsDashboard/components/ActionsDropdown.jsx'],\n    'js/react/MyAdsDashboard/components/App.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/components/App.jsx', '/js/react/MyAdsDashboard/components/App.jsx'],\n    'js/react/MyAdsDashboard/components/ArxivClassList.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/components/ArxivClassList.jsx', '/js/react/MyAdsDashboard/components/ArxivClassList.jsx'],\n    'js/react/MyAdsDashboard/components/ArxivForm.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/components/ArxivForm.jsx', '/js/react/MyAdsDashboard/components/ArxivForm.jsx'],\n    'js/react/MyAdsDashboard/components/AuthorsForm.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/components/AuthorsForm.jsx', '/js/react/MyAdsDashboard/components/AuthorsForm.jsx'],\n    'js/react/MyAdsDashboard/components/CitationsEntry.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/components/CitationsEntry.jsx', '/js/react/MyAdsDashboard/components/CitationsEntry.jsx'],\n    'js/react/MyAdsDashboard/components/CitationsForm.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/components/CitationsForm.jsx', '/js/react/MyAdsDashboard/components/CitationsForm.jsx'],\n    'js/react/MyAdsDashboard/components/ClassicLoginForm.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/components/ClassicLoginForm.jsx', '/js/react/MyAdsDashboard/components/ClassicLoginForm.jsx'],\n    'js/react/MyAdsDashboard/components/Dashboard.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/components/Dashboard.jsx', '/js/react/MyAdsDashboard/components/Dashboard.jsx'],\n    'js/react/MyAdsDashboard/components/GeneralForm.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/components/GeneralForm.jsx', '/js/react/MyAdsDashboard/components/GeneralForm.jsx'],\n    'js/react/MyAdsDashboard/components/ImportNotificationsForm.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/components/ImportNotificationsForm.jsx', '/js/react/MyAdsDashboard/components/ImportNotificationsForm.jsx'],\n    'js/react/MyAdsDashboard/components/KeywordForm.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/components/KeywordForm.jsx', '/js/react/MyAdsDashboard/components/KeywordForm.jsx'],\n    'js/react/MyAdsDashboard/components/SelectTemplate.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/components/SelectTemplate.jsx', '/js/react/MyAdsDashboard/components/SelectTemplate.jsx'],\n    'js/react/MyAdsDashboard/components/TemplatePill.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/components/TemplatePill.jsx', '/js/react/MyAdsDashboard/components/TemplatePill.jsx'],\n    'js/react/MyAdsDashboard/constants': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/constants', '/js/react/MyAdsDashboard/constants'],\n    'js/react/MyAdsDashboard/containers/ArxivForm': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/containers/ArxivForm', '/js/react/MyAdsDashboard/containers/ArxivForm'],\n    'js/react/MyAdsDashboard/containers/AuthorsForm': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/containers/AuthorsForm', '/js/react/MyAdsDashboard/containers/AuthorsForm'],\n    'js/react/MyAdsDashboard/containers/CitationsForm': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/containers/CitationsForm', '/js/react/MyAdsDashboard/containers/CitationsForm'],\n    'js/react/MyAdsDashboard/containers/ClassicLoginForm': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/containers/ClassicLoginForm', '/js/react/MyAdsDashboard/containers/ClassicLoginForm'],\n    'js/react/MyAdsDashboard/containers/Dashboard': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/containers/Dashboard', '/js/react/MyAdsDashboard/containers/Dashboard'],\n    'js/react/MyAdsDashboard/containers/GeneralForm': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/containers/GeneralForm', '/js/react/MyAdsDashboard/containers/GeneralForm'],\n    'js/react/MyAdsDashboard/containers/ImportNotificationsForm': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/containers/ImportNotificationsForm', '/js/react/MyAdsDashboard/containers/ImportNotificationsForm'],\n    'js/react/MyAdsDashboard/containers/KeywordForm': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/containers/KeywordForm', '/js/react/MyAdsDashboard/containers/KeywordForm'],\n    'js/react/MyAdsDashboard/containers/SelectTemplate': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/containers/SelectTemplate', '/js/react/MyAdsDashboard/containers/SelectTemplate'],\n    'js/react/MyAdsDashboard/index': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/index', '/js/react/MyAdsDashboard/index'],\n    'js/react/MyAdsDashboard/middleware': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/middleware', '/js/react/MyAdsDashboard/middleware'],\n    'js/react/MyAdsDashboard/models/arxivClasses': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/models/arxivClasses', '/js/react/MyAdsDashboard/models/arxivClasses'],\n    'js/react/MyAdsDashboard/reducer': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/reducer', '/js/react/MyAdsDashboard/reducer'],\n    'js/react/MyAdsDashboard/typedefs': ['https://ads-assets.pages.dev/js/react/MyAdsDashboard/typedefs', '/js/react/MyAdsDashboard/typedefs'],\n    'js/react/MyAdsFreeform/actions': ['https://ads-assets.pages.dev/js/react/MyAdsFreeform/actions', '/js/react/MyAdsFreeform/actions'],\n    'js/react/MyAdsFreeform/components/App.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsFreeform/components/App.jsx', '/js/react/MyAdsFreeform/components/App.jsx'],\n    'js/react/MyAdsFreeform/components/CollapsePanel.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsFreeform/components/CollapsePanel.jsx', '/js/react/MyAdsFreeform/components/CollapsePanel.jsx'],\n    'js/react/MyAdsFreeform/components/SaveQueryForm.jsx': ['https://ads-assets.pages.dev/js/react/MyAdsFreeform/components/SaveQueryForm.jsx', '/js/react/MyAdsFreeform/components/SaveQueryForm.jsx'],\n    'js/react/MyAdsFreeform/constants': ['https://ads-assets.pages.dev/js/react/MyAdsFreeform/constants', '/js/react/MyAdsFreeform/constants'],\n    'js/react/MyAdsFreeform/containers/SaveQueryForm': ['https://ads-assets.pages.dev/js/react/MyAdsFreeform/containers/SaveQueryForm', '/js/react/MyAdsFreeform/containers/SaveQueryForm'],\n    'js/react/MyAdsFreeform/index': ['https://ads-assets.pages.dev/js/react/MyAdsFreeform/index', '/js/react/MyAdsFreeform/index'],\n    'js/react/MyAdsFreeform/middleware': ['https://ads-assets.pages.dev/js/react/MyAdsFreeform/middleware', '/js/react/MyAdsFreeform/middleware'],\n    'js/react/MyAdsFreeform/reducer': ['https://ads-assets.pages.dev/js/react/MyAdsFreeform/reducer', '/js/react/MyAdsFreeform/reducer'],\n    'js/react/PageManager': ['https://ads-assets.pages.dev/js/react/PageManager', '/js/react/PageManager'],\n    'js/react/Recommender/actions': ['https://ads-assets.pages.dev/js/react/Recommender/actions', '/js/react/Recommender/actions'],\n    'js/react/Recommender/components/App.jsx': ['https://ads-assets.pages.dev/js/react/Recommender/components/App.jsx', '/js/react/Recommender/components/App.jsx'],\n    'js/react/Recommender/components/RecommendedList.jsx': ['https://ads-assets.pages.dev/js/react/Recommender/components/RecommendedList.jsx', '/js/react/Recommender/components/RecommendedList.jsx'],\n    'js/react/Recommender/components/SearchExamples.jsx': ['https://ads-assets.pages.dev/js/react/Recommender/components/SearchExamples.jsx', '/js/react/Recommender/components/SearchExamples.jsx'],\n    'js/react/Recommender/containers/main': ['https://ads-assets.pages.dev/js/react/Recommender/containers/main', '/js/react/Recommender/containers/main'],\n    'js/react/Recommender/index': ['https://ads-assets.pages.dev/js/react/Recommender/index', '/js/react/Recommender/index'],\n    'js/react/Recommender/middleware': ['https://ads-assets.pages.dev/js/react/Recommender/middleware', '/js/react/Recommender/middleware'],\n    'js/react/Recommender/models/index': ['https://ads-assets.pages.dev/js/react/Recommender/models/index', '/js/react/Recommender/models/index'],\n    'js/react/Recommender/models/searchExamples': ['https://ads-assets.pages.dev/js/react/Recommender/models/searchExamples', '/js/react/Recommender/models/searchExamples'],\n    'js/react/Recommender/reducer': ['https://ads-assets.pages.dev/js/react/Recommender/reducer', '/js/react/Recommender/reducer'],\n    'js/react/WithBackboneView': ['https://ads-assets.pages.dev/js/react/WithBackboneView', '/js/react/WithBackboneView'],\n    'js/react/configureStore': ['https://ads-assets.pages.dev/js/react/configureStore', '/js/react/configureStore'],\n    'js/react/shared/components/ApiMessage.jsx': ['https://ads-assets.pages.dev/js/react/shared/components/ApiMessage.jsx', '/js/react/shared/components/ApiMessage.jsx'],\n    'js/react/shared/helpers': ['https://ads-assets.pages.dev/js/react/shared/helpers', '/js/react/shared/helpers'],\n    'js/react/shared/middleware/api': ['https://ads-assets.pages.dev/js/react/shared/middleware/api', '/js/react/shared/middleware/api'],\n    'js/react/shared/middleware/index': ['https://ads-assets.pages.dev/js/react/shared/middleware/index', '/js/react/shared/middleware/index'],\n    'js/react/shared/middleware/main': ['https://ads-assets.pages.dev/js/react/shared/middleware/main', '/js/react/shared/middleware/main'],\n    'js/services/api': ['https://ads-assets.pages.dev/js/services/api', '/js/services/api'],\n    'js/services/default_pubsub': ['https://ads-assets.pages.dev/js/services/default_pubsub', '/js/services/default_pubsub'],\n    'js/services/pubsub': ['https://ads-assets.pages.dev/js/services/pubsub', '/js/services/pubsub'],\n    'js/services/storage': ['https://ads-assets.pages.dev/js/services/storage', '/js/services/storage'],\n    'js/utils': ['https://ads-assets.pages.dev/js/utils', '/js/utils'],\n    'js/widgets/abstract/widget': ['https://ads-assets.pages.dev/js/widgets/abstract/widget', '/js/widgets/abstract/widget'],\n    'js/widgets/alerts/modal_view': ['https://ads-assets.pages.dev/js/widgets/alerts/modal_view', '/js/widgets/alerts/modal_view'],\n    'js/widgets/alerts/page_top_alert': ['https://ads-assets.pages.dev/js/widgets/alerts/page_top_alert', '/js/widgets/alerts/page_top_alert'],\n    'js/widgets/alerts/widget': ['https://ads-assets.pages.dev/js/widgets/alerts/widget', '/js/widgets/alerts/widget'],\n    'js/widgets/api_query/widget': ['https://ads-assets.pages.dev/js/widgets/api_query/widget', '/js/widgets/api_query/widget'],\n    'js/widgets/api_request/widget': ['https://ads-assets.pages.dev/js/widgets/api_request/widget', '/js/widgets/api_request/widget'],\n    'js/widgets/api_response/widget': ['https://ads-assets.pages.dev/js/widgets/api_response/widget', '/js/widgets/api_response/widget'],\n    'js/widgets/associated/components/app.jsx': ['https://ads-assets.pages.dev/js/widgets/associated/components/app.jsx', '/js/widgets/associated/components/app.jsx'],\n    'js/widgets/associated/containers/app': ['https://ads-assets.pages.dev/js/widgets/associated/containers/app', '/js/widgets/associated/containers/app'],\n    'js/widgets/associated/redux/configure-store': ['https://ads-assets.pages.dev/js/widgets/associated/redux/configure-store', '/js/widgets/associated/redux/configure-store'],\n    'js/widgets/associated/redux/middleware/api': ['https://ads-assets.pages.dev/js/widgets/associated/redux/middleware/api', '/js/widgets/associated/redux/middleware/api'],\n    'js/widgets/associated/redux/middleware/ui': ['https://ads-assets.pages.dev/js/widgets/associated/redux/middleware/ui', '/js/widgets/associated/redux/middleware/ui'],\n    'js/widgets/associated/redux/modules/api': ['https://ads-assets.pages.dev/js/widgets/associated/redux/modules/api', '/js/widgets/associated/redux/modules/api'],\n    'js/widgets/associated/redux/modules/ui': ['https://ads-assets.pages.dev/js/widgets/associated/redux/modules/ui', '/js/widgets/associated/redux/modules/ui'],\n    'js/widgets/associated/widget.jsx': ['https://ads-assets.pages.dev/js/widgets/associated/widget.jsx', '/js/widgets/associated/widget.jsx'],\n    'js/widgets/authentication/widget': ['https://ads-assets.pages.dev/js/widgets/authentication/widget', '/js/widgets/authentication/widget'],\n    'js/widgets/author_affiliation_tool/actions/index': ['https://ads-assets.pages.dev/js/widgets/author_affiliation_tool/actions/index', '/js/widgets/author_affiliation_tool/actions/index'],\n    'js/widgets/author_affiliation_tool/components/AffiliationRow.jsx': ['https://ads-assets.pages.dev/js/widgets/author_affiliation_tool/components/AffiliationRow.jsx', '/js/widgets/author_affiliation_tool/components/AffiliationRow.jsx'],\n    'js/widgets/author_affiliation_tool/components/Closer.jsx': ['https://ads-assets.pages.dev/js/widgets/author_affiliation_tool/components/Closer.jsx', '/js/widgets/author_affiliation_tool/components/Closer.jsx'],\n    'js/widgets/author_affiliation_tool/components/ExportFormatControl.jsx': ['https://ads-assets.pages.dev/js/widgets/author_affiliation_tool/components/ExportFormatControl.jsx', '/js/widgets/author_affiliation_tool/components/ExportFormatControl.jsx'],\n    'js/widgets/author_affiliation_tool/components/LastActiveDateRow.jsx': ['https://ads-assets.pages.dev/js/widgets/author_affiliation_tool/components/LastActiveDateRow.jsx', '/js/widgets/author_affiliation_tool/components/LastActiveDateRow.jsx'],\n    'js/widgets/author_affiliation_tool/components/Loading.jsx': ['https://ads-assets.pages.dev/js/widgets/author_affiliation_tool/components/Loading.jsx', '/js/widgets/author_affiliation_tool/components/Loading.jsx'],\n    'js/widgets/author_affiliation_tool/components/Message.jsx': ['https://ads-assets.pages.dev/js/widgets/author_affiliation_tool/components/Message.jsx', '/js/widgets/author_affiliation_tool/components/Message.jsx'],\n    'js/widgets/author_affiliation_tool/components/Row.jsx': ['https://ads-assets.pages.dev/js/widgets/author_affiliation_tool/components/Row.jsx', '/js/widgets/author_affiliation_tool/components/Row.jsx'],\n    'js/widgets/author_affiliation_tool/components/SelectionButtons.jsx': ['https://ads-assets.pages.dev/js/widgets/author_affiliation_tool/components/SelectionButtons.jsx', '/js/widgets/author_affiliation_tool/components/SelectionButtons.jsx'],\n    'js/widgets/author_affiliation_tool/constants/actionNames': ['https://ads-assets.pages.dev/js/widgets/author_affiliation_tool/constants/actionNames', '/js/widgets/author_affiliation_tool/constants/actionNames'],\n    'js/widgets/author_affiliation_tool/containers/App.jsx': ['https://ads-assets.pages.dev/js/widgets/author_affiliation_tool/containers/App.jsx', '/js/widgets/author_affiliation_tool/containers/App.jsx'],\n    'js/widgets/author_affiliation_tool/models/authorAffiliation': ['https://ads-assets.pages.dev/js/widgets/author_affiliation_tool/models/authorAffiliation', '/js/widgets/author_affiliation_tool/models/authorAffiliation'],\n    'js/widgets/author_affiliation_tool/reducers/index': ['https://ads-assets.pages.dev/js/widgets/author_affiliation_tool/reducers/index', '/js/widgets/author_affiliation_tool/reducers/index'],\n    'js/widgets/author_affiliation_tool/widget.jsx': ['https://ads-assets.pages.dev/js/widgets/author_affiliation_tool/widget.jsx', '/js/widgets/author_affiliation_tool/widget.jsx'],\n    'js/widgets/base/base_widget': ['https://ads-assets.pages.dev/js/widgets/base/base_widget', '/js/widgets/base/base_widget'],\n    'js/widgets/breadcrumb/widget': ['https://ads-assets.pages.dev/js/widgets/breadcrumb/widget', '/js/widgets/breadcrumb/widget'],\n    'js/widgets/bubble_chart/widget': ['https://ads-assets.pages.dev/js/widgets/bubble_chart/widget', '/js/widgets/bubble_chart/widget'],\n    'js/widgets/citation_helper/widget': ['https://ads-assets.pages.dev/js/widgets/citation_helper/widget', '/js/widgets/citation_helper/widget'],\n    'js/widgets/classic_form/widget': ['https://ads-assets.pages.dev/js/widgets/classic_form/widget', '/js/widgets/classic_form/widget'],\n    'js/widgets/config': ['https://ads-assets.pages.dev/js/widgets/config', '/js/widgets/config'],\n    'js/widgets/dropdown-menu/widget': ['https://ads-assets.pages.dev/js/widgets/dropdown-menu/widget', '/js/widgets/dropdown-menu/widget'],\n    'js/widgets/export/actions/index': ['https://ads-assets.pages.dev/js/widgets/export/actions/index', '/js/widgets/export/actions/index'],\n    'js/widgets/export/components/ClipboardBtn.jsx': ['https://ads-assets.pages.dev/js/widgets/export/components/ClipboardBtn.jsx', '/js/widgets/export/components/ClipboardBtn.jsx'],\n    'js/widgets/export/components/Closer.jsx': ['https://ads-assets.pages.dev/js/widgets/export/components/Closer.jsx', '/js/widgets/export/components/Closer.jsx'],\n    'js/widgets/export/components/Export.jsx': ['https://ads-assets.pages.dev/js/widgets/export/components/Export.jsx', '/js/widgets/export/components/Export.jsx'],\n    'js/widgets/export/components/Setup.jsx': ['https://ads-assets.pages.dev/js/widgets/export/components/Setup.jsx', '/js/widgets/export/components/Setup.jsx'],\n    'js/widgets/export/components/Slider.jsx': ['https://ads-assets.pages.dev/js/widgets/export/components/Slider.jsx', '/js/widgets/export/components/Slider.jsx'],\n    'js/widgets/export/containers/App.jsx': ['https://ads-assets.pages.dev/js/widgets/export/containers/App.jsx', '/js/widgets/export/containers/App.jsx'],\n    'js/widgets/export/reducers/index': ['https://ads-assets.pages.dev/js/widgets/export/reducers/index', '/js/widgets/export/reducers/index'],\n    'js/widgets/export/widget.jsx': ['https://ads-assets.pages.dev/js/widgets/export/widget.jsx', '/js/widgets/export/widget.jsx'],\n    'js/widgets/facet/actions': ['https://ads-assets.pages.dev/js/widgets/facet/actions', '/js/widgets/facet/actions'],\n    'js/widgets/facet/create_store': ['https://ads-assets.pages.dev/js/widgets/facet/create_store', '/js/widgets/facet/create_store'],\n    'js/widgets/facet/facet-container.jsx': ['https://ads-assets.pages.dev/js/widgets/facet/facet-container.jsx', '/js/widgets/facet/facet-container.jsx'],\n    'js/widgets/facet/facet-dropdown.jsx': ['https://ads-assets.pages.dev/js/widgets/facet/facet-dropdown.jsx', '/js/widgets/facet/facet-dropdown.jsx'],\n    'js/widgets/facet/factory': ['https://ads-assets.pages.dev/js/widgets/facet/factory', '/js/widgets/facet/factory'],\n    'js/widgets/facet/graph-facet/base_graph': ['https://ads-assets.pages.dev/js/widgets/facet/graph-facet/base_graph', '/js/widgets/facet/graph-facet/base_graph'],\n    'js/widgets/facet/graph-facet/h_index_graph': ['https://ads-assets.pages.dev/js/widgets/facet/graph-facet/h_index_graph', '/js/widgets/facet/graph-facet/h_index_graph'],\n    'js/widgets/facet/graph-facet/widget': ['https://ads-assets.pages.dev/js/widgets/facet/graph-facet/widget', '/js/widgets/facet/graph-facet/widget'],\n    'js/widgets/facet/graph-facet/year_graph': ['https://ads-assets.pages.dev/js/widgets/facet/graph-facet/year_graph', '/js/widgets/facet/graph-facet/year_graph'],\n    'js/widgets/facet/reducers': ['https://ads-assets.pages.dev/js/widgets/facet/reducers', '/js/widgets/facet/reducers'],\n    'js/widgets/facet/toggle_list.jsx': ['https://ads-assets.pages.dev/js/widgets/facet/toggle_list.jsx', '/js/widgets/facet/toggle_list.jsx'],\n    'js/widgets/facet/widget': ['https://ads-assets.pages.dev/js/widgets/facet/widget', '/js/widgets/facet/widget'],\n    'js/widgets/factory': ['https://ads-assets.pages.dev/js/widgets/factory', '/js/widgets/factory'],\n    'js/widgets/filter_visualizer/widget': ['https://ads-assets.pages.dev/js/widgets/filter_visualizer/widget', '/js/widgets/filter_visualizer/widget'],\n    'js/widgets/footer/widget': ['https://ads-assets.pages.dev/js/widgets/footer/widget', '/js/widgets/footer/widget'],\n    'js/widgets/graphics/widget': ['https://ads-assets.pages.dev/js/widgets/graphics/widget', '/js/widgets/graphics/widget'],\n    'js/widgets/green_button/widget': ['https://ads-assets.pages.dev/js/widgets/green_button/widget', '/js/widgets/green_button/widget'],\n    'js/widgets/hello_world/widget': ['https://ads-assets.pages.dev/js/widgets/hello_world/widget', '/js/widgets/hello_world/widget'],\n    'js/widgets/libraries_all/views/view_all_libraries': ['https://ads-assets.pages.dev/js/widgets/libraries_all/views/view_all_libraries', '/js/widgets/libraries_all/views/view_all_libraries'],\n    'js/widgets/libraries_all/widget': ['https://ads-assets.pages.dev/js/widgets/libraries_all/widget', '/js/widgets/libraries_all/widget'],\n    'js/widgets/library_actions/components/app.jsx': ['https://ads-assets.pages.dev/js/widgets/library_actions/components/app.jsx', '/js/widgets/library_actions/components/app.jsx'],\n    'js/widgets/library_actions/components/multi-control.jsx': ['https://ads-assets.pages.dev/js/widgets/library_actions/components/multi-control.jsx', '/js/widgets/library_actions/components/multi-control.jsx'],\n    'js/widgets/library_actions/components/radio-group.jsx': ['https://ads-assets.pages.dev/js/widgets/library_actions/components/radio-group.jsx', '/js/widgets/library_actions/components/radio-group.jsx'],\n    'js/widgets/library_actions/components/select.jsx': ['https://ads-assets.pages.dev/js/widgets/library_actions/components/select.jsx', '/js/widgets/library_actions/components/select.jsx'],\n    'js/widgets/library_actions/widget.jsx': ['https://ads-assets.pages.dev/js/widgets/library_actions/widget.jsx', '/js/widgets/library_actions/widget.jsx'],\n    'js/widgets/library_import/widget': ['https://ads-assets.pages.dev/js/widgets/library_import/widget', '/js/widgets/library_import/widget'],\n    'js/widgets/library_individual/views/library_header': ['https://ads-assets.pages.dev/js/widgets/library_individual/views/library_header', '/js/widgets/library_individual/views/library_header'],\n    'js/widgets/library_individual/views/manage_permissions': ['https://ads-assets.pages.dev/js/widgets/library_individual/views/manage_permissions', '/js/widgets/library_individual/views/manage_permissions'],\n    'js/widgets/library_individual/widget': ['https://ads-assets.pages.dev/js/widgets/library_individual/widget', '/js/widgets/library_individual/widget'],\n    'js/widgets/library_list/widget': ['https://ads-assets.pages.dev/js/widgets/library_list/widget', '/js/widgets/library_list/widget'],\n    'js/widgets/list_of_things/details_widget': ['https://ads-assets.pages.dev/js/widgets/list_of_things/details_widget', '/js/widgets/list_of_things/details_widget'],\n    'js/widgets/list_of_things/infinite_view': ['https://ads-assets.pages.dev/js/widgets/list_of_things/infinite_view', '/js/widgets/list_of_things/infinite_view'],\n    'js/widgets/list_of_things/item_view': ['https://ads-assets.pages.dev/js/widgets/list_of_things/item_view', '/js/widgets/list_of_things/item_view'],\n    'js/widgets/list_of_things/model': ['https://ads-assets.pages.dev/js/widgets/list_of_things/model', '/js/widgets/list_of_things/model'],\n    'js/widgets/list_of_things/paginated_view': ['https://ads-assets.pages.dev/js/widgets/list_of_things/paginated_view', '/js/widgets/list_of_things/paginated_view'],\n    'js/widgets/list_of_things/widget': ['https://ads-assets.pages.dev/js/widgets/list_of_things/widget', '/js/widgets/list_of_things/widget'],\n    'js/widgets/loading/widget': ['https://ads-assets.pages.dev/js/widgets/loading/widget', '/js/widgets/loading/widget'],\n    'js/widgets/meta_tags/widget': ['https://ads-assets.pages.dev/js/widgets/meta_tags/widget', '/js/widgets/meta_tags/widget'],\n    'js/widgets/metrics/d3-tip': ['https://ads-assets.pages.dev/js/widgets/metrics/d3-tip', '/js/widgets/metrics/d3-tip'],\n    'js/widgets/metrics/extractor_functions': ['https://ads-assets.pages.dev/js/widgets/metrics/extractor_functions', '/js/widgets/metrics/extractor_functions'],\n    'js/widgets/metrics/widget': ['https://ads-assets.pages.dev/js/widgets/metrics/widget', '/js/widgets/metrics/widget'],\n    'js/widgets/navbar/widget': ['https://ads-assets.pages.dev/js/widgets/navbar/widget', '/js/widgets/navbar/widget'],\n    'js/widgets/network_vis/network_widget': ['https://ads-assets.pages.dev/js/widgets/network_vis/network_widget', '/js/widgets/network_vis/network_widget'],\n    'js/widgets/orcid-selector/components/orcid-selector-app.jsx': ['https://ads-assets.pages.dev/js/widgets/orcid-selector/components/orcid-selector-app.jsx', '/js/widgets/orcid-selector/components/orcid-selector-app.jsx'],\n    'js/widgets/orcid-selector/containers/orcid-selector-container': ['https://ads-assets.pages.dev/js/widgets/orcid-selector/containers/orcid-selector-container', '/js/widgets/orcid-selector/containers/orcid-selector-container'],\n    'js/widgets/orcid-selector/redux/configure-store': ['https://ads-assets.pages.dev/js/widgets/orcid-selector/redux/configure-store', '/js/widgets/orcid-selector/redux/configure-store'],\n    'js/widgets/orcid-selector/redux/modules/orcid-selector-app': ['https://ads-assets.pages.dev/js/widgets/orcid-selector/redux/modules/orcid-selector-app', '/js/widgets/orcid-selector/redux/modules/orcid-selector-app'],\n    'js/widgets/orcid-selector/widget.jsx': ['https://ads-assets.pages.dev/js/widgets/orcid-selector/widget.jsx', '/js/widgets/orcid-selector/widget.jsx'],\n    'js/widgets/paper_search_form/topterms': ['https://ads-assets.pages.dev/js/widgets/paper_search_form/topterms', '/js/widgets/paper_search_form/topterms'],\n    'js/widgets/paper_search_form/widget': ['https://ads-assets.pages.dev/js/widgets/paper_search_form/widget', '/js/widgets/paper_search_form/widget'],\n    'js/widgets/preferences/views/application': ['https://ads-assets.pages.dev/js/widgets/preferences/views/application', '/js/widgets/preferences/views/application'],\n    'js/widgets/preferences/views/export': ['https://ads-assets.pages.dev/js/widgets/preferences/views/export', '/js/widgets/preferences/views/export'],\n    'js/widgets/preferences/views/openurl': ['https://ads-assets.pages.dev/js/widgets/preferences/views/openurl', '/js/widgets/preferences/views/openurl'],\n    'js/widgets/preferences/views/orcid': ['https://ads-assets.pages.dev/js/widgets/preferences/views/orcid', '/js/widgets/preferences/views/orcid'],\n    'js/widgets/preferences/widget': ['https://ads-assets.pages.dev/js/widgets/preferences/widget', '/js/widgets/preferences/widget'],\n    'js/widgets/query_info/query_info_widget': ['https://ads-assets.pages.dev/js/widgets/query_info/query_info_widget', '/js/widgets/query_info/query_info_widget'],\n    'js/widgets/recommender/widget': ['https://ads-assets.pages.dev/js/widgets/recommender/widget', '/js/widgets/recommender/widget'],\n    'js/widgets/resources/components/app.jsx': ['https://ads-assets.pages.dev/js/widgets/resources/components/app.jsx', '/js/widgets/resources/components/app.jsx'],\n    'js/widgets/resources/containers/app': ['https://ads-assets.pages.dev/js/widgets/resources/containers/app', '/js/widgets/resources/containers/app'],\n    'js/widgets/resources/redux/configure-store': ['https://ads-assets.pages.dev/js/widgets/resources/redux/configure-store', '/js/widgets/resources/redux/configure-store'],\n    'js/widgets/resources/redux/middleware/api': ['https://ads-assets.pages.dev/js/widgets/resources/redux/middleware/api', '/js/widgets/resources/redux/middleware/api'],\n    'js/widgets/resources/redux/middleware/ui': ['https://ads-assets.pages.dev/js/widgets/resources/redux/middleware/ui', '/js/widgets/resources/redux/middleware/ui'],\n    'js/widgets/resources/redux/modules/api': ['https://ads-assets.pages.dev/js/widgets/resources/redux/modules/api', '/js/widgets/resources/redux/modules/api'],\n    'js/widgets/resources/redux/modules/ui': ['https://ads-assets.pages.dev/js/widgets/resources/redux/modules/ui', '/js/widgets/resources/redux/modules/ui'],\n    'js/widgets/resources/widget.jsx': ['https://ads-assets.pages.dev/js/widgets/resources/widget.jsx', '/js/widgets/resources/widget.jsx'],\n    'js/widgets/results/widget': ['https://ads-assets.pages.dev/js/widgets/results/widget', '/js/widgets/results/widget'],\n    'js/widgets/search_bar/autocomplete': ['https://ads-assets.pages.dev/js/widgets/search_bar/autocomplete', '/js/widgets/search_bar/autocomplete'],\n    'js/widgets/search_bar/quick-field-desc': ['https://ads-assets.pages.dev/js/widgets/search_bar/quick-field-desc', '/js/widgets/search_bar/quick-field-desc'],\n    'js/widgets/search_bar/search_bar_widget': ['https://ads-assets.pages.dev/js/widgets/search_bar/search_bar_widget', '/js/widgets/search_bar/search_bar_widget'],\n    'js/widgets/sort/components/sort-app.jsx': ['https://ads-assets.pages.dev/js/widgets/sort/components/sort-app.jsx', '/js/widgets/sort/components/sort-app.jsx'],\n    'js/widgets/sort/containers/sort-container': ['https://ads-assets.pages.dev/js/widgets/sort/containers/sort-container', '/js/widgets/sort/containers/sort-container'],\n    'js/widgets/sort/redux/configure-store': ['https://ads-assets.pages.dev/js/widgets/sort/redux/configure-store', '/js/widgets/sort/redux/configure-store'],\n    'js/widgets/sort/redux/modules/sort-app': ['https://ads-assets.pages.dev/js/widgets/sort/redux/modules/sort-app', '/js/widgets/sort/redux/modules/sort-app'],\n    'js/widgets/sort/widget.jsx': ['https://ads-assets.pages.dev/js/widgets/sort/widget.jsx', '/js/widgets/sort/widget.jsx'],\n    'js/widgets/success/view': ['https://ads-assets.pages.dev/js/widgets/success/view', '/js/widgets/success/view'],\n    'js/widgets/tabs/tabs_widget': ['https://ads-assets.pages.dev/js/widgets/tabs/tabs_widget', '/js/widgets/tabs/tabs_widget'],\n    'js/widgets/user_navbar/widget': ['https://ads-assets.pages.dev/js/widgets/user_navbar/widget', '/js/widgets/user_navbar/widget'],\n    'js/widgets/user_settings/widget': ['https://ads-assets.pages.dev/js/widgets/user_settings/widget', '/js/widgets/user_settings/widget'],\n    'js/widgets/widget_states': ['https://ads-assets.pages.dev/js/widgets/widget_states', '/js/widgets/widget_states'],\n    'js/widgets/wordcloud/widget': ['https://ads-assets.pages.dev/js/widgets/wordcloud/widget', '/js/widgets/wordcloud/widget'],\n    'js/wraps/abstract_page_library_add/widget': ['https://ads-assets.pages.dev/js/wraps/abstract_page_library_add/widget', '/js/wraps/abstract_page_library_add/widget'],\n    'js/wraps/abstract_page_manager/abstract_page_manager': ['https://ads-assets.pages.dev/js/wraps/abstract_page_manager/abstract_page_manager', '/js/wraps/abstract_page_manager/abstract_page_manager'],\n    'js/wraps/affiliation_facet': ['https://ads-assets.pages.dev/js/wraps/affiliation_facet', '/js/wraps/affiliation_facet'],\n    'js/wraps/alerts_mediator': ['https://ads-assets.pages.dev/js/wraps/alerts_mediator', '/js/wraps/alerts_mediator'],\n    'js/wraps/authentication_page_manager': ['https://ads-assets.pages.dev/js/wraps/authentication_page_manager', '/js/wraps/authentication_page_manager'],\n    'js/wraps/author_facet': ['https://ads-assets.pages.dev/js/wraps/author_facet', '/js/wraps/author_facet'],\n    'js/wraps/author_network': ['https://ads-assets.pages.dev/js/wraps/author_network', '/js/wraps/author_network'],\n    'js/wraps/bibgroup_facet': ['https://ads-assets.pages.dev/js/wraps/bibgroup_facet', '/js/wraps/bibgroup_facet'],\n    'js/wraps/bibstem_facet': ['https://ads-assets.pages.dev/js/wraps/bibstem_facet', '/js/wraps/bibstem_facet'],\n    'js/wraps/citations': ['https://ads-assets.pages.dev/js/wraps/citations', '/js/wraps/citations'],\n    'js/wraps/coreads': ['https://ads-assets.pages.dev/js/wraps/coreads', '/js/wraps/coreads'],\n    'js/wraps/data_facet': ['https://ads-assets.pages.dev/js/wraps/data_facet', '/js/wraps/data_facet'],\n    'js/wraps/database_facet': ['https://ads-assets.pages.dev/js/wraps/database_facet', '/js/wraps/database_facet'],\n    'js/wraps/discovery_mediator': ['https://ads-assets.pages.dev/js/wraps/discovery_mediator', '/js/wraps/discovery_mediator'],\n    'js/wraps/error_page_manager/error_page_manager': ['https://ads-assets.pages.dev/js/wraps/error_page_manager/error_page_manager', '/js/wraps/error_page_manager/error_page_manager'],\n    'js/wraps/export_dropdown': ['https://ads-assets.pages.dev/js/wraps/export_dropdown', '/js/wraps/export_dropdown'],\n    'js/wraps/grants_facet': ['https://ads-assets.pages.dev/js/wraps/grants_facet', '/js/wraps/grants_facet'],\n    'js/wraps/graph_tabs': ['https://ads-assets.pages.dev/js/wraps/graph_tabs', '/js/wraps/graph_tabs'],\n    'js/wraps/home_page_manager/home_page_manager': ['https://ads-assets.pages.dev/js/wraps/home_page_manager/home_page_manager', '/js/wraps/home_page_manager/home_page_manager'],\n    'js/wraps/keyword_facet': ['https://ads-assets.pages.dev/js/wraps/keyword_facet', '/js/wraps/keyword_facet'],\n    'js/wraps/landing_page_manager/landing_page_manager': ['https://ads-assets.pages.dev/js/wraps/landing_page_manager/landing_page_manager', '/js/wraps/landing_page_manager/landing_page_manager'],\n    'js/wraps/libraries_page_manager/libraries_page_manager': ['https://ads-assets.pages.dev/js/wraps/libraries_page_manager/libraries_page_manager', '/js/wraps/libraries_page_manager/libraries_page_manager'],\n    'js/wraps/ned_object_facet': ['https://ads-assets.pages.dev/js/wraps/ned_object_facet', '/js/wraps/ned_object_facet'],\n    'js/wraps/orcid-instructions-page-manager/manager': ['https://ads-assets.pages.dev/js/wraps/orcid-instructions-page-manager/manager', '/js/wraps/orcid-instructions-page-manager/manager'],\n    'js/wraps/orcid_page_manager/orcid_page_manager': ['https://ads-assets.pages.dev/js/wraps/orcid_page_manager/orcid_page_manager', '/js/wraps/orcid_page_manager/orcid_page_manager'],\n    'js/wraps/orcid_page_manager': ['https://ads-assets.pages.dev/js/wraps/orcid_page_manager', '/js/wraps/orcid_page_manager'],\n    'js/wraps/paper_export': ['https://ads-assets.pages.dev/js/wraps/paper_export', '/js/wraps/paper_export'],\n    'js/wraps/paper_metrics': ['https://ads-assets.pages.dev/js/wraps/paper_metrics', '/js/wraps/paper_metrics'],\n    'js/wraps/paper_network': ['https://ads-assets.pages.dev/js/wraps/paper_network', '/js/wraps/paper_network'],\n    'js/wraps/public_libraries_page_manager/public_libraries_manager': ['https://ads-assets.pages.dev/js/wraps/public_libraries_page_manager/public_libraries_manager', '/js/wraps/public_libraries_page_manager/public_libraries_manager'],\n    'js/wraps/pubtype_facet': ['https://ads-assets.pages.dev/js/wraps/pubtype_facet', '/js/wraps/pubtype_facet'],\n    'js/wraps/refereed_facet': ['https://ads-assets.pages.dev/js/wraps/refereed_facet', '/js/wraps/refereed_facet'],\n    'js/wraps/references': ['https://ads-assets.pages.dev/js/wraps/references', '/js/wraps/references'],\n    'js/wraps/results_page_manager': ['https://ads-assets.pages.dev/js/wraps/results_page_manager', '/js/wraps/results_page_manager'],\n    'js/wraps/sidebar-graphics-widget': ['https://ads-assets.pages.dev/js/wraps/sidebar-graphics-widget', '/js/wraps/sidebar-graphics-widget'],\n    'js/wraps/simbad_object_facet': ['https://ads-assets.pages.dev/js/wraps/simbad_object_facet', '/js/wraps/simbad_object_facet'],\n    'js/wraps/similar': ['https://ads-assets.pages.dev/js/wraps/similar', '/js/wraps/similar'],\n    'js/wraps/table_of_contents': ['https://ads-assets.pages.dev/js/wraps/table_of_contents', '/js/wraps/table_of_contents'],\n    'js/wraps/user_settings_page_manager/user_page_manager': ['https://ads-assets.pages.dev/js/wraps/user_settings_page_manager/user_page_manager', '/js/wraps/user_settings_page_manager/user_page_manager'],\n    'js/wraps/visualization_dropdown': ['https://ads-assets.pages.dev/js/wraps/visualization_dropdown', '/js/wraps/visualization_dropdown'],\n    'js/wraps/vizier_facet': ['https://ads-assets.pages.dev/js/wraps/vizier_facet', '/js/wraps/vizier_facet']\n  },\n  hbs: {\n    templateExtension: 'html',\n    helpers: false\n  },\n  babel: {\n    presets: ['env', 'react']\n  },\n  shim: {\n    Backbone: {\n      deps: ['backbone'],\n      exports: 'Backbone'\n    },\n    'backbone.stickit': {\n      deps: ['backbone']\n    },\n    'backbone-validation': {\n      deps: ['backbone']\n    },\n    bootstrap: {\n      deps: ['jquery', 'jquery-ui']\n    },\n    backbone: {\n      deps: ['jquery', 'underscore'],\n      exports: 'Backbone'\n    },\n    marionette: {\n      deps: ['jquery', 'underscore', 'backbone'],\n      exports: 'Marionette'\n    },\n    cache: {\n      exports: 'Cache'\n    },\n    mocha: {\n      exports: 'mocha'\n    },\n    sinon: {\n      exports: 'sinon'\n    },\n    filesaver: {\n      exports: 'saveAs'\n    },\n    d3: {\n      exports: 'd3'\n    },\n    'd3-cloud': {\n      deps: ['d3']\n    },\n    'google-analytics': {\n      exports: '__ga__'\n    },\n    'jquery-ui': {\n      deps: ['jquery']\n    },\n    'jquery-querybuilder': {\n      deps: ['jquery']\n    },\n    sprintf: {\n      exports: 'sprintf'\n    },\n    'persist-js': {\n      exports: 'Persist'\n    }\n  }\n});\n\n//# sourceURL=webpack://bumblebee/./src/config/discovery.config.js?");

/***/ }),

/***/ "./src/config/discovery.vars.js":
/*!**************************************!*\
  !*** ./src/config/discovery.vars.js ***!
  \**************************************/
/***/ (function(module) {

eval("!(module.exports = {\n  clientVersion: '',\n  apiRoot: 'https://qa.adsabs.harvard.edu/v1/',\n  orcidProxy: '/oauth/',\n  bootstrapUrls: ['/accounts/bootstrap'],\n  routerConf: {\n    pushState: true,\n    root: '/'\n  },\n  debugExportBBB: true,\n  debug: false,\n  useCache: false,\n  googleTrackingCode: 'UA-XXXXXXXX-X',\n  googleTrackingOptions: 'auto',\n  orcidClientId: 'APP-P5ANJTQRRTMA6GXZ',\n  orcidLoginEndpoint: 'https://sandbox.orcid.org/oauth/authorize',\n  orcidApiEndpoint: 'https://qa.adsabs.harvard.edu/v1/orcid/',\n  recaptchaKey: '6LcpTuUnAAAAAD6YCBdr_2-0b1AH8N6nXkYEG5G5',\n  hourly: false\n});\n\n//# sourceURL=webpack://bumblebee/./src/config/discovery.vars.js?");

/***/ }),

/***/ "./src/config/webpack-entry.js":
/*!*************************************!*\
  !*** ./src/config/webpack-entry.js ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! router */ \"./src/js/apps/discovery/router.js\");\n/* harmony import */ var js_components_application__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/application */ \"./src/js/components/application.js\");\n/* harmony import */ var js_mixins_discovery_bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/mixins/discovery_bootstrap */ \"./src/js/mixins/discovery_bootstrap.js\");\n/* harmony import */ var js_mixins_api_access__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/mixins/api_access */ \"./src/js/mixins/api_access.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! analytics */ \"./src/js/components/analytics.js\");\n/* harmony import */ var config_discovery_config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! config/discovery.config */ \"./src/config/discovery.config.js\");\n/* harmony import */ var config_discovery_config__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(config_discovery_config__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var js_wraps_discovery_mediator__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/wraps/discovery_mediator */ \"./src/js/wraps/discovery_mediator.js\");\n/* harmony import */ var js_components_query_mediator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/components/query_mediator */ \"./src/js/components/query_mediator.js\");\n/* harmony import */ var js_bugutils_diagnostics__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js/bugutils/diagnostics */ \"./src/js/bugutils/diagnostics.js\");\n/* harmony import */ var js_wraps_alerts_mediator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! js/wraps/alerts_mediator */ \"./src/js/wraps/alerts_mediator.js\");\n/* harmony import */ var js_modules_orcid_module__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! js/modules/orcid/module */ \"./src/js/modules/orcid/module.js\");\n/* harmony import */ var js_components_second_order_controller__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! js/components/second_order_controller */ \"./src/js/components/second_order_controller.js\");\n/* harmony import */ var js_components_hotkeys_controller__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! js/components/hotkeys_controller */ \"./src/js/components/hotkeys_controller.js\");\n/* harmony import */ var js_components_experiments__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! js/components/experiments */ \"./src/js/components/experiments.js\");\n/* harmony import */ var js_services_api__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! js/services/api */ \"./src/js/services/api.js\");\n/* harmony import */ var js_services_pubsub__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! js/services/pubsub */ \"./src/js/services/pubsub.js\");\n/* harmony import */ var js_apps_discovery_navigator__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! js/apps/discovery/navigator */ \"./src/js/apps/discovery/navigator.js\");\n/* harmony import */ var js_services_storage__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! js/services/storage */ \"./src/js/services/storage.js\");\n/* harmony import */ var js_components_history_manager__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! js/components/history_manager */ \"./src/js/components/history_manager.js\");\n/* harmony import */ var js_components_user__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! js/components/user */ \"./src/js/components/user.js\");\n/* harmony import */ var js_components_session__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! js/components/session */ \"./src/js/components/session.js\");\n/* harmony import */ var config_discovery_vars__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! config/discovery.vars */ \"./src/config/discovery.vars.js\");\n/* harmony import */ var config_discovery_vars__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(config_discovery_vars__WEBPACK_IMPORTED_MODULE_22__);\n/* harmony import */ var js_page_managers_master__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! js/page_managers/master */ \"./src/js/page_managers/master.js\");\n/* harmony import */ var js_components_app_storage__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! js/components/app_storage */ \"./src/js/components/app_storage.js\");\n/* harmony import */ var js_components_csrf_manager__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! js/components/csrf_manager */ \"./src/js/components/csrf_manager.js\");\n/* harmony import */ var js_components_library_controller__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! js/components/library_controller */ \"./src/js/components/library_controller.js\");\n/* harmony import */ var js_components_doc_stash_controller__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! js/components/doc_stash_controller */ \"./src/js/components/doc_stash_controller.js\");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! utils */ \"./src/js/utils.js\");\n/* harmony import */ var js_widgets_facet_factory__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! js/widgets/facet/factory */ \"./src/js/widgets/facet/factory.js\");\n/* harmony import */ var js_wraps_landing_page_manager_landing_page_manager__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! js/wraps/landing_page_manager/landing_page_manager */ \"./src/js/wraps/landing_page_manager/landing_page_manager.js\");\n/* harmony import */ var js_wraps_results_page_manager__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! js/wraps/results_page_manager */ \"./src/js/wraps/results_page_manager.js\");\n/* harmony import */ var js_wraps_abstract_page_manager_abstract_page_manager__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! js/wraps/abstract_page_manager/abstract_page_manager */ \"./src/js/wraps/abstract_page_manager/abstract_page_manager.js\");\n/* harmony import */ var js_wraps_authentication_page_manager__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! js/wraps/authentication_page_manager */ \"./src/js/wraps/authentication_page_manager.js\");\n/* harmony import */ var js_wraps_user_settings_page_manager_user_page_manager__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! js/wraps/user_settings_page_manager/user_page_manager */ \"./src/js/wraps/user_settings_page_manager/user_page_manager.js\");\n/* harmony import */ var js_wraps_orcid_page_manager_orcid_page_manager__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! js/wraps/orcid_page_manager/orcid_page_manager */ \"./src/js/wraps/orcid_page_manager/orcid_page_manager.js\");\n/* harmony import */ var js_wraps_orcid_instructions_page_manager_manager__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! js/wraps/orcid-instructions-page-manager/manager */ \"./src/js/wraps/orcid-instructions-page-manager/manager.js\");\n/* harmony import */ var js_react_PageManager__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! js/react/PageManager */ \"./src/js/react/PageManager.js\");\n/* harmony import */ var js_wraps_libraries_page_manager_libraries_page_manager__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! js/wraps/libraries_page_manager/libraries_page_manager */ \"./src/js/wraps/libraries_page_manager/libraries_page_manager.js\");\n/* harmony import */ var js_wraps_home_page_manager_home_page_manager__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! js/wraps/home_page_manager/home_page_manager */ \"./src/js/wraps/home_page_manager/home_page_manager.js\");\n/* harmony import */ var js_wraps_public_libraries_page_manager_public_libraries_manager__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! js/wraps/public_libraries_page_manager/public_libraries_manager */ \"./src/js/wraps/public_libraries_page_manager/public_libraries_manager.js\");\n/* harmony import */ var js_wraps_error_page_manager_error_page_manager__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! js/wraps/error_page_manager/error_page_manager */ \"./src/js/wraps/error_page_manager/error_page_manager.js\");\n/* harmony import */ var js_widgets_authentication_widget__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! js/widgets/authentication/widget */ \"./src/js/widgets/authentication/widget.js\");\n/* harmony import */ var js_widgets_user_settings_widget__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! js/widgets/user_settings/widget */ \"./src/js/widgets/user_settings/widget.js\");\n/* harmony import */ var js_widgets_preferences_widget__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! js/widgets/preferences/widget */ \"./src/js/widgets/preferences/widget.js\");\n/* harmony import */ var js_widgets_library_import_widget__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! js/widgets/library_import/widget */ \"./src/js/widgets/library_import/widget.js\");\n/* harmony import */ var js_widgets_filter_visualizer_widget__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! js/widgets/filter_visualizer/widget */ \"./src/js/widgets/filter_visualizer/widget.js\");\n/* harmony import */ var js_widgets_navbar_widget__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! js/widgets/navbar/widget */ \"./src/js/widgets/navbar/widget.js\");\n/* harmony import */ var js_widgets_user_navbar_widget__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! js/widgets/user_navbar/widget */ \"./src/js/widgets/user_navbar/widget.js\");\n/* harmony import */ var js_widgets_alerts_widget__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! js/widgets/alerts/widget */ \"./src/js/widgets/alerts/widget.js\");\n/* harmony import */ var js_widgets_classic_form_widget__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! js/widgets/classic_form/widget */ \"./src/js/widgets/classic_form/widget.js\");\n/* harmony import */ var js_widgets_search_bar_search_bar_widget__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! js/widgets/search_bar/search_bar_widget */ \"./src/js/widgets/search_bar/search_bar_widget.js\");\n/* harmony import */ var js_widgets_search_bar_search_bar_widget__WEBPACK_IMPORTED_MODULE_51___default = /*#__PURE__*/__webpack_require__.n(js_widgets_search_bar_search_bar_widget__WEBPACK_IMPORTED_MODULE_51__);\n/* harmony import */ var js_widgets_paper_search_form_widget__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! js/widgets/paper_search_form/widget */ \"./src/js/widgets/paper_search_form/widget.js\");\n/* harmony import */ var js_widgets_results_widget__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! js/widgets/results/widget */ \"./src/js/widgets/results/widget.js\");\n/* harmony import */ var js_widgets_query_info_query_info_widget__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! js/widgets/query_info/query_info_widget */ \"./src/js/widgets/query_info/query_info_widget.js\");\n/* harmony import */ var js_widgets_api_query_widget__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! js/widgets/api_query/widget */ \"./src/js/widgets/api_query/widget.js\");\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'js/widgets/export/widget'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'js/widgets/sort/widget'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var js_wraps_export_dropdown__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! js/wraps/export_dropdown */ \"./src/js/wraps/export_dropdown.js\");\n/* harmony import */ var js_wraps_visualization_dropdown__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! js/wraps/visualization_dropdown */ \"./src/js/wraps/visualization_dropdown.js\");\n/* harmony import */ var js_wraps_author_network__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! js/wraps/author_network */ \"./src/js/wraps/author_network.js\");\n/* harmony import */ var js_wraps_paper_network__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! js/wraps/paper_network */ \"./src/js/wraps/paper_network.js\");\n/* harmony import */ var js_widgets_wordcloud_widget__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! js/widgets/wordcloud/widget */ \"./src/js/widgets/wordcloud/widget.js\");\n/* harmony import */ var js_widgets_bubble_chart_widget__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! js/widgets/bubble_chart/widget */ \"./src/js/widgets/bubble_chart/widget.js\");\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'js/widgets/author_affiliation_tool/widget'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* eslint-disable global-require */\n\n/**\n * Webpack entry point for the Discovery application\n *\n * This file replaces the dynamic loading in main.js with static imports\n * for webpack compatibility.\n */\n// Import core dependencies\n\n\n\n\n\n // Import configuration\n\n // Import all controllers\n\n\n\n\n\n\n\n\n // Import all services\n\n\n\n\n\n // Import all objects\n\n\n\n\n\n\n\n\n\n // Import all modules\n\n // Import all widgets\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // Create a static configuration object that matches the structure expected by the Application class\n\nvar staticConfig = {\n  core: {\n    controllers: {\n      FeedbackMediator: js_wraps_discovery_mediator__WEBPACK_IMPORTED_MODULE_7__[\"default\"],\n      QueryMediator: js_components_query_mediator__WEBPACK_IMPORTED_MODULE_8__[\"default\"],\n      Diagnostics: js_bugutils_diagnostics__WEBPACK_IMPORTED_MODULE_9__[\"default\"],\n      AlertsController: js_wraps_alerts_mediator__WEBPACK_IMPORTED_MODULE_10__[\"default\"],\n      Orcid: js_modules_orcid_module__WEBPACK_IMPORTED_MODULE_11__[\"default\"],\n      SecondOrderController: js_components_second_order_controller__WEBPACK_IMPORTED_MODULE_12__[\"default\"],\n      HotkeysController: js_components_hotkeys_controller__WEBPACK_IMPORTED_MODULE_13__[\"default\"],\n      Experiments: js_components_experiments__WEBPACK_IMPORTED_MODULE_14__[\"default\"]\n    },\n    services: {\n      Api: js_services_api__WEBPACK_IMPORTED_MODULE_15__[\"default\"],\n      PubSub: js_services_pubsub__WEBPACK_IMPORTED_MODULE_16__[\"default\"],\n      Navigator: js_apps_discovery_navigator__WEBPACK_IMPORTED_MODULE_17__[\"default\"],\n      PersistentStorage: js_services_storage__WEBPACK_IMPORTED_MODULE_18__[\"default\"],\n      HistoryManager: js_components_history_manager__WEBPACK_IMPORTED_MODULE_19__[\"default\"]\n    },\n    objects: {\n      User: js_components_user__WEBPACK_IMPORTED_MODULE_20__[\"default\"],\n      Session: js_components_session__WEBPACK_IMPORTED_MODULE_21__[\"default\"],\n      DynamicConfig: (config_discovery_vars__WEBPACK_IMPORTED_MODULE_22___default()),\n      MasterPageManager: js_page_managers_master__WEBPACK_IMPORTED_MODULE_23__[\"default\"],\n      AppStorage: js_components_app_storage__WEBPACK_IMPORTED_MODULE_24__[\"default\"],\n      CSRFManager: js_components_csrf_manager__WEBPACK_IMPORTED_MODULE_25__[\"default\"],\n      LibraryController: js_components_library_controller__WEBPACK_IMPORTED_MODULE_26__[\"default\"],\n      DocStashController: js_components_doc_stash_controller__WEBPACK_IMPORTED_MODULE_27__[\"default\"],\n      Utils: utils__WEBPACK_IMPORTED_MODULE_28__[\"default\"]\n    },\n    modules: {\n      FacetFactory: js_widgets_facet_factory__WEBPACK_IMPORTED_MODULE_29__[\"default\"]\n    }\n  },\n  widgets: {\n    LandingPage: js_wraps_landing_page_manager_landing_page_manager__WEBPACK_IMPORTED_MODULE_30__[\"default\"],\n    SearchPage: js_wraps_results_page_manager__WEBPACK_IMPORTED_MODULE_31__[\"default\"],\n    DetailsPage: js_wraps_abstract_page_manager_abstract_page_manager__WEBPACK_IMPORTED_MODULE_32__[\"default\"],\n    AuthenticationPage: js_wraps_authentication_page_manager__WEBPACK_IMPORTED_MODULE_33__[\"default\"],\n    SettingsPage: js_wraps_user_settings_page_manager_user_page_manager__WEBPACK_IMPORTED_MODULE_34__[\"default\"],\n    OrcidPage: js_wraps_orcid_page_manager_orcid_page_manager__WEBPACK_IMPORTED_MODULE_35__[\"default\"],\n    OrcidInstructionsPage: js_wraps_orcid_instructions_page_manager_manager__WEBPACK_IMPORTED_MODULE_36__[\"default\"],\n    ReactPageManager: js_react_PageManager__WEBPACK_IMPORTED_MODULE_37__[\"default\"],\n    LibrariesPage: js_wraps_libraries_page_manager_libraries_page_manager__WEBPACK_IMPORTED_MODULE_38__[\"default\"],\n    HomePage: js_wraps_home_page_manager_home_page_manager__WEBPACK_IMPORTED_MODULE_39__[\"default\"],\n    PublicLibrariesPage: js_wraps_public_libraries_page_manager_public_libraries_manager__WEBPACK_IMPORTED_MODULE_40__[\"default\"],\n    ErrorPage: js_wraps_error_page_manager_error_page_manager__WEBPACK_IMPORTED_MODULE_41__[\"default\"],\n    Authentication: js_widgets_authentication_widget__WEBPACK_IMPORTED_MODULE_42__[\"default\"],\n    UserSettings: js_widgets_user_settings_widget__WEBPACK_IMPORTED_MODULE_43__[\"default\"],\n    UserPreferences: js_widgets_preferences_widget__WEBPACK_IMPORTED_MODULE_44__[\"default\"],\n    LibraryImport: js_widgets_library_import_widget__WEBPACK_IMPORTED_MODULE_45__[\"default\"],\n    BreadcrumbsWidget: js_widgets_filter_visualizer_widget__WEBPACK_IMPORTED_MODULE_46__[\"default\"],\n    NavbarWidget: js_widgets_navbar_widget__WEBPACK_IMPORTED_MODULE_47__[\"default\"],\n    UserNavbarWidget: js_widgets_user_navbar_widget__WEBPACK_IMPORTED_MODULE_48__[\"default\"],\n    AlertsWidget: js_widgets_alerts_widget__WEBPACK_IMPORTED_MODULE_49__[\"default\"],\n    ClassicSearchForm: js_widgets_classic_form_widget__WEBPACK_IMPORTED_MODULE_50__[\"default\"],\n    SearchWidget: (js_widgets_search_bar_search_bar_widget__WEBPACK_IMPORTED_MODULE_51___default()),\n    PaperSearchForm: js_widgets_paper_search_form_widget__WEBPACK_IMPORTED_MODULE_52__[\"default\"],\n    Results: js_widgets_results_widget__WEBPACK_IMPORTED_MODULE_53__[\"default\"],\n    QueryInfo: js_widgets_query_info_query_info_widget__WEBPACK_IMPORTED_MODULE_54__[\"default\"],\n    QueryDebugInfo: js_widgets_api_query_widget__WEBPACK_IMPORTED_MODULE_55__[\"default\"],\n    ExportWidget: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'js/widgets/export/widget'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\n    Sort: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'js/widgets/sort/widget'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\n    ExportDropdown: js_wraps_export_dropdown__WEBPACK_IMPORTED_MODULE_57__[\"default\"],\n    VisualizationDropdown: js_wraps_visualization_dropdown__WEBPACK_IMPORTED_MODULE_58__[\"default\"],\n    AuthorNetwork: js_wraps_author_network__WEBPACK_IMPORTED_MODULE_59__[\"default\"],\n    PaperNetwork: js_wraps_paper_network__WEBPACK_IMPORTED_MODULE_60__[\"default\"],\n    ConceptCloud: js_widgets_wordcloud_widget__WEBPACK_IMPORTED_MODULE_61__[\"default\"],\n    BubbleChart: js_widgets_bubble_chart_widget__WEBPACK_IMPORTED_MODULE_62__[\"default\"],\n    AuthorAffiliationTool: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'js/widgets/author_affiliation_tool/widget'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())\n  }\n}; // Initialize the application\n\nvar updateProgress = typeof window.__setAppLoadingProgress === 'function' ? window.__setAppLoadingProgress : function () {};\njs_components_application__WEBPACK_IMPORTED_MODULE_1__[\"default\"].prototype.shim(); // Check if we're in debug mode\n\nvar debug = window.location.href.indexOf('debug=true') > -1; // Create the application instance\n\nvar app = new (js_components_application__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(js_mixins_discovery_bootstrap__WEBPACK_IMPORTED_MODULE_2__[\"default\"]))({\n  debug: debug,\n  timeout: 60 * 1000 // 60 seconds\n\n}); // Instead of dynamically loading modules, we'll register them directly\n\nvar startApp = function startApp() {\n  updateProgress(80, 'App Loaded'); // Register the statically imported modules\n\n  app._registerLoadedModules('controllers', staticConfig.core.controllers);\n\n  app._registerLoadedModules('services', staticConfig.core.services);\n\n  app._registerLoadedModules('objects', staticConfig.core.objects);\n\n  app._registerLoadedModules('modules', staticConfig.core.modules); // Register widgets\n\n\n  app._registerLoadedModules('widgets', staticConfig.widgets); // Activate all loaded modules\n\n\n  app.activate();\n  var pubsub = app.getService('PubSub');\n  pubsub.publish(pubsub.getCurrentPubSubKey(), pubsub.APP_LOADED); // Set some important urls, parameters before doing anything\n\n  app.configure();\n  updateProgress(95, 'Finishing Up...');\n  app.bootstrap().done(function (data) {\n    updateProgress(100);\n    app.onBootstrap(data);\n    var dynConf = app.getObject('DynamicConfig');\n\n    if (dynConf && dynConf.debugExportBBB) {\n      window.bbb = app;\n    }\n\n    pubsub.publish(pubsub.getCurrentPubSubKey(), pubsub.APP_BOOTSTRAPPED);\n    pubsub.publish(pubsub.getCurrentPubSubKey(), pubsub.APP_STARTING);\n    app.start(router__WEBPACK_IMPORTED_MODULE_0__[\"default\"]).done(function () {\n      pubsub.publish(pubsub.getCurrentPubSubKey(), pubsub.APP_STARTED); // Rest of the application initialization code...\n      // (Copy the rest of the initialization code from main.js)\n    });\n  });\n}; // Start the application\n\n\nstartApp();\n\n//# sourceURL=webpack://bumblebee/./src/config/webpack-entry.js?");

/***/ }),

/***/ "./src/js/apps/discovery/navigator.js":
/*!********************************************!*\
  !*** ./src/js/apps/discovery/navigator.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_navigator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/navigator */ \"./src/js/components/navigator.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/api_query_updater */ \"./src/js/components/api_query_updater.js\");\n/* harmony import */ var js_components_json_response__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/components/json_response */ \"./src/js/components/json_response.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var hbs_404__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! hbs!404 */ \"./src/404.html\");\n/* harmony import */ var hbs_404__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(hbs_404__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var hbs_js_apps_discovery_templates_orcid_modal_template__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! hbs!js/apps/discovery/templates/orcid-modal-template */ \"./src/js/apps/discovery/templates/orcid-modal-template.html\");\n/* harmony import */ var hbs_js_apps_discovery_templates_orcid_modal_template__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(hbs_js_apps_discovery_templates_orcid_modal_template__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var js_mixins_api_access__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! js/mixins/api_access */ \"./src/js/mixins/api_access.js\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react-redux */ \"./src/libs/react-redux.js\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_13__);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n/**\n * The main 'navigation' endpoints (the part executed inside\n * the application) - this is a companion to the 'router'\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar NavigatorService = js_components_navigator__WEBPACK_IMPORTED_MODULE_3__[\"default\"].extend({\n  start: function start(app) {\n    /**\n     * These 'transitions' are what happens inside 'discovery' application\n     *\n     * As a convention, navigation events are all lowercase, and widgets/page managers\n     * are CamelCase (for example the table of contents menu on the left side of the\n     * abstract/detail page is triggering navigation events using just the name of\n     * the widget, e.g. ShowReferences - when References tab was selected)\n     *\n     */\n    var self = this;\n    var queryUpdater = new js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_5__[\"default\"]('navigator');\n\n    var publishFeedback = function publishFeedback(data) {\n      self.getPubSub().publish(self.getPubSub().FEEDBACK, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"](data));\n    }; // right now, user navbar widget depends on this to show the correct highlighted pill\n\n\n    var publishPageChange = function publishPageChange(pageName) {\n      self.getPubSub().publish(self.getPubSub().PAGE_CHANGE, pageName);\n    };\n\n    var searchPageAlwaysVisible = ['Results', 'MyAdsFreeform', 'QueryInfo', 'AffiliationFacet', 'AuthorFacet', 'DatabaseFacet', 'RefereedFacet', 'KeywordFacet', 'BibstemFacet', 'BibgroupFacet', 'DataFacet', 'ObjectFacet', 'NedObjectFacet', 'VizierFacet', 'GraphTabs', 'QueryDebugInfo', 'ExportDropdown', 'VisualizationDropdown', 'SearchWidget', 'Sort', 'BreadcrumbsWidget', 'PubtypeFacet', 'OrcidSelector'];\n    var detailsPageAlwaysVisible = ['TOCWidget', 'SearchWidget', 'ShowResources', 'ShowAssociated', 'ShowGraphicsSidebar', 'ShowLibraryAdd', 'MetaTagsWidget'];\n\n    function redirectIfNotSignedIn(next) {\n      var loggedIn = app.getBeeHive().getObject('User').isLoggedIn();\n\n      if (!loggedIn) {\n        // redirect to authentication page\n        app.getService('Navigator').navigate('authentication-page', {\n          subView: 'login',\n          redirect: true,\n          next: next\n        });\n        return true;\n      }\n\n      return false;\n    }\n\n    function makeProxyHandler(id) {\n      return function () {\n        var proxy = self.get(id);\n        var args = Array.prototype.slice.call(arguments, 1);\n        return proxy.execute.apply(proxy, [id].concat(args));\n      };\n    }\n\n    this.set('index-page', function (data) {\n      var that = this;\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      app.getObject('MasterPageManager').show('LandingPage', ['SearchWidget', 'RecommenderWidget']).then(function () {\n        return app.getWidget('LandingPage').then(function (widget) {\n          if (data && data.origin === 'SearchWidget') {\n            // we know it came from the searchWidget handler, so call it without extra params\n            widget.setActive('SearchWidget');\n          } else {\n            // only set the origin flag if we know it wasn't a redirect from the other handler (SearchWidget)\n            widget.setActive('SearchWidget', null, {\n              origin: 'index-page'\n            });\n          }\n\n          that.route = '';\n          that.title = '';\n          defer.resolve();\n        });\n      });\n      return defer.promise();\n    });\n    this.set('SearchWidget', function () {\n      // you must set a route within the function, even if you are calling\n      // another function that sets a route\n      var that = this;\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n\n      var exec = underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].bind(self.get('index-page').execute, this, {\n        origin: 'SearchWidget'\n      });\n\n      exec().then(function () {\n        that.route = '';\n        that.title = '';\n        defer.resolve();\n      });\n      return defer.promise();\n    });\n    this.set('404', /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(_widget) {\n        var errorProps,\n            _args = arguments;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                errorProps = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n                _context.next = 3;\n                return app.getObject('MasterPageManager');\n\n              case 3:\n                void _context.sent.show('ErrorPage');\n                _context.next = 6;\n                return app.getWidget('ErrorPage');\n\n              case 6:\n                _context.t0 = errorProps;\n                void _context.sent.setMessage(_context.t0);\n\n                /**\n                 * only replace if this 404 page was truly an internal re-route,\n                 * and not due to a broken link or some other routing issue\n                 */\n                if (Object.keys(errorProps).length > 0) {\n                  this.replace = true;\n                } // set url route\n\n\n                this.route = '404';\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    this.set('ClassicSearchForm', function (widgetName, _ref2) {\n      var query = _ref2.query;\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var that = this;\n      app.getObject('MasterPageManager').show('LandingPage', [widgetName]).then(function () {\n        app.getWidget('LandingPage').done(function (widget) {\n          widget.setActive(widgetName);\n          widget.widgets[widgetName].applyQueryParams(query);\n        });\n        that.route = '#classic-form';\n        that.title = 'Classic Form';\n        defer.resolve();\n      });\n      return defer.promise();\n    });\n    this.set('PaperSearchForm', function () {\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var that = this;\n      app.getObject('MasterPageManager').show('LandingPage', ['PaperSearchForm']).then(function () {\n        app.getWidget('LandingPage').done(function (widget) {\n          widget.setActive('PaperSearchForm');\n        });\n        that.route = '#paper-form';\n        that.title = 'Paper Form';\n        defer.resolve();\n      });\n      return defer.promise();\n    });\n    this.set('LibraryImport', function (page, data) {\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var that = this;\n\n      if (redirectIfNotSignedIn(that.endpoint)) {\n        defer.resolve();\n        return defer.promise();\n      }\n\n      app.getObject('MasterPageManager').show('SettingsPage', ['LibraryImport', 'UserNavbarWidget']).then(function () {\n        app.getWidget('SettingsPage').done(function (widget) {\n          widget.setActive('LibraryImport');\n          that.route = '#user/settings/libraryimport';\n          that.title = 'Library Import';\n          publishPageChange('settings-page');\n          defer.resolve();\n        });\n      });\n      return defer.promise();\n    });\n\n    function settingsPreferencesView(widgetName, defaultView, title) {\n      return function (page, data) {\n        var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n        var that = this;\n\n        if (redirectIfNotSignedIn(that.endpoint)) {\n          defer.resolve();\n          return defer.promise();\n        }\n\n        var subView = data.subView || defaultView;\n\n        if (!subView) {\n          console.error('no subview or default view provided /' + 'to the navigator function!');\n        }\n\n        app.getObject('MasterPageManager').show('SettingsPage', [widgetName, 'UserNavbarWidget']).then(function () {\n          app.getWidget('SettingsPage').done(function (widget) {\n            widget.setActive(widgetName, subView);\n          });\n          that.route = '#user/settings/' + subView;\n          that.title = 'Settings' + (title ? ' | ' + title : '');\n          publishPageChange('settings-page');\n          defer.resolve();\n        });\n        return defer.promise();\n      };\n    } // request for the widget\n\n\n    this.set('UserSettings', settingsPreferencesView('UserSettings', undefined)); // request for the widget\n\n    this.set('UserPreferences', settingsPreferencesView('UserPreferences', 'application', 'Search Settings'));\n    this.set('MyAdsDashboard', function () {\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var that = this;\n\n      if (redirectIfNotSignedIn(that.endpoint)) {\n        defer.resolve();\n        return defer.promise();\n      }\n\n      app.getObject('MasterPageManager').show('SettingsPage', ['MyAdsDashboard', 'UserNavbarWidget']).then(function () {\n        app.getWidget('SettingsPage').done(function (widget) {\n          widget.setActive('MyAdsDashboard');\n          that.route = '#user/settings/myads';\n          that.title = 'myADS Notifications';\n          publishPageChange('settings-page');\n          defer.resolve();\n        });\n      });\n      return defer.promise();\n    });\n    this.set('LibraryActionsWidget', function () {\n      var $dd = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var that = this;\n\n      if (redirectIfNotSignedIn(that.endpoint)) {\n        return $dd.resolve().promise();\n      }\n\n      app.getObject('MasterPageManager').show('LibrariesPage', ['LibraryActionsWidget', 'UserNavbarWidget']).then(function () {\n        app.getWidget('LibraryActionsWidget').done(function (widget) {\n          widget.reset();\n          that.route = '#user/libraries/actions';\n          publishPageChange('libraries-page');\n          $dd.resolve();\n        });\n      });\n      return $dd.promise();\n    });\n    this.set('AllLibrariesWidget', function (widget, subView) {\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var that = this;\n\n      if (redirectIfNotSignedIn(that.endpoint)) {\n        defer.resolve();\n        return defer.promise();\n      }\n\n      var subView = subView || 'libraries';\n      app.getObject('MasterPageManager').show('LibrariesPage', ['AllLibrariesWidget', 'UserNavbarWidget']).then(function () {\n        app.getWidget('AllLibrariesWidget').done(function (widget) {\n          widget.setSubView({\n            view: subView\n          });\n          widget.reset();\n          that.route = '#user/libraries/';\n          that.title = 'My Libraries';\n          publishPageChange('libraries-page');\n        });\n        defer.resolve();\n      });\n      return defer.promise();\n    });\n    this.set('LibraryAdminView', function (widget) {\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var that = this; // this is NOT navigable from outside, so library already has data\n      // only setting a nav event to hide previous widgets\n\n      app.getObject('MasterPageManager').show('LibrariesPage', ['IndividualLibraryWidget', 'UserNavbarWidget']).then(function () {\n        app.getWidget('IndividualLibraryWidget').done(function (widget) {\n          widget.setSubView({\n            subView: 'admin'\n          });\n        });\n        publishPageChange('libraries-page');\n        defer.resolve();\n      });\n      return defer.promise();\n    });\n    this.set('IndividualLibraryWidget', function (widget, data) {\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var that = this; // data in form of { subView: subView, id: id, publicView: false }\n\n      data.publicView = data.publicView ? data.publicView : false; // only check for logged in user if not public library\n\n      if (!data.publicView && redirectIfNotSignedIn(that.endpoint)) {\n        return defer.resolve().promise();\n      }\n\n      this.route = data.publicView ? '#public-libraries/' + data.id : '#user/libraries/' + data.id;\n      var pub = data.publicView;\n      app.getObject('MasterPageManager').show(pub ? 'PublicLibrariesPage' : 'LibrariesPage', pub ? ['IndividualLibraryWidget', 'LibraryListWidget'] : ['IndividualLibraryWidget', 'LibraryListWidget', 'UserNavbarWidget']).then(function () {\n        app.getObject('LibraryController').getLibraryMetadata(data.id, !data.publicView).done(function (metadata) {\n          data.editRecords = underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].contains(['write', 'admin', 'owner'], metadata.permission) && !data.publicView;\n          that.title = data.publicView ? 'Public' : 'Private' + ' Library | ' + metadata.name;\n          app.getWidget('LibraryListWidget', 'IndividualLibraryWidget').then(function (w) {\n            w['LibraryListWidget'].setData(data);\n            w['IndividualLibraryWidget'].setSubView(data);\n\n            if (pub) {\n              publishPageChange('libraries-page');\n            }\n\n            defer.resolve();\n          });\n        });\n      });\n      return defer.promise();\n    }); // for external widgets shown by library\n\n    function navToLibrarySubView(widget, data) {\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var that = this; // actual name of widget to be shown in main area\n\n      var widgetName = data.widgetName; // additional info that the renderWidgetForListOfBibcodes function might need (only used by export right now)\n\n      var additional = data.additional;\n      var format = additional.format || 'bibtex'; // tab description for library widget\n\n      var subView = data.subView; // id of library being shown\n\n      var id = data.id;\n      var publicView = data.publicView; // Author-affiliation has a specific widget\n\n      if (widgetName === 'ExportWidget' && format === 'authoraff') {\n        widgetName = 'AuthorAffiliationTool';\n      }\n\n      function renderLibrarySub(id) {\n        var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n        app.getObject('LibraryController').getLibraryBibcodes(id).done(function (bibcodes) {\n          // XXX - this was async in the original version; likely wrong\n          // one block should be main...\n          app.getWidget('LibraryListWidget').then(function (listWidget) {\n            var sort = listWidget.model.get('sort');\n            app.getWidget(widgetName).then(function (subWidget) {\n              additional = underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend({}, additional, {\n                sort: sort\n              });\n              subWidget.renderWidgetForListOfBibcodes(bibcodes, additional);\n              app.getWidget('IndividualLibraryWidget').then(function (indWidget) {\n                indWidget.setSubView({\n                  subView: subView,\n                  publicView: publicView,\n                  id: id\n                });\n                defer.resolve();\n              });\n            });\n          });\n        });\n        return defer.promise();\n      } // clear current data\n\n\n      app.getWidget(widgetName).done(function (widget) {\n        if (widget.reset) widget.reset();else if (widget.resetWidget) widget.resetWidget();\n      }).done(function () {\n        // just stick the empty views in there, otherwise the interface lags as the lib controller\n        // paginates through the library bibcodes\n        if (!(widgetName === 'ExportWidget' && format === 'classic')) {\n          // export to classic opens a new tab, nothing to update here\n          if (publicView) {\n            app.getObject('MasterPageManager').show('PublicLibrariesPage', ['IndividualLibraryWidget', widgetName]).then(function () {\n              renderLibrarySub(id).done(function () {\n                that.route = '#public-libraries/' + data.id; // XXX:rca - i think this should be that.route\n\n                defer.resolve();\n              });\n            });\n          } else {\n            app.getObject('MasterPageManager').show('LibrariesPage', ['IndividualLibraryWidget', 'UserNavbarWidget', widgetName]).then(function () {\n              renderLibrarySub(id).done(function () {\n                that.route = '#user/libraries/' + data.id;\n                publishPageChange('libraries-page');\n                defer.resolve();\n              });\n            });\n          }\n        } else {\n          defer.resolve();\n        }\n      });\n      return defer.promise();\n    } // end navToLibrarySubview\n\n\n    this.set('library-export', navToLibrarySubView);\n    this.set('library-visualization', navToLibrarySubView);\n    this.set('library-metrics', navToLibrarySubView);\n    this.set('library-citation_helper', navToLibrarySubView);\n    this.set('home-page', function () {\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var that = this;\n\n      if (redirectIfNotSignedIn(that.endpoint)) {\n        return defer.resolve().promise();\n      }\n\n      app.getObject('MasterPageManager').show('HomePage', []).then(function () {\n        publishPageChange('home-page');\n        that.title = 'Home';\n        that.route = '#user/home';\n        defer.resolve();\n      });\n      return defer.promise();\n    });\n    this.set('authentication-page', function (page, data) {\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var data = data || {},\n          subView = data.subView || 'login',\n          loggedIn = app.getBeeHive().getObject('User').isLoggedIn(),\n          that = this;\n\n      if (loggedIn) {\n        // redirect to index\n        self.get('index-page').execute().then(function () {\n          defer.resolve();\n        });\n      } else {\n        // redirect will be set if we are redirecting from an internal page\n        if (data.redirect) {\n          that.replace = true;\n        }\n\n        app.getObject('MasterPageManager').show('AuthenticationPage', ['Authentication']).then(function () {\n          app.getWidget('Authentication').done(function (w) {\n            if (data.next) {\n              w.setNextNavigation(data.next);\n            }\n\n            w.setSubView(subView);\n            that.route = '#user/account/' + subView;\n            that.title = subView === 'login' ? 'Sign In' : subView === 'reset-password-1' || subView === 'reset-password-2' ? 'Reset Password' : subView === 'resend-verification-email' ? 'Resend Verification Eamil' : 'Register';\n            defer.resolve();\n          });\n        });\n      }\n\n      return defer.promise();\n    });\n    this.set('results-page', function (widget, args) {\n      var that = this;\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      app.getObject('MasterPageManager').show('SearchPage', searchPageAlwaysVisible).done(function () {\n        // allowing widgets to override appstorage query (so far only used for orcid redirect)\n        // XXX:rca - not sure I understand why\n        var q = app.getObject('AppStorage').getCurrentQuery();\n\n        if (q && q.get('__original_url')) {\n          var route = '#search/' + q.get('__original_url');\n          q.unset('__original_url');\n        } else {\n          var route = '#search/' + queryUpdater.clean(q).url();\n        } // XXX:rca why here and not inside mediator???\n        // update the pagination of the results widget\n\n\n        if (q instanceof js_components_api_query__WEBPACK_IMPORTED_MODULE_7__[\"default\"]) {\n          var update = {};\n\n          var par = function par(str) {\n            if (underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isString(str)) {\n              try {\n                return parseInt(str);\n              } catch (e) {// do nothing\n              }\n            }\n\n            return false;\n          };\n\n          if (q.has('p_')) {\n            var page = par(q.get('p_')[0]);\n            update.page = page;\n          } else {\n            route += '&p_=0';\n          }\n\n          if (!underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isEmpty(update)) {\n            app.getWidget('Results').then(function (w) {\n              if (underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isFunction(w.updatePagination)) {\n                w.updatePagination(update);\n              }\n            });\n          }\n        } // taking care of inserting bigquery key here, not sure if right place\n        // clean(q) above got rid of qid key, reinsert it\n\n\n        if (q && q.get('__qid')) {\n          route += '&__qid=' + q.get('__qid')[0];\n        }\n\n        that.title = q && q.get('q').length && q.get('q')[0];\n        that.route = route;\n        publishFeedback({\n          code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"].CODES.UNMAKE_SPACE\n        });\n        defer.resolve();\n      });\n      return defer.promise();\n    });\n    this.set('export', function (nav, options) {\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var format = options.format || 'bibtex';\n      var storage = app.getObject('AppStorage');\n      var that = this;\n      app.getObject('MasterPageManager').show('SearchPage', ['ExportWidget'].concat(searchPageAlwaysVisible.slice(1))).then(function () {\n        app.getWidget('ExportWidget').done(function (widget) {\n          that.route = \"#search/\".concat(storage.getCurrentQuery().url(), \"/export-\").concat(format);\n\n          if (format === 'authoraff') {\n            if (options.onlySelected && storage.hasSelectedPapers()) {\n              widget.getAuthorAffForm({\n                bibcodes: storage.getSelectedPapers()\n              });\n            } else {\n              widget.getAuthorAffForm({\n                currentQuery: storage.getCurrentQuery()\n              });\n            }\n\n            return;\n          } // first, open central panel\n\n\n          publishFeedback({\n            code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"].CODES.MAKE_SPACE\n          }); // is a special case, it opens in a new tab\n\n          if (options.onlySelected && storage.hasSelectedPapers()) {\n            widget.renderWidgetForListOfBibcodes(storage.getSelectedPapers(), {\n              format: format,\n              sort: storage.hasCurrentQuery() && storage.getCurrentQuery().get('sort')[0]\n            });\n          } // all records specifically requested\n          else if (options.onlySelected === false && storage.hasCurrentQuery()) {\n            widget.renderWidgetForCurrentQuery({\n              format: format,\n              currentQuery: storage.getCurrentQuery(),\n              numFound: storage.get('numFound')\n            });\n          } // no request for selected or not selected, show selected\n          else if (options.onlySelected === undefined && storage.hasSelectedPapers()) {\n            widget.renderWidgetForListOfBibcodes(storage.getSelectedPapers(), {\n              format: format\n            });\n          } // no selected, show all papers\n          else if (storage.hasCurrentQuery()) {\n            widget.exportQuery({\n              format: format,\n              currentQuery: storage.getCurrentQuery(),\n              numFound: storage.get('numFound')\n            });\n          } else {\n            var alerts = app.getController('AlertsController');\n            alerts.alert({\n              msg: 'There are no records to export yet (please search or select some)'\n            });\n            self.get('results-page')(); // XXX:rca - .execute?, also\n          }\n        }).done(function () {\n          defer.resolve(); // XXX:rca - may cause problem when 'results-page' gets called\n        });\n      });\n      return defer.promise();\n    });\n    this.set('export-query', function () {\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var api = app.getService('Api');\n      var q = app.getObject('AppStorage').getCurrentQuery();\n      var alerter = app.getController('AlertsController'); // TODO: modify filters (move them to the main q)\n\n      q = new js_components_api_query__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n        query: q.url()\n      }); // save the query / obtain query id\n\n      api.request(new js_components_api_request__WEBPACK_IMPORTED_MODULE_8__[\"default\"]({\n        query: q,\n        target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_9__[\"default\"].MYADS_STORAGE + '/query',\n        options: {\n          done: function done() {},\n          type: 'POST',\n          xhrFields: {\n            withCredentials: false\n          }\n        }\n      })).done(function (data) {\n        alerter.alert(new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n          code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"].CODES.ALERT,\n          msg: 'The query has been saved. You can insert the following snippet in a webpage: <br/>' + '<img src=\"' + js_components_api_targets__WEBPACK_IMPORTED_MODULE_9__[\"default\"].MYADS_STORAGE + '/query2svg/' + data.qid + '\"></img><br/>' + '<br/><textarea rows=\"10\" cols=\"50\">' + '<a href=\"' + location.protocol + '//' + location.host + location.pathname + '#execute-query/' + data.qid + '\"><img src=\"' + js_components_api_targets__WEBPACK_IMPORTED_MODULE_9__[\"default\"].MYADS_STORAGE + '/query2svg/' + data.qid + '\"></img>' + '</a>' + '</textarea>',\n          modal: true\n        }));\n        defer.resolve();\n      });\n      return defer.promise();\n    });\n    this.set('search-page', function (endPoint, data) {\n      var isTugboat = false;\n\n      try {\n        isTugboat = document.referrer.indexOf('tugboat/adsabs') > -1;\n      } catch (e) {}\n\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var possibleSearchSubPages = ['Metrics', 'AuthorNetwork', 'PaperNetwork', 'ConceptCloud', 'BubbleChart'];\n      var widgetName, pages; // convention is that a navigate command for search page widget starts with \"show-\"\n      // waits for the navigate to results page emitted by the discovery_mediator\n      // once the solr search has been received\n\n      if (data.page) {\n        widgetName = underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].map(data.page.split('-').slice(1), function (w) {\n          return w[0].toUpperCase() + w.slice(1);\n        }).join('');\n      }\n\n      if (widgetName && possibleSearchSubPages.indexOf(widgetName) > -1) {\n        pages = [widgetName].concat(searchPageAlwaysVisible.slice(1));\n      } else {\n        pages = searchPageAlwaysVisible;\n      }\n\n      var that = this;\n      var ctx = data && data.context || {};\n      showResultsPage(pages, ctx).then(function () {\n        var handler = function handler() {\n          // the current query should have been updated, use that instead\n          var query = self.getBeeHive().getObject('AppStorage').getCurrentQuery();\n\n          if (!query) {\n            query = data.q;\n          }\n\n          var cleaned = queryUpdater.clean(query); // re-apply the qid if was lost\n\n          if (query.has('__qid')) {\n            cleaned.set('__qid', query.get('__qid'));\n          }\n\n          that.route = '#search/' + cleaned.url();\n\n          if (query.has('__bigquerySource')) {\n            that.title = query.get('__bigquerySource')[0];\n          } else {\n            that.title = query.get('q').length && query.get('q')[0];\n          }\n\n          if (isTugboat) {\n            that.route += '&__tb=1';\n          }\n\n          var q = query;\n\n          if (q instanceof js_components_api_query__WEBPACK_IMPORTED_MODULE_7__[\"default\"]) {\n            var update = {};\n\n            var par = function par(str) {\n              if (underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isString(str)) {\n                try {\n                  return parseInt(str);\n                } catch (e) {// do nothing\n                }\n              }\n\n              return false;\n            };\n\n            if (q.has('p_')) {\n              var page = par(q.get('p_')[0]);\n              update.page = page;\n            } else {\n              that.route += '&p_=0';\n            }\n\n            if (!underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isEmpty(update)) {\n              app.getWidget('Results').then(function (w) {\n                if (underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isFunction(w.updatePagination)) {\n                  w.updatePagination(update);\n                }\n              });\n            }\n          } // check if there is a subpage, if so execute that handler w/ our current context\n\n\n          if (data.page && self.get(data.page)) {\n            var exec = underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].bind(self.get(data.page).execute, that, data.page, {\n              q: query\n            });\n\n            exec(data.page).then(function () {\n              defer.resolve();\n            });\n          } else {\n            defer.resolve();\n          }\n        }; // subscribe to the search cycle finished event\n        // so that we know that the current query has been set\n\n\n        var onFeedback = function onFeedback(feedback) {\n          if (feedback && feedback.code === js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"].CODES.SEARCH_CYCLE_FINISHED) {\n            handler();\n            ps.unsubscribe(ps.FEEDBACK, onFeedback);\n          }\n        }; // make sure that we unfold sidebars\n\n\n        publishFeedback({\n          code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"].CODES.UNMAKE_SPACE\n        });\n        var ps = self.getPubSub();\n        ps.subscribe(ps.FEEDBACK, onFeedback);\n        ps.publish(ps.START_SEARCH, data.q);\n      });\n      return defer.promise();\n    });\n    this.set('execute-query', function (endPoint, queryId) {\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var api = app.getService('Api');\n      api.request(new js_components_api_request__WEBPACK_IMPORTED_MODULE_8__[\"default\"]({\n        target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_9__[\"default\"].MYADS_STORAGE + '/query/' + queryId,\n        options: {\n          done: function done(data) {\n            var q = new js_components_api_query__WEBPACK_IMPORTED_MODULE_7__[\"default\"]().load(JSON.parse(data.query).query);\n            self.getPubSub().publish(self.getPubSub().START_SEARCH, q);\n            defer.resolve();\n          },\n          fail: function fail() {\n            var alerter = app.getController('AlertsController');\n            alerter.alert(new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n              code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"].CODES.ERROR,\n              msg: 'The query with the given UUID cannot be found'\n            }));\n            self.get('index-page').execute().then(function () {\n              defer.resolve();\n            });\n          },\n          type: 'GET',\n          xhrFields: {\n            withCredentials: false\n          }\n        }\n      }));\n      return defer.promise();\n    });\n    this.set('user-action', function (endPoint, data) {\n      var failMessage = '',\n          failTitle = '',\n          route,\n          done,\n          defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var token = data.token,\n          subView = data.subView;\n\n      function fail(jqXHR, status, errorThrown) {\n        self.get('index-page').execute().then(function () {\n          var error = jqXHR.responseJSON && jqXHR.responseJSON.error ? jqXHR.responseJSON.error : 'error unknown'; // call alerts widget\n\n          self.getPubSub().publish(self.getPubSub().ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n            code: 0,\n            title: failTitle,\n            msg: ' <b>' + error + '</b> <br/>' + failMessage,\n            modal: true,\n            type: 'danger'\n          }));\n          defer.reject();\n        });\n      }\n\n      if (subView === 'register') {\n        failTitle = 'Registration failed.';\n        failMessage = '<p>Please try again, or contact <b> adshelp@cfa.harvard.edu for support </b></p>';\n        route = js_components_api_targets__WEBPACK_IMPORTED_MODULE_9__[\"default\"].VERIFY + '/' + token;\n\n        done = function done(reply) {\n          // user has been logged in already by server\n          // request bootstrap\n          self.getApiAccess({\n            reconnect: true\n          }).done(function () {\n            self.get('index-page').execute().then(function () {\n              var msg = '<p>You have been successfully registered with the email</p> <p><b>' + reply.email + '</b></p>';\n              self.getPubSub().publish(self.getPubSub().ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n                code: 0,\n                title: 'Welcome to ADS',\n                msg: msg,\n                modal: true,\n                type: 'success'\n              }));\n              defer.resolve();\n            });\n          }).fail(function () {\n            this.apply(fail, arguments); // XXX:rca - infinite loop?\n          });\n        };\n      } else if (subView === 'change-email') {\n        failTitle = 'Attempt to change email failed';\n        failMessage = 'Please try again, or contact adshelp@cfa.harvard.edu for support';\n        route = js_components_api_targets__WEBPACK_IMPORTED_MODULE_9__[\"default\"].VERIFY + '/' + token;\n\n        done = function done(reply) {\n          // user has been logged in already\n          // request bootstrap\n          self.getApiAccess({\n            reconnect: true\n          }).done(function () {\n            self.get('index-page').execute().then(function () {\n              var msg = 'Your new ADS email is <b>' + reply.email + '</b>';\n              self.getPubSub().publish(self.getPubSub().ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n                code: 0,\n                title: 'Email has been changed.',\n                msg: msg,\n                modal: true,\n                type: 'success'\n              }));\n              defer.resolve();\n            });\n          }).fail(function () {\n            this.apply(fail, arguments);\n          });\n        };\n      } else if (subView === 'reset-password') {\n        done = function done() {\n          // route to reset-password-2 form\n          // set the token so that session can use it in the put request with the new password\n          self.getBeeHive().getObject('Session').setChangeToken(token);\n          self.getPubSub().publish(self.getPubSub().NAVIGATE, 'authentication-page', {\n            subView: 'reset-password-2'\n          });\n          defer.resolve();\n        };\n\n        failTitle = 'Password reset failed';\n        failMessage = 'Reset password token was invalid.';\n        route = js_components_api_targets__WEBPACK_IMPORTED_MODULE_9__[\"default\"].RESET_PASSWORD + '/' + token;\n      } else {\n        defer.reject('Unknown subView: ' + subView);\n        return defer.promise();\n      }\n\n      var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_8__[\"default\"]({\n        target: route,\n        options: {\n          type: 'GET',\n          context: self,\n          done: done,\n          fail: fail\n        }\n      });\n      self.getBeeHive().getService('Api').request(request);\n      return defer.promise();\n    });\n    this.set('orcid-instructions', function () {\n      var that = this;\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      app.getObject('MasterPageManager').show('OrcidInstructionsPage').then(function () {\n        that.route = '#orcid-instructions';\n        that.title = 'Orcid Instructions';\n      });\n      return defer.promise();\n    });\n    this.set('orcid-page', function (view, targetRoute) {\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var orcidApi = app.getService('OrcidApi');\n      var persistentStorage = app.getService('PersistentStorage');\n      var appStorage = app.getObject('AppStorage');\n      var user = app.getObject('User');\n      var that = this; // traffic from Orcid - user has authorized our access\n\n      if (!orcidApi.hasAccess() && orcidApi.hasExchangeCode()) {\n        // since app will exit, store the information that we're authenticating\n        if (persistentStorage) {\n          persistentStorage.set('orcidAuthenticating', true);\n        } else {\n          console.warn('no persistent storage service available');\n        }\n\n        orcidApi.getAccessData(orcidApi.getExchangeCode()).done(function (data) {\n          orcidApi.saveAccessData(data);\n          user.setOrcidMode(true);\n          self.getPubSub().publish(self.getPubSub().APP_EXIT, {\n            url: window.location.pathname + (targetRoute && underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isString(targetRoute) ? targetRoute : window.location.hash)\n          });\n        }).fail(function () {\n          user.setOrcidMode(false);\n          console.warn('Unsuccessful login to ORCID');\n          var alerter = app.getController('AlertsController');\n          alerter.alert(new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n            code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"].CODES.ALERT,\n            msg: 'Error getting OAuth code to access ORCID',\n            modal: true,\n            events: {\n              click: 'button[data-dismiss=modal]'\n            }\n          })).done(function () {\n            self.get('index-page').execute(); // after modal is closed\n          });\n        });\n        return;\n      } else if (orcidApi.hasAccess()) {\n        // XXX:rca = this block is async; showing modals even if the page under may be\n        // changing; likely not intended to be doing that but not sure...\n        if (persistentStorage.get('orcidAuthenticating')) {\n          persistentStorage.remove('orcidAuthenticating'); // check if we need to trigger modal alert to ask user to fill in necessary data\n          // we only want to show this immediately after user has authenticated with orcid\n\n          orcidApi.getADSUserData().done(function (data) {\n            // don't show modal if we're just going to redirect to the ads-orcid form anyway\n            if (!data.hasOwnProperty('authorizedUser') && JSON.stringify(appStorage.get('stashedNav')) !== '[\"UserPreferences\",{\"subView\":\"orcid\"}]') {\n              // the form has yet to be filled out by the user\n              // now tailor the message depending on whether they are signed in to ADS or not\n              var alerter = app.getController('AlertsController');\n              alerter.alert(new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n                code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"].CODES.ALERT,\n                msg: hbs_js_apps_discovery_templates_orcid_modal_template__WEBPACK_IMPORTED_MODULE_11___default()({\n                  adsLoggedIn: app.getObject('User').isLoggedIn()\n                }),\n                type: 'success',\n                title: 'You are now logged in to ORCID',\n                modal: true\n              }));\n            } // end check if user has already provided data\n\n          }).fail(function (error) {\n            console.warn(error);\n          });\n        }\n\n        app.getObject('MasterPageManager').show('OrcidPage', ['OrcidBigWidget', 'SearchWidget']).then(function () {\n          // go to the orcidbigwidget\n          that.route = '/user/orcid';\n          that.title = 'My Orcid';\n          defer.resolve();\n        });\n      } else {\n        // just redirect to index page, no orcid access\n        self.get('index-page').execute().then(function () {\n          that.route = '';\n          defer.resolve();\n        });\n      }\n\n      return defer.promise();\n    });\n    /*\n     * functions for showing \"explore\" widgets on results page\n     * */\n\n    function showResultsPageWidgetWithUniqueUrl(command, options) {\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred(),\n          that = this;\n      options = options || {};\n      var q = app.getObject('AppStorage').getCurrentQuery();\n\n      if (!q && options.q) {\n        q = options.q;\n      } else if (!q && !options.q) {\n        return defer.resolve().promise();\n      }\n\n      publishFeedback({\n        code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"].CODES.MAKE_SPACE\n      });\n\n      var widgetName = underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].map(command.split('-').slice(1), function (w) {\n        return w[0].toUpperCase() + w.slice(1);\n      }).join('');\n\n      app.getObject('MasterPageManager').show('SearchPage', [widgetName].concat(searchPageAlwaysVisible.slice(1))).done(function () {\n        var route = '#search/' + queryUpdater.clean(q.clone()).url() + '/' + command.split('-').slice(1).join('-'); // show selected, need to explicitly tell widget to show bibcodes\n\n        if (options && options.onlySelected) {\n          app.getWidget(widgetName).done(function (w) {\n            var selected = app.getObject('AppStorage').getSelectedPapers();\n            w.renderWidgetForListOfBibcodes(selected);\n            that.route = route;\n            defer.resolve();\n          });\n        } else {\n          app.getWidget(widgetName).done(function (w) {\n            w.renderWidgetForCurrentQuery({\n              currentQuery: q\n            });\n            that.route = route;\n            defer.resolve();\n          });\n        }\n      });\n      return defer.promise();\n    }\n\n    this.set('show-author-network', function (command, options) {\n      return showResultsPageWidgetWithUniqueUrl.apply(this, arguments);\n    });\n    this.set('show-concept-cloud', function (command, options) {\n      return showResultsPageWidgetWithUniqueUrl.apply(this, arguments);\n    });\n    this.set('show-paper-network', function (command, options) {\n      return showResultsPageWidgetWithUniqueUrl.apply(this, arguments);\n    });\n    this.set('show-bubble-chart', function (command, options) {\n      return showResultsPageWidgetWithUniqueUrl.apply(this, arguments);\n    });\n    this.set('show-metrics', function (command, options) {\n      return showResultsPageWidgetWithUniqueUrl.apply(this, arguments);\n    });\n    this.set('visualization-closed', this.get('results-page'));\n\n    var showResultsPage = function showResultsPage(pages, ctx) {\n      return app.getObject('MasterPageManager').show('SearchPage', pages, ctx);\n    };\n    /*\n     * Below are functions for abstract pages\n     */\n\n\n    var showDetail = function showDetail(pages, toActivate) {\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      app.getObject('MasterPageManager').show('DetailsPage', pages).then(function () {\n        return app.getWidget('DetailsPage').then(function (w) {\n          defer.resolve(w);\n        });\n      });\n      return defer.promise();\n    };\n\n    this.set('verify-abstract', function () {\n      // XXX:rca - moved from router; not in a working state\n      // check we are using the canonical bibcode and redirect to it if necessary\n      var q,\n          req,\n          defer = (jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred),\n          that = this;\n      q = new js_components_api_query__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n        q: 'identifier:' + this.queryUpdater.quoteIfNecessary(bibcode),\n        fl: 'bibcode'\n      });\n      req = new js_components_api_request__WEBPACK_IMPORTED_MODULE_8__[\"default\"]({\n        query: q,\n        target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SEARCH,\n        options: {\n          done: function done(resp) {\n            var navigateString, href;\n\n            if (!subPage) {\n              navigateString = 'ShowAbstract';\n            } else {\n              navigateString = 'Show' + subPage[0].toUpperCase() + subPage.slice(1);\n              href = '#abs/' + bibcode + '/' + subPage;\n            } //self.routerNavigate(navigateString, { href: href });\n\n\n            if (resp.response && resp.response.docs && resp.response.docs[0]) {\n              bibcode = resp.response.docs[0].bibcode;\n              self.getPubSub().publish(self.getPubSub().DISPLAY_DOCUMENTS, new js_components_api_query__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n                q: 'bibcode:' + bibcode\n              }));\n            } else if (resp.response && resp.response.docs && !resp.response.docs.length) {\n              console.error('the query  ' + q.get('q')[0] + '  did not return any bibcodes');\n            }\n          },\n          fail: function fail() {\n            console.log('Cannot identify page to load, bibcode: ' + bibcode);\n            self.getPubSub().publish(this.getPubSub().NAVIGATE, 'index-page');\n          }\n        }\n      });\n      this.getPubSub().publish(this.getPubSub().EXECUTE_REQUEST, req);\n    }); // translate identifier to bibcode, this only sends a request if the identifier is NOT bibcode-like\n\n    var translateIdentifier = function translateIdentifier(id) {\n      var $dd = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var ps = self.getPubSub(); // super naive bibcode confirmation\n\n      if (id.length === 19 && /^\\d{4}[A-z].*\\d[A-z]$/.test(id)) {\n        return $dd.resolve(id).promise();\n      }\n\n      var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_8__[\"default\"]({\n        target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_9__[\"default\"].SEARCH,\n        query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n          q: 'identifier:' + id,\n          fl: 'bibcode',\n          rows: 1\n        }),\n        options: {\n          done: function done(res) {\n            if (res && res.response && res.response.numFound > 0) {\n              $dd.resolve(res.response.docs[0].bibcode);\n            }\n\n            $dd.resolve('null');\n          },\n          fail: function fail() {\n            $dd.resolve('null');\n          }\n        }\n      });\n      ps.publish(ps.EXECUTE_REQUEST, request);\n      return $dd.promise();\n    };\n\n    var showDetailsSubPage = function showDetailsSubPage(_ref3) {\n      var id = _ref3.id,\n          bibcode = _ref3.bibcode,\n          page = _ref3.page,\n          prefix = _ref3.prefix,\n          subView = _ref3.subView;\n      var ps = self.getPubSub();\n      ps.publish(ps.DISPLAY_DOCUMENTS, new js_components_api_query__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n        q: \"identifier:\".concat(bibcode)\n      }));\n      page.setActive(id, subView);\n\n      if (prefix) {\n        // we can grab the current title from storage and just add our prefix from there\n        var title = app.getObject('AppStorage').getDocumentTitle();\n\n        if (title && title.indexOf(prefix) === -1) {\n          this.title = prefix + ' | ' + title;\n        }\n      } else {\n        // get the title from the list of stashed docs, if available\n        var doc = underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].find(self.getBeeHive().getObject('DocStashController').getDocs() || [], {\n          bibcode: bibcode\n        });\n\n        if (doc) {\n          this.title = doc.title && doc.title[0];\n        }\n      }\n    };\n\n    this.set('ShowAbstract', function (id, data) {\n      var _this = this;\n\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      showDetail([id].concat(detailsPageAlwaysVisible), id).then(function (page) {\n        if (!data.bibcode) {\n          return;\n        }\n\n        translateIdentifier(data.bibcode).then(function (bibcode) {\n          showDetailsSubPage.call(_this, {\n            id: id,\n            bibcode: bibcode,\n            page: page\n          });\n          _this.route = data.href;\n          _this.replace = true;\n          defer.resolve();\n        });\n      });\n      return defer.promise();\n    });\n    this.set('ShowCitations', function (id, data) {\n      var _this2 = this;\n\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      showDetail([id].concat(detailsPageAlwaysVisible), id).then(function (page) {\n        if (!data.bibcode) {\n          return;\n        }\n\n        translateIdentifier(data.bibcode).then(function (bibcode) {\n          showDetailsSubPage.call(_this2, {\n            id: id,\n            bibcode: bibcode,\n            page: page,\n            prefix: 'Citations'\n          });\n          _this2.route = data.href;\n          _this2.replace = true;\n          defer.resolve();\n        });\n      });\n      return defer.promise();\n    });\n    this.set('ShowReferences', function (id, data) {\n      var _this3 = this;\n\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      showDetail([id].concat(detailsPageAlwaysVisible), id).then(function (page) {\n        if (!data.bibcode) {\n          return;\n        }\n\n        translateIdentifier(data.bibcode).then(function (bibcode) {\n          showDetailsSubPage.call(_this3, {\n            id: id,\n            bibcode: bibcode,\n            page: page,\n            prefix: 'References'\n          });\n          _this3.route = data.href;\n          _this3.replace = true;\n          defer.resolve();\n        });\n      });\n      return defer.promise();\n    });\n    this.set('ShowCoreads', function (id, data) {\n      var _this4 = this;\n\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      showDetail([id].concat(detailsPageAlwaysVisible), id).then(function (page) {\n        if (!data.bibcode) {\n          return;\n        }\n\n        translateIdentifier(data.bibcode).then(function (bibcode) {\n          showDetailsSubPage.call(_this4, {\n            id: id,\n            bibcode: bibcode,\n            page: page,\n            prefix: 'Co-Reads'\n          });\n          _this4.route = data.href;\n          _this4.replace = true;\n          defer.resolve();\n        });\n      });\n      return defer.promise();\n    });\n    this.set('ShowSimilar', function (id, data) {\n      var _this5 = this;\n\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      showDetail([id].concat(detailsPageAlwaysVisible), id).then(function (page) {\n        if (!data.bibcode) {\n          return;\n        }\n\n        translateIdentifier(data.bibcode).then(function (bibcode) {\n          showDetailsSubPage.call(_this5, {\n            id: id,\n            bibcode: bibcode,\n            page: page,\n            prefix: 'Similar Papers'\n          });\n          _this5.route = data.href;\n          _this5.replace = true;\n          defer.resolve();\n        });\n      });\n      return defer.promise();\n    });\n    this.set('ShowToc', function (id, data) {\n      var _this6 = this;\n\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      showDetail([id].concat(detailsPageAlwaysVisible), id).then(function (page) {\n        if (!data.bibcode) {\n          return;\n        }\n\n        translateIdentifier(data.bibcode).then(function (bibcode) {\n          showDetailsSubPage.call(_this6, {\n            id: id,\n            bibcode: bibcode,\n            page: page,\n            prefix: 'Volume Content'\n          });\n          _this6.route = data.href;\n          _this6.replace = true;\n          defer.resolve();\n        });\n      });\n      return defer.promise();\n    });\n    this.set('ShowMetrics', function (id, data) {\n      var _this7 = this;\n\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      showDetail([id].concat(detailsPageAlwaysVisible), id).then(function (page) {\n        if (!data.bibcode) {\n          return;\n        }\n\n        translateIdentifier(data.bibcode).then(function (bibcode) {\n          showDetailsSubPage.call(_this7, {\n            id: id,\n            bibcode: bibcode,\n            page: page,\n            prefix: 'Metrics'\n          });\n          _this7.route = data.href;\n          _this7.replace = true;\n          defer.resolve();\n        });\n      });\n      return defer.promise();\n    });\n    this.set('ShowExportcitation', function (id, data) {\n      var _this8 = this;\n\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred(); // the default subView should be `default`\n\n      var format = data.subView || 'default';\n      app.getObject('MasterPageManager').show('DetailsPage', [id].concat(detailsPageAlwaysVisible)).done(function () {\n        app.getWidget('DetailsPage').done(function (page) {\n          if (!data.bibcode) {\n            return;\n          }\n\n          translateIdentifier(data.bibcode).then(function (bibcode) {\n            self.getPubSub().publish(self.getPubSub().DISPLAY_DOCUMENTS, new js_components_api_query__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n              q: 'identifier:' + bibcode\n            }));\n\n            if (bibcode === 'null') {\n              return page.setActive(null);\n            } // guarantees the bibcode is set on the widget\n\n\n            page.widgets[id].ingestBroadcastedPayload(bibcode);\n            page.setActive(id, format);\n            _this8.route = data.href;\n            _this8.replace = true;\n            defer.resolve();\n          });\n        });\n      });\n      return defer.promise();\n    });\n    this.set('ShowGraphics', function (id, data) {\n      var _this9 = this;\n\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      showDetail([id].concat(detailsPageAlwaysVisible), id).then(function (page) {\n        if (!data.bibcode) {\n          return;\n        }\n\n        translateIdentifier(data.bibcode).then(function (bibcode) {\n          showDetailsSubPage.call(_this9, {\n            bibcode: bibcode,\n            page: page,\n            id: id,\n            prefix: 'Graphics'\n          });\n          _this9.route = data.href;\n          _this9.replace = true;\n          defer.resolve();\n        });\n      });\n      return defer.promise();\n    });\n    this.set('show-author-affiliation-tool', function (id, options) {\n      var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred(),\n          that = this;\n      var q = app.getObject('AppStorage').getCurrentQuery();\n      app.getObject('MasterPageManager').show('SearchPage', ['AuthorAffiliationTool'].concat(searchPageAlwaysVisible.slice(1))).done(function () {\n        publishFeedback({\n          code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__[\"default\"].CODES.MAKE_SPACE\n        });\n        app.getWidget('AuthorAffiliationTool').done(function (w) {\n          if (options && options.onlySelected) {\n            var selected = app.getObject('AppStorage').getSelectedPapers();\n            w.renderWidgetForListOfBibcodes(selected);\n          } else {\n            w.renderWidgetForCurrentQuery({\n              currentQuery: q\n            });\n          }\n\n          that.route = '#search/' + queryUpdater.clean(q).url();\n          defer.resolve();\n        });\n      });\n      return defer.promise();\n    }); // ---- react components ----\n\n    var createReactPage = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(id) {\n        var pm, widget;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return app._getWidget('ReactPageManager');\n\n              case 2:\n                pm = _context2.sent;\n                _context2.next = 5;\n                return app._getWidget(id);\n\n              case 5:\n                widget = _context2.sent;\n                pm.widgets[id] = widget.render();\n                pm.view = pm.createView({\n                  widgets: _defineProperty({}, id, pm.widgets[id])\n                });\n                _context2.next = 10;\n                return app.getObject('MasterPageManager').show('ReactPageManager', [id]);\n\n              case 10:\n                return _context2.abrupt(\"return\", widget);\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function createReactPage(_x2) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    this.set('ShowFeedback', /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(id, _ref5) {\n        var subview, bibcode, widget, form;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                subview = _ref5.subview, bibcode = _ref5.bibcode;\n                _context3.next = 3;\n                return createReactPage('ShowFeedback');\n\n              case 3:\n                widget = _context3.sent;\n                react_redux__WEBPACK_IMPORTED_MODULE_13___default().batch(function () {\n                  widget.dispatch({\n                    type: 'SET_FORM',\n                    payload: subview\n                  });\n                  widget.dispatch({\n                    type: 'SET_BIBCODE',\n                    payload: bibcode\n                  });\n                });\n                form = widget.getState().main.form;\n                publishPageChange(\"feedback-\".concat(form));\n                this.title = 'Feedback';\n\n              case 8:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function (_x3, _x4) {\n        return _ref6.apply(this, arguments);\n      };\n    }());\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend(NavigatorService.prototype, js_mixins_api_access__WEBPACK_IMPORTED_MODULE_12__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (NavigatorService);\n\n//# sourceURL=webpack://bumblebee/./src/js/apps/discovery/navigator.js?");

/***/ }),

/***/ "./src/js/apps/discovery/router.js":
/*!*****************************************!*\
  !*** ./src/js/apps/discovery/router.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var js_mixins_api_access__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/mixins/api_access */ \"./src/js/mixins/api_access.js\");\n/* harmony import */ var js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js/components/api_query_updater */ \"./src/js/components/api_query_updater.js\");\n\n\n\n\n\n\n\n\n\n\nvar Router = backbone__WEBPACK_IMPORTED_MODULE_2___default().Router.extend({\n  initialize: function initialize(options) {\n    options = options || {};\n    this.queryUpdater = new js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_9__[\"default\"]('Router');\n  },\n  execute: function execute(callback, args) {\n    // the routes assume the query params are the first arg, so make sure it isn't undefined\n    var argsToPass = args.filter(function (a) {\n      return a !== undefined;\n    });\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isFunction(callback)) {\n      callback.apply(this, argsToPass);\n    }\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n\n    if (!this.hasPubSub()) {\n      throw new Error('Ooops! Who configured this #@$%! There is no PubSub service!');\n    }\n  },\n\n  /*\n   * if you don't want the navigator to duplicate the route in history,\n   * use this function instead of pubsub.publish(pubsub.NAVIGATE ...)\n   * */\n  routerNavigate: function routerNavigate(route, options) {\n    var options = options || {};\n    this.getPubSub().publish(this.getPubSub().NAVIGATE, route, options);\n  },\n  routes: {\n    '/': 'index',\n    '': 'index',\n    'classic-form(/)': 'classicForm',\n    'paper-form(/)': 'paperForm',\n    'index/(:query)': 'index',\n    'search/(:query)(/)(:widgetName)': 'search',\n    'search(/)(?:query)': 'search',\n    'execute-query/(:query)': 'executeQuery',\n    'feedback/(:subview)': 'feedbackPage',\n    'abs/*path': 'view',\n\n    /*\n     * user endpoints require user to be logged in, either\n     * to orcid or to ads\n     * */\n    'user/orcid*(:subView)': 'orcidPage',\n    'user/account(/)(:subView)': 'authenticationPage',\n    'user/account/verify/(:subView)/(:token)': 'routeToVerifyPage',\n    'user/settings(/)(:subView)(/)': 'settingsPage',\n    'user/libraries(/)(:id)(/)(:subView)(/)(:subData)(/)': 'librariesPage',\n    'user/home(/)': 'homePage',\n\n    /* end user routes */\n    'orcid-instructions(/)': 'orcidInstructions',\n    'public-libraries/(:id)(/)': 'publicLibraryPage',\n    '*invalidRoute': 'noPageFound'\n  },\n  index: function index(query) {\n    this.routerNavigate('index-page');\n  },\n  classicForm: function classicForm() {\n    var query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    this.routerNavigate('ClassicSearchForm', {\n      query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_3__[\"default\"]().load(query)\n    });\n  },\n  paperForm: function paperForm() {\n    this.routerNavigate('PaperSearchForm');\n  },\n  feedbackPage: function feedbackPage(subview) {\n    var query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var bibcode = '';\n\n    try {\n      // if necessary encode ampersands present in the bibcode\n      query = query.replace('&', encodeURIComponent('&'));\n      var params = new URLSearchParams(query);\n      bibcode = params.get('bibcode');\n    } catch (e) {\n      bibcode = '';\n    }\n\n    this.routerNavigate(\"ShowFeedback\", {\n      subview: subview,\n      href: \"#feedback/\".concat(subview),\n      bibcode: bibcode\n    });\n  },\n  search: function search(query, widgetName) {\n    if (query) {\n      try {\n        var q = new js_components_api_query__WEBPACK_IMPORTED_MODULE_3__[\"default\"]().load(query);\n        this.routerNavigate('search-page', {\n          q: q,\n          page: widgetName && 'show-' + widgetName,\n          replace: true\n        });\n      } catch (e) {\n        console.error('Error parsing query from a string: ', query, e);\n        this.getPubSub().publish(this.getPubSub().NAVIGATE, 'index-page');\n        this.getPubSub().publish(this.getPubSub().BIG_FIRE, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n          code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_5__[\"default\"].CODES.CANNOT_ROUTE,\n          reason: 'Cannot parse query',\n          query: query\n        }));\n        return this.getPubSub().publish(this.getPubSub().ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n          code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_5__[\"default\"].CODES.ALERT,\n          msg: 'unable parse query',\n          type: 'danger',\n          modal: true\n        }));\n      }\n    } else {\n      this.getPubSub().publish(this.getPubSub().NAVIGATE, 'index-page', {\n        replace: true\n      });\n    }\n  },\n  executeQuery: function executeQuery(queryId) {\n    this.getPubSub().publish(this.getPubSub().NAVIGATE, 'execute-query', queryId);\n  },\n  view: function view(path) {\n    if (!path) {\n      return this.routerNavigate('404');\n    } // break apart the path\n\n\n    var parts = path.split('/'); // check for a subpage\n\n    var subPage;\n    var subPageRegex = /^(abstract|citations|references|coreads|similar|toc|graphics|metrics|exportcitation)$/;\n\n    if (parts[parts.length - 1].match(subPageRegex)) {\n      subPage = parts.pop();\n    } // take the rest and combine into the identifier\n\n\n    var id = parts.join('/');\n    var navigateString, href;\n\n    if (!subPage) {\n      navigateString = 'ShowAbstract';\n      href = '#abs/' + encodeURIComponent(id) + '/abstract';\n    } else {\n      navigateString = 'Show' + subPage[0].toUpperCase() + subPage.slice(1);\n      href = '#abs/' + encodeURIComponent(id) + '/' + subPage;\n    }\n\n    this.routerNavigate(navigateString, {\n      href: href,\n      bibcode: id\n    });\n  },\n  routeToVerifyPage: function routeToVerifyPage(subView, token) {\n    this.getPubSub().publish(this.getPubSub().NAVIGATE, 'user-action', {\n      subView: subView,\n      token: token\n    });\n  },\n  orcidPage: function orcidPage() {\n    this.getPubSub().publish(this.getPubSub().NAVIGATE, 'orcid-page');\n  },\n  orcidInstructions: function orcidInstructions() {\n    this.getPubSub().publish(this.getPubSub().NAVIGATE, 'orcid-instructions');\n  },\n  authenticationPage: function authenticationPage(subView) {\n    // possible subViews: \"login\", \"register\", \"reset-password\"\n    if (subView && !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contains(['login', 'register', 'reset-password-1', 'reset-password-2', 'resend-verification-email'], subView)) {\n      throw new Error(\"that isn't a subview that the authentication page knows about\");\n    }\n\n    this.routerNavigate('authentication-page', {\n      subView: subView\n    });\n  },\n  settingsPage: function settingsPage(subView) {\n    // possible subViews: \"token\", \"password\", \"email\", \"preferences\"\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contains(['token', 'password', 'email', 'delete'], subView)) {\n      this.routerNavigate('UserSettings', {\n        subView: subView\n      });\n    } else if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contains(['librarylink', 'orcid', 'application', 'export'], subView)) {\n      // show preferences if no subview provided\n      this.routerNavigate('UserPreferences', {\n        subView: subView\n      });\n    } else if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contains(['libraryimport'], subView)) {\n      this.routerNavigate('LibraryImport');\n    } else if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contains(['myads'], subView)) {\n      this.routerNavigate('MyAdsDashboard');\n    } else {\n      // just default to showing the library link page for now\n      this.routerNavigate('UserPreferences', {\n        subView: undefined\n      });\n    }\n  },\n  librariesPage: function librariesPage(id, subView, subData) {\n    if (id) {\n      if (id === 'actions') {\n        return this.routerNavigate('LibraryActionsWidget', 'libraries');\n      } // individual libraries view\n\n\n      var subView = subView || 'library';\n\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contains(['library', 'admin'], subView)) {\n        this.routerNavigate('IndividualLibraryWidget', {\n          subView: subView,\n          id: id\n        });\n      } else if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contains(['export', 'metrics', 'visualization'], subView)) {\n        subView = 'library-' + subView;\n\n        if (subView == 'library-export') {\n          this.routerNavigate(subView, {\n            subView: subData || 'bibtex',\n            id: id\n          });\n        } else if (subView == 'library-metrics') {\n          this.routerNavigate(subView, {\n            id: id\n          });\n        }\n      } else {\n        throw new Error('did not recognize subview for library view');\n      }\n    } else {\n      // main libraries view\n      this.routerNavigate('AllLibrariesWidget', 'libraries');\n    }\n  },\n  publicLibraryPage: function publicLibraryPage(id) {\n    // main libraries view\n    this.getPubSub().publish(this.getPubSub().NAVIGATE, 'IndividualLibraryWidget', {\n      id: id,\n      publicView: true,\n      subView: 'library'\n    });\n  },\n  homePage: function homePage(subView) {\n    this.routerNavigate('home-page', {\n      subView: subView\n    });\n  },\n  noPageFound: function noPageFound() {\n    this.routerNavigate('404');\n  },\n  _extractParameters: function _extractParameters(route, fragment) {\n    return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(route.exec(fragment).slice(1), function (param) {\n      // do not decode api queries\n      if (/q\\=/.test(param)) {\n        return param;\n      }\n\n      return param ? decodeURIComponent(param) : param;\n    });\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(Router.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_4__[\"default\"].BeeHive, js_mixins_api_access__WEBPACK_IMPORTED_MODULE_8__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Router);\n\n//# sourceURL=webpack://bumblebee/./src/js/apps/discovery/router.js?");

/***/ }),

/***/ "./src/js/apps/discovery/templates/orcid-modal-template.html":
/*!*******************************************************************!*\
  !*** ./src/js/apps/discovery/templates/orcid-modal-template.html ***!
  \*******************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"\\n    <p>\\n        If you <strong>wish for your ORCID claims to be accessible in the ADS,</strong> please first\\n        <a href=\\\"#user/settings/orcid\\\">fill out this brief form. </a>\\n    </p>\\n\\n    <p>\\n        After you have completed the form, you can immediately begin claiming papers.\\n    </p>\\n\\n\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \"\\n    <p>\\n        If you <strong>want your ORCID claims to be accessible in the ADS,</strong>\\n        please sign in to ADS or create an account and provide us with your permission to\\n        make your claims public, along with a few other key pieces of information.\\n\\n    </p>\\n    <p>\\n        <a href=\\\"#user/account/login\\\" class=\\\"btn btn-primary\\\">log in to ADS </a>\\n        or\\n        <a href=\\\"#user/account/register\\\" class=\\\"btn btn-primary\\\">create a new account</a>\\n\\n    </p>\\n    <p>\\n        After you are signed in to your account, go to the \\\"User Preferences\\\" page,\\n        click on the \\\"ORCID Settings\\\" tab, and fill in the brief form.\\n    </p>\\n\\n\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"adsLoggedIn\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":0},\"end\":{\"line\":35,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"\\n<p>\\n    <b>If you don't care about your information being searchable in the ADS, just close this message and continue.</b>\\n</p>\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/apps/discovery/templates/orcid-modal-template.html?");

/***/ }),

/***/ "./src/js/bugutils/diagnostics.js":
/*!****************************************!*\
  !*** ./src/js/bugutils/diagnostics.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_response__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_response */ \"./src/js/components/api_response.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var sprintf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! sprintf */ \"./src/libs/sprintf.js\");\n/* harmony import */ var sprintf__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(sprintf__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/**\n * Set of utilities for debugging BBB and Api in general\n *\n * To compare two Api endpoints (but you must have access to the solr instance):\n *\n *    d = bbb.getController('Diagnostics');u1='http://54.174.175.209:8983';u2='http://54.173.87.140:8983'\n *    d.compareTwoSearchInstances(u1,u2).done(d.printComparison)\n */\n\n\n\n\n\n\n\n\n\nvar Diagnostics = js_components_generic_module__WEBPACK_IMPORTED_MODULE_6__[\"default\"].extend({\n  activate: function activate(beehive, app) {\n    this.setApp(app);\n    this.setBeeHive(beehive);\n  },\n  getFirstDoc: function getFirstDoc(queryString, options) {\n    var opts = {\n      query: {\n        q: queryString,\n        fl: 'title,abstract,bibcode,id,author'\n      },\n      target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_8__[\"default\"].SEARCH\n    };\n\n    if (options) {\n      underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(opts, options);\n    }\n\n    var promise = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n    this.apiRequest(opts).done(function (res) {\n      promise.resolve(res.response.docs[0]);\n    });\n    return promise.promise();\n  },\n\n  /**\n   * Helper methods, you can pass in json structure to make api request\n   *\n   * @param options\n   *    {\n   *      target: 'search/query',\n   *      query: {'q': 'title:foo'}\n   *    }\n   * @returns Deferred\n   */\n  apiRequest: function apiRequest(options, reqOptions) {\n    var app = this.getApp();\n    var api = app.getService('Api');\n    options = options || {};\n    if (!options.query) throw Error('You must pass in \"query\"');\n    if (!(options.query instanceof js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"])) options.query = new js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"](options.query);\n    var r = new js_components_api_request__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n      target: options.target || js_components_api_targets__WEBPACK_IMPORTED_MODULE_8__[\"default\"].SEARCH,\n      query: options.query\n    });\n    return api.request(r, reqOptions);\n  },\n\n  /**\n   * Makes $.ajax() request adding Authorization header\n   * usage:\n   *  disc.ajax({'foo': 'bar'}).done(function(data) {.....})\n   *\n   * @param options\n   * @returns {*}\n   */\n  ajax: function ajax(options) {\n    var app = this.getApp();\n    var api = app.getService('Api');\n    options.headers = options.header || {};\n    options.headers.Authorization = api.access_token;\n    return jquery__WEBPACK_IMPORTED_MODULE_0___default().ajax(options);\n  },\n\n  /**\n   * Makes $.ajax() solr to SOLR, useful for cross-site\n   * requests when you have access to the real solr\n   *\n   * @param options\n   */\n  jsonp: function jsonp(options, jsonpParameter) {\n    options.dataType = 'jsonp';\n\n    options.beforeSend = function (promise, xhr) {\n      var parts = xhr.url.split('&');\n\n      underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].each(parts, function (p) {\n        if (p.startsWith('callback=')) {\n          xhr.url += '&' + (jsonpParameter || 'json.wrf') + '=' + p.replace('callback=', ''); // jQuery generates a random callback, we'll pass it to solr\n        }\n      });\n    };\n\n    return this.ajax(options);\n  },\n  printComparison: function printComparison(result) {\n    var res = [];\n    var format = '%40s %40s %40s %10s';\n    res.push(sprintf__WEBPACK_IMPORTED_MODULE_7___default().sprintf(format, 'field', result.first, result.second, 'diff'));\n    res.push('------------------------------------------------------------------------------------------------------------------------------------');\n\n    for (var f in result.fields) {\n      var x = result.fields[f];\n      res.push(sprintf__WEBPACK_IMPORTED_MODULE_7___default().sprintf(format, f, x.first, x.second, x.diff));\n    }\n\n    console.log(res.join('\\n'));\n    return res;\n  },\n  compareTwoSearchInstances: function compareTwoSearchInstances(url1, url2, listOfFields, listOfFields2) {\n    var self = this;\n    var result = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n\n    if (!listOfFields || !listOfFields2) {\n      var d1 = this.getListOfFields(url1);\n      var d2 = this.getListOfFields(url2);\n      jquery__WEBPACK_IMPORTED_MODULE_0___default().when(d1, d2).done(function (v1, v2) {\n        self.compareTwoSearchInstances(url1, url2, v1, v2).done(function (res) {\n          result.resolve(res);\n        });\n      });\n    } else {\n      var c1 = this.countDocsInFields(url1, listOfFields);\n      var c2 = this.countDocsInFields(url2, listOfFields2);\n      jquery__WEBPACK_IMPORTED_MODULE_0___default().when(c1, c2).done(function (v1, v2) {\n        var fV1 = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].keys(v1.fields);\n\n        var fV2 = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].keys(v2.fields);\n\n        var fAll = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].unique(fV1.concat(fV2)).sort();\n\n        var res = {};\n\n        for (var k in fAll) {\n          k = fAll[k];\n          var o = v1.fields[k];\n          var n = v2.fields[k];\n          res[k] = {\n            first: o ? o.numFound : '--',\n            second: n ? n.numFound : '--',\n            diff: o && n ? n.numFound - o.numFound : '--'\n          };\n        }\n\n        result.resolve({\n          first: url1,\n          second: url2,\n          fields: res\n        });\n      });\n    }\n\n    return result;\n  },\n  getListOfFields: function getListOfFields(url) {\n    var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n    this.jsonp({\n      url: url + '/admin/luke?numTerms=0&wt=json&indent=true',\n      timeout: 60000\n    }).done(function (data) {\n      var fields = [];\n\n      for (var fname in data.fields) {\n        if (fname.startsWith('_')) continue;\n        fields.push(fname);\n      }\n\n      defer.resolve(fields);\n    });\n    return defer;\n  },\n\n  /**\n   * Get the count of numDocs and numFound for every field in the index\n   * this requires either a list of fields, or it can discovery fields\n   * (if /solr/collection1/admin/luke is available\n   *\n   * @returns {\n   *   index: {data about index},\n   *   fields: {\n   *     name: {'numDocs' : xxxxx, 'numFound': xxxxx}\n   *     }\n   *   }\n   */\n  countDocsInFields: function countDocsInFields(url, listOfFields) {\n    var result = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n    var self = this;\n    var cycle = [];\n    var cycleR = {};\n    var collectedData = {};\n    var finalResult = {\n      fields: collectedData\n    };\n\n    for (var ix in listOfFields) {\n      var fname = listOfFields[ix];\n      var de = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n      var q = '{!lucene}' + fname + ':*';\n      console.log('Getting num docs for: ' + q);\n      var c = self.jsonp({\n        url: url + '/query?q=' + q + '&fl=id&wt=json&indent=true',\n        context: {\n          field: fname,\n          finalResult: finalResult,\n          cycleR: cycleR\n        },\n        timeout: 300000 // 5mins\n\n      }).done(function (data) {\n        this.finalResult.fields[this.field] = {\n          numFound: data.response.numFound\n        };\n        var c = 0;\n        var togo = [];\n\n        for (var x in this.cycleR) {\n          if (this.cycleR[x].state() == 'pending') {\n            // resolved and rejected count as done\n            c += 1;\n            togo.push(x);\n          }\n        }\n\n        console.log(url + ' Got response for: ' + this.field + ' numFound: ' + data.response.numFound + ' requests to go: ' + c + ' ' + (togo.length < 5 ? togo.join(', ') : ''));\n        if (c == 0) result.resolve(this.finalResult);\n      });\n      cycleR[fname] = c;\n      cycle.push(c);\n    } // for some stupid reason this is not working, and i dont know why\n    // var d = $.when.call($.when, cycle)\n    //  .done(function(data) {\n    //    result.resolve(collectedData);\n    //  });\n\n\n    return result;\n  },\n  request: function request(options) {\n    return jquery__WEBPACK_IMPORTED_MODULE_0___default().ajax(options);\n  },\n\n  /**\n   * ==================================================================\n   * TEST CASES; these are to be run manually from the console and only\n   * by those who understand what they are doing ;-)\n   * ==================================================================\n   */\n  testOrcidLogin: function testOrcidLogin() {\n    var oa = this.getApp().getService('OrcidApi');\n    oa.signOut();\n    window.location = oa.config.loginUrl;\n  },\n\n  /**\n   * Upload one document to orcid;\n   * Prerequisite: testOrcidLogin()\n   */\n  testOrcidSendingData: function testOrcidSendingData() {\n    var app = this.getApp();\n    var self = this;\n    this.getFirstDoc('bibcode:1978yCat.1072....0C').done(function (doc) {\n      var oa = app.getService('OrcidApi');\n      oa.addWorks([doc]).done(function (result) {\n        console.log('result:', result, 'expected: {}');\n      });\n    });\n  },\n  printPubSubSubscribers: function printPubSubSubscribers(printAllKeys) {\n    var pubsub = this.getApp().getService('PubSub');\n    var app = this.getApp(); // collect names of all the objects\n\n    var objNames = {};\n    app.triggerMethodOnAll(function (name, opts) {\n      if (this === pubsub) {\n        // pubsub has its own (root) key\n        objNames[pubsub.pubSubKey.getId()] = name;\n      } else if (this.hasPubSub && this.hasPubSub()) {\n        var ps = this.getPubSub();\n\n        if (ps.getCurrentPubSubKey) {\n          if (objNames[ps.getCurrentPubSubKey().getId()]) console.warn('Redefining key that already exists: ' + ps.getCurrentPubSubKey().getId() + ' ' + objNames[ps.getCurrentPubSubKey().getId()]);\n          objNames[ps.getCurrentPubSubKey().getId()] = name;\n        }\n      } else {\n        console.warn('Instance without active PubSub: ' + name, this);\n      }\n    });\n\n    if (printAllKeys) {\n      console.log('Printing list of all issued keys to PubSub');\n\n      underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].each(underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].keys(pubsub._issuedKeys), function (k) {\n        var p;\n        if (pubsub._issuedKeys[k].getId && objNames[pubsub._issuedKeys[k].getId()]) p = objNames[pubsub._issuedKeys[k].getId()];\n        if (p) console.log(k + '(parent:' + p + ') -> ' + objNames[k]);else console.log(k + ' -> ' + objNames[k]);\n      });\n    }\n\n    var stats = {};\n    console.log('Printing active subscribers to PubSub');\n\n    underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].each(pubsub._events, function (val, key, idx) {\n      console.log(key + ' (' + val.length + ')');\n\n      underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].each(val, function (v) {\n        var x = v.ctx.getId ? objNames[v.ctx.getId()] : 'unknown object';\n        console.log('\\t' + x);\n        stats[x] = stats[x] ? stats[x] + 1 : 1;\n\n        if (x == undefined) {\n          if (!stats['undefined keys']) stats['undefined keys'] = [];\n          stats['undefined keys'].push(key + (v.ctx.getId ? v.ctx.getId() : 'X'));\n        }\n      });\n    });\n\n    console.log(JSON.stringify(stats, null, ' '));\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(Diagnostics.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_5__[\"default\"].App, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_5__[\"default\"].BeeHive);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Diagnostics);\n\n//# sourceURL=webpack://bumblebee/./src/js/bugutils/diagnostics.js?");

/***/ }),

/***/ "./src/js/components/alerts.js":
/*!*************************************!*\
  !*** ./src/js/components/alerts.js ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_mixins_hardened__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/mixins/hardened */ \"./src/js/mixins/hardened.js\");\n/**\n * Catalogue of Alerts (these are the messages that get displayed\n * to the user)\n */\n\n\nvar Alerts = {\n  TYPE: {\n    ERROR: 'error',\n    INFO: 'info',\n    WARNING: 'warning',\n    SUCCESS: 'success',\n    DANGER: 'danger'\n  },\n  ACTION: {\n    CALL_PUBSUB: 2,\n    TRIGGER_FEEDBACK: 1\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (Alerts);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/alerts.js?");

/***/ }),

/***/ "./src/js/components/alerts_mediator.js":
/*!**********************************************!*\
  !*** ./src/js/components/alerts_mediator.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var cache__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! cache */ \"./src/libs/cache.js\");\n/* harmony import */ var cache__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(cache__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_mixins_hardened__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/mixins/hardened */ \"./src/js/mixins/hardened.js\");\n/* harmony import */ var js_components_alerts__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/components/alerts */ \"./src/js/components/alerts.js\");\n/**\n * Service which receives alerts, it can be used by both widgets and\n * trusted components. Its purpose is to communicate to users important\n * messages.\n */\n\n\n\n\n\n\n\n\nvar AlertsMediator = js_components_generic_module__WEBPACK_IMPORTED_MODULE_3__[\"default\"].extend({\n  initialize: function initialize(options) {\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(this, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pick(options, ['debug', 'widgetName']));\n  },\n\n  /**\n   * This controller does need elevated beehive\n   * and applicaiton\n   *\n   * @param beehive\n   * @param app\n   */\n  activate: function activate(beehive, app) {\n    this.setBeeHive(beehive);\n    this.setApp(app);\n    var pubsub = this.getPubSub();\n    pubsub.subscribe(pubsub.ALERT, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.onAlert, this));\n    pubsub.subscribe(pubsub.NAVIGATE, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.onNavigate, this));\n    this.getWidget().fail(function () {\n      console.error('If you want to use AlertController, you also need to have a Widget capable of displaying the messages (default: AlertsWidget)');\n      pubsub.publish(pubsub.BIG_FIRE, 'Alerts Widget not available');\n    });\n  },\n  onNavigate: function onNavigate(route) {\n    var self = this;\n    var pubSub = this.getPubSub(); // Close any errors produced on the login page on the next page navigation\n\n    if (route === 'authentication-page') {\n      pubSub.subscribeOnce(pubSub.NAVIGATE, function () {\n        var widget = self.getWidget();\n\n        if (widget && widget.closeView) {\n          widget.closeView();\n        }\n      });\n    }\n  },\n  onAlert: function onAlert(apiFeedback, psk) {\n    var self = this;\n    var promise = this.alert(apiFeedback).done(function (result) {\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isFunction(result)) {\n        result();\n        return;\n      } // non-privileged components can reach alerts sending limited\n      // definition of actions; we'll turn those into functions/actions\n\n\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isObject(result) && result.action) {\n        switch (result.action) {\n          case js_components_alerts__WEBPACK_IMPORTED_MODULE_7__[\"default\"].ACTION.TRIGGER_FEEDBACK:\n            self.getPubSub().publish(self.getPubSub().FEEDBACK, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_5__[\"default\"](result.arguments));\n            break;\n\n          case js_components_alerts__WEBPACK_IMPORTED_MODULE_7__[\"default\"].ACTION.CALL_PUBSUB:\n            self.getPubSub().publish(result.signal, result.arguments);\n            break;\n\n          default:\n            throw new Error('Unknown action type:' + result);\n        } // close the widget immediately\n\n\n        if (self._widget && self._widget.closeView) {\n          self._widget.closeView();\n        }\n      }\n    });\n    return promise;\n  },\n  getWidget: function getWidget() {\n    var defer = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();\n    var self = this;\n\n    if (this._widget) {\n      defer.resolve(this._widget);\n    } else {\n      this.getApp()._getWidget(this.widgetName || 'AlertsWidget').done(function (widget) {\n        self._widget = widget;\n        defer.resolve(widget);\n      }).fail(function () {\n        defer.reject();\n      });\n    }\n\n    return defer.promise();\n  },\n  alert: function alert(apiFeedback) {\n    var defer = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();\n    this.getWidget().done(function (w) {\n      if (!w) {\n        console.warn('\"AlertsWidget\" has disappeared, we cant display messages to the user');\n        defer.reject('AlertsWidget has disappeared');\n      } else {\n        // since alerts widget returns a promise that gets\n        // resolved once the widget rendered; we have to\n        // wait little bit more\n        w.alert(apiFeedback).done(function () {\n          defer.resolve.apply(defer, arguments);\n        });\n      }\n    }).fail(function () {\n      defer.reject('AlertsWidget not available');\n    });\n    return defer.promise();\n  },\n  hardenedInterface: {\n    debug: 'state of the alerts',\n    getHardenedInstance: 'allow to create clone of the already hardened instance'\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(AlertsMediator.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_4__[\"default\"].BeeHive, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_4__[\"default\"].App);\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(AlertsMediator.prototype, js_mixins_hardened__WEBPACK_IMPORTED_MODULE_6__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AlertsMediator);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/alerts_mediator.js?");

/***/ }),

/***/ "./src/js/components/analytics.js":
/*!****************************************!*\
  !*** ./src/js/components/analytics.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/*\n * Set of targets\n * each has a set of hooks which coorespond to the event label passed\n * types represents the possible event targets which can be used\n * url is a template which will be passed the incoming data\n */\nvar TARGETS = {\n  resolver: {\n    hooks: ['toc-link-followed', 'abstract-link-followed', 'citations-link-followed', 'associated-link-followed'],\n    types: ['abstract', 'citations', 'references', 'metrics', 'coreads', 'similar', 'graphics', 'associated', 'toc'],\n    url: function url(_ref) {\n      var bibcode = _ref.bibcode,\n          target = _ref.target;\n      return \"link_gateway/\".concat(bibcode, \"/\").concat(target);\n    }\n  }\n};\n/**\n * fire off the xhr request to the url\n *\n * @param {string} url\n * @param {object} data\n */\n\nvar sendEvent = function sendEvent(url) {\n  window.fetch(url, {\n    method: 'GET'\n  }).catch(function (error) {\n    window.getSentry().captureMessage('Failed to send analytics event', {\n      extra: {\n        url: url,\n        error: error.message\n      }\n    });\n  });\n};\n\nvar isValidEvent = function isValidEvent(_ref2) {\n  var label = _ref2.label,\n      target = _ref2.target;\n\n  if (typeof label !== 'string' || typeof target !== 'string') {\n    return false;\n  }\n\n  return TARGETS.resolver.hooks.includes(label) && TARGETS.resolver.types.includes(target);\n};\n/**\n * Go through the targets and fire the event if the label passed\n * matches one of the hooks specified.  Also the data.target must match one\n * of the types listed on the target config\n *\n * @param {string} label - the event label\n * @param {object} data - the event data\n */\n\n\nvar adsLogger = function adsLogger(label, data) {\n  var target = data ? data.target : null;\n  var bibcode = data ? data.bibcode : null;\n\n  if (bibcode !== null && isValidEvent({\n    label: label,\n    target: target\n  })) {\n    sendEvent(data.url ? data.url : TARGETS.resolver.url({\n      bibcode: bibcode,\n      target: target\n    }));\n  }\n};\n\nvar buffer = [];\nvar gaName = window.GoogleAnalyticsObject || 'ga';\n\nvar cleanBuffer = function cleanBuffer() {\n  if (window[gaName]) {\n    for (var i = 0; i < buffer.length; i++) {\n      window[gaName].apply(this, buffer[i]);\n    }\n\n    buffer = [];\n  }\n};\n\nvar CACHE_TIMEOUT = 300;\n/**\n * Simple debouncing mechanism with caching\n * this will store stringified version of the incoming events and provide a way to\n * check if the event has recently been cached.  With a short rolling timer to keep the timeout short to hopefully\n * only target duplicate calls.\n */\n\nvar AnalyticsCacher = /*#__PURE__*/function () {\n  function AnalyticsCacher() {\n    _classCallCheck(this, AnalyticsCacher);\n\n    this.timer = null;\n    this.cache = new Set();\n  }\n\n  _createClass(AnalyticsCacher, [{\n    key: \"stringify\",\n    value: function stringify(args) {\n      return JSON.stringify(args, function (key, value) {\n        // filter out this cache-buster id added by GTM\n        if (key === 'gtm.uniqueEventId') {\n          return undefined;\n        }\n\n        return value;\n      });\n    }\n  }, {\n    key: \"add\",\n    value: function add() {\n      this._resetTimeout();\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return this.cache.add(this.stringify(args));\n    }\n  }, {\n    key: \"has\",\n    value: function has() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return this.cache.has(this.stringify(args));\n    }\n  }, {\n    key: \"_resetTimeout\",\n    value: function _resetTimeout() {\n      clearTimeout(this.timer);\n      this.timer = setTimeout(this._clear.bind(this), CACHE_TIMEOUT);\n    }\n  }, {\n    key: \"_clear\",\n    value: function _clear() {\n      this.cache.clear();\n    }\n  }]);\n\n  return AnalyticsCacher;\n}();\n\nvar cacher = new AnalyticsCacher();\n\nvar Analytics = function Analytics(action, event, type, description) {\n  for (var _len3 = arguments.length, args = new Array(_len3 > 4 ? _len3 - 4 : 0), _key3 = 4; _key3 < _len3; _key3++) {\n    args[_key3 - 4] = arguments[_key3];\n  }\n\n  if (cacher.has(arguments)) {\n    return;\n  }\n\n  cacher.add(arguments);\n  adsLogger.apply(null, Array.prototype.slice.call(arguments, 3)); // if the action is send and the event is event, then we want to send the event to the dataLayer\n\n  if (Array.isArray(window.dataLayer) && action === 'send' && event === 'event') {\n    // some events are 'interaction' or 'error', so add that to the event name\n    window.dataLayer.push({\n      event: \"\".concat(type, \"_\").concat(description),\n      // if the next argument is an object, we'll use that as the data, ignore an extra arguments\n      value1: args[0],\n      value2: args[1],\n      value3: args[2]\n    });\n  } else if (Array.isArray(window.dataLayer) && action === 'send') {\n    window.dataLayer.push({\n      event: event,\n      value1: type,\n      value2: description,\n      value3: args[0]\n    });\n  } else if (Array.isArray(window.dataLayer) && action === 'set') {\n    window.dataLayer.push({\n      event: 'config',\n      value1: event,\n      value2: type,\n      value3: description\n    });\n  }\n};\n/**\n * Get the datalayer for sending events to\n * @returns {*|*[]}\n */\n\n\nAnalytics.getDL = function () {\n  if (window.dataLayer && Array.isArray(window.dataLayer)) {\n    return window.dataLayer;\n  }\n\n  return [];\n};\n/**\n * Push a new object to the datalayer\n * @param {Object} data\n */\n\n\nAnalytics.push = function (data) {\n  if (cacher.has(data)) {\n    return;\n  }\n\n  cacher.add(data);\n  Analytics.getDL().push(data);\n};\n/**\n * Reset the datalayer\n */\n\n\nAnalytics.reset = function () {\n  Analytics.getDL().push(function () {\n    this.reset();\n  });\n};\n/**\n * set a value on the datalayer\n * @param {string} property\n * @param {unknown} value\n */\n\n\nAnalytics.set = function (property, value) {\n  Analytics.getDL().push(function () {\n    this.set(property, value);\n  });\n};\n/**\n * get a value on the datalayer\n * @param {string} property\n */\n\n\nAnalytics.get = function (property) {\n  var value;\n  Analytics.getDL().push(function () {\n    value = this.get(property);\n  });\n  return value;\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Analytics);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/analytics.js?");

/***/ }),

/***/ "./src/js/components/api_feedback.js":
/*!*******************************************!*\
  !*** ./src/js/components/api_feedback.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_mixins_hardened__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/mixins/hardened */ \"./src/js/mixins/hardened.js\");\n\n\n\n\nvar ApiFeedback = function ApiFeedback(options) {\n  underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(this, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].defaults(options || {}, {\n    code: 200,\n    msg: undefined\n  }));\n\n  this.setCode(this.code);\n};\n\nApiFeedback.CODES = {\n  INVALID_PASSWORD: 498,\n  ACCOUNT_NOT_FOUND: 495,\n  // Account not found during signin\n  ALREADY_LOGGED_IN: 493,\n  // Already signed during signup\n  REQUIRES_LOGIN: 491,\n  TOO_MANY_CHARACTERS: 486,\n  BAD_REQUEST: 400,\n  UNAUTHORIZED: 401,\n  NOT_FOUND: 404,\n  INTERNAL_SERVER_ERROR: 500,\n  BAD_GATEWAY: 502,\n  SERVER_ERROR: 503,\n  TOO_MANY_FAILURES: 580,\n  ALL_FINE: 200,\n  KEEP_WAITING: 190,\n  TESTING: 0,\n  // Internal events\n  MAKE_SPACE: -1,\n  UNMAKE_SPACE: -1.1,\n  SEARCH_CYCLE_STARTED: -2,\n  SEARCH_CYCLE_FAILED_TO_START: -3,\n  SEARCH_CYCLE_PROGRESS: -4,\n  SEARCH_CYCLE_STOP_MONITORING: -5,\n  SEARCH_CYCLE_FINISHED: -6,\n  QUERY_ASSISTANT: -7,\n  ALERT: -8,\n  CANNOT_ROUTE: -9,\n  API_REQUEST_ERROR: -10,\n  BIBCODE_DATA_REQUESTED: -11\n};\nvar _codes = {};\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pairs(ApiFeedback.CODES), function (p) {\n  _codes[p[1]] = p[0];\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(ApiFeedback.prototype, {\n  hardenedInterface: {\n    code: 'integer value of the code',\n    msg: 'string message',\n    toJSON: 'for cloning',\n    getApiRequest: 'to get the original request',\n    getSenderKey: 'retrieve the senders key'\n  },\n  initialize: function initialize() {},\n  toJSON: function toJSON() {\n    return {\n      code: this.code,\n      msg: this.msg\n    };\n  },\n  setCode: function setCode(c) {\n    if (!_codes[c]) {\n      throw new Error('This code is not in the list ApiCodes - please extend js/components/api_feedback first:', this.code);\n    }\n\n    this.code = c;\n  },\n  setApiRequest: function setApiRequest(apiRequest) {\n    this.req = apiRequest;\n  },\n  getApiRequest: function getApiRequest() {\n    return this.req;\n  },\n  setMsg: function setMsg(msg) {\n    this.msg = msg;\n  },\n  getSenderKey: function getSenderKey() {\n    return this.senderKey;\n  },\n  setSenderKey: function setSenderKey(key) {\n    this.senderKey = key;\n  }\n}, js_mixins_hardened__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n\nApiFeedback.extend = (backbone__WEBPACK_IMPORTED_MODULE_1___default().Model).extend;\n/* harmony default export */ __webpack_exports__[\"default\"] = (ApiFeedback);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/api_feedback.js?");

/***/ }),

/***/ "./src/js/components/api_query.js":
/*!****************************************!*\
  !*** ./src/js/components/api_query.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_solr_params__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/solr_params */ \"./src/js/components/solr_params.js\");\n/* harmony import */ var js_components_facade__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/facade */ \"./src/js/components/facade.js\");\n/* harmony import */ var js_components_facade__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(js_components_facade__WEBPACK_IMPORTED_MODULE_3__);\n/*\n A facade: api query exposing only the set of functions that we allow. This is\n the module that you want to load in the application (do not load the concrete\n implementaions, such as solr_params !)\n\n Put in your config:\n map: {\n 'your/module': {\n 'api_query_impl': 'js/components/specific_impl_of_the_api_query'\n }\n },\n\n */\n\n\n\n\nvar hardenedInterface = {\n  add: 'add values',\n  set: 'set (replace existing)',\n  get: 'get values',\n  has: 'has a key',\n  hasVal: 'more specific `has` using _.isEmpty',\n  url: 'url string of the params',\n  load: 'loads query as a string',\n  clear: 'clears all values',\n  unset: 'removes a key',\n  toJSON: 'values back as JSON object',\n  clone: 'make a copy',\n  isLocked: true,\n  lock: true,\n  unlock: true,\n  pairs: 'get all values as pairs',\n  keys: 'as keys',\n  values: 'only values',\n  hasChanged: 'whether this object has modification (since its creation)',\n  previousAttributes: 'get all changed attributes',\n  previous: 'previous values for a given attribute'\n};\n\nvar ApiQuery = function ApiQuery(data, options) {\n  // Facade pattern, we want to expose only limited API\n  // despite the fact that the underlying instance has\n  // all power of the Backbone.Model\n  if (data instanceof js_components_solr_params__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n    this.innerQuery = new (js_components_facade__WEBPACK_IMPORTED_MODULE_3___default())(hardenedInterface, data);\n  } else {\n    this.innerQuery = new (js_components_facade__WEBPACK_IMPORTED_MODULE_3___default())(hardenedInterface, new js_components_solr_params__WEBPACK_IMPORTED_MODULE_2__[\"default\"](data, options));\n  }\n};\n\nvar toInsert = {};\n\nunderscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].each(underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].keys(hardenedInterface), function (element, index, list) {\n  toInsert[element] = function () {\n    return this.innerQuery[element].apply(this.innerQuery, arguments);\n  };\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(ApiQuery.prototype, toInsert, {\n  clone: function clone() {\n    var clone = this.innerQuery.clone.apply(this.innerQuery, arguments);\n    return new ApiQuery(clone);\n  },\n  load: function load() {\n    var clone = this.innerQuery.load.apply(this.innerQuery, arguments);\n    return new ApiQuery(clone);\n  }\n});\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ApiQuery);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/api_query.js?");

/***/ }),

/***/ "./src/js/components/api_query_updater.js":
/*!************************************************!*\
  !*** ./src/js/components/api_query_updater.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/**\n * Created by rchyla on 5/24/14.\n *\n * Set of utilities for manipulating ApiQuery object. These are mainly\n * useful for widgets that often do the same operations with the\n * query.\n *\n * The object must be initialized with an 'identifier' -- this identifier\n * will represent a context; so we'll be touching all elements that\n * belong to the context\n *\n * TODO: need to distinguish globalOperator from 'operator' inside clauses\n * TODO: the 'globalOperator' joins clauses; 'operator' joins elements of the\n * TODO: clauses\n *\n */\n\n\n\nvar ApiQueryUpdater = function ApiQueryUpdater(contextIdentifier, options) {\n  if (!contextIdentifier || !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(contextIdentifier)) {\n    throw new Error('You must initialize the ApiQueryUpdater with a context (which is a string)');\n  }\n\n  this.context = contextIdentifier;\n  this.defaultOperator = ' ';\n  this.operators = [' ', 'AND', 'OR', 'NOT', 'NEAR'];\n  this.defaultMode = 'limit';\n  this.operationModes = ['limit', 'exclude', 'expand', 'replace', 'remove'];\n  this.impossibleString = \"\\uFFFC\\uFFFC\\uFFFC\";\n\n  underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(this, options);\n};\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(ApiQueryUpdater.prototype, {\n  /**\n   * Modifies the query - it will search for a string inside the query (using previously\n   * saved state) and update the query 'parameter'\n   *\n   * @param field\n   *      this is the name of the parameter we are changing inside apiQeury\n   * @param apiQuery\n   *      the apiQuery object we are updating\n   * @param queryCondition\n   *      String|[String] - new conditions to set\n   * @param operator\n   *      String: this will serve as concatenator for the conditions\n   */\n  updateQuery: function updateQuery(apiQuery, field, mode, queryCondition, options) {\n    options = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].defaults({}, options, {\n      prefix: '__'\n    });\n\n    if (!field || !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(field)) {\n      throw new Error('You must tell us what parameter to update in the ApiQuery');\n    } // globalOperator = this._sanitizeOperator(globalOperator);\n    // local name\n\n\n    var n = this._n(field, options.prefix); // create copy of the field\n\n\n    var q = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(apiQuery.get(field));\n\n    var oldConditionAsString;\n    var newConditionAsString;\n    var newConditions;\n    var existingConditions; // first check if we have any existing conditions\n\n    existingConditions = this._getExistingVals(apiQuery, n);\n    queryCondition = this._sanitizeConditionAsArray(queryCondition);\n    mode = this._sanitizeMode(mode);\n    var operator;\n\n    if (mode == 'limit') {\n      operator = 'AND';\n    } else if (mode == 'exclude') {\n      operator = 'NOT';\n    } else if (mode == 'expand') {\n      operator = 'OR';\n    } else if (mode == 'replace') {\n      this._closeExistingVals(apiQuery, this._n(field, options.prefix));\n\n      apiQuery.set(this._n(field, options.prefix), ['AND', queryCondition[0]]);\n      return apiQuery.set(field, queryCondition[0]);\n    } else if (mode == 'remove') {\n      operator = existingConditions[0];\n    } else {\n      throw new Error('Unsupported mode/operator:', mode);\n    }\n\n    if (!apiQuery.has(field)) {\n      var conditions = [operator].concat(queryCondition);\n      apiQuery.set(field, this._buildQueryFromConditions(conditions));\n      apiQuery.set(this._n(field, options.prefix), conditions);\n      return;\n    }\n\n    if (existingConditions) {\n      // if the operators differ, it means we cannot safely update the query\n      // we must treat it as a new query\n      if (existingConditions[0] !== operator) {\n        this._closeExistingVals(apiQuery, n);\n\n        return this.updateQuery(apiQuery, field, mode, queryCondition);\n      }\n\n      oldConditionAsString = this._buildQueryFromConditions(existingConditions);\n    } else {\n      existingConditions = [operator]; // first value is always operator\n\n      if (q.length == 1) {\n        // we got a string, but that string could be a whole phrase\n        if (q[0].indexOf(' ') == -1) {\n          // simple string\n          oldConditionAsString = q[0];\n          existingConditions.push(q[0]);\n        } else {\n          oldConditionAsString = q[0];\n          var sillyTest = q[0].toLowerCase();\n\n          if (sillyTest.indexOf(' and ') > -1 || sillyTest.indexOf(' or ') > -1 || sillyTest.indexOf(' not ') > -1 || sillyTest.indexOf(' near') > -1 || sillyTest.indexOf('(') > 2) {\n            existingConditions.push('(' + q[0] + ')'); // enclose the expression in brackets, just to be safe\n          } else {\n            existingConditions.push(q[0]);\n          }\n        }\n      } else {\n        oldConditionAsString = this.impossibleString;\n      }\n    } // 'limit' means that the broader query will become 'narrower'\n    // by gaining more AND'ed 'conditions'\n    // 'expand' means that the query is becoming broader by gaining\n    // more conditions (these are OR'ed)\n\n\n    if (mode == 'limit' || mode == 'expand') {\n      // join the old and the new conditoins (remove the duplicates)\n      // we are basically trying to update the existing query\n      // by adding more conditions into the same clause\n      newConditions = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].union(existingConditions, queryCondition);\n      newConditionAsString = this._buildQueryFromConditions(newConditions);\n\n      var testq = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(q); // try to find the pre-condition and replace it with a new value\n\n\n      if (this._modifyArrayReplaceString(testq, oldConditionAsString, newConditionAsString)) {\n        apiQuery.set(field, testq); // success\n        // save the values inside the query (so that we can use them if we are called next time)\n\n        apiQuery.set(n, newConditions);\n        return;\n      }\n    } // 'exclude' means that we are ADDING more conditions to the query; the query\n    // was broader; not it will explicitly 'exclude' some documents; again - there\n    // can also be 'exclude' conditions; so if possible, we'll enlarge their number\n\n\n    if (mode == 'exclude') {\n      var modifiedExisting = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(existingConditions);\n\n      modifiedExisting[0] = 'OR';\n      oldConditionAsString = ' NOT ' + this._buildQueryFromConditions(modifiedExisting);\n      newConditions = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].union(existingConditions, queryCondition);\n\n      var modifiedConditions = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(newConditions);\n\n      modifiedConditions[0] = 'OR';\n      newConditionAsString = ' NOT ' + this._buildQueryFromConditions(modifiedConditions);\n\n      var testq = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(q); // try to find the pre-condition and replace it with a new value\n\n\n      if (this._modifyArrayReplaceString(testq, oldConditionAsString, newConditionAsString)) {\n        apiQuery.set(field, testq); // success\n        // save the values inside the query (so that we can use them if we are called next time)\n\n        apiQuery.set(n, newConditions);\n        return;\n      }\n    } else if (mode == 'remove') {\n      newConditions = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].difference(existingConditions, queryCondition);\n      newConditionAsString = this._buildQueryFromConditions(newConditions); // we'll be deleting\n\n      var testq = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(q); // try to find the pre-condition and replace it with a new value\n\n\n      if (this._modifyArrayReplaceString(testq, oldConditionAsString, newConditionAsString)) {\n        apiQuery.set(field, testq); // success\n        // save the values inside the query (so that we can use them if we are called next time)\n\n        apiQuery.set(n, newConditions);\n        return;\n      }\n    } // we didn't find an old query that could be updated, so this means that we have\n    // to add a new logical condition to the existing query string.\n\n\n    if (mode == 'limit') {\n      newConditions = this._modifyArrayAddString(q, queryCondition, 'AND');\n    } else if (mode == 'exclude') {\n      newConditions = this._modifyArrayAddString(q, queryCondition, 'NOT');\n    } else if (mode == 'expand') {\n      newConditions = this._modifyArrayAddString(q, queryCondition, 'OR');\n    }\n\n    apiQuery.set(n, newConditions);\n    apiQuery.set(field, q);\n  },\n\n  /**\n   * Tells whether the string needs escaping (it ignores empty space)\n   *\n   * @param value\n   */\n  needsEscape: function needsEscape(s) {\n    var sb = [];\n    var c;\n\n    for (var i = 0; i < s.length; i++) {\n      c = s[i]; // These characters are part of the query syntax and must be escaped\n\n      if (c == '\\\\' || c == '+' || c == '-' || c == '!' || c == '(' || c == ')' || c == ':' || c == '^' || c == '[' || c == ']' || c == '\"' || c == '{' || c == '}' || c == '~' || c == '*' || c == '?' || c == '|' || c == '&' || c == '/') {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /**\n   * Escapes special characters (but not whitespace)\n   *\n   * @param value\n   */\n  escape: function escape(s) {\n    var sb = [];\n    var c;\n\n    for (var i = 0; i < s.length; i++) {\n      c = s[i]; // These characters are part of the query syntax and must be escaped\n\n      if (c == '\\\\' || c == '+' || c == '-' || c == '!' || c == '(' || c == ')' || c == ':' || c == '^' || c == '[' || c == ']' || c == '\"' || c == '{' || c == '}' || c == '~' || c == '*' || c == '?' || c == '|' || c == '&' || c == '/') {\n        sb.push('\\\\');\n      }\n\n      sb.push(c);\n    }\n\n    return sb.join('');\n  },\n  escapeInclWhitespace: function escapeInclWhitespace(s) {\n    var sb = [];\n    var c;\n\n    for (var i = 0; i < s.length; i++) {\n      c = s[i]; // These characters are part of the query syntax and must be escaped\n\n      if (c == '\\\\' || c == '+' || c == '-' || c == '!' || c == '(' || c == ')' || c == ':' || c == '^' || c == '[' || c == ']' || c == '\"' || c == '{' || c == '}' || c == '~' || c == '*' || c == '?' || c == '|' || c == '&' || c == '/' || c == ' ' || c == '\\t') {\n        sb.push('\\\\');\n      }\n\n      sb.push(c);\n    }\n\n    return sb.join('');\n  },\n\n  /**\n   * Wraps string between quotes - and escapes any quotes if present\n   * @param s\n   * @returns {string}\n   */\n  quoteIfNecessary: function quoteIfNecessary(s, quoteChar, quoteCharEnd) {\n    return this.quote(s, quoteChar, quoteCharEnd, true);\n  },\n\n  /**\n   * Wraps string between quotes - and escapes any quotes if present\n   * @param s\n   * @returns {string}\n   */\n  quote: function quote(s, quoteChar, quoteCharEnd, onlyIfNecessary) {\n    if (!quoteChar) quoteChar = '\"';\n    if (!quoteCharEnd) quoteCharEnd = quoteChar;\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isUndefined(onlyIfNecessary)) onlyIfNecessary = false;\n    var sb = [];\n    var c;\n    var needsQuotes = false;\n\n    for (var i = 0; i < s.length; i++) {\n      c = s[i];\n\n      if (c == '\\\\' || c == '+' || c == '-' || c == '!' || c == '(' || c == ')' || c == ':' || c == '^' || c == '[' || c == ']' || c == '\"' || c == '{' || c == '}' || c == '~' || // || c == '*' || c == '?'\n      c == '|' || c == '&' || c == '/' || c == ' ' || c == '\\t') {\n        needsQuotes = true;\n      }\n\n      if ((c == quoteChar || c == quoteCharEnd) && (i == 0 || i > 0 && s[i - 1] !== '\\\\')) {\n        sb.push('\\\\');\n      }\n\n      sb.push(c);\n    } // detect presence of quotes in the original string\n\n\n    if (onlyIfNecessary == true && sb[0] == '\\\\' && sb[1] == '\"' && sb[sb.length - 2] == '\\\\' && sb[sb.length - 1] == '\"') {\n      sb[0] = '';\n      sb[sb.length - 2] = '';\n      return sb.join('');\n    }\n\n    if (needsQuotes || onlyIfNecessary == false) {\n      return quoteChar + sb.join('') + quoteCharEnd;\n    }\n\n    return sb.join('');\n  },\n\n  /**\n   * Attaches to the ApiQuery object a storage of tmp values; these are\n   * not affecting anything inside the query; but the query is carrying them\n   * around as long as it was not cloned() etc\n   *\n   * @param key\n   * @param value\n   */\n  saveTmpEntry: function saveTmpEntry(apiQuery, key, value) {\n    var storage = this._getTmpStorage(apiQuery, true);\n\n    var oldVal;\n\n    if (key in storage) {\n      oldVal = storage[key];\n    }\n\n    storage[key] = value;\n    return oldVal;\n  },\n  removeTmpEntry: function removeTmpEntry(apiQuery, key) {\n    var storage = this._getTmpStorage(apiQuery, true);\n\n    var val = storage[key];\n    delete storage[key];\n    return val;\n  },\n  getTmpEntry: function getTmpEntry(apiQuery, key, defaultValue) {\n    var storage;\n\n    if (defaultValue) {\n      storage = this._getTmpStorage(apiQuery, true);\n    } else {\n      storage = this._getTmpStorage(apiQuery, false);\n    }\n\n    if (key in storage) {\n      return storage[key];\n    }\n\n    storage[key] = defaultValue;\n    return defaultValue;\n  },\n  hasTmpEntry: function hasTmpEntry(apiQuery, key) {\n    var storage = this._getTmpStorage(apiQuery);\n\n    return key in storage;\n  },\n  _getTmpStorage: function _getTmpStorage(apiQuery, createIfNotExists) {\n    var n = this._n('__tmpStorage');\n\n    if (!apiQuery.hasOwnProperty(n)) {\n      if (!createIfNotExists) return {};\n      apiQuery[n] = {};\n    }\n\n    return apiQuery[n];\n  },\n  _n: function _n(name, prefix) {\n    return (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(prefix) ? prefix : '__') + this.context + '_' + name;\n  },\n  _buildQueryFromConditions: function _buildQueryFromConditions(conditions) {\n    if (conditions.length <= 1) {\n      throw new Error('Violation of contract: first condition is always an operator');\n    }\n\n    var op = conditions[0];\n\n    if (op != ' ') {\n      op = ' ' + op + ' ';\n    }\n\n    return '(' + conditions.slice(1).join(op) + ')';\n  },\n\n  /**\n   * Searches for values inside the array and replaces sections\n   * Returns number of modifications made\n   *\n   * @param arr\n   * @param search\n   * @param replace\n   * @param maxNumMod\n   *    maximum number of modifications to make; you can choose to\n   *    replace only the first value found\n   * @returns {integer}\n   * @private\n   */\n  _modifyArrayReplaceString: function _modifyArrayReplaceString(arr, search, replace, maxNumMod) {\n    var numMod = 0;\n    if (!maxNumMod) maxNumMod = -1;\n\n    if (!search) {\n      throw new Error('Your search is empty, you fool');\n    }\n\n    var modified = false;\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(arr, function (text, i) {\n      if (maxNumMod > 0 && numMod > maxNumMod) {\n        return;\n      }\n\n      if (text.indexOf(search) > -1) {\n        arr[i] = text.replace(search, replace);\n        numMod += 1;\n      }\n    });\n\n    return numMod;\n  },\n\n  /**\n   * Adds the new value into the array\n   * @param arr\n   * @param conditions\n   * @private\n   */\n  _modifyArrayAddString: function _modifyArrayAddString(arr, conditions, operator) {\n    // will always add to the latest string\n    if ((arr.length == 0 || arr[arr.length - 1].trim() == '') && (operator == 'NOT' || operator == 'NEAR')) {\n      throw new Error('Invalid operation; cannot apply NOT/NEAR on single clause');\n    }\n\n    var newQ = arr[arr.length - 1];\n    var newConditions = [operator, newQ].concat(conditions);\n    arr[arr.length - 1] = this._buildQueryFromConditions(newConditions);\n    return newConditions;\n  },\n\n  /**\n   * Gets the valus of the condition\n   * @param apiQuery\n   * @param key\n   *    the conditon 'name', typically st like __condition_author_q; it differs based on the\n   *    operation (type of update/widget/filter etc)\n   * @param defaults\n   *    what to return if 'key' is not present\n   * @returns {*}\n   * @private\n   */\n  _getExistingVals: function _getExistingVals(apiQuery, key, defaults) {\n    if (apiQuery.has(key)) {\n      return apiQuery.get(key);\n    }\n\n    return defaults;\n  },\n\n  /**\n   * When we have conditions for the previous context; but their operator is\n   * different, it means that the new conditions represent a new clause. So\n   * we need to do something with the old conditions (we could stack them\n   * but for now, the simple/robust solution is to simply remove them ->\n   * this means they will not be available for updates/manipulation -->\n   * theh query will be extended)\n   *\n   * @param condName\n   * @private\n   */\n  _closeExistingVals: function _closeExistingVals(apiQuery, condName) {\n    apiQuery.unset(condName);\n  },\n  _sanitizeMode: function _sanitizeMode(mode) {\n    if (!mode) {\n      return this.defaultMode;\n    }\n\n    var i = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].indexOf(this.operationModes, mode);\n\n    if (i == -1) {\n      throw new Error('Unkwnown mode: ' + mode);\n    }\n\n    return this.operationModes[i];\n  },\n  _sanitizeOperator: function _sanitizeOperator(operator) {\n    if (!operator) {\n      return this.defaultOperator;\n    }\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(operator)) {\n      if (operator.trim() == '') {\n        return this.defaultOperator;\n      }\n    } else {\n      throw new Error('Operator must be a string');\n    }\n\n    operator = operator.toUpperCase();\n\n    var i = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].indexOf(this.operators, operator);\n\n    if (i == -1) {\n      throw new Error('Unknown operator: ', operator);\n    }\n\n    return this.operators[i];\n  },\n  _sanitizeConditionAsArray: function _sanitizeConditionAsArray(condition) {\n    if (!condition) {\n      throw new Error('The condition must be set (string/array of strings)');\n    }\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(condition)) {\n      return [condition];\n    }\n\n    condition = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].without(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flatten(condition), '', false, null, undefined, NaN);\n\n    if (condition.length == 0) {\n      throw new Error('After removing empty values, no condition was left');\n    }\n\n    return condition;\n  },\n\n  /**\n   * Cleans up the *clone* of the apiQuery by removing all the entries\n   * that are inserted into ApiQuery by the query updater.\n   *\n   * @param apiQuery\n   */\n  clean: function clean(apiQuery) {\n    var q = {};\n\n    if (apiQuery && apiQuery.keys) {\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(apiQuery.keys(), function (key) {\n        if (!(key.substring(0, 2) == '__')) {\n          q[key] = apiQuery.get(key);\n        }\n      });\n    }\n\n    return new js_components_api_query__WEBPACK_IMPORTED_MODULE_1__[\"default\"](q);\n  }\n});\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ApiQueryUpdater);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/api_query_updater.js?");

/***/ }),

/***/ "./src/js/components/api_request.js":
/*!******************************************!*\
  !*** ./src/js/components/api_request.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_components_facade__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/facade */ \"./src/js/components/facade.js\");\n/* harmony import */ var js_components_facade__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(js_components_facade__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var js_components_default_request__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/default_request */ \"./src/js/components/default_request.js\");\n/**\n * Created by rchyla on 3/28/14.\n */\n\n\n\n\nvar hardenedInterface = {\n  // add makes no sense with request\n  get: 'get a key',\n  set: 'set (replace existing)',\n  url: 'url string defining this request',\n  has: 'has a key',\n  load: 'loads request as a string',\n  clear: 'clears all values',\n  unset: 'removes a key',\n  toJSON: 'values back as JSON object',\n  clone: 'make a copy',\n  isLocked: true,\n  lock: true,\n  unlock: true,\n  pairs: 'get all values as pairs',\n  keys: 'as keys',\n  values: 'only values',\n  hasChanged: 'whether this object has modification (since its creation)',\n  previousAttributes: 'get all changed attributes',\n  previous: 'previous values for a given attribute'\n};\n\nvar ApiRequest = function ApiRequest(data, options) {\n  // Facade pattern, we want to expose only limited API\n  // despite the fact that the underlying instance has\n  // all power of the Backbone.Model\n  if (data instanceof js_components_default_request__WEBPACK_IMPORTED_MODULE_3__[\"default\"]) {\n    this.innerRequest = new (js_components_facade__WEBPACK_IMPORTED_MODULE_2___default())(hardenedInterface, data);\n  } else {\n    this.innerRequest = new (js_components_facade__WEBPACK_IMPORTED_MODULE_2___default())(hardenedInterface, new js_components_default_request__WEBPACK_IMPORTED_MODULE_3__[\"default\"](data, options));\n  }\n};\n\nvar toInsert = {};\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(hardenedInterface), function (element, index, list) {\n  toInsert[element] = function () {\n    return this.innerRequest[element].apply(this.innerRequest, arguments);\n  };\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(ApiRequest.prototype, toInsert, {\n  clone: function clone() {\n    var clone = this.innerRequest.clone.apply(this.innerRequest, arguments);\n    return new ApiRequest(clone);\n  },\n  load: function load() {\n    var clone = this.innerRequest.load.apply(this.innerRequest, arguments);\n    return new ApiRequest(clone);\n  }\n});\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ApiRequest);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/api_request.js?");

/***/ }),

/***/ "./src/js/components/api_response.js":
/*!*******************************************!*\
  !*** ./src/js/components/api_response.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_components_solr_response__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/solr_response */ \"./src/js/components/solr_response.js\");\n/* harmony import */ var js_components_facade__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/facade */ \"./src/js/components/facade.js\");\n/* harmony import */ var js_components_facade__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(js_components_facade__WEBPACK_IMPORTED_MODULE_3__);\n/*\n * A simple wrapper around the API response for ADS. The underlying\n * implementation of the Response object can provide a specific\n * logic, so don't be surprised if you see a different behaviour.\n * But the API remains the same!\n *\n * To configure what implementation you want for your module, use this\n * in the app config:\n *\n * map: {\n *  'your/module': {\n *    'api_response_impl': 'js/components/specific_impl_of_the_api_response'\n *  }\n * },\n */\n\n\n\n\nvar hardenedInterface = {\n  set: 'set (replace existing)',\n  get: 'get values',\n  has: 'has a key',\n  toJSON: 'values back as JSON object',\n  clone: 'make a copy',\n  url: 'url string of the params',\n  isLocked: true,\n  lock: true,\n  unlock: true,\n  setApiQuery: 'sets the ApiQuery',\n  getApiQuery: 'gets the query'\n};\n\nvar ApiResponse = function ApiResponse(data, options) {\n  // Facade pattern, we want to expose only limited API\n  // despite the fact that the underlying instance has\n  // all power of the Backbone.Model\n  if (data instanceof js_components_solr_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n    this.innerResponse = new (js_components_facade__WEBPACK_IMPORTED_MODULE_3___default())(hardenedInterface, data);\n  } else {\n    this.innerResponse = new (js_components_facade__WEBPACK_IMPORTED_MODULE_3___default())(hardenedInterface, new js_components_solr_response__WEBPACK_IMPORTED_MODULE_2__[\"default\"](data, options));\n  }\n};\n\nvar toInsert = {};\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(hardenedInterface), function (element, index, list) {\n  toInsert[element] = function () {\n    return this.innerResponse[element].apply(this.innerResponse, arguments);\n  };\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(ApiResponse.prototype, toInsert, {\n  clone: function clone() {\n    var clone = this.innerResponse.clone.apply(this.innerResponse, arguments);\n    return new ApiResponse(clone);\n  }\n});\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ApiResponse);\n/**\n * Created by rchyla on 3/3/14.\n */\n\n//# sourceURL=webpack://bumblebee/./src/js/components/api_response.js?");

/***/ }),

/***/ "./src/js/components/api_targets.js":
/*!******************************************!*\
  !*** ./src/js/components/api_targets.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/**\n * Created by rchyla on 1/20/15\n *\n * contains api targets\n * and any related limits\n */\nvar config = {\n  BOOTSTRAP: '/accounts/bootstrap',\n  SEARCH: 'search/query',\n  QTREE: 'search/qtree',\n  BIGQUERY: 'search/bigquery',\n  EXPORT: 'export/',\n  SERVICE_AUTHOR_NETWORK: 'vis/author-network',\n  SERVICE_PAPER_NETWORK: 'vis/paper-network',\n  SERVICE_WORDCLOUD: 'vis/word-cloud',\n  SERVICE_METRICS: 'metrics',\n  SERVICE_OBJECTS: 'objects',\n  SERVICE_OBJECTS_QUERY: 'objects/query',\n  SERVICE_CITATION_HELPER: 'citation_helper',\n  SERVICE_AUTHOR_AFFILIATION_EXPORT: 'authoraff',\n  MYADS_STORAGE: 'vault',\n  MYADS_NOTIFICATIONS: 'vault/_notifications',\n  AUTHOR_AFFILIATION_SEARCH: 'author-affiliation/search',\n  AUTHOR_AFFILIATION_EXPORT: 'author-affiliation/export',\n  RESOLVER: 'resolver',\n  CSRF: 'accounts/csrf',\n  USER: 'accounts/user',\n  USER_DATA: 'vault/user-data',\n  SITE_CONFIGURATION: 'vault/configuration',\n  TOKEN: 'accounts/user/token',\n  LOGIN: 'accounts/user/login',\n  LOGOUT: 'accounts/user/logout',\n  VERIFY: 'accounts/verify',\n  RESEND_VERIFY: \"accounts/user/{email}/verify\",\n  RESET_PASSWORD: 'accounts/user/reset-password',\n  CHANGE_PASSWORD: 'accounts/user/change-password',\n  CHANGE_EMAIL: 'accounts/user/change-email',\n  INFO: 'accounts/info',\n  PROTECTED: 'accounts/protected',\n  STATUS: 'accounts/status',\n  RECOMMENDER: 'recommender',\n  GRAPHICS: 'graphics',\n  FEEDBACK: 'feedback',\n  // library import from classic\n  LIBRARY_IMPORT_CLASSIC_AUTH: 'harbour/auth/classic',\n  LIBRARY_IMPORT_CLASSIC_MIRRORS: 'harbour/mirrors',\n  LIBRARY_IMPORT_CLASSIC_TO_BBB: 'biblib/classic',\n  // library import from 2.0\n  LIBRARY_IMPORT_ADS2_AUTH: 'harbour/auth/twopointoh',\n  LIBRARY_IMPORT_ADS2_TO_BBB: 'biblib/twopointoh',\n  LIBRARY_IMPORT_ZOTERO: 'harbour/export/twopointoh/zotero',\n  LIBRARY_IMPORT_MENDELEY: 'harbour/export/twopointoh/mendeley',\n  // returns credentials from both classic and 2.0 if they exist\n  LIBRARY_IMPORT_CREDENTIALS: 'harbour/user',\n  // store ADS information connected with ORCID here\n  ORCID_PREFERENCES: 'orcid/preferences',\n  ORCID_NAME: 'orcid/orcid-name',\n  // library endpoints\n  // can get info about all libraries, or list of bibcodes associated w/specific lib (libraries/id)\n  // post to /libraries/ to create a library\n  LIBRARIES: 'biblib/libraries',\n  LIBRARY_TRANSFER: 'biblib/transfer',\n  // can post, put, and delete changes to individual libs using this endpoint\n  DOCUMENTS: 'biblib/documents',\n  PERMISSIONS: 'biblib/permissions',\n  REFERENCE: 'reference/text',\n\n  /*\n   * this is used by the mixin 'user_change_rows' to set max allowed/default requested\n   */\n  _limits: {\n    // use the same name from discovery.config.js\n    ExportWidget: {\n      default: 500,\n      limit: 3000\n    },\n    Metrics: {\n      default: 7000,\n      limit: 7000\n    },\n    AuthorNetwork: {\n      default: 400,\n      limit: 1000\n    },\n    PaperNetwork: {\n      default: 400,\n      limit: 1000\n    },\n    ConceptCloud: {\n      default: 150,\n      limit: 150\n    },\n    BubbleChart: {\n      // default == limit\n      default: 1500\n    }\n  }\n}; // add credential info\n// doesn't require cross domain cookies\n\nconfig._doesntNeedCredentials = [config.SEARCH, config.QTREE, config.BIGQUERY, config.EXPORT, config.SERVICE_AUTHOR_NETWORK, config.SERVICE_PAPER_NETWORK, config.SERVICE_WORDCLOUD, config.SERVICE_METRICS, config.RECOMMENDER, config.GRAPHICS, config.FEEDBACK];\n/* harmony default export */ __webpack_exports__[\"default\"] = (config);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/api_targets.js?");

/***/ }),

/***/ "./src/js/components/app_storage.js":
/*!******************************************!*\
  !*** ./src/js/components/app_storage.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_mixins_hardened__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/mixins/hardened */ \"./src/js/mixins/hardened.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/*\n * A generic class that holds the application storage\n */\n\n\n\n\n\nvar AppStorage = backbone__WEBPACK_IMPORTED_MODULE_0___default().Model.extend({\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n\n    underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].bindAll(this, 'onPaperSelection', 'onBulkPaperSelection');\n\n    var pubsub = this.getPubSub();\n    pubsub.subscribe(pubsub.PAPER_SELECTION, this.onPaperSelection);\n    pubsub.subscribe(pubsub.BULK_PAPER_SELECTION, this.onBulkPaperSelection);\n  },\n  initialize: function initialize() {\n    this.on('change:selectedPapers', function (model) {\n      this._updateNumSelected();\n\n      if (this.hasPubSub()) var pubsub = this.getPubSub();\n      pubsub.publish(pubsub.STORAGE_PAPER_UPDATE, this.getNumSelectedPapers());\n    });\n  },\n\n  /**\n   * functions related to remembering/removing the\n   * current query object\n   * @param apiQuery\n   */\n  setCurrentQuery: function setCurrentQuery(apiQuery) {\n    if (!apiQuery) apiQuery = new js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n\n    if (!(apiQuery instanceof js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"])) {\n      throw new Error('You must save ApiQuery instance');\n    }\n\n    this.set('currentQuery', apiQuery); // save to storage\n\n    if (this.getBeeHive().hasService('PersistentStorage')) {\n      this.getBeeHive().getService('PersistentStorage').set('currentQuery', apiQuery.toJSON());\n    } // provide this query to sentry\n\n\n    window.getSentry(function (sentry) {\n      var currentQuery = apiQuery.toJSON();\n      Object.keys(currentQuery).forEach(function (key) {\n        if (!key.startsWith('__') || key === 'fq') {\n          sentry.setTag(\"query.\".concat(key), currentQuery[key].join(' | '));\n        }\n      });\n    });\n  },\n  setCurrentNumFound: function setCurrentNumFound(numFound) {\n    this.set('numFound', numFound);\n  },\n  getCurrentQuery: function getCurrentQuery() {\n    return this.get('currentQuery');\n  },\n  hasCurrentQuery: function hasCurrentQuery() {\n    return this.has('currentQuery');\n  },\n\n  /**\n   * Functions to remember save bibcodes (that were\n   * selected by an user)\n   *\n   * @returns {*}\n   */\n  hasSelectedPapers: function hasSelectedPapers() {\n    return !!underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].keys(this.get('selectedPapers')).length;\n  },\n  getSelectedPapers: function getSelectedPapers() {\n    return underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].keys(this.get('selectedPapers') || {});\n  },\n  clearSelectedPapers: function clearSelectedPapers() {\n    this.set('selectedPapers', {});\n  },\n  addSelectedPapers: function addSelectedPapers(identifiers) {\n    var data = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].clone(this.get('selectedPapers') || {});\n\n    var updated = false;\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isArray(identifiers)) {\n      underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].each(identifiers, function (idx) {\n        if (!data[idx]) {\n          data[idx] = true;\n          updated = true;\n        }\n      });\n    } else if (!data[identifiers]) {\n      data[identifiers] = true;\n      updated = true;\n    }\n\n    if (updated) this.set('selectedPapers', data);\n  },\n  isPaperSelected: function isPaperSelected(identifier) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isArray(identifier)) throw new Error('Identifier must be a string or a number');\n    var data = this.get('selectedPapers') || {};\n    return !!data[identifier];\n  },\n  removeSelectedPapers: function removeSelectedPapers(identifiers) {\n    var data = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].clone(this.get('selectedPapers') || {});\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isArray(identifiers)) {\n      underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].each(identifiers, function (i) {\n        delete data[i];\n      });\n    } else if (identifiers) {\n      delete data[identifiers];\n    } else {\n      data = {};\n    }\n\n    this.set('selectedPapers', data);\n  },\n  getNumSelectedPapers: function getNumSelectedPapers() {\n    return this._numSelectedPapers || 0;\n  },\n  _updateNumSelected: function _updateNumSelected() {\n    this._numSelectedPapers = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].keys(this.get('selectedPapers') || {}).length;\n  },\n  onPaperSelection: function onPaperSelection(data) {\n    if (this.isPaperSelected(data)) {\n      this.removeSelectedPapers(data);\n    } else {\n      this.addSelectedPapers(data);\n    }\n  },\n  onBulkPaperSelection: function onBulkPaperSelection(bibs, flag) {\n    if (flag == 'remove') {\n      this.removeSelectedPapers(bibs);\n      return;\n    }\n\n    this.addSelectedPapers(bibs);\n  },\n  // this is used by the auth and user settings widgets\n  setConfig: function setConfig(conf) {\n    this.set('dynamicConfig', conf);\n  },\n  getConfigCopy: function getConfigCopy() {\n    return JSON.parse(JSON.stringify(this.get('dynamicConfig')));\n  },\n  setDocumentTitle: function setDocumentTitle(title) {\n    this.set('documentTitle', title);\n  },\n  getDocumentTitle: function getDocumentTitle() {\n    return this.get('documentTitle');\n  },\n  hardenedInterface: {\n    getNumSelectedPapers: 'getNumSelectedPapers',\n    isPaperSelected: 'isPaperSelected',\n    hasSelectedPapers: 'hasSelectedPapers',\n    getSelectedPapers: 'getSelectedPapers',\n    clearSelectedPapers: 'clearSelectedPapers',\n    getCurrentQuery: 'getCurrentQuery',\n    hasCurrentQuery: 'hasCurrentQuery',\n    setDocumentTitle: 'setDocumentTitle',\n    getDocumentTitle: 'getDocumentTitle',\n    getConfigCopy: 'get read-only copy of dynamic config',\n    set: 'set a value into app storage',\n    get: 'get a val from app storage'\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(AppStorage.prototype, js_mixins_hardened__WEBPACK_IMPORTED_MODULE_3__[\"default\"], js_mixins_dependon__WEBPACK_IMPORTED_MODULE_4__[\"default\"].BeeHive);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AppStorage);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/app_storage.js?");

/***/ }),

/***/ "./src/js/components/application.js":
/*!******************************************!*\
  !*** ./src/js/components/application.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_2__);\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'module'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var js_components_beehive__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/beehive */ \"./src/js/components/beehive.js\");\n/* harmony import */ var js_mixins_api_access__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/mixins/api_access */ \"./src/js/mixins/api_access.js\");\n/**\n * Application object contains methods for asynochronous loading of other modules\n * It will load BeeHive by default, and it recognizes the following types of\n * objects\n *\n *  core:\n *    modules - any module you want to load and give it access to the full\n *              BeeHive (these guys are loaded first)\n *    services - these instances will be inserted into Beehive.Services\n *              (loaded after modules)\n *    objects - these will be inserted into BeeHive.Objects\n *              (loaded after services)\n *\n *  plugins - any object you want to instantiate\n *  widgets - any visual object you want to instantiate\n *\n *\n *  this is the normal workflow\n *\n *  var app = new Application();\n *  var promise = app.loadModules({\n *       core: {\n *         services: {\n *           PubSub: 'js/services/pubsub',\n *           Api: 'js/services/api'\n *         },\n *         modules: {\n *           QueryMediator: 'js/components/query_mediator'\n *         }\n *       },\n *       widgets: {\n *         YearFacet: 'js/widgets/facets/factory'\n *       }\n *     });\n *   promise.done(function() {\n *     app.activate();\n *     //....continue setting up layout etc\n *   });\n *\n *\n */\n\n\n\n\n\n\nvar DEFAULT_MODULE_TIMEOUT = 60 * 1000; // 60 seconds\n\nvar updateProgress = typeof window.__setAppLoadingProgress === 'function' ? window.__setAppLoadingProgress : function () {};\n\nvar Application = function Application(options) {\n  options || (options = {});\n  this.aid = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].uniqueId('application');\n  this.debug = true;\n\n  underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(this, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pick(options, ['timeout', 'debug']));\n\n  this.initialize.apply(this, arguments);\n};\n\nvar Container = function Container() {\n  this.container = {};\n};\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(Container.prototype, {\n  has: function has(name) {\n    return this.container.hasOwnProperty(name);\n  },\n  get: function get(name) {\n    return this.container[name];\n  },\n  remove: function remove(name) {\n    delete this.container[name];\n  },\n  add: function add(name, obj) {\n    this.container[name] = obj;\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(Application.prototype, {\n  initialize: function initialize(config, options) {\n    // these are core (elevated access)\n    this.__beehive = new js_components_beehive__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\n    this.__modules = new Container();\n    this.__controllers = new Container(); // these are barbarians behind the gates\n\n    this.__widgets = new Container();\n    this.__plugins = new Container();\n    this.__barbarianRegistry = {};\n    this.__barbarianInstances = {};\n  },\n\n  /*\n   * code that accounts for browser deficiencies\n   */\n  shim: function shim() {\n    if (!window.location.origin) {\n      window.location.origin = window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n    }\n  },\n\n  /**\n   * Purpose of this call is to load dynamically all modules\n   * that you pass in a configuration. We'll load them using\n   * requirejs and set them into BeeHive\n   *\n   * This method returns 'Deferred' object, which tells you\n   * whether initialization has finished. You *have to* use it\n   * in the following way;\n   *\n   * app = new Application();\n   * defer = app.loadModules(config, options);\n   * defer.done(function() {\n   *    // .... do something with the application\n   * })\n   *\n   * @param config\n   * @param options\n   */\n  loadModules: function loadModules(config, options) {// var promises = [];\n    // var self = this;\n    // var promise;\n    //\n    // var core = config.core;\n    // if (core) {\n    //   _.each(['controllers', 'modules', 'services', 'objects'], function(\n    //     name\n    //   ) {\n    //     if (core[name]) {\n    //       promise = self._loadModules(name, core[name]);\n    //       if (promise) {\n    //         promises.push(promise);\n    //       }\n    //     }\n    //   });\n    // }\n    //\n    // // plugins and widgets will be lazy-loaded (default)\n    //\n    // var plugins = config.plugins;\n    // var widgets = config.widgets;\n    //\n    // if (options && options.eagerLoad) {\n    //   if (plugins) {\n    //     promise = self._loadModules('plugins', plugins);\n    //     if (promise) promises.push(promise);\n    //   }\n    //\n    //   if (widgets) {\n    //     promise = self._loadModules('widgets', widgets);\n    //     if (promise) promises.push(promise);\n    //   }\n    // } else {\n    //   if (plugins) {\n    //     _.each(plugins, function(value, key) {\n    //       var x = {};\n    //       x[key] = value;\n    //       self.__plugins.add(\n    //         key,\n    //         self._loadModules('plugins', x, false, true)\n    //       );\n    //     });\n    //   }\n    //   if (widgets) {\n    //     _.each(widgets, function(value, key) {\n    //       var x = {};\n    //       x[key] = value;\n    //       self.__widgets.add(\n    //         key,\n    //         self._loadModules('widgets', x, false, true)\n    //       );\n    //     });\n    //   }\n    // }\n    //\n    // // hack, so that $.when() always returns []\n    // promises.length === 1 && promises.push(promise);\n    //\n    // // add a handler for updating the app loading bar\n    // let count = 0;\n    // promises.map((p) =>\n    //   p.then(() => {\n    //     self.logModuleLoaded((count += 1), promises.length);\n    //   })\n    // );\n    //\n    // var bigPromise = $.Deferred();\n    // $.when\n    //   .apply($, promises)\n    //   .then(function() {\n    //     _.each(arguments, function(promisedValues, idx) {\n    //       if (_.isArray(promisedValues)) {\n    //         if (self.debug) {\n    //           console.log('application: registering ' + promisedValues[0]);\n    //         }\n    //\n    //         self._registerLoadedModules.apply(self, promisedValues);\n    //       }\n    //     });\n    //   })\n    //   .done(function() {\n    //     bigPromise.resolve();\n    //   })\n    //   .fail(function() {\n    //     console.error(\n    //       'Generic error - we were not successul in loading all modules for config',\n    //       config\n    //     );\n    //     if (arguments.length) console.error(arguments);\n    //     bigPromise.reject.apply(bigPromise, arguments);\n    //   });\n    //\n    // return bigPromise.promise();\n  },\n  getBeeHive: function getBeeHive() {\n    return this.__beehive;\n  },\n  _registerLoadedModules: function _registerLoadedModules(section, modules) {\n    var beehive = this.getBeeHive();\n    var key;\n    var module;\n    var hasKey;\n    var addKey;\n    var removeKey;\n    var createInstance;\n    var self = this;\n\n    createInstance = function createInstance(key, module) {\n      if (!module) {\n        console.warn('Object ' + key + ' is empty, cannot instantiate it!');\n        return;\n      }\n\n      if (self.debug) {\n        console.log('Creating instance of: ' + key);\n      }\n\n      if (module.prototype) {\n        return new module();\n      }\n\n      if (module && module.hasOwnProperty(key)) {\n        return module[key];\n      }\n\n      return module;\n    }; // console.log('registering', section, modules);\n\n\n    if (section === 'controllers') {\n      hasKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.hasController, this);\n      removeKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function (key) {\n        this.__controllers.remove(key);\n      }, this);\n      addKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function (key, module) {\n        this.__controllers.add(key, module);\n      }, this);\n    } else if (section === 'services') {\n      hasKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(beehive.hasService, beehive);\n      removeKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(beehive.removeService, beehive);\n      addKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(beehive.addService, beehive);\n    } else if (section === 'objects') {\n      hasKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(beehive.hasObject, beehive);\n      removeKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(beehive.removeObject, beehive);\n      addKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(beehive.addObject, beehive);\n    } else if (section === 'modules') {\n      createInstance = function createInstance(key, module) {\n        return module;\n      };\n\n      hasKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.hasModule, this);\n      removeKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function (key) {\n        this.__modules.remove(key);\n      }, this);\n      addKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function (key, module) {\n        this.__modules.add(key, module);\n      }, this);\n    } else if (section === 'widgets') {\n      hasKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.hasWidget, this);\n      removeKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function (key) {\n        this.__widgets.remove(key);\n      }, this);\n      addKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function (key, module) {\n        this.__widgets.add(key, module);\n      }, this);\n\n      createInstance = function createInstance(key, module) {\n        return module;\n      };\n    } else if (section === 'plugins') {\n      hasKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.hasPlugin, this);\n      removeKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function (key) {\n        this.__plugins.remove(key);\n      }, this);\n      addKey = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function (key, module) {\n        this.__plugins.add(key, module);\n      }, this);\n\n      createInstance = function createInstance(key, module) {\n        return module;\n      };\n    } else {\n      throw new Error('Unknown section: ' + section);\n    }\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pairs(modules), function (m) {\n      key = m[0], module = m[1];\n\n      if (hasKey(key)) {\n        removeKey(key);\n      }\n\n      var inst = createInstance(key, module);\n\n      if (!inst) {\n        console.warn('Removing ' + key + '(because it is null!)');\n        return;\n      }\n\n      addKey(key, inst);\n    });\n  },\n  _checkPrescription: function _checkPrescription(modulePrescription) {\n    // basic checking\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pairs(modulePrescription), function (module, idx, list) {\n      var symbolicName = module[0];\n      var impl = module[1];\n      if (!underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(symbolicName) || !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(impl)) throw new Error('You are kidding me, the key/implementation must be string values');\n    });\n  },\n\n  /**\n   * Loads modules *asynchronously* from the following structure\n   *\n   * {\n   *  'Api': 'js/services/api',\n   *  'PubSub': 'js/services/pubsub'\n   * },\n   *\n   * Returns Deferred - once that deferred object is resolved\n   * all modules have been loaded.\n   *\n   * @param modulePrescription\n   * @private\n   */\n  _loadModules: function _loadModules(sectionName, modulePrescription, ignoreErrors, lazyLoad) {// var self = this;\n    // this._checkPrescription(modulePrescription);\n    //\n    // if (this.debug) {\n    //   console.log('application: loading ' + sectionName, modulePrescription);\n    // }\n    //\n    // var ret = {};\n    //\n    // // create the promise object - load the modules asynchronously\n    // var implNames = _.keys(modulePrescription);\n    // var impls = _.values(modulePrescription);\n    // var defer = $.Deferred();\n    //\n    // var callback = function() {\n    //   if (self.debug) console.timeEnd('startLoading' + sectionName);\n    //   var modules = arguments;\n    //   _.each(implNames, function(name, idx, implList) {\n    //     ret[name] = modules[idx];\n    //   });\n    //   try {\n    //     defer.resolve(sectionName, ret);\n    //   } catch (e) {\n    //     /**\n    //      * CATCH ALL\n    //      *\n    //      * This will capture run-away errors from any loaded module.\n    //      * For now, just dump them into the 404 page (if its loaded)\n    //      */\n    //     const pubsub = self.getService('PubSub').getHardenedInstance();\n    //     pubsub.publish(pubsub.NAVIGATE, '404', {\n    //       message: `Page Not Found or Internal Error\n    //         <p>Error: <code>${e.message}</code></p>\n    //       `,\n    //     });\n    //   }\n    //   if (self.debug) {\n    //     console.log(\n    //       'Loaded: type=' + sectionName + ' state=' + defer.state(),\n    //       ret\n    //     );\n    //   }\n    // };\n    //\n    // var errback = function(err) {\n    //   var symbolicName = err.requireModules && err.requireModules[0];\n    //   if (self.debug)\n    //     console.warn('Error loading impl=' + symbolicName, err.requireMap);\n    //   if (ignoreErrors) {\n    //     if (self.debug) console.warn('Ignoring error');\n    //     return;\n    //   }\n    //   defer.reject(err);\n    // };\n    //\n    // var run = function() {\n    //   if (self.debug) console.time('startLoading' + sectionName);\n    //   // start loading the modules\n    //   // console.log('loading', implNames, impls)\n    //   require(impls, callback, errback);\n    //   return self._setTimeout(defer).promise();\n    // };\n    //\n    // run.lazyLoad = lazyLoad;\n    // return lazyLoad ? run : run();\n  },\n  _setTimeout: function _setTimeout(deferred) {\n    setTimeout(function () {\n      if (deferred.state() !== 'resolved') {\n        deferred.reject('Timeout, application is loading too long');\n      }\n    }, this.timeout || DEFAULT_MODULE_TIMEOUT);\n    return deferred;\n  },\n  logModuleLoaded: function logModuleLoaded(idx, total) {\n    updateProgress(function (val) {\n      return val + 50 / total;\n    }, \"Loading Modules \".concat(idx, \" of \").concat(total));\n  },\n  destroy: function destroy() {\n    this.getBeeHive().destroy();\n  },\n  activate: function activate(options) {\n    var beehive = this.getBeeHive();\n    var self = this; // services are activated by beehive itself\n\n    if (self.debug) {\n      console.log('application: beehive.activate()');\n    }\n\n    beehive.activate(beehive); // controllers receive application itself and elevated beehive object\n    // all of them must succeed; we don't catch errors\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(this.getAllControllers(), function (el) {\n      if (self.debug) {\n        console.log('application: controllers: ' + el[0] + '.activate(beehive, app)');\n      }\n\n      var plugin = el[1];\n\n      if ('activate' in plugin) {\n        plugin.activate(beehive, self);\n      }\n    }); // modules receive elevated beehive object\n\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(this.getAllModules(), function (el) {\n      try {\n        if (self.debug) {\n          console.log('application: modules: ' + el[0] + '.activate(beehive)');\n        }\n\n        var plugin = el[1];\n\n        if ('activate' in plugin) {\n          plugin.activate(beehive);\n        }\n      } catch (e) {\n        console.error('Error activating:' + el[0]);\n        console.error(e);\n      }\n    });\n\n    this.__activated = true;\n  },\n  isActivated: function isActivated() {\n    return this.__activated || false;\n  },\n  hasService: function hasService(name) {\n    return this.getBeeHive().hasService(name);\n  },\n  getService: function getService(name) {\n    return this.getBeeHive().getService(name);\n  },\n  hasObject: function hasObject(name) {\n    return this.getBeeHive().hasObject(name);\n  },\n  getObject: function getObject(name) {\n    return this.getBeeHive().getObject(name);\n  },\n  hasController: function hasController(name) {\n    return this.__controllers.has(name);\n  },\n  getController: function getController(name) {\n    return this.__controllers.get(name);\n  },\n  hasModule: function hasModule(name) {\n    return this.__modules.has(name);\n  },\n  getModule: function getModule(name) {\n    return this.__modules.get(name);\n  },\n  hasWidget: function hasWidget(name) {\n    return this.__widgets.has(name);\n  },\n  getWidgetRefCount: function getWidgetRefCount(name, prefix) {\n    var ds = this.__barbarianInstances[(prefix || 'widget:') + name];\n\n    if (ds) {\n      return ds.counter;\n    }\n\n    return -1;\n  },\n  incrRefCount: function incrRefCount(cat, name) {\n    var symbolicName = cat + ':' + name;\n\n    if (this.__barbarianInstances[symbolicName]) {\n      this.__barbarianInstances[symbolicName].counter++;\n    } else {\n      throw Error('Invalid operation' + symbolicName + ' is not initialized');\n    }\n  },\n  getWidget: function getWidget(name) {\n    var defer = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();\n    var self = this;\n\n    if (arguments.length > 1) {\n      var w = {};\n      var promises = [];\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(arguments, function (x) {\n        var wName = x;\n        promises.push(self._getWidget(x).fail(function () {\n          console.error('Error loading: ' + x);\n\n          underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(w, function (val, key) {\n            self.returnWidget(key);\n            delete w[key];\n          });\n\n          throw er;\n        }).done(function (widget) {\n          w[wName] = widget;\n        }));\n      });\n\n      jquery__WEBPACK_IMPORTED_MODULE_1___default().when.apply((jquery__WEBPACK_IMPORTED_MODULE_1___default()), promises).done(function () {\n        defer.resolve(w);\n      });\n    } else if (name) {\n      this._getWidget(name).done(function (widget) {\n        defer.resolve(widget);\n      });\n    } // this happens right after the callback\n\n\n    setTimeout(function () {\n      defer.done(function (widget) {\n        if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(name)) {\n          underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(name, function (x) {\n            self.returnWidget(x);\n          });\n        } else {\n          self.returnWidget(name);\n        }\n      });\n    }, 1);\n    return defer.promise();\n  },\n  _getWidget: function _getWidget(name) {\n    return this._getThing('widget', name); // returns a promise\n  },\n  _getThing: function _getThing(cat, name) {\n    var defer = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();\n    var self = this;\n\n    this._lazyLoadIfNecessary(cat, name).done(function () {\n      var w = self._getOrCreateBarbarian(cat, name);\n\n      self.incrRefCount(cat, name);\n      defer.resolve(w);\n    });\n\n    return defer.promise();\n  },\n  returnWidget: function returnWidget(name) {\n    var ds = this.__barbarianInstances['widget:' + name]; // very rarely, a widget will want to be kept in memory\n\n    if (ds && ds.parent.dontKillMe) return;\n\n    if (ds) {\n      ds.counter--;\n\n      this._killBarbarian('widget:' + name);\n\n      return ds.counter;\n    }\n\n    return -1;\n  },\n  hasPlugin: function hasPlugin(name) {\n    return this.__plugins.has(name);\n  },\n\n  /**\n   * Increase the plugin counter and return the instance\n   * (already activated, with proper beehive in place)\n   *\n   * @param name\n   * @return {*}\n   */\n  getPlugin: function getPlugin(name) {\n    var defer = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();\n    var self = this;\n    var w = {};\n\n    if (arguments.length > 1) {\n      w = {};\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(arguments, function (x) {\n        if (!x) return;\n\n        try {\n          w[x] = self._getPlugin(x);\n        } catch (er) {\n          console.error('Error loading: ' + x);\n\n          underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(w, function (val, key) {\n            self.returnPlugin(key);\n            delete w[key];\n          });\n\n          throw er;\n        }\n      });\n    } else if (name) {\n      w = this._getPlugin(name);\n    }\n\n    setTimeout(function () {\n      defer.done(function (widget) {\n        if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(name)) {\n          underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(name, function (x) {\n            self.returnPlugin(x);\n          });\n        } else {\n          self.returnPlugin(name);\n        }\n      });\n    }, 1);\n    defer.resolve(w);\n    return defer.promise();\n  },\n  getPluginRefCount: function getPluginRefCount(name) {\n    return this.getWidgetRefCount(name, 'plugin:');\n  },\n  _getPlugin: function _getPlugin(name) {\n    return this._getThing('plugin', name);\n  },\n\n  /**\n   * Decrease the instance counter; when we reach zero\n   * the plugin will be destroyed automatically\n   *\n   * @param name\n   */\n  returnPlugin: function returnPlugin(name) {\n    var ds = this.__barbarianInstances['plugin:' + name];\n\n    if (ds) {\n      ds.counter--;\n\n      this._killBarbarian('plugin:' + name);\n\n      return ds.counter;\n    }\n\n    return -1;\n  },\n\n  /**\n   * Given the pubsub key, it finds the name of the widget\n   * (provided the widget is registered with the application)\n   * Returns undefined for other components, such as controllers\n   * objects etc (it searches only plugins and widgets)\n   *\n   * @param psk\n   * @returns {*}\n   */\n  getPluginOrWidgetName: function getPluginOrWidgetName(psk) {\n    if (!underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(psk)) throw Error('The psk argument must be a string');\n    var k;\n\n    if (this.__barbarianRegistry[psk]) {\n      k = this.__barbarianRegistry[psk];\n    } else {\n      return undefined;\n    }\n\n    return k;\n  },\n  getPluginOrWidgetByPubSubKey: function getPluginOrWidgetByPubSubKey(psk) {\n    var k = this.getPluginOrWidgetName(psk);\n    if (k === undefined) return undefined;\n    if (this._isBarbarianAlive(k)) return this._getBarbarian(k);\n    throw new Error('Eeeek, thisis unexpectEED bEhAvjor! Cant find barbarian with ID: ' + psk);\n  },\n  getPskOfPluginOrWidget: function getPskOfPluginOrWidget(symbolicName) {\n    var parts = symbolicName.split(':');\n    var psk;\n\n    if (this._isBarbarianAlive(symbolicName)) {\n      var b = this._getBarbarian(symbolicName);\n\n      if (b.getPubSub && b.getPubSub().getCurrentPubSubKey) return b.getPubSub().getCurrentPubSubKey().getId();\n    }\n\n    return psk;\n  },\n\n  /**\n   * I think the analogy is getting over-stretched; it is true that the author of this application\n   * loves history, and you could find many analogies...but let me hope that I would never treat\n   * humans in the same way I name variable names and methods :_)\n   *\n   * @param category\n   * @param name\n   * @private\n   */\n  _getOrCreateBarbarian: function _getOrCreateBarbarian(cat, name) {\n    var symbolicName = cat + ':' + name;\n\n    if (cat === 'plugin' && !this.hasPlugin(name) || cat === 'widget' && !this.hasWidget(name)) {\n      throw new Error('We cannot give you ' + symbolicName + ' (cause there is no constructor for it)');\n    }\n\n    if (this._isBarbarianAlive(symbolicName)) return this._getBarbarian(symbolicName);\n    var constructor = cat === 'plugin' ? this.__plugins.get(name) : this.__widgets.get(name);\n    var instance = new constructor();\n    var hardenedBee = this.getBeeHive().getHardenedInstance();\n    var children; // we'll monitor all new pubsub instances (created by the widget) - we don't want to rely\n    // on widgets to do the right thing (and tells us what children they made)\n\n    var pubsub = this.getService('PubSub');\n\n    var existingSubscribers = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(pubsub._issuedKeys);\n\n    if ('activate' in instance) {\n      if (this.debug) {\n        console.log('application: ' + symbolicName + '.activate(beehive)');\n      }\n\n      children = instance.activate(hardenedBee);\n    }\n\n    var newSubscribers = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].without(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(pubsub._issuedKeys), underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(pubsub._issuedKeys));\n\n    this._registerBarbarian(symbolicName, instance, children, hardenedBee, newSubscribers);\n\n    return instance;\n  },\n  _lazyLoadIfNecessary: function _lazyLoadIfNecessary(cat, name) {\n    var defer = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();\n    var self = this;\n    var loader;\n    var placeholder;\n\n    if (cat === 'plugin') {\n      placeholder = self.__plugins;\n    } else if (cat === 'widget') {\n      placeholder = self.__widgets;\n    } else {\n      throw new Error(cat + ' cannot be lazy loaded, sorry');\n    }\n\n    var thing = placeholder.get(name);\n\n    if (typeof thing === 'undefined' || thing === null) {\n      defer.reject(name + ' does not exist');\n    } else if (thing && thing.lazyLoad) {\n      // load it\n      thing().done(function (cat, loadedModule) {\n        self._registerLoadedModules(cat, loadedModule);\n\n        defer.resolve();\n      });\n    } else {\n      // has already been loaded\n      defer.resolve();\n    }\n\n    return defer.promise();\n  },\n  _isBarbarianAlive: function _isBarbarianAlive(symbolicName) {\n    return !!this.__barbarianInstances[symbolicName];\n  },\n  _getBarbarian: function _getBarbarian(symbolicName) {\n    return this.__barbarianInstances[symbolicName].parent;\n  },\n  _registerBarbarian: function _registerBarbarian(symbolicName, instance, children, hardenedBee, illegitimateChildren) {\n    this._killBarbarian(symbolicName);\n\n    if ('getBeeHive' in instance) {\n      this.__barbarianRegistry[instance.getBeeHive().getService('PubSub').getCurrentPubSubKey().getId()] = symbolicName;\n    } else {\n      this.__barbarianRegistry[hardenedBee.getService('PubSub').getCurrentPubSubKey().getId()] = symbolicName;\n    }\n\n    var childNames = [];\n\n    if (children) {\n      childNames = this._registerBarbarianChildren(symbolicName, children);\n    }\n\n    if (illegitimateChildren) {\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(illegitimateChildren, function (childKey) {\n        if (this.__barbarianRegistry[childKey]) {\n          // already declared\n          delete illegitimateChildren[childKey];\n        }\n      }, this);\n    }\n\n    this.__barbarianInstances[symbolicName] = {\n      parent: instance,\n      children: childNames,\n      beehive: hardenedBee,\n      counter: 0,\n      psk: hardenedBee.getService('PubSub').getCurrentPubSubKey(),\n      bastards: illegitimateChildren // no, i'm not mean, i'm French\n\n    };\n  },\n\n  /**\n   *\n   * @param prefix\n   *  (String) the name of the father\n   * @param children\n   *  (Object) where keys are the 'strings' (names) and values are\n   *  instances (of the widgets)\n   * @return {Array}\n   * @private\n   */\n  _registerBarbarianChildren: function _registerBarbarianChildren(prefix, children) {\n    var childrenNames = [];\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(children, function (child, key) {\n      var name = prefix + '-' + (child.name || key);\n      if (this.debug) console.log('adding child object to registry: ' + name);\n\n      if (this._isBarbarianAlive(name)) {\n        throw new Error('Contract breach, there already exists instance with a name: ' + name);\n      }\n\n      if ('getBeeHive' in child) {\n        var childPubKey = child.getBeeHive().getService('PubSub').getCurrentPubSubKey().getId();\n        if (this.__barbarianRegistry[childPubKey]) throw new Error('Contract breach, the child of ' + prefix + 'is using the same pub-sub-key');\n        this.__barbarianRegistry[childPubKey] = name;\n      }\n\n      childrenNames.unshift(name);\n    }, this);\n\n    return childrenNames;\n  },\n\n  /**\n   * Remove/destroy the instance - but only if the counter reaches zero (or if the\n   * force parameter is true) - that means that the children are exterminated together\n   * with their parents. this is to avoid polluting the memory, because every child\n   * has a name of the parent. So if the parent is not used by anyone, then the\n   * counter is zero\n   *\n   * @param symbolicName\n   * @param force\n   * @private\n   */\n  _killBarbarian: function _killBarbarian(symbolicName, force) {\n    var b = this.__barbarianInstances[symbolicName];\n    if (!b) return;\n\n    if (b.counter > 0 && force !== true) {\n      // keep it alive, it is referenced somewhere else\n      return;\n    }\n\n    if (b.children) {\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(b.children, function (childName) {\n        this._killBarbarian(childName, true);\n      }, this);\n    }\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(this.__barbarianRegistry, function (value, key) {\n      if (value === symbolicName) delete this.__barbarianRegistry[key];\n    }, this); // unsubscribe this widget from pubsub (don't rely on the widget\n    // doing the right thing)\n\n\n    var pubsub = this.getService('PubSub');\n\n    if (b.psk) {\n      pubsub.unsubscribe(b.psk);\n    } // painstaikingly discover undeclared children and unsubscribe them\n\n\n    if (b.bastards && false) { var kmap; }\n\n    b.parent.destroy();\n    delete this.__barbarianInstances[symbolicName];\n    if ('setBeeHive' in b.parent) b.parent.setBeeHive({\n      fake: 'one'\n    });\n    b = null;\n    if (this.debug) console.log('Destroyed: ' + symbolicName);\n  },\n  getAllControllers: function getAllControllers() {\n    return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pairs(this.__controllers.container);\n  },\n  getAllModules: function getAllModules() {\n    return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pairs(this.__modules.container);\n  },\n  getAllPlugins: function getAllPlugins(key) {\n    key = key || 'plugin:';\n    var defer = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();\n    var w = [];\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(this.__barbarianInstances, function (val, k) {\n      if (k.indexOf(key) > -1) w.unshift(k.replace(key, ''));\n    });\n\n    var getter = key.indexOf('plugin:') > -1 ? this.getPlugin : this.getWidget;\n    getter.apply(this, w).done(function (widget) {\n      var out = [];\n\n      if (w.length > 1) {\n        out = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pairs(widget);\n      } else if (w.length === 1) {\n        out = [[w[0], widget]];\n      }\n\n      defer.resolve(out);\n    });\n    return defer.promise();\n  },\n  getAllWidgets: function getAllWidgets() {\n    return this.getAllPlugins('widget:');\n  },\n  getAllServices: function getAllServices() {\n    return this.getBeeHive().getAllServices();\n  },\n  getAllObjects: function getAllObjects() {\n    return this.getBeeHive().getAllObjects();\n  },\n\n  /**\n   * Helper method to invoke a 'function' on all objects\n   * that are inside the application\n   *\n   * @param funcName\n   * @param options\n   */\n  triggerMethodOnAll: function triggerMethodOnAll(funcName, options) {\n    this.triggerMethod(this.getAllControllers(), 'controllers', funcName, options);\n    this.triggerMethod(this.getAllModules(), 'modules', funcName, options);\n    var self = this;\n    this.getAllPlugins().done(function (plugins) {\n      if (plugins.length) self.triggerMethod(plugins, 'plugins', funcName, options);\n    });\n    this.getAllWidgets().done(function (widgets) {\n      if (widgets.length) self.triggerMethod(widgets, 'widgets', funcName, options);\n    });\n    this.triggerMethod(this.getBeeHive().getAllServices(), 'BeeHive:services', funcName, options);\n    this.triggerMethod(this.getBeeHive().getAllObjects(), 'BeeHive:objects', funcName, options);\n  },\n  triggerMethod: function triggerMethod(objects, msg, funcName, options) {\n    var self = this;\n\n    var rets = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(objects, function (el) {\n      var obj = el[1];\n\n      if (funcName in obj) {\n        if (self.debug) {\n          console.log('application.triggerMethod: ' + msg + ': ' + el[0] + '.' + funcName + '()');\n        }\n\n        obj[funcName].call(obj, options);\n      } else if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isFunction(funcName)) {\n        if (self.debug) {\n          console.log('application.triggerMethod: ' + msg + ': ' + el[0] + ' customCallback()');\n        }\n\n        funcName.call(obj, msg + ':' + el[0], options);\n      }\n    });\n\n    return rets;\n  }\n}); // give it subclassing functionality\n\n\nApplication.extend = (backbone__WEBPACK_IMPORTED_MODULE_2___default().Model).extend;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Application.extend(js_mixins_api_access__WEBPACK_IMPORTED_MODULE_5__[\"default\"]));\n\n//# sourceURL=webpack://bumblebee/./src/js/components/application.js?");

/***/ }),

/***/ "./src/js/components/beehive.js":
/*!**************************************!*\
  !*** ./src/js/components/beehive.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var js_mixins_hardened__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/mixins/hardened */ \"./src/js/mixins/hardened.js\");\n/* harmony import */ var js_components_services_container__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/services_container */ \"./src/js/components/services_container.js\");\n/**\n * Created by rchyla on 3/16/14.\n *\n * Beehive is where all the communication happens ('Application' object\n * is where setup happens; application will load beehive)\n */\n\n\n\n\n\n\nvar hiveOptions = [];\nvar BeeHive = js_components_generic_module__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend({\n  initialize: function initialize(options) {\n    underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(this, underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].pick(options, hiveOptions));\n\n    this.Services = new js_components_services_container__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\n    this.Objects = new js_components_services_container__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\n    this.debug = false;\n    this.active = true;\n  },\n  activate: function activate() {\n    this.Services.activate.apply(this.Services, arguments);\n    this.Objects.activate(this);\n    this.active = true;\n  },\n  destroy: function destroy() {\n    this.Services.destroy(arguments);\n    this.Objects.destroy(arguments);\n    this.active = false;\n  },\n  getService: function getService(name) {\n    return this.Services.get(name);\n  },\n  hasService: function hasService(name) {\n    return this.Services.has(name);\n  },\n  addService: function addService(name, service) {\n    return this.Services.add(name, service);\n  },\n  removeService: function removeService(name) {\n    return this.Services.remove(name);\n  },\n  getObject: function getObject(name) {\n    return this.Objects.get(name);\n  },\n  hasObject: function hasObject(name) {\n    return this.Objects.has(name);\n  },\n  addObject: function addObject(name, service) {\n    return this.Objects.add(name, service);\n  },\n  removeObject: function removeObject(name) {\n    return this.Objects.remove(name);\n  },\n  getDebug: function getDebug() {\n    return this.debug;\n  },\n  getAllServices: function getAllServices() {\n    return this.Services.getAll();\n  },\n  getAllObjects: function getAllObjects() {\n    return this.Objects.getAll();\n  },\n\n  /*\n   * Wraps itself into a Facade that can be shared with other modules\n   * (it is read-only); absolutely non-modifiable and provides the\n   * following callbacks and properties:\n   *  - Services\n   */\n  hardenedInterface: {\n    Services: 'services container',\n    Objects: 'objects container',\n    debug: 'state of the app',\n    active: 'active or not',\n    getHardenedInstance: 'allow to create clone of the already hardened instance'\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(BeeHive.prototype, js_mixins_hardened__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n  getHardenedInstance: function getHardenedInstance(iface) {\n    iface = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].clone(iface || this.hardenedInterface); // because 'facade' functions are normally bound to the\n    // original object, we have to do this to access 'facade'\n\n    iface.getService = function (name) {\n      // 'get service X (but only the hardened ones)',\n      return hardened.Services.get(name);\n    };\n\n    iface.hasService = function (name) {\n      return hardened.Services.has(name);\n    };\n\n    iface.getObject = function (name) {\n      // 'get object X (but only the hardened ones)',\n      return hardened.Objects.get(name);\n    };\n\n    iface.hasObject = function (name) {\n      return hardened.Objects.has(name);\n    };\n\n    var hardened = this._getHardenedInstance(iface, this);\n\n    return hardened;\n  }\n});\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (BeeHive);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/beehive.js?");

/***/ }),

/***/ "./src/js/components/csrf_manager.js":
/*!*******************************************!*\
  !*** ./src/js/components/csrf_manager.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_mixins_hardened__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/mixins/hardened */ \"./src/js/mixins/hardened.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/*\n widgets can attach callbacks to a deferred that waits until\n * a new csrf token has been requested\n *\n * */\n\n\n\n\n\n\nvar CSRFManager = js_components_generic_module__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend({\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n    var pubsub = this.getPubSub();\n\n    _.bindAll(this, ['resolvePromiseWithNewKey']);\n\n    pubsub.subscribe(pubsub.DELIVERING_RESPONSE, this.resolvePromiseWithNewKey);\n  },\n  getCSRF: function getCSRF() {\n    this.deferred = $.Deferred();\n    var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n      target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_4__[\"default\"].CSRF\n    });\n    var pubsub = this.getPubSub();\n    pubsub.publish(pubsub.EXECUTE_REQUEST, request);\n    return this.deferred.promise();\n  },\n  resolvePromiseWithNewKey: function resolvePromiseWithNewKey(response) {\n    // get csrf here\n    var csrf = response.toJSON().csrf;\n    this.deferred.resolve(csrf);\n  },\n  hardenedInterface: {\n    getCSRF: 'getCSRF'\n  }\n});\n\n_.extend(CSRFManager.prototype, js_mixins_hardened__WEBPACK_IMPORTED_MODULE_2__[\"default\"], js_mixins_dependon__WEBPACK_IMPORTED_MODULE_5__[\"default\"].BeeHive);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (CSRFManager);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/csrf_manager.js?");

/***/ }),

/***/ "./src/js/components/default_request.js":
/*!**********************************************!*\
  !*** ./src/js/components/default_request.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_multi_params__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/multi_params */ \"./src/js/components/multi_params.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * Created by rchyla on 3/28/14.\n */\n\n\n\n\n\nvar basicCheck = function basicCheck(s) {\n  if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(s)) {\n    return true;\n  }\n\n  if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(s)) {\n    var l = s.length;\n\n    for (var i = 0; i < l; i++) {\n      var x = s[i];\n\n      if (!(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(x) || underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isNumber(x))) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n};\n\nvar allowedAttrs = {\n  query: function query(v) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isUndefined(v)) {\n      return true;\n    }\n\n    return v instanceof js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"];\n  },\n  target: basicCheck,\n  sender: basicCheck,\n  options: basicCheck\n};\nvar checker = {\n  target: function target(s) {\n    if (s && s.substring(0, 1) !== '/') {\n      return '/' + s;\n    }\n  }\n};\nvar Request = js_components_multi_params__WEBPACK_IMPORTED_MODULE_3__[\"default\"].extend({\n  /**\n   * Internal method: we allow only certain keys\n   *\n   * @param attributes\n   * @param options\n   * @returns {boolean}\n   * @private\n   */\n  _validate: function _validate(attributes, options) {\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forOwn(attributes, function (val, attr) {\n      var tempVal = attributes[attr];\n\n      if (!(attr in allowedAttrs)) {\n        throw new Error('Invalid attr: ' + attr);\n      }\n\n      if (!allowedAttrs[attr].call(allowedAttrs, tempVal)) {\n        throw new Error('Invalid value:key ' + attr + tempVal);\n      }\n    });\n\n    return true;\n  },\n\n  /**\n   * Modified version of the multi-valued set(); we do not insist\n   * on having the values in array\n   *\n   * @param key\n   * @param val\n   * @param options\n   * @returns {Request}\n   */\n  set: function set(key, val, options) {\n    this._checkLock();\n\n    var attrs;\n    if (key == null) return this; // Handle both `\"key\", value` and `{key: value}` -style arguments.\n\n    if (_typeof(key) === 'object') {\n      attrs = key;\n      options = val;\n    } else {\n      (attrs = {})[key] = val;\n    }\n\n    backbone__WEBPACK_IMPORTED_MODULE_1___default().Model.prototype.set.call(this, attrs, options);\n  },\n  // for requests, we use all components: path, query, hash\n  _checkParsed: function _checkParsed(attrs) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isObject(attrs)) {\n      var ret = {};\n\n      if ('#query' in attrs && !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEmpty(attrs['#query'])) {\n        ret.query = new js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"](attrs['#query']);\n      }\n\n      if ('#path' in attrs) {\n        ret.target = attrs['#path'][0];\n      }\n\n      if ('#hash' in attrs) {\n        underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(ret, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(attrs['#hash'], function (val, key, obj) {\n          if (val.length == 1) {\n            obj[key] = val[0];\n          }\n        }));\n      }\n\n      return ret;\n    }\n\n    return attrs;\n  },\n\n  /*\n   * Return the url string encoding all parameters that made\n   * this request. The parameters will be sorted alphabetically\n   * by their keys and URL encoded so that they can be used\n   * in requests.\n   */\n  url: function url(whatToSort) {\n    if (!whatToSort) {\n      whatToSort = this.attributes;\n    }\n\n    var target = whatToSort.target;\n    var url = target ? underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(target) ? target.join('/') : target : '';\n\n    if ('query' in whatToSort) {\n      url += '?' + whatToSort.query.url();\n    }\n\n    if ('sender' in whatToSort) {\n      url += '#' + js_components_multi_params__WEBPACK_IMPORTED_MODULE_3__[\"default\"].prototype.url.call(this, {\n        sender: whatToSort.sender\n      });\n    }\n\n    return url;\n  },\n\n  /**\n   * Re-constructs the query from the url string, returns the json attributes;\n   * cannot be used it the instance is locked\n   *\n   * @param query (String)\n   * @returns {Model}\n   */\n  load: function load(query) {\n    return js_components_multi_params__WEBPACK_IMPORTED_MODULE_3__[\"default\"].prototype.load.call(this, query.indexOf('?') > -1 ? query : query + '?');\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (Request);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/default_request.js?");

/***/ }),

/***/ "./src/js/components/doc_stash_controller.js":
/*!***************************************************!*\
  !*** ./src/js/components/doc_stash_controller.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_mixins_hardened__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/mixins/hardened */ \"./src/js/mixins/hardened.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n\n\n\n\n/*\n * this is used to store docs requested by results widget\n * for the use of other widgets, to reduce api requests\n * and speed loading. Right now it's only used by\n * the abstract widget.\n * */\n\nvar DocStashController = js_components_generic_module__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend({\n  _docs: [],\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive.getHardenedInstance());\n    var pubsub = this.getBeeHive().getService('PubSub');\n    pubsub.subscribe(pubsub.START_SEARCH, _.bind(this.emptyStash, this));\n  },\n  stashDocs: function stashDocs(docs) {\n    this._docs.push.apply(this._docs, docs);\n  },\n  getDocs: function getDocs() {\n    return _.cloneDeep(this._docs);\n  },\n  emptyStash: function emptyStash() {\n    this._docs = [];\n  },\n  hardenedInterface: {\n    stashDocs: 'stash docs',\n    getDocs: 'getDocs'\n  }\n});\n\n_.extend(DocStashController.prototype, js_mixins_hardened__WEBPACK_IMPORTED_MODULE_2__[\"default\"], js_mixins_dependon__WEBPACK_IMPORTED_MODULE_3__[\"default\"].BeeHive);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (DocStashController);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/doc_stash_controller.js?");

/***/ }),

/***/ "./src/js/components/experiments.js":
/*!******************************************!*\
  !*** ./src/js/components/experiments.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! analytics */ \"./src/js/components/analytics.js\");\n/* harmony import */ var js_components_pubsub_events__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/pubsub_events */ \"./src/js/components/pubsub_events.js\");\n\n\n\n\n\n\nvar Experiments = js_components_generic_module__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend({\n  initialize: function initialize() {\n    // store all metadata entries here\n    this.isRunning = false;\n  },\n  activate: function activate(beehive, app) {\n    this.setApp(app);\n    this.setBeeHive(beehive);\n    var pubsub = this.getPubSub();\n\n    if (!window.gtag) {\n      window.gtag = function () {\n        if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(window.dataLayer)) {\n          window.dataLayer.push(arguments);\n        }\n      };\n\n      window.gtag('event', 'optimize.callback', {\n        callback: function callback(value, name) {\n          console.log('Experiment with ID: ' + name + ' is on variant: ' + value);\n        }\n      });\n    }\n\n    pubsub.subscribe(pubsub.APP_BOOTSTRAPPED, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.onAppStarted, this));\n  },\n\n  /**\n   *\n   * callback that can be used by external components; they can listen to BBB and then run their experiment\n   *\n   * */\n  subscribe: function subscribe(event, callback) {\n    var pubsub = this.getPubSub();\n\n    if (js_components_pubsub_events__WEBPACK_IMPORTED_MODULE_5__[\"default\"][event]) {\n      pubsub.subscribe(js_components_pubsub_events__WEBPACK_IMPORTED_MODULE_5__[\"default\"][event], callback);\n    }\n  },\n  subscribeOnce: function subscribeOnce(event, callback) {\n    var pubsub = this.getPubSub();\n\n    if (js_components_pubsub_events__WEBPACK_IMPORTED_MODULE_5__[\"default\"][event]) {\n      pubsub.subscribeOnce(js_components_pubsub_events__WEBPACK_IMPORTED_MODULE_5__[\"default\"][event], callback);\n    }\n  },\n  onAppStarted: function onAppStarted() {\n    this.toggleOptimize();\n  },\n  toggleOptimize: function toggleOptimize() {\n    if (!window.dataLayer) {\n      console.warn('Optimize is not available, we are not running any experiment');\n      return;\n    }\n\n    if (this.isRunning) {\n      window.dataLayer.push({\n        event: 'optimize.deactivate'\n      });\n    } else {\n      window.dataLayer.push({\n        event: 'optimize.activate'\n      });\n    }\n\n    this.isRunning = !this.isRunning;\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(Experiments.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_3__[\"default\"].BeeHive, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_3__[\"default\"].App);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Experiments);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/experiments.js?");

/***/ }),

/***/ "./src/js/components/facade.js":
/*!*************************************!*\
  !*** ./src/js/components/facade.js ***!
  \*************************************/
/***/ (function() {

eval("throw new Error(\"Module build failed (from ./node_modules/babel-loader/lib/index.js):\\nSyntaxError: /home/tim/code/bbb/src/js/components/facade.js: Identifier 'Facade' has already been declared. (22:6)\\n\\n\\u001b[0m \\u001b[90m 20 |\\u001b[39m   \\u001b[90m// The Facade encapsulates objectIn according to the description\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m 21 |\\u001b[39m   \\u001b[90m// The exposed facade is guaranteed to have exactly the functions described in description.\\u001b[39m\\u001b[0m\\n\\u001b[0m\\u001b[31m\\u001b[1m>\\u001b[22m\\u001b[39m\\u001b[90m 22 |\\u001b[39m   \\u001b[36mvar\\u001b[39m \\u001b[33mFacade\\u001b[39m \\u001b[33m=\\u001b[39m \\u001b[36mfunction\\u001b[39m(description\\u001b[33m,\\u001b[39m objectIn) {\\u001b[0m\\n\\u001b[0m \\u001b[90m    |\\u001b[39m       \\u001b[31m\\u001b[1m^\\u001b[22m\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m 23 |\\u001b[39m     \\u001b[36mvar\\u001b[39m facade\\u001b[33m;\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m 24 |\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m 25 |\\u001b[39m     \\u001b[90m// TODO: add enforce of \\\"new\\\"\\u001b[39m\\u001b[0m\\n    at Parser._raise (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:798:17)\\n    at Parser.raiseWithData (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:791:17)\\n    at Parser.raise (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:752:17)\\n    at ScopeHandler.checkRedeclarationInScope (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:1427:12)\\n    at ScopeHandler.declareName (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:1407:14)\\n    at Parser.checkLVal (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:10615:24)\\n    at Parser.parseVarId (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:13488:10)\\n    at Parser.parseVar (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:13463:12)\\n    at Parser.parseVarStatement (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:13280:10)\\n    at Parser.parseStatementContent (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:12863:21)\");\n\n//# sourceURL=webpack://bumblebee/./src/js/components/facade.js?");

/***/ }),

/***/ "./src/js/components/feedback_mediator.js":
/*!************************************************!*\
  !*** ./src/js/components/feedback_mediator.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var cache__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! cache */ \"./src/libs/cache.js\");\n/* harmony import */ var cache__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(cache__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_response__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/api_response */ \"./src/js/components/api_response.js\");\n/* harmony import */ var js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/components/api_query_updater */ \"./src/js/components/api_query_updater.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_components_pubsub_key__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/components/pubsub_key */ \"./src/js/components/pubsub_key.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/**\n * Created by rchyla on 12/2/14.\n */\n\n/**\n * Mediator to coordinate API-feedback exchange\n * and react on them\n */\n\n\n\n\n\n\n\n\n\n\nvar ErrorMediator = js_components_generic_module__WEBPACK_IMPORTED_MODULE_3__[\"default\"].extend({\n  initialize: function initialize(options) {\n    this._cache = this._getNewCache(options.cache);\n    this.debug = options.debug || false;\n    this._handlers = {};\n    this.app = null; // reference to the main application\n  },\n  _getNewCache: function _getNewCache(options) {\n    return new (cache__WEBPACK_IMPORTED_MODULE_2___default())(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n      maximumSize: 150,\n      expiresAfterWrite: 60 * 30 // 30 mins\n\n    }, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isObject(options) ? options : {}));\n  },\n\n  /**\n   * Starts listening on the PubSub\n   *\n   * @param beehive - the full access instance; we excpect PubSub to be\n   *    present\n   */\n  activate: function activate(beehive, app) {\n    if (!app) throw new Error('This controller absolutely needs access to the app');\n    this.setBeeHive(beehive);\n    this.setApp(app);\n    var pubsub = this.getPubSub();\n    pubsub.subscribe(pubsub.FEEDBACK, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.receiveFeedback, this));\n  },\n\n  /**\n   * This method receives ApiFeedback objects (usually from the API)\n   * and decides what to do with them.\n   *\n   * @param apiFeedback\n   * @param senderKey - if present, identifies the widget that made\n   *                    the request\n   */\n  receiveFeedback: function receiveFeedback(apiFeedback, senderKey) {\n    if (this.debug) console.log('[EM]: received feedback:', apiFeedback.toJSON(), senderKey ? senderKey.getId() : null);\n\n    var componentKey = this._getCacheKey(apiFeedback, senderKey);\n\n    var entry = this._retrieveCacheEntry(componentKey);\n\n    if (!entry) {\n      entry = this.createNewCacheEntry(componentKey);\n\n      this._cache.put(componentKey, entry);\n    }\n\n    var handler = this.getFeedbackHandler(apiFeedback, entry);\n\n    if (handler) {\n      if (handler.execute && handler.execute(apiFeedback, entry)) {\n        return;\n      }\n\n      if (handler.call(this, apiFeedback, entry)) {\n        return;\n      }\n    }\n\n    this.handleFeedback(apiFeedback, entry);\n  },\n  removeFeedbackHandler: function removeFeedbackHandler(name) {\n    if (name.toString() in this._handlers) delete this._handlers[name.toString()];\n  },\n  addFeedbackHandler: function addFeedbackHandler(code, func) {\n    if (!code && !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isNumber(code)) throw new Error('first argument must be code or code:string or string');\n    if (!underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isFunction(func)) throw new Error('second argument must be executable');\n    this._handlers[code.toString()] = func;\n  },\n  getFeedbackHandler: function getFeedbackHandler(apiFeedback, entry) {\n    var keys = [apiFeedback.code + ':' + entry.id, entry.id, apiFeedback.code ? apiFeedback.code.toString() : Date.now()];\n\n    for (var i = 0; i < keys.length; i++) {\n      if (keys[i] in this._handlers) {\n        return this._handlers[keys[i]];\n      }\n    }\n  },\n  _retrieveCacheEntry: function _retrieveCacheEntry(componentKey) {\n    return this._cache.getSync(componentKey);\n  },\n\n  /**\n   * Creates a unique, cleaned key from the request and the apiQuery\n   * @param apiFeedback\n   *    instance of {ApiFeedback}\n   * @param senderKey\n   *    string or instance of {PubSubKey}\n   */\n  _getCacheKey: function _getCacheKey(apiFeedback, senderKey) {\n    if (!apiFeedback) throw new Error('ApiFeedback cannot be empty');\n    if (apiFeedback.getSenderKey()) return apiFeedback.getSenderKey();\n\n    if (senderKey) {\n      if (senderKey instanceof js_components_pubsub_key__WEBPACK_IMPORTED_MODULE_8__[\"default\"]) {\n        return senderKey.getId();\n      }\n\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(senderKey)) {\n        return senderKey;\n      }\n    }\n\n    var req = apiFeedback.getApiRequest();\n\n    if (req) {\n      return req.url();\n    }\n\n    throw new Error('We cannot identify the origin (recipient) of this feedback');\n  },\n  createNewCacheEntry: function createNewCacheEntry(componentKey) {\n    return {\n      waiting: 0,\n      max: 0,\n      errors: 0,\n      counter: 0,\n      created: Date.now(),\n      id: componentKey\n    };\n  },\n\n  /**\n   * This is a default feedback handling; it executes only IFF\n   * it was not handled by specific handlers.\n   *\n   * @param apiFeedback\n   * @param entry\n   */\n  handleFeedback: function handleFeedback(apiFeedback, entry) {\n    var c = js_components_api_feedback__WEBPACK_IMPORTED_MODULE_7__[\"default\"].CODES;\n    entry.counter += 1;\n\n    switch (apiFeedback.code) {\n      case c.ALL_FINE:\n        entry.errors = 0;\n        break;\n\n      case c.KEEP_WAITING:\n        entry.waiting += entry.started;\n        break;\n\n      case c.SERVER_ERROR:\n        break;\n\n      case c.ALERT:\n        this.getApp().getController('AlertsController').onAlert(apiFeedback, entry);\n        break;\n\n      default:\n    }\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(ErrorMediator.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_9__[\"default\"].BeeHive, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_9__[\"default\"].App);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ErrorMediator);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/feedback_mediator.js?");

/***/ }),

/***/ "./src/js/components/generic_module.js":
/*!*********************************************!*\
  !*** ./src/js/components/generic_module.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/*\n * A generic class to be used for building modules (the Marionette.Module)\n * just complicates things. For simple things, just use this class.\n */\n\n // A list of options to be attached directly to the module, if provided.\n\nvar moduleOptions = ['className', 'activate'];\n\nvar Module = function Module(options) {\n  var defaults;\n  options = options || {};\n  this.mid = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].uniqueId('module');\n\n  underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(this, underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].pick(options, moduleOptions));\n\n  this.initialize.call(this, options);\n}; // every module has the Events mixin\n\n\nunderscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(Module.prototype, (backbone__WEBPACK_IMPORTED_MODULE_0___default().Events), {\n  className: 'GenericModule',\n  initialize: function initialize() {},\n  destroy: function destroy() {},\n  activate: function activate(options) {\n    underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(this, underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].pick(options, moduleOptions));\n  }\n}); // give the module subclassing functionality\n\n\nModule.extend = (backbone__WEBPACK_IMPORTED_MODULE_0___default().Model).extend;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Module);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/generic_module.js?");

/***/ }),

/***/ "./src/js/components/history_manager.js":
/*!**********************************************!*\
  !*** ./src/js/components/history_manager.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var js_mixins_hardened__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/mixins/hardened */ \"./src/js/mixins/hardened.js\");\n/* harmony import */ var js_components_pubsub_key__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/pubsub_key */ \"./src/js/components/pubsub_key.js\");\n\n\n\n\nvar History = js_components_generic_module__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  initialize: function initialize() {\n    this._history = [];\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n    var pubsub = this.getPubSub();\n    pubsub.subscribe(pubsub.NAVIGATE, _.bind(this.recordNav, this));\n  },\n  recordNav: function recordNav() {\n    this._history.push([].slice.apply(arguments));\n  },\n  getCurrentNav: function getCurrentNav() {\n    return this._history[this._history.length - 1];\n  },\n  getPreviousNav: function getPreviousNav() {\n    return this._history[this._history.length - 2];\n  },\n  hardenedInterface: {\n    getPreviousNav: '',\n    getCurrentNav: ''\n  }\n});\n\n_.extend(History.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_1__[\"default\"].BeeHive, js_mixins_hardened__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (History);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/history_manager.js?");

/***/ }),

/***/ "./src/js/components/hotkeys_controller.js":
/*!*************************************************!*\
  !*** ./src/js/components/hotkeys_controller.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var js_mixins_hardened__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/mixins/hardened */ \"./src/js/mixins/hardened.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var hotkeys__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! hotkeys */ \"./src/libs/hotkeys.js\");\n/* harmony import */ var hotkeys__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(hotkeys__WEBPACK_IMPORTED_MODULE_4__);\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n\n\n\n\n\nvar MODIFIER = 'alt+shift';\n\nvar mod = function mod(val) {\n  var arr = Array.isArray(val) ? val : [val];\n  return arr.map(function (key) {\n    return \"\".concat(MODIFIER, \"+\").concat(key);\n  }).join(', ');\n};\n\nvar HOTKEYS = [{\n  hotkey: mod('a'),\n  event: 'search',\n  description: 'Focus on search bar'\n}, {\n  hotkey: mod('left'),\n  event: 'prev',\n  description: 'Previous results page'\n}, {\n  hotkey: mod('right'),\n  event: 'next',\n  description: 'Next results page'\n}, {\n  hotkey: mod('down'),\n  event: 'item-next',\n  description: 'Focus on next result entry'\n}, {\n  hotkey: mod('up'),\n  event: 'item-prev',\n  description: 'Focus on previous result entry'\n}, {\n  hotkey: mod('s'),\n  event: 'item-select',\n  description: 'Select currently focused result entry'\n}, {\n  hotkey: mod('`'),\n  event: 'show-help',\n  description: 'Show help dialog'\n}];\nvar HotkeysController = js_components_generic_module__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  initialize: function initialize() {},\n  createEvent: function createEvent(name) {\n    var ps = this.getPubSub();\n    return function (e) {\n      ps.publish(ps.CUSTOM_EVENT, name, e);\n    };\n  },\n  activate: function activate(beehive) {\n    var _this = this;\n\n    this.setBeeHive(beehive);\n    HOTKEYS.forEach(function (_ref) {\n      var hotkey = _ref.hotkey,\n          event = _ref.event;\n      hotkeys__WEBPACK_IMPORTED_MODULE_4___default()(hotkey, _this.createEvent(\"hotkey/\".concat(event)));\n    });\n    var ps = this.getPubSub();\n    ps.subscribe(ps.CUSTOM_EVENT, function (e) {\n      if (e === 'hotkey/show-help') {\n        _this.showHelpModal();\n      }\n    });\n  },\n  getHotkeys: function getHotkeys() {\n    return HOTKEYS;\n  },\n  showHelpModal: function showHelpModal() {\n    var pubsub = this.getPubSub();\n    pubsub.publish(pubsub.FEEDBACK, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n      code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"].CODES.ALERT,\n      msg: this.getModalMessage(),\n      title: 'Hotkeys',\n      modal: true\n    }));\n  },\n  getModalMessage: function getModalMessage() {\n    return ['<dl style=\"display: flex; flex-flow: row wrap;\">'].concat(_toConsumableArray(HOTKEYS.map(function (_ref2) {\n      var hotkey = _ref2.hotkey,\n          description = _ref2.description;\n      var hotkeyList = hotkey.split(', ').map(function (c) {\n        return \"<code>\".concat(c, \"</code>\");\n      }).join(', ');\n      return \"\\n            <dt style=\\\"flex-basis: 40%; text-align: right; padding-right: 10px\\\">\".concat(hotkeyList, \"</dt>\\n            <dd style=\\\"flex-basis: 60%\\\">\").concat(description, \"</dd>\\n          \");\n    })), ['</dl>']).join('');\n  },\n  hardenedInterface: {}\n});\n\n_.extend(HotkeysController.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_1__[\"default\"].BeeHive, js_mixins_hardened__WEBPACK_IMPORTED_MODULE_2__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (HotkeysController);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/hotkeys_controller.js?");

/***/ }),

/***/ "./src/js/components/json_response.js":
/*!********************************************!*\
  !*** ./src/js/components/json_response.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/*\n * A simple wrapper around the API response for ADS\n * This class is extended/enhanced by other implementations\n * (e.g. solr_response)\n */\n\n\n\n\nvar JSONResponse = function JSONResponse(attributes, options) {\n  var defaults;\n  var attrs = attributes || {};\n  options || (options = {});\n  this.rid = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].uniqueId('r');\n  this.readOnly = options.hasOwnProperty('readOnly') ? options.readOnly : true;\n  this._url = options.hasOwnProperty('url') ? options.url : null;\n  if (options.parse) attrs = this.parse(attrs, options) || {};\n\n  if (defaults = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].result(this, 'defaults')) {\n    attrs = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].defaults({}, attrs, defaults);\n  }\n\n  this.attributes = attrs;\n  this.initialize.apply(this, arguments);\n};\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(JSONResponse.prototype, {\n  // Initialize is an empty function by default. Override it with your own\n  // initialization logic.\n  initialize: function initialize() {},\n  getApiQuery: function getApiQuery() {\n    return this.apiQuery;\n  },\n  setApiQuery: function setApiQuery(q) {\n    if (!q) {\n      return;\n    }\n\n    if (!(q instanceof js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"])) {\n      throw new Error('Only ApiQuery instances accepted');\n    }\n\n    this.apiQuery = q;\n  },\n  // Return a copy of the model's `attributes` object.\n  toJSON: function toJSON(options) {\n    return this._clone(this.attributes);\n  },\n  // url string that identifies this object\n  url: function url() {\n    if (this._url) {\n      return this._url;\n    }\n\n    return this.rid; // default is just to return response id\n  },\n  set: function set(key, val, options) {\n    if (this.readOnly) {\n      throw Error(\"You can't change read-only response object\");\n    }\n\n    var parts = this._split(key);\n\n    if (parts.length == 1) {\n      this.attributes[parts[0]] = val;\n    } else {\n      var pointer = this.get(key);\n      pointer = val;\n    }\n  },\n  _split: function _split(key) {\n    var parts = [];\n    var i = 0;\n    var l = key.length;\n    var start = 0;\n    var quotes = [];\n\n    while (i < l) {\n      if (key[i] == quotes[quotes.length - 1]) {\n        quotes.pop();\n      } else if (key[i] == '\"' || key[i] == \"'\") {\n        quotes.push(key[i]);\n      } else if (key[i] == '.' && quotes.length == 0) {\n        parts.push(key.substring(start, i));\n        start = i + 1;\n      } else if (key[i] == '[' && quotes.length == 0) {\n        parts.push(key.substring(start, i));\n        parts.push(key.substring(i, key.indexOf(']', i + 1) + 1));\n        start = i = key.indexOf(']', i + 1) + 1;\n      }\n\n      i += 1;\n    }\n\n    if (start < l) {\n      parts.push(key.substring(start));\n    } // console.log(key, parts);\n\n\n    return parts;\n  },\n  has: function has(key) {\n    return this.get(key, true);\n  },\n  get: function get(key, justCheck, defaultValue) {\n    // if key empty, return everything\n    if (!key) {\n      return this._clone(this.attributes);\n    }\n\n    var parts = this._split(key);\n\n    var found = [];\n    var pointer = this.attributes;\n\n    while (parts.length > 0) {\n      var k = parts.shift();\n\n      if (pointer.hasOwnProperty(k)) {\n        pointer = pointer[k];\n        found.push(k);\n      } else if (k.indexOf('[') > -1) {\n        // foo['something'] or foo[0]\n        var m = k.trim().substring(1, k.length - 1);\n\n        if ((m.indexOf('\"') > -1 || m.indexOf(\"'\") > -1) && pointer.hasOwnProperty(m.substring(1, m.length - 1))) {\n          // object property access\n          pointer = pointer[m.substring(1, m.length - 1)];\n          found.push(m);\n        } else if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(pointer)) {\n          var ix = null;\n\n          try {\n            ix = parseInt(m);\n\n            if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isNaN(ix) || pointer.length <= ix || ix < 0) {\n              if (justCheck) {\n                return false;\n              }\n\n              if (typeof defaultValue !== 'undefined') {\n                return defaultValue;\n              }\n\n              throw new Error();\n            }\n\n            pointer = pointer[ix];\n            found.push(m);\n          } catch (e) {\n            if (justCheck) {\n              return false;\n            }\n\n            if (typeof defaultValue !== 'undefined') {\n              return defaultValue;\n            }\n\n            throw new Error(\"Can't find: \" + key + (found.length > 0 ? ' (worked up to: ' + found.join('.') + ')' : ''));\n          }\n        } else {\n          if (justCheck) {\n            return false;\n          }\n\n          if (typeof defaultValue !== 'undefined') {\n            return defaultValue;\n          }\n\n          throw new Error(\"Can't find: \" + key + (found.length > 0 ? ' (worked up to: ' + found.join('.') + ')' : ''));\n        }\n      } else {\n        if (justCheck) {\n          return false;\n        }\n\n        if (typeof defaultValue !== 'undefined') {\n          return defaultValue;\n        }\n\n        throw new Error(\"Can't find: \" + key + (found.length > 0 ? ' (worked up to: ' + found.join('.') + ')' : ''));\n      }\n    }\n\n    if (justCheck) {\n      return true;\n    }\n\n    return this._clone(pointer);\n  },\n  clone: function clone() {\n    return new this.constructor(this.attributes);\n  },\n  // creates a copy of the requested elements\n  _clone: function _clone(elem) {\n    if (!this.readOnly || !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isObject(elem)) {\n      return elem;\n    }\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cloneDeep) {\n      // lodash\n      return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cloneDeep(elem);\n    }\n\n    return JSON.parse(JSON.stringify(elem));\n  },\n  isLocked: function isLocked() {\n    return this.readOnly;\n  },\n  lock: function lock() {\n    return this.readOnly = true;\n  },\n  unlock: function unlock() {\n    return this.readOnly = false;\n  }\n}); // use the bb extend function for classes hierarchy\n\n\nJSONResponse.extend = (backbone__WEBPACK_IMPORTED_MODULE_1___default().Model).extend;\n/* harmony default export */ __webpack_exports__[\"default\"] = (JSONResponse);\n/**\n * Created by rchyla on 3/3/14.\n */\n\n//# sourceURL=webpack://bumblebee/./src/js/components/json_response.js?");

/***/ }),

/***/ "./src/js/components/library_controller.js":
/*!*************************************************!*\
  !*** ./src/js/components/library_controller.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_mixins_hardened__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/mixins/hardened */ \"./src/js/mixins/hardened.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! utils */ \"./src/js/utils.js\");\n\n\n\n\n\n\n\n\n\nvar LibraryModel = backbone__WEBPACK_IMPORTED_MODULE_0___default().Model.extend({\n  defaults: function defaults() {\n    // this is the data we expect to get from the server\n    return {\n      num_documents: 0,\n      date_last_modified: undefined,\n      permission: undefined,\n      description: '',\n      public: false,\n      num_users: 1,\n      owner: undefined,\n      date_created: undefined,\n      id: undefined,\n      title: ''\n    };\n  }\n});\nvar LibraryCollection = backbone__WEBPACK_IMPORTED_MODULE_0___default().Collection.extend({\n  model: LibraryModel\n});\nvar LibraryController = js_components_generic_module__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend({\n  initialize: function initialize() {\n    // store all metadata entries here\n    this.collection = new LibraryCollection();\n  },\n  activate: function activate(beehive) {\n    var self = this;\n    this.setBeeHive(beehive.getHardenedInstance());\n    var pubsub = this.getBeeHive().getService('PubSub');\n    pubsub.subscribe(pubsub.INVITING_REQUEST, _.bind(this.updateCurrentQuery, this));\n    pubsub.subscribe(pubsub.USER_ANNOUNCEMENT, _.bind(this.handleUserAnnouncement, this));\n    pubsub.subscribe(pubsub.CUSTOM_EVENT, function (event) {\n      if (event === 'invalidate-library-metadata') {\n        self._metadataLoaded = false;\n      }\n    });\n    /*\n     * the three events that come from changing a collection:\n     * -change if a model's contents were changed\n     * -add if models were added\n     * -reset if the entire collection was reset\n     * -remove when a model is removed (library deleted)\n     * */\n\n    _.each(['change', 'add', 'reset', 'remove'], function (ev) {\n      this.listenTo(this.collection, ev, function (arg1, arg2) {\n        if (ev == 'change' && arg1 instanceof (backbone__WEBPACK_IMPORTED_MODULE_0___default().Model)) {\n          // a single model changed, widgets might want to know which one\n          pubsub.publish(pubsub.LIBRARY_CHANGE, this.collection.toJSON(), {\n            ev: ev,\n            id: arg1.id\n          }); // also clear out the bibcode cache if necessary\n\n          delete this._libraryBibcodeCache[arg1.id];\n        } else {\n          pubsub.publish(pubsub.LIBRARY_CHANGE, this.collection.toJSON(), {\n            ev: ev\n          });\n        }\n      });\n    }, this);\n  },\n  handleUserAnnouncement: function handleUserAnnouncement(event) {\n    if (event == 'user_signed_in') {\n      this._fetchAllMetadata();\n    } else if (event == 'user_signed_out') {\n      this.collection.reset({});\n    }\n  },\n\n  /*\n   * private methods\n   */\n  updateCurrentQuery: function updateCurrentQuery(apiQuery) {\n    this._currentQuery = apiQuery;\n  },\n  composeRequest: function composeRequest(target, method, options) {\n    var request;\n    var options = options || {};\n    var data = options.data || undefined; // using \"endpoint\" to mean the actual url string\n    // get data from the relevant model based on the endpoint\n\n    var deferred = $.Deferred();\n\n    function done() {\n      var args = [_.extend(arguments[0], options.extraArguments), [].slice(arguments, 1)];\n      deferred.resolve.apply(undefined, args);\n    }\n\n    function fail(error) {\n      // on fail, send a custom event to alert library widgets\n      var ps = this.getPubSub();\n      ps.publish(ps.CUSTOM_EVENT, 'libraries:request:fail', error);\n      deferred.reject.apply(undefined, arguments);\n    }\n\n    request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n      target: target,\n      options: {\n        context: this,\n        type: method,\n        data: JSON.stringify(data),\n        contentType: 'application/json',\n        done: done,\n        fail: fail\n      }\n    });\n    this.getBeeHive().getService('Api').request(request);\n    return deferred.promise();\n  },\n  _executeApiRequest: function _executeApiRequest(apiQuery) {\n    var req = new js_components_api_request__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n      target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].SEARCH,\n      query: apiQuery\n    });\n    var defer = $.Deferred();\n    var pubsub = this.getPubSub();\n    pubsub.subscribeOnce(pubsub.DELIVERING_RESPONSE, _.bind(function (data) {\n      defer.resolve(data);\n    }), this);\n    pubsub.publish(pubsub.EXECUTE_REQUEST, req);\n    return defer.promise();\n  },\n  _getBibcodes: function _getBibcodes(options) {\n    var deferred = $.Deferred();\n    var that = this;\n\n    if (options.bibcodes == 'all') {\n      var makeRequest = function makeRequest() {\n        q.set('start', start);\n\n        this._executeApiRequest(q).done(function (apiResponse) {\n          var bibs = _.map(apiResponse.get('response.docs'), function (d) {\n            return d.bibcode;\n          });\n\n          [].push.apply(bibcodes, bibs);\n          start += rows;\n\n          if (start < limit) {\n            makeRequest.call(that);\n          } else {\n            deferred.resolve(bibcodes);\n          }\n        });\n      };\n\n      var limit = options.limit || 2000;\n      var start = 0;\n      var rows = 100;\n      var bibcodes = [];\n\n      var q = this._currentQuery.clone();\n\n      q.unlock();\n      q.set('rows', 100);\n      q.set('fl', 'bibcode');\n      makeRequest.call(this);\n    } else if (options.bibcodes == 'selected') {\n      var bibs = this.getBeeHive().getObject('AppStorage').getSelectedPapers();\n      deferred.resolve(bibs);\n    } // for abstract widget\n    else if (_.isArray(options.bibcodes)) {\n      deferred.resolve(options.bibcodes);\n    } else {\n      throw new Error('should we add all bibcodes or only selected ones?');\n    }\n\n    return deferred.promise();\n  },\n  _fetchAllMetadata: function _fetchAllMetadata() {\n    var that = this;\n    var endpoint = js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].LIBRARIES;\n    return this.composeRequest(endpoint, 'GET').done(function (data) {\n      that._metadataLoaded = true;\n      that.collection.reset(data.libraries);\n    });\n  },\n\n  /*\n   * public methods\n   *\n   */\n\n  /*\n   * this is how widgets/controllers can learn about\n   * all libraries\n   * if you provide an id, you just get info\n   * about the lib with that id\n   * */\n  getLibraryMetadata: function getLibraryMetadata(id) {\n    var merge = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n    // check to see if the id is even in the collection,\n    // if not return fetchLibraryMetadata;\n    if (id && !this.collection.get(id)) {\n      return this.fetchLibraryMetadata(id, merge);\n    }\n\n    var deferred = $.Deferred();\n    var that = this; // if this is the initial check, just wait until we can load the metadata\n\n    if (!this._metadataLoaded) {\n      this._fetchAllMetadata().done(function (data) {\n        // make sure the collection is refilled before this promise is resolved\n        setTimeout(function () {\n          var data = id ? that.collection.get(id).toJSON() : that.collection.toJSON();\n          deferred.resolve(data);\n        }, 1);\n      });\n    } else {\n      var data = id ? that.collection.get(id).toJSON() : that.collection.toJSON();\n      deferred.resolve(data);\n    }\n\n    return deferred.promise();\n  },\n\n  /*\n   * fetch the data especially -- useful for public libraries but also\n   * in case the new data hasn't been added to the collection yet\n   * */\n  fetchLibraryMetadata: function fetchLibraryMetadata(id) {\n    var merge = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var that = this;\n    if (!id) throw new Error('need to provide a library id');\n    var deferred = $.Deferred();\n    this.composeRequest(js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].LIBRARIES + '/' + id).done(function (data) {\n      deferred.resolve(data.metadata); // set into collection\n\n      if (merge) {\n        that.collection.add(data.metadata, {\n          merge: true\n        });\n      }\n    }).fail(function (xhr) {\n      deferred.reject(xhr); // just navigate to a 404 page\n\n      that.getPubSub().publish(that.getPubSub().NAVIGATE, '404', {\n        xhr: xhr,\n        message: \"Cannot find library ID: <strong>\".concat(id, \"</strong>\")\n      });\n    });\n    return deferred.promise();\n  },\n\n  /*\n   *\n   * here, store lists of bibcodes requested from the 'getLibraryBibcodes'\n   * method. they are stored here so that if a user quickly toggles back\n   * and forth between the export/metrics/vis widget, we won't have to re-fetch\n   * the bibcodes\n   * */\n  _libraryBibcodeCache: {},\n\n  /*\n   * get list of 2000 bibcodes,\n   * this is used for fetching data for export, metrics, etc\n   *\n   * */\n  getLibraryBibcodes: function getLibraryBibcodes(id) {\n    var deferred = $.Deferred();\n    var that = this; // hard limit, no more than 10,000 records can be exported to search results page\n\n    var maxReturned = 10000; // we already have it in the cache, so just resolve + return promise\n\n    if (this._libraryBibcodeCache[id]) {\n      deferred.resolve(this._libraryBibcodeCache[id]);\n      return deferred.promise();\n    }\n\n    var limit = maxReturned; // start gets incremented\n\n    var start = 0;\n    var rows = 100;\n    var bibcodes = [];\n    var endpoint = js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].LIBRARIES + '/' + id;\n    var that = this; // this function gets called repeatedly\n\n    function done(data) {\n      limit = data.solr.response.numFound > maxReturned ? maxReturned : data.solr.response.numFound;\n\n      var bibs = _.pluck(data.solr.response.docs, 'bibcode');\n\n      [].push.apply(bibcodes, bibs);\n      start += rows;\n\n      if (start < limit) {\n        makeRequest();\n      } else {\n        that._libraryBibcodeCache[id] = bibcodes;\n        deferred.resolve(bibcodes);\n      }\n    }\n\n    function makeRequest() {\n      var q = new js_components_api_query__WEBPACK_IMPORTED_MODULE_6__[\"default\"]();\n      q.set('rows', 100);\n      q.set('fl', 'bibcode');\n      q.set('start', start);\n      var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n        target: endpoint,\n        query: q,\n        options: {\n          context: this,\n          contentType: 'application/x-www-form-urlencoded',\n          done: done,\n          fail: this.handleError\n        }\n      });\n      that.getBeeHive().getService('Api').request(request);\n    }\n\n    makeRequest.call(this);\n    return deferred.promise();\n  },\n\n  /*\n   * requires id, name, description\n   */\n  createLibrary: function createLibrary(data) {\n    var that = this;\n    var endpoint = js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].LIBRARIES;\n    return this.composeRequest(endpoint, 'POST', {\n      data: data\n    }).done(function () {\n      // refresh collection\n      that._fetchAllMetadata();\n    });\n  },\n  deleteLibrary: function deleteLibrary(id, name) {\n    var that = this;\n    var endpoint = js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].DOCUMENTS + '/' + id;\n    var name;\n    var promise = this.composeRequest(endpoint, 'DELETE').done(function () {\n      // delete library from internal representation\n      that.collection.remove(id); // take care of ui\n\n      that.getBeeHive().getService('PubSub').publish(that.getBeeHive().getService('PubSub').NAVIGATE, 'AllLibrariesWidget', 'libraries');\n      var message = 'Library <b>' + name + '</b> was successfully deleted';\n      that.getBeeHive().getService('PubSub').publish(that.getBeeHive().getService('PubSub').ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n        code: 0,\n        msg: message,\n        type: 'success'\n      }));\n    }).fail(function (jqXHR) {\n      var error = JSON.parse(jqXHR.responseText).error;\n      var message = 'Library <b>' + name + '</b> could not be deleted : (' + error + ')';\n      that.getBeeHive().getService('PubSub').publish(that.getBeeHive().getService('PubSub').ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n        code: 0,\n        msg: message,\n        type: 'danger'\n      }));\n    });\n    return promise;\n  },\n\n  /*\n   * @param id\n   * @param updateData e.g. {bibcode:[1,2,3], action: \"add/remove\" }\n   *\n   */\n  updateLibraryContents: function updateLibraryContents(id, updateData) {\n    var that = this;\n    var data = {\n      data: updateData,\n      extraArguments: {\n        numBibcodesRequested: updateData.bibcode.length\n      }\n    };\n    var endpoint = js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].DOCUMENTS + '/' + id;\n    return this.composeRequest(endpoint, 'POST', data).done(function () {\n      that.fetchLibraryMetadata(id);\n    }).fail(function (jqXHR) {\n      var error = JSON.parse(jqXHR.responseText).error;\n      var message = 'Library <b>' + that.collection.get(id).title + '</b> could not be updated: (' + error + ')';\n      that.getBeeHive().getService('PubSub').publish(that.getBeeHive().getService('PubSub').ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n        code: 0,\n        msg: message,\n        type: 'danger'\n      }));\n    });\n  },\n  performLibraryOperation: function performLibraryOperation(libId, options) {\n    if (!options) {\n      throw new Error('must provide options object with action and set of secondary libraries (if necessary)');\n    }\n\n    var data = {};\n    var action = options.action && options.action.toLowerCase();\n    var libraries = options.libraries;\n    var name = options.name;\n    var isAdvancedAction = /^(union|intersection|difference)$/.test(action);\n    var isCopyAction = /^copy$/.test(action);\n    var isEmptyAction = /^empty$/.test(action);\n\n    if (!_.isString(action) || !isAdvancedAction && !isCopyAction && !isEmptyAction) {\n      throw new Error(action + ' is not one of the defined actions');\n    }\n\n    if (!_.isString(libId)) {\n      throw new Error('must pass library ID as first parameter');\n    }\n\n    if (isAdvancedAction && !_.isArray(libraries)) {\n      throw new Error('libraries must be an array');\n    }\n\n    if (isCopyAction && (!_.isArray(libraries) || libraries.length !== 1)) {\n      throw new Error('for copy action, libraries must have exactly 1 entry');\n    } // make sure that we don't send duplicate library ids\n\n\n    libraries = _.unique(libraries);\n\n    _.extend(data, {\n      action: action\n    });\n\n    if (isAdvancedAction) {\n      _.extend(data, {\n        libraries: libraries,\n        name: name\n      });\n    } else if (isCopyAction) {\n      _.extend(data, {\n        libraries: libraries\n      });\n    }\n\n    var endpoint = js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].LIBRARIES + '/operations/' + libId;\n    return this.composeRequest(endpoint, 'POST', {\n      data: data\n    });\n  },\n  transferOwnership: function transferOwnership(libId, newOwnerEmail) {\n    if (!newOwnerEmail || !_.isString(newOwnerEmail)) {\n      throw 'new owner email address must be a string';\n    }\n\n    if (!libId || !_.isString(libId)) {\n      throw 'library Id must be a string';\n    }\n\n    var endpoint = js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].LIBRARY_TRANSFER + '/' + libId;\n    var data = {\n      email: newOwnerEmail\n    };\n    return this.composeRequest(endpoint, 'POST', {\n      data: data\n    });\n  },\n  //      /*\n  //      * email, permission, value\n  //      * */\n  //\n  //      updateLibraryPermissions : function(id, data){\n  //\n  //        var that = this;\n  //\n  //        var endpoint = ApiTargets[\"PERMISSIONS\"] + \"/\" + id;\n  //        return this.composeRequest(endpoint, \"POST\", {data : data})\n  //          .done(function(data){\n  //            this.collection.get(id).set(data);\n  //          })\n  //          .fail(function(jqXHR){\n  //            var error = JSON.parse(jqXHR.responseText).error;\n  //            var message = \"Library <b>\" +  that.collection.get(id).title + \"</b> could not be updated: (\"  + error + \")\";\n  //            that.getBeeHive().getService(\"PubSub\").publish(that.key, that.getBeeHive().getService(\"PubSub\").ALERT, new ApiFeedback({code: 0, msg: message, type : \"danger\"}));\n  //          });\n  //\n  //      },\n  updateLibraryMetadata: function updateLibraryMetadata(id, data) {\n    var that = this;\n    var endpoint = js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].DOCUMENTS + '/' + id;\n    return this.composeRequest(endpoint, 'PUT', {\n      data: data\n    }).done(function (data) {\n      that.collection.get(id).set(data);\n    }).fail(function (jqXHR) {\n      var error = JSON.parse(jqXHR.responseText).error;\n      var message = 'Library <b>' + that.collection.get(id).get('name') + '</b> could not be updated: (' + error + ')';\n      that.getBeeHive().getService('PubSub').publish(that.getBeeHive().getService('PubSub').ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n        code: 0,\n        msg: message,\n        type: 'danger'\n      }));\n    });\n  },\n\n  /* fetches bibcodes, then submits them to library endpoint\n   *\n   * @param data e.g. {\"library\": [library_id], \"bibcodes\": [\"all\"/ \"selected\"]}\n   *\n   */\n  addBibcodesToLib: function addBibcodesToLib(data) {\n    var that = this;\n\n    var promise = this._getBibcodes(data).then(function (bibcodes) {\n      // should return success or fail message\n      return that.updateLibraryContents(data.library, {\n        bibcode: bibcodes,\n        action: 'add'\n      }).fail(function () {\n        var message = 'Library <b>' + that.collection.get(data.library).title + '</b> could not be updated';\n        that.getBeeHive().getService('PubSub').publish(that.getBeeHive().getService('PubSub').ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n          code: 0,\n          msg: message,\n          type: 'danger'\n        }));\n      });\n    });\n\n    return promise;\n  },\n\n  /* fetch the bibcodes, then POST to the create endpoint with the bibcodes\n   *\n   * @param data: e.g. {bibcodes: [\"all\"/\"selected\"], name: \"ddddd\"}\n   *\n   */\n  createLibAndAddBibcodes: function createLibAndAddBibcodes(data) {\n    var that = this;\n\n    var promise = this._getBibcodes(data).then(function (bibcodes) {\n      if (!bibcodes) {\n        throw new Error(\"Solr returned no bibcodes, can't put them in the new library\");\n      }\n\n      data.bibcode = bibcodes;\n      var createLibraryPromise = that.createLibrary(data).fail(function () {\n        var message = 'Library <b>' + name + '</b> could not be created';\n        that.getBeeHive().getService('PubSub').publish(that.getBeeHive().getService('PubSub').ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n          code: 0,\n          msg: message,\n          type: 'danger'\n        }));\n      });\n      return createLibraryPromise;\n    });\n\n    return promise;\n  },\n  importLibraries: function importLibraries(service) {\n    var endpoint;\n    var d = $.Deferred();\n    var that = this;\n\n    if (service === 'classic') {\n      endpoint = js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].LIBRARY_IMPORT_CLASSIC_TO_BBB;\n    } else if (service === 'twopointoh') {\n      endpoint = js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].LIBRARY_IMPORT_ADS2_TO_BBB;\n    } else {\n      console.error(\"didn't recognize library endpoint! should be one of 'classic' or 'twopointoh' \");\n      return;\n    }\n\n    this.getBeeHive().getService('Api').request(new js_components_api_request__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n      target: endpoint,\n      options: {\n        done: function done(data) {\n          d.resolve.apply(undefined, [].slice.apply(arguments)); // re-fetch metadata, since new libs were imported\n\n          that._fetchAllMetadata();\n        },\n        fail: function fail(data) {\n          d.reject.apply(undefined, [].slice.apply(arguments));\n        }\n      }\n    }));\n    return d.promise();\n  },\n  hardenedInterface: {\n    getLibraryMetadata: 'returns json list of libraries, optional lib id as param',\n    createLibrary: 'createLibrary',\n    // these two functions fetch bibcodes based on the arguments given\n    createLibAndAddBibcodes: 'createLibAndAddBibcodes',\n    addBibcodesToLib: 'addBibcodesToLib',\n    deleteLibrary: 'deleteLibrary',\n    updateLibraryContents: 'updateLibraryContents',\n    //      updateLibraryPermissions : \"updateLibraryPermissions\",\n    updateLibraryMetadata: 'updateLibraryMetadata',\n    importLibraries: 'importLibraries',\n    transferOwnership: 'transferOwnership',\n    // currently called by library individual widget to get\n    // lists of bibs to pass to export, metrics, vis widgets etc\n    getLibraryBibcodes: 'getLibraryBibcodes',\n    performLibraryOperation: 'performLibraryOperation'\n  }\n});\n\n_.extend(LibraryController.prototype, js_mixins_hardened__WEBPACK_IMPORTED_MODULE_2__[\"default\"], js_mixins_dependon__WEBPACK_IMPORTED_MODULE_7__[\"default\"].BeeHive);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (LibraryController);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/library_controller.js?");

/***/ }),

/***/ "./src/js/components/multi_params.js":
/*!*******************************************!*\
  !*** ./src/js/components/multi_params.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__);\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/*\n multi_params is a generic class to store any parameters;\n it is backed by BB.Model and has all the functionality\n the values are always stored as an array of values; so\n even if you try to set strings, you will always have\n list of strings\n */\n\n\n\nvar Model = backbone__WEBPACK_IMPORTED_MODULE_0___default().Model.extend({\n  locked: false,\n  _checkLock: function _checkLock() {\n    if (this.locked === true) {\n      throw Error('Object locked for modifications');\n    }\n  },\n  isLocked: function isLocked() {\n    return this.locked;\n  },\n  lock: function lock() {\n    this.locked = true;\n  },\n  unlock: function unlock() {\n    this.locked = false;\n  },\n  clone: function clone() {\n    if (this.isLocked()) {\n      var c = new this.constructor(this.attributes);\n      c.lock();\n      return c;\n    }\n\n    return new this.constructor(this.attributes);\n  },\n  hasVal: function hasVal(key) {\n    return !underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isEmpty(this.get(key));\n  },\n  // we allow only strings and numbers; instead of sending\n  // signal we throw a direct error\n  _validate: function _validate(attributes, options) {\n    // check we have only numbers and/or finite numbers\n    for (var attr in attributes) {\n      if (!underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isString(attr)) {\n        throw new Error('Keys must be strings, not: ' + attr);\n      } // remove empty strings\n\n\n      var tempVal = attributes[attr];\n      tempVal = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].without(underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].flatten(tempVal), '', false, null, undefined, NaN);\n\n      if (!underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isArray(tempVal)) {\n        throw new Error('Values were not converted to an Array');\n      }\n\n      if (underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isEmpty(tempVal) && options.unset !== true) {\n        throw new Error('Empty values not allowed');\n      }\n\n      if (!underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].every(tempVal, function (v) {\n        return underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isString(v) || underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isNumber(v) && !underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isNaN(v);\n      })) {\n        throw new Error('Invalid value (not a string or number): ' + tempVal);\n      }\n\n      attributes[attr] = tempVal;\n    }\n\n    return true;\n  },\n  // Every value is going to be multi-valued by default\n  // in this way we can treat all objects in the same way\n  set: function set(key, val, options) {\n    this._checkLock();\n\n    var attrs;\n    if (key == null) return this; // Handle both `\"key\", value` and `{key: value}` -style arguments.\n\n    if (_typeof(key) === 'object') {\n      attrs = key;\n      options = val;\n    } else {\n      (attrs = {})[key] = val;\n    }\n\n    for (var attr in attrs) {\n      var tempVal = attrs[attr]; // convert to array if necessary\n\n      if (!underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isArray(tempVal)) {\n        attrs[attr] = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].flatten([tempVal]);\n      }\n    }\n\n    backbone__WEBPACK_IMPORTED_MODULE_0___default().Model.prototype.set.call(this, attrs, options);\n  },\n  unset: function unset() {\n    this._checkLock();\n\n    backbone__WEBPACK_IMPORTED_MODULE_0___default().Model.prototype.unset.apply(this, arguments);\n  },\n  // adds values to existing (like set, but keeps the old vals)\n  add: function add(key, val, options) {\n    this._checkLock();\n\n    var attrs;\n    if (key == null) return this; // Handle both `\"key\", value` and `{key: value}` -style arguments.\n\n    if (_typeof(key) === 'object') {\n      attrs = key;\n      options = val;\n    } else {\n      (attrs = {})[key] = val;\n    }\n\n    for (var attr in attrs) {\n      var tempVal = attrs[attr]; // convert to array if necessary\n\n      if (!underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isArray(tempVal)) {\n        tempVal = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].flatten([tempVal]);\n      }\n\n      if (this.has(attr)) {\n        tempVal = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].clone(this.get(attr)).concat(tempVal);\n      }\n\n      attrs[attr] = tempVal;\n    }\n\n    backbone__WEBPACK_IMPORTED_MODULE_0___default().Model.prototype.set.call(this, attrs, options);\n  },\n  // synchronization is disabled\n  sync: function sync() {\n    throw Error('MultiParams cannot be saved to server');\n  },\n\n  /*\n   * Return the url string encoding all parameters that made\n   * this query. The parameters will be sorted alphabetically\n   * by their keys and URL encoded so that they can be used\n   * in requests.\n   */\n  url: function url(whatToSort) {\n    if (!whatToSort) {\n      whatToSort = this.attributes;\n    } // sort keys alphabetically\n\n\n    var sorted = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].pairs(whatToSort).sort(function (a, b) {\n      return a[0] > b[0] ? 1 : a[0] < b[0] ? -1 : 0;\n    }); // June1:rca - I need to preserve order of values (becuaes of the query modifications/updates) the logic\n    // just requires us to be careful and we need order to be preserved when the query is cloned\n    // also sort values\n    // var s = {};\n    // sorted.map(function(item) { s[item[0]] = (_.isArray(item[1]) ? item[1].sort() : item[1]) });\n    // we have to double encode certain elements\n    // sorted = _.map(sorted, function(pair) { return [pair[0], _.map(pair[1], function(v) {return (v.indexOf && v.indexOf('=') > -1) ? encodeURIComponent(v) : v })]});\n    // use traditional encoding\n    // use %20 instead of + (url encoding instead of form encoding)\n\n\n    var encoded = jquery__WEBPACK_IMPORTED_MODULE_2___default().param(underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].object(sorted), true);\n    encoded = encoded.replace(/\\+/g, '%20'); // Replace funky unicode quotes with normal ones\n\n    encoded = encoded.replace(/%E2%80%9[ECD]/g, '%22');\n    return encoded;\n  },\n\n  /**\n   * Parses string (urlparams) and returns it as an object\n   * @param resp\n   * @param options\n   * @returns {*}\n   */\n  parse: function parse(resp, options) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isString(resp)) {\n      var attrs = {};\n      resp = decodeURI(resp);\n\n      if (resp.indexOf('?') > -1) {\n        attrs['#path'] = [resp.slice(0, resp.indexOf('?'))];\n        resp = resp.slice(resp.indexOf('?') + 1);\n      }\n\n      if (resp.indexOf('#') > -1) {\n        attrs['#hash'] = this._parse(resp.slice(resp.indexOf('#') + 1));\n        resp = resp.slice(0, resp.indexOf('#'));\n      }\n\n      attrs['#query'] = this._parse(resp);\n      return this._checkParsed(attrs);\n    }\n\n    return this._checkParsed(resp); // else return resp object\n  },\n  _parse: function _parse(resp) {\n    var attrs = {};\n    var hash;\n\n    if (!resp.trim()) {\n      return attrs;\n    }\n\n    var hashes = resp.slice(resp.indexOf('?') + 1).split('&'); // resp = decodeURIComponent(resp);\n\n    var key;\n    var value;\n\n    for (var i = 0; i < hashes.length; i++) {\n      hash = hashes[i].split('=');\n      key = decodeURIComponent(hash[0].split('+').join(' ')); // optimized: .replace(/\\+/g, \" \")\n\n      var vall = hash[1];\n\n      if (hash.length > 2) {\n        hash.shift();\n        vall = hash.join('=');\n      } // replace literal '%' with code and '+' become literal spaces\n\n\n      value = decodeURIComponent(vall.replace(/%(?!\\d|[ABCDEF]+)/gi, '%25').split('+').join(' '));\n\n      if (attrs[key] !== undefined) {\n        attrs[key].push(value);\n      } else {\n        attrs[key] = [value];\n      }\n    }\n\n    return attrs;\n  },\n  // default behaviour is just to keep the query parameters\n  // after the string was parsed, you can override it to suit other needs\n  _checkParsed: function _checkParsed(attrs) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isObject(attrs)) {\n      if ('#query' in attrs) {\n        return attrs['#query'];\n      }\n    }\n\n    return attrs;\n  },\n\n  /**\n   * Re-constructs the query from the url string, returns the json attributes;\n   * cannot be used it the instance is locked\n   *\n   * @param query (String)\n   * @returns {Model}\n   */\n  load: function load(query) {\n    this._checkLock();\n\n    var vals = this.parse(query);\n    this.clear();\n    this.set(vals);\n    return this;\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (Model);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/multi_params.js?");

/***/ }),

/***/ "./src/js/components/navigator.js":
/*!****************************************!*\
  !*** ./src/js/components/navigator.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var cache__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! cache */ \"./src/libs/cache.js\");\n/* harmony import */ var cache__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(cache__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var js_components_transition__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/transition */ \"./src/js/components/transition.js\");\n/* harmony import */ var js_components_transition_catalog__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/components/transition_catalog */ \"./src/js/components/transition_catalog.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! analytics */ \"./src/js/components/analytics.js\");\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n /**\n * Created by rchyla on 3/10/14.\n */\n\n/**\n * Mediator (event aggregator) to coordinate transitions/navigations\n * inside application. Each applications should have one 'navigator'\n * and one 'router' - the router is responsible for 'going into the\n * state directly' (ie. from a bookmarked ursl) and for updating the\n * history object. The rest is handled by the navigator. There is a\n * one-to-one relation between router<->navigator\n */\n\n\n\n\n\n\n\n // Document Title Constants\n\nvar APP_TITLE = 'Astrophysics Data System';\nvar TITLE_SEP = ' - '; // This function is used to hash the user id before sending it to Analytics\n\nvar digestMessage = function digestMessage(message) {\n  var crypto = window.crypto || window.msCrypto;\n\n  if (!crypto) {\n    return Promise.reject(new Error('Crypto not available'));\n  } // encode as (utf-8) Uint8Array\n\n\n  var msgUi8 = new TextEncoder().encode(message); // hash the message\n\n  return crypto.subtle.digest('SHA-256', msgUi8).then(function (hashBuffer) {\n    var hashArray = Array.from(new Uint8Array(hashBuffer));\n    return hashArray.map(function (b) {\n      return b.toString(16).padStart(2, '0');\n    }).join('');\n  });\n};\n\nvar Navigator = js_components_generic_module__WEBPACK_IMPORTED_MODULE_3__[\"default\"].extend({\n  initialize: function initialize(options) {\n    options = options || {};\n    this.router = options.router;\n    this.catalog = new js_components_transition_catalog__WEBPACK_IMPORTED_MODULE_6__[\"default\"](); // catalog of nagivation points (later we can build FST)\n  },\n\n  /**\n   * Starts listening on the PubSub\n   *\n   * @param beehive - the full access instance; we excpect PubSub to be\n   *    present\n   */\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n    this.storage = beehive.getObject('AppStorage');\n    var pubsub = this.getPubSub();\n    pubsub.subscribe(pubsub.NAVIGATE, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.navigate, this));\n    pubsub.subscribe(pubsub.CUSTOM_EVENT, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this._onCustomEvent, this));\n    pubsub.subscribe(pubsub.USER_ANNOUNCEMENT, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this._onUserAnnouncement, this));\n  },\n  _onUserAnnouncement: function _onUserAnnouncement(ev, data) {\n    if (ev === 'user_signed_in' && typeof data === 'string') {\n      // the user is signed in, we can associate the user with the session\n      digestMessage(data).then(function (userIdHash) {\n        (0,analytics__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('send', 'user_update', {\n          user_id: userIdHash\n        });\n      });\n    }\n  },\n  _debouncedAnalyticsCall: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debounce(function () {\n    analytics__WEBPACK_IMPORTED_MODULE_7__[\"default\"].push.apply(analytics__WEBPACK_IMPORTED_MODULE_7__[\"default\"], arguments);\n  }, 500),\n  _onCustomEvent: function _onCustomEvent(ev, data) {\n    console.log('Custom Event', ev, data);\n\n    switch (ev) {\n      case 'timing:results-loaded':\n        window.getSentry(function (sentry) {\n          var activeSpan = sentry.getActiveSpan().getSpanJSON();\n          var time = new Date().getTime() - activeSpan.start_timestamp * 1000;\n          sentry.setMeasurement('timing.results.shown', time, 'millisecond');\n        });\n        break;\n\n      case 'update-document-title':\n        this._updateDocumentTitle(data);\n\n        break;\n\n      case 'latest-abstract-data':\n        {\n          if (Array.isArray(data.database)) {\n            analytics__WEBPACK_IMPORTED_MODULE_7__[\"default\"].set('items', undefined);\n            data.database.forEach(function (database) {\n              // do not debounce here, since we want multiple\n              analytics__WEBPACK_IMPORTED_MODULE_7__[\"default\"].push({\n                event: 'view_item',\n                items: [{\n                  item_id: data.bibcode,\n                  item_name: data.title,\n                  item_category: database,\n                  index: data.resultsIndex,\n                  refereed: data.property.includes('REFEREED')\n                }]\n              });\n            });\n          } else {\n            this._debouncedAnalyticsCall({\n              event: 'view_item',\n              items: [{\n                item_id: data.bibcode,\n                item_name: data.title,\n                item_category: '(no collection)',\n                index: data.resultsIndex,\n                refereed: data.property.includes('REFEREED')\n              }]\n            });\n          }\n\n          break;\n        }\n\n      case 'search-page-results':\n        // clear items array on the data layer\n        this._debouncedAnalyticsCall({\n          event: 'view_item_list',\n          item_list_id: 'search_results',\n          item_list_name: 'Search Results',\n          items: data.docs.map(function (doc) {\n            return _objectSpread({\n              item_id: doc.identifier,\n              item_name: doc.title[0]\n            }, doc.database.slice(1).reduce(function (acc, cat, idx) {\n              return _objectSpread({}, acc, _defineProperty({}, \"item_category\".concat(idx + 1), cat));\n            }, {\n              item_category: doc.database[0]\n            }), {\n              item_list_id: 'search_results',\n              item_list_name: 'Search Results',\n              item_variant: 'search_result_item',\n              index: doc.resultsIndex,\n              refereed: doc.property.includes('REFEREED')\n            });\n          })\n        });\n\n        break;\n\n      default: // do nothing\n\n    }\n  },\n  _cleanRoute: function _cleanRoute(route) {\n    var r = route.match(/[#\\/]?([^\\/]*)\\//);\n\n    if (r && r.length > 1) {\n      return '/' + r[1];\n    }\n\n    return route;\n  },\n  _setPageAndEmitEvent: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debounce(function (route, pageName) {\n    analytics__WEBPACK_IMPORTED_MODULE_7__[\"default\"].reset();\n    (0,analytics__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('send', 'virtual_page_view', {\n      page_name: pageName,\n      clean_route: this._cleanRoute(route)\n    });\n    getSentry(function (sentry) {\n      sentry.setTag('page.name', pageName);\n    });\n  }, 300),\n\n  /**\n   * Responds to PubSubEvents.NAVIGATE signal\n   */\n  navigate: function navigate(ev, arg1, arg2) {\n    var defer = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();\n    var self = this;\n\n    if (!this.router || !(this.router instanceof Backbone.Router)) {\n      defer.reject(new Error(\"Navigator must be given 'router' instance\"));\n      return defer.promise();\n    }\n\n    var transition = this.catalog.get(ev);\n\n    if (!transition) {\n      this.handleMissingTransition(arguments);\n      defer.reject(new Error('Missing route; going to 404'));\n      return defer.promise();\n    }\n\n    if (!transition.execute) {\n      // do nothing\n      return defer.resolve().promise();\n    }\n\n    var afterNavigation = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function () {\n      // router can communicate directly with navigator to replace url\n      var replace = !!(transition.replace || arg1 && arg1.replace);\n\n      if (transition.route === '' || transition.route) {\n        var route = transition.route === '' ? '/' : transition.route;\n\n        this._setPageAndEmitEvent(route, ev);\n\n        this.router.navigate(route, {\n          trigger: false,\n          replace: replace\n        });\n      } // clear any metadata added to head on the previous page\n\n\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('head').find('meta[data-highwire]').remove();\n\n      this._updateDocumentTitle(transition.title);\n\n      defer.resolve();\n    }, this);\n\n    var p;\n\n    try {\n      p = transition.execute.apply(transition, arguments);\n      p && underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isFunction(p.then) ? p.then(afterNavigation) : afterNavigation();\n    } catch (e) {\n      this.handleTransitionError(transition, e, arguments);\n      var err = new Error('Error transitioning to route; going to 404');\n      return defer.reject(err).promise();\n    }\n\n    return defer.promise();\n  },\n  _updateDocumentTitle: function _updateDocumentTitle(title) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isUndefined(title) || title === false) return;\n    var currTitle = this.storage.getDocumentTitle();\n\n    var setDocTitle = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function (t) {\n      document.title = t === '' ? APP_TITLE : t + TITLE_SEP + APP_TITLE;\n      this.storage.setDocumentTitle(t);\n    }, this); // title is defined and it is different from the current one, it should be updated\n\n\n    if (title !== currTitle) {\n      setDocTitle(title);\n    }\n  },\n  handleMissingTransition: function handleMissingTransition(transition) {\n    console.error(\"Cannot handle 'navigate' event: \" + JSON.stringify(arguments));\n    var ps = this.getPubSub();\n    ps.publish(ps.BIG_FIRE, 'navigation-error', arguments);\n    if (this.catalog.get('404')) ps.publish(ps.NAVIGATE, '404');\n  },\n  handleTransitionError: function handleTransitionError(transition, error, args) {\n    console.error('Error while executing transition', transition, args);\n    console.error(error.stack);\n    var ps = this.getPubSub();\n    ps.publish(ps.CITY_BURNING, 'navigation-error', arguments);\n    if (this.catalog.get('404')) ps.publish(ps.NAVIGATE, '404');\n  },\n\n  /**\n   * Sets the transition inside the catalog; you can pass simplified\n   * list of options or the Transition instance\n   */\n  set: function set() {\n    if (arguments.length == 1) {\n      if (arguments[1] instanceof js_components_transition__WEBPACK_IMPORTED_MODULE_5__[\"default\"]) {\n        return this.catalog.add(arguments[1]);\n      }\n\n      throw new Error(\"You must be kiddin' sir!\");\n    } else if (arguments.length == 2) {\n      var endpoint = arguments[0];\n\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isFunction(arguments[1])) {\n        return this.catalog.add(new js_components_transition__WEBPACK_IMPORTED_MODULE_5__[\"default\"](endpoint, {\n          execute: arguments[1]\n        }));\n      }\n\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isObject(arguments[1]) && arguments[1].execute) {\n        return this.catalog.add(new js_components_transition__WEBPACK_IMPORTED_MODULE_5__[\"default\"](endpoint, arguments[1]));\n      }\n\n      throw new Error('Himmm, I dont know how to create a catalog rule with this input:', arguments);\n    } else {\n      // var args = array.slice.call(arguments, 1);\n      throw new Error('Himmm, I dont know how to create a catalog rule with this input:', arguments);\n    }\n  },\n  get: function get(endpoint) {\n    return this.catalog.get(endpoint);\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(Navigator.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_4__[\"default\"].BeeHive);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Navigator);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/navigator.js?");

/***/ }),

/***/ "./src/js/components/persistent_storage.js":
/*!*************************************************!*\
  !*** ./src/js/components/persistent_storage.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var persist_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! persist-js */ \"./src/libs/persist-js.js\");\n/* harmony import */ var persist_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(persist_js__WEBPACK_IMPORTED_MODULE_3__);\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'module'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\n\n\n\nvar namespace = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'module'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().namespace || '';\nvar LocalStorage = js_components_generic_module__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend({\n  constructor: function constructor(opts) {\n    opts = opts || {};\n    this._store = this.createStore(namespace + (opts.name || ''));\n  },\n  createStore: function createStore(name) {\n    return this._createStore(name);\n  },\n  _createStore: function _createStore(name) {\n    var s = new (persist_js__WEBPACK_IMPORTED_MODULE_3___default().Store)(name, {\n      about: 'This is bumblebee persistent storage',\n      defer: true\n    });\n    var keys = s.get('#keys');\n\n    if (!keys) {\n      s.set('#keys', '{}');\n    } else {\n      try {\n        keys = JSON.parse(keys);\n\n        if (!underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isObject(keys)) {\n          s.set('#keys', '{}');\n        }\n      } catch (e) {\n        s.set('#keys', '{}');\n      }\n    }\n\n    return s;\n  },\n  set: function set(key, value) {\n    this._checkKey(key);\n\n    if (!underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(value)) {\n      value = JSON.stringify(value);\n    }\n\n    this._store.set(key, value);\n\n    this._setKey(key);\n  },\n  get: function get(key) {\n    this._checkKey(key);\n\n    var v = this._store.get(key);\n\n    if (!v) return v;\n\n    try {\n      return JSON.parse(v);\n    } catch (e) {\n      return v;\n    }\n  },\n  remove: function remove(key) {\n    this._checkKey(key);\n\n    this._store.remove(key);\n\n    this._delKey(key);\n  },\n  clear: function clear() {\n    var keys = this.get('#keys');\n\n    for (var k in keys) {\n      this._store.remove(k);\n    }\n\n    this._store.set('#keys', '{}');\n  },\n  keys: function keys() {\n    return JSON.parse(this._store.get('#keys'));\n  },\n  _setKey: function _setKey(key) {\n    var keys = this.keys() || {};\n    keys[key] = 1;\n\n    this._store.set('#keys', JSON.stringify(keys));\n  },\n  _delKey: function _delKey(key) {\n    var keys = this.keys() || {};\n    delete keys[key];\n\n    this._store.set('#keys', JSON.stringify(keys));\n  },\n  _checkKey: function _checkKey(key) {\n    if (!underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(key)) {\n      throw new Error('key must be string, received: ' + key);\n    }\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(LocalStorage.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_2__[\"default\"].BeeHive);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (LocalStorage);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/persistent_storage.js?");

/***/ }),

/***/ "./src/js/components/pubsub_events.js":
/*!********************************************!*\
  !*** ./src/js/components/pubsub_events.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/**\n * Created by rchyla on 3/30/14.\n */\n\n/**\n * Catalogue of PubSub events; we assume this:\n *\n *  - FC = the component lives in the 'Forbidden City'\n *         inside Application, typically this is a PubSub or Api, Mediator\n *         or any component with elevated access\n *\n *  - OC = Outer City: the suburbs of the application; these are typically\n *         UI components (behind the wall), untrusted citizens of the\n *         BumbleBee state\n *\n *  WARNING: do not use spaces; events with spaces are considered to be\n *        multiple events! (e.g. '[PubSub] New-Query' will be two events)\n *\n */\nvar PubSubEvents = {\n  /**\n   * Usually called by OC's as a first step in the query processing.\n   * It means: 'user did something', we need to start reacting. The OC\n   * will build a new ApiQuery and send it together with this event\n   */\n  START_SEARCH: '[PubSub]-New-Query',\n\n  /**\n   * Called by FC's (usually: Mediator) - this is a signal to *all* OC's\n   * they should receive ApiQuery object, compare it against their\n   * own query; find diff and create a new ApiRequest (asking for a data)\n   * and send that back\n   */\n  INVITING_REQUEST: '[PubSub]-Inviting-Request',\n\n  /**\n   * Will be called by OC's, this is response to ApiQuery input.\n   */\n  DELIVERING_REQUEST: '[PubSub]-New-Request',\n\n  /**\n   * Will be called by OC's, this is one-time forget action (outside of the\n   * the search cycle); use this for any query that needs to be executed\n   * and not be tracked by search cycle\n   */\n  EXECUTE_REQUEST: '[PubSub]-Execute-Request',\n\n  /**\n   * Called from the router, the QID will be passed; the query needs to be\n   * loaded and executed\n   */\n  EXECUTE_STORED_QUERY: '[PubSub]-Execute-Stored-Query',\n\n  /**\n   * Published by FC's - typically Mediator - when a response has been retrieved\n   * for a given ApiRequest.\n   *\n   * OC's should subscribe to this event when they want to receive data\n   * from the treasury (api)\n   *\n   *  - input: ApiRequest\n   *  - output: ApiResponse\n   */\n  DELIVERING_RESPONSE: '[PubSub]-New-Response',\n\n  /**\n   * The walls of the FC are being closed; and no new requests will be served\n   */\n  CLOSING_GATES: '[PubSub]-Closing',\n\n  /**\n   * PubSub will not receive any requests any more\n   */\n  CLOSED_FOR_BUSINESS: '[PubSub]-Closed',\n\n  /**\n   * ForbiddenCity is about to receive requests\n   */\n  OPENING_GATES: '[PubSub]-Opening',\n\n  /**\n   * Called after PubSub became ready - it is fully operational\n   */\n  OPEN_FOR_BUSINESS: '[PubSub]-Ready',\n\n  /**\n   *  Set of error warnings issues by PubSub - or by some other FC's - to\n   *  deal with congestion or other problems\n   */\n  SMALL_FIRE: '[PubSub]-Problem',\n  BIG_FIRE: '[PubSub]-Big-Problem',\n  CITY_BURNING: '[PubSub]-Disaster',\n\n  /**\n   * A message containing feedback from the FC; traveling towards OC\n   * The feedback will be instance of ApiFeedback\n   */\n  FEEDBACK: '[FC]-FeedBack',\n\n  /**\n   * A message from the router requesting showing citizens of the\n   * city\n   */\n  DISPLAY_DOCUMENTS: '[Router]-Display-Documents',\n  DISPLAY_DOCUMENTS_DETAILS: '[Router]-Display-Documents-Details',\n\n  /**\n   * Used by OC to request parsed query tree - to check a query\n   * for example\n   */\n  GET_QTREE: '[FC]-GetQTree',\n  NAVIGATE: '[Router]-Navigate-With-Trigger',\n\n  /*\n   * so navigator can notify interested widgets about a change\n   * from search page to user page, for instance-- navigator cannot\n   * to this since it listens to many events including widget-show events\n   * */\n  PAGE_CHANGE: '[Navigator]Page-Changed',\n\n  /* for custom widget-to-widget events */\n  CUSTOM_EVENT: '[PubSub]-Custom-Event',\n  ARIA_ANNOUNCEMENT: '[PubSub]-Aria-Announcement',\n\n  /* anything to do with changing the state of the user, including session events */\n  USER_ANNOUNCEMENT: '[PubSub]-User-Announcement',\n\n  /**\n   * A message/action that should be displayed to the user (on prominent)\n   * place\n   */\n  ALERT: '[Alert]-Message',\n  ORCID_ANNOUNCEMENT: '[PubSub]-Orcid-Announcement',\n\n  /**\n   * Happens during the main cycle of the application birth\n   *  LOADED = when all components were successfuly loaded\n   *  BOOTSTRAPPED = + when all dynamic config was loaded\n   *  STARTING = + right before the router and history objects start()\n   *  STARTED = app is alive and handling requests\n   */\n  APP_LOADED: '[App]-Application-Loaded',\n  APP_BOOTSTRAPPED: '[App]-Application-Bootstrapped',\n  APP_STARTING: '[App]-Application-Starting',\n  APP_STARTED: '[App]-Application-Started',\n  APP_EXIT: '[App]-Exit',\n\n  /**\n   * Is triggered when user selects/deselects records\n   */\n  PAPER_SELECTION: '[User]-Paper-Selection',\n  // instead of toggling, adds all papers\n  BULK_PAPER_SELECTION: '[User]-Bulk-Paper-Selection',\n\n  /*\n   * is triggered by app storage itself when list of selected papers changes\n   * */\n  STORAGE_PAPER_UPDATE: '[User]-Paper-Update',\n  LIBRARY_CHANGE: '[PubSub]-Library-Change'\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (PubSubEvents);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/pubsub_events.js?");

/***/ }),

/***/ "./src/js/components/pubsub_key.js":
/*!*****************************************!*\
  !*** ./src/js/components/pubsub_key.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/**\n * Created by rchyla on 3/14/14.\n */\n\n/*\n * A simple, yet important, class - every subscriber\n * to the PubSub must contain one key. This class\n * should be instantiated in a safe manner. ie.\n *\n * PubSubKey.newInstance({creator: this});\n *\n * But beware that as long as the subscriber is alive\n * reference to the creator will be saved inside\n * the key! So choose carefully whether you use this\n * functionality\n */\n\n\nvar PubSubKey = function PubSubKey(options) {\n  underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(this, options);\n};\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(PubSubKey, {\n  /*\n   * Creates a new Instances of the PubSubKey\n   * with a storage that cannot be changed.\n   * To double sign the key, you can pass\n   * an object that identifies creator of the\n   * key and test identity, eg.\n   *\n   * var creator = {};\n   * var k = PubSubKey(creator);\n   * k.getCreator() === k;\n   *\n   */\n  newInstance: function newInstance(options) {\n    var priv = {\n      id: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].has(options, 'id') ? options.id : underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].uniqueId(':psk'),\n      creator: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].has(options, 'creator') ? options.creator : null\n    };\n    return new PubSubKey({\n      getId: function getId() {\n        return priv.id;\n      },\n      getCreator: function getCreator() {\n        return priv.creator;\n      }\n    });\n  }\n});\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (PubSubKey);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/pubsub_key.js?");

/***/ }),

/***/ "./src/js/components/query_mediator.js":
/*!*********************************************!*\
  !*** ./src/js/components/query_mediator.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var cache__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! cache */ \"./src/libs/cache.js\");\n/* harmony import */ var cache__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(cache__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var js_mixins_add_secondary_sort__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/mixins/add_secondary_sort */ \"./src/js/mixins/add_secondary_sort.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_response__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/components/api_response */ \"./src/js/components/api_response.js\");\n/* harmony import */ var js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/components/api_query_updater */ \"./src/js/components/api_query_updater.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_components_json_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! js/components/json_response */ \"./src/js/components/json_response.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_alerts__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! js/components/alerts */ \"./src/js/components/alerts.js\");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! utils */ \"./src/js/utils.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! analytics */ \"./src/js/components/analytics.js\");\n/**\n * Created by rchyla on 3/30/14.\n */\n\n/**\n * Mediator to coordinate UI-query exchange\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar QueryMediator = js_components_generic_module__WEBPACK_IMPORTED_MODULE_3__[\"default\"].extend({\n  initialize: function initialize(options) {\n    options = options || {};\n    this._cache = null;\n    this.debug = options.debug || false;\n    this.queryUpdater = new js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_8__[\"default\"]('QueryMediator');\n    this.failedRequestsCache = this._getNewCache({\n      expiresAfterWrite: 5\n    });\n    this.maxRetries = options.maxRetries || 3;\n    this.recoveryDelayInMs = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isNumber(options.recoveryDelayInMs) ? options.recoveryDelayInMs : 700;\n    this.__searchCycle = {\n      waiting: {},\n      inprogress: {},\n      done: {},\n      failed: {}\n    };\n    this.shortDelayInMs = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isNumber(options.shortDelayInMs) ? options.shortDelayInMs : 300;\n    this.longDelayInMs = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isNumber(options.longDelayInMs) ? options.longDelayInMs : 100;\n    this.monitoringDelayInMs = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isNumber(options.monitoringDelayInMs) ? options.monitoringDelayInMs : 200;\n    this.mostRecentQuery = new js_components_api_query__WEBPACK_IMPORTED_MODULE_12__[\"default\"]();\n  },\n  activateCache: function activateCache(options) {\n    this._cache = this._getNewCache((options || {}).cache);\n  },\n  _getNewCache: function _getNewCache(options) {\n    return new (cache__WEBPACK_IMPORTED_MODULE_2___default())(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n      maximumSize: 100,\n      expiresAfterWrite: 60 * 30 // 30 mins\n\n    }, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isObject(options) ? options : {}));\n  },\n\n  /**\n   * Starts listening on the PubSub\n   *\n   * @param beehive - the full access instance; we excpect PubSub to be\n   *    present\n   */\n  activate: function activate(beehive, app) {\n    this.setBeeHive(beehive);\n    this.setApp(app);\n    var pubsub = this.getPubSub(); // if you run discovery-mediator; this signal may be removed from the\n    // queue (and instead, the discovery mediator will serve the request)\n\n    pubsub.subscribe(pubsub.START_SEARCH, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.getQueryAndStartSearchCycle, this));\n    pubsub.subscribe(pubsub.DELIVERING_REQUEST, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.receiveRequests, this));\n    pubsub.subscribe(pubsub.EXECUTE_REQUEST, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.executeRequest, this));\n    pubsub.subscribe(pubsub.GET_QTREE, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.getQTree, this));\n  },\n  getQTree: function getQTree(apiQuery, senderKey) {\n    var apiRequest = new js_components_api_request__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n      query: apiQuery,\n      target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_11__[\"default\"].QTREE\n    });\n\n    this._executeRequest(apiRequest, senderKey);\n  },\n  doQueryTranslation: function doQueryTranslation(q) {\n    var d = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();\n    var pubsub = this.getPubSub();\n    var options = {\n      type: 'POST',\n      contentType: 'application/json'\n    }; // Send the entire query to the \"query\" endpoint of the \"object_service\" micro service\n    // this endpoint will grab the \"object:<expression>\" from the query string and send back\n    // a translated query string which will have \"simbid:<expression with SIMBAD identifiers>\"\n    // instead of the \"object:\" part\n\n    var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n      target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_11__[\"default\"].SERVICE_OBJECTS_QUERY,\n      query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_12__[\"default\"]({\n        query: q\n      }),\n      options: options\n    }); // when the promise gets resolved, it will have the JSON response of the micro service\n    // which will have the translated object query\n\n    pubsub.subscribeOnce(pubsub.DELIVERING_RESPONSE, function (response) {\n      d.resolve(response.toJSON());\n    });\n    pubsub.publish(pubsub.EXECUTE_REQUEST, request);\n    return d.promise();\n  },\n  getQueryAndStartSearchCycle: function getQueryAndStartSearchCycle(apiQuery, senderKey) {\n    var that = this;\n    var ps = this.getPubSub(); // modifies apiQuery in place\n\n    js_mixins_add_secondary_sort__WEBPACK_IMPORTED_MODULE_5__[\"default\"].addSecondarySort(apiQuery); // Watch for simbid references and use a masked version of the\n    // query to generate the url if any are found.\n\n    if (this.original_url && apiQuery.get('q') && apiQuery.get('q')[0].indexOf('simbid') !== -1) {\n      var newQ = apiQuery.clone();\n      var origQ = apiQuery.get('q')[0];\n\n      if (apiQuery.has('__original_query')) {\n        origQ = apiQuery.get('__original_query')[0];\n      } // Use the old query for the clone's query string, then get url\n\n\n      newQ.set('q', origQ);\n      this.original_url = this.queryUpdater.clean(newQ).url();\n    } else {\n      this.original_url = this.queryUpdater.clean(apiQuery).url();\n    }\n\n    this.original_query = apiQuery.get('q'); // checking if it's a new big query\n\n    if (apiQuery.get('__bigquery')) {\n      apiQuery.set('bigquery', 'bibcode\\n' + apiQuery.get('__bigquery').join('\\n')); // don't need this anymore\n\n      apiQuery.unset('__bigquery'); // query might have a q, otherwise q is everything\n\n      if (!apiQuery.get('q')) apiQuery.set('q', '*:*'); // bigquery endpoint needs this value set\n\n      apiQuery.add('fq', '{!bitset}');\n      var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n        target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_11__[\"default\"].MYADS_STORAGE + '/query',\n        query: apiQuery,\n        options: {\n          type: 'POST',\n          contentType: 'application/json',\n          done: function done(response) {\n            var newQuery = new js_components_api_query__WEBPACK_IMPORTED_MODULE_12__[\"default\"]({\n              q: apiQuery.get('q'),\n              __qid: response.qid\n            });\n            var bigquerySource = apiQuery.get('__bigquerySource');\n\n            if (bigquerySource) {\n              newQuery.set('__bigquerySource', bigquerySource[0]);\n            }\n\n            if (apiQuery.get('sort')) {\n              newQuery.set('sort', apiQuery.get('sort'));\n            }\n\n            that.startSearchCycle(newQuery, senderKey);\n          },\n          fail: function fail(jqXHR, textStatus, errorThrown) {\n            console.warn('bigquery failed:', [].slice.apply(arguments).join(','));\n            ps.publish(ps.FEEDBACK, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n              code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"].CODES.SEARCH_CYCLE_FAILED_TO_START,\n              error: {\n                jqXHR: jqXHR,\n                textStatus: textStatus,\n                errorThrown: errorThrown\n              }\n            }));\n          }\n        }\n      }); // it needs to be a bigquery, we need to formulate the query\n\n      this.getBeeHive().getService('Api').request(request);\n    } // check if this is an \"object:\" query\n    else if (apiQuery.get('q')[0].indexOf('object:') > -1) {\n      // we have an \"object:\" query as part of the query\n      // first define a callback function to process the response of the micro service\n      // and bind it to \"this\" so that we can use the trigger\n      var callback = function (v) {\n        apiQuery.set({\n          q: v.query\n        });\n        this.startSearchCycle(apiQuery, senderKey);\n      }.bind(this); // call the callback function when the promise has been resolved\n\n\n      this.doQueryTranslation(apiQuery.get('q')[0]).done(callback);\n    } else {\n      this.startSearchCycle.apply(this, arguments);\n    }\n  },\n\n  /**\n   * Happens at the beginning of the new search cycle. This is the 'race started' signal\n   */\n  startSearchCycle: function startSearchCycle(apiQuery, senderKey) {\n    this.resetFailures(); // we have to clear selected records in app storage here too\n\n    if (this.getBeeHive().getObject('AppStorage')) {\n      this.getBeeHive().getObject('AppStorage').clearSelectedPapers();\n    } // clear bigqueries by default when a new search cycle is started, unless\n    // explicitly saved by using \"__saveBigQuery\" flag\n\n\n    if (apiQuery.has('__saveBigQuery') && this.mostRecentQuery.has('__qid') && !apiQuery.has('__qid')) {\n      this.mostRecentQuery.set('q', apiQuery.get('q'));\n      apiQuery = this.mostRecentQuery;\n    }\n\n    this.mostRecentQuery = apiQuery;\n\n    if (this.debug) {\n      console.log('[QM]: received query:', this.hasApp() ? this.getApp().getPluginOrWidgetName(senderKey.getId()) || senderKey.getId() : senderKey.getId(), apiQuery.url());\n    }\n\n    if (apiQuery.keys().length <= 0) {\n      console.error('[QM] : received empty query (huh?!)');\n      return;\n    }\n\n    if (apiQuery.get('q')[0].indexOf('simbid') > -1) {\n      apiQuery.add('__original_url', this.original_url);\n      apiQuery.add('__original_query', this.original_query);\n    }\n\n    var ps = this.getPubSub();\n\n    if (this.__searchCycle.running && this.__searchCycle.waiting && underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(this.__searchCycle.waiting)) {\n      console.error('The previous search cycle did not finish, and there already comes the next!'); // mark all current waiting requests with a STALE flag\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({}, this.__searchCycle.waiting, this.__searchCycle.inprogress), function (psks) {\n        psks.request.__STALE = true;\n      });\n    }\n\n    this.reset();\n    this.__searchCycle.initiator = senderKey.getId();\n    this.__searchCycle.collectingRequests = true;\n    this.__searchCycle.query = apiQuery.clone(); // we will protect the query -- in the future i can consider removing 'unlock' to really\n    // cement the fact the query MUST NOT be changed (we want to receive a modified version)\n\n    var q = apiQuery.clone(); // q = this.queryUpdater.clean(q);\n    // since widgets are dirty bastards, we will remove the fl parameter (to avoid cross-\n    // contamination)\n\n    q.unset('fl');\n    q.lock();\n    ps.publish(ps.INVITING_REQUEST, q); // give widgets some time to submit their requests\n\n    var self = this;\n\n    var startExecuting = function startExecuting() {\n      self.__searchCycle.collectingRequests = false;\n      self.startExecutingQueries() && self.monitorExecution();\n    };\n\n    this.shortDelayInMs ? setTimeout(startExecuting, this.shortDelayInMs) : startExecuting();\n  },\n\n  /**\n   * Starts executing queries from the search cycle\n   *\n   * Return value indicates whether the process starter;\n   * if 'true', then you can start monitoring\n   *\n   * @param force\n   */\n  startExecutingQueries: function startExecutingQueries(force) {\n    var self = this;\n    var cycle = this.__searchCycle;\n    if (cycle.running) return; // safety barrier\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEmpty(cycle.waiting)) return;\n    if (!this.hasBeeHive()) return;\n    cycle.running = true;\n    var data;\n    var beehive = this.getBeeHive();\n    var api = beehive.getService('Api');\n    var ps = this.getPubSub();\n    if (!(ps && api)) return; // application is gone\n\n    var app = this.getApp();\n    var pskToExecuteFirst;\n\n    if (pskToExecuteFirst = app.getPskOfPluginOrWidget('widget:Results')) {\n      // pick a request that will be executed first\n      if (cycle.waiting[pskToExecuteFirst]) {\n        data = cycle.waiting[pskToExecuteFirst];\n        delete cycle.waiting[pskToExecuteFirst];\n      }\n    }\n\n    if (!data && cycle.waiting[cycle.initiator]) {\n      // grab the query/request which started the cycle\n      data = cycle.waiting[cycle.initiator];\n      delete cycle.waiting[cycle.initiator];\n    }\n\n    if (!data) {\n      if (this.debug) console.warn('DynamicConfig does not tell us which request to execute first (grabbing random one).');\n      var kx;\n      data = cycle.waiting[kx = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(cycle.waiting)[0]];\n      delete cycle.waiting[kx];\n    } // execute the first search (if it succeeds, fire the rest)\n\n\n    var firstReqKey = data.key.getId();\n    cycle.inprogress[firstReqKey] = data;\n\n    this._executeRequest(data.request, data.key).done(function (resOrPromise) {\n      var sendStartCycleEvent = function sendStartCycleEvent(response) {\n        if (data.request.__STALE) {\n          return;\n        }\n\n        cycle.done[firstReqKey] = data;\n        delete cycle.inprogress[firstReqKey];\n        var numFound;\n\n        if (response.response && response.response.numFound) {\n          numFound = response.response.numFound;\n        }\n\n        ps.publish(ps.FEEDBACK, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n          code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"].CODES.SEARCH_CYCLE_STARTED,\n          query: cycle.query,\n          request: data.request,\n          numFound: numFound,\n          cycle: cycle,\n          response: response // this is a raw response (and it is save to send, cause it was already copied by the first 'done' callback\n\n        }));\n        self.displayTugboatMessages();\n      };\n\n      if (resOrPromise.then) {\n        Promise.resolve(resOrPromise).then(function (response) {\n          sendStartCycleEvent(response);\n        });\n      } else {\n        sendStartCycleEvent(resOrPromise);\n      } // after we are done with the first query, start executing other queries\n\n\n      var f = function f() {\n        underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(cycle.waiting), function (k) {\n          data = cycle.waiting[k];\n          delete cycle.waiting[k];\n          cycle.inprogress[k] = data;\n          var psk = k;\n\n          self._executeRequest.call(self, data.request, data.key).done(function () {\n            if (data.request.__STALE) {\n              return;\n            }\n\n            cycle.done[psk] = cycle.inprogress[psk];\n            delete cycle.inprogress[psk];\n          }).fail(function () {\n            if (data.request.__STALE) {\n              return;\n            }\n\n            cycle.failed[psk] = cycle.inprogress[psk];\n            delete cycle.inprogress[psk];\n          }).always(function () {\n            if (cycle.finished) return;\n\n            if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEmpty(cycle.inprogress)) {\n              ps.publish(ps.FEEDBACK, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n                code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"].CODES.SEARCH_CYCLE_FINISHED,\n                cycle: cycle\n              }));\n              cycle.finished = true;\n            }\n          });\n        });\n      }; // for the display experience, it is better to introduce delays\n\n\n      if (self.longDelayInMs && self.longDelayInMs > 0) {\n        setTimeout(function () {\n          f();\n        }, self.longDelayInMs);\n      } else {\n        f();\n      }\n    }).fail(function (jqXHR, textStatus, errorThrown) {\n      self.__searchCycle.error = true;\n      ps.publish(ps.FEEDBACK, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n        code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"].CODES.SEARCH_CYCLE_FAILED_TO_START,\n        cycle: cycle,\n        request: this.request,\n        error: {\n          jqXHR: jqXHR,\n          textStatus: textStatus,\n          errorThrown: errorThrown\n        }\n      }));\n    });\n\n    return true; // means that the process can be monitored\n  },\n  monitorExecution: function monitorExecution() {\n    if (!this.hasBeeHive()) return; // app is closed\n\n    var self = this;\n    var ps = this.getPubSub();\n    if (!ps) return; // application is gone\n\n    this.__searchCycle.monitor += 1;\n\n    if (this.__searchCycle.monitor > 100) {\n      console.warn('Stopping monitoring of queries, it is running too long');\n      ps.publish(ps.FEEDBACK, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n        code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"].CODES.SEARCH_CYCLE_STOP_MONITORING,\n        cycle: this.__searchCycle\n      }));\n      return;\n    }\n\n    if (this.__searchCycle.inprogress && underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEmpty(this.__searchCycle.inprogress)) {\n      if (this.__searchCycle.finished) return; // it was already signalled\n\n      ps.publish(ps.FEEDBACK, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n        code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"].CODES.SEARCH_CYCLE_FINISHED,\n        cycle: this.__searchCycle\n      }));\n      return;\n    }\n\n    var lenToDo = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(this.__searchCycle.waiting).length;\n\n    var lenDone = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(this.__searchCycle.done).length;\n\n    var lenInProgress = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(this.__searchCycle.inprogress).length;\n\n    var lenFailed = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(this.__searchCycle.failed).length;\n\n    var total = lenToDo + lenDone + lenInProgress + lenFailed;\n    ps.publish(ps.FEEDBACK, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n      code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"].CODES.SEARCH_CYCLE_PROGRESS,\n      msg: lenToDo / total,\n      total: total,\n      todo: lenToDo,\n      cycle: this.__searchCycle\n    }));\n    setTimeout(function () {\n      self.monitorExecution();\n    }, self.monitoringDelayInMs);\n  },\n\n  /**\n   * This method harvest requests from the PubSub and stores them inside internal\n   * datastruct\n   *\n   * @param apiRequest\n   * @param senderKey\n   */\n  receiveRequests: function receiveRequests(apiRequest, senderKey) {\n    if (this.debug) {\n      console.log('[QM]: received request:', this.hasApp() ? this.getApp().getPluginOrWidgetName(senderKey.getId()) || senderKey.getId() : senderKey.getId(), apiRequest.url());\n    }\n\n    if (this.__searchCycle.collectingRequests) {\n      this.__searchCycle.waiting[senderKey.getId()] = {\n        request: apiRequest,\n        key: senderKey\n      };\n    } else {\n      this.executeRequest(apiRequest, senderKey);\n    }\n  },\n\n  /**\n   * This method executes a request, we check\n   * the local cache and also prepare context for the done/fail callbacks\n   *\n   * @param apiRequest\n   * @param senderKey\n   */\n  executeRequest: function executeRequest(apiRequest, senderKey) {\n    if (!(apiRequest instanceof js_components_api_request__WEBPACK_IMPORTED_MODULE_6__[\"default\"])) {\n      throw new Error('Sir, I belive you forgot to send me a valid ApiRequest!');\n    } else if (!senderKey) {\n      throw new Error('Request executed, but no widget id provided!');\n    }\n\n    return this._executeRequest(apiRequest, senderKey);\n  },\n  getFailCacheValue: function getFailCacheValue(key) {\n    var failCache = this.failedRequestsCache;\n    return failCache && failCache.getSync(key) || failCache._cache[key] && failCache._cache[key].value;\n  },\n  _executeRequest: function _executeRequest(apiRequest, senderKey) {\n    // for altering widget queries\n    // from regular solr requests to execute_query requests\n    // if bigquery is being used\n    // it's a bigquery\n    if (apiRequest.get('query') && apiRequest.get('query').get('__qid')) {\n      var qid = apiRequest.get('query').get('__qid')[0];\n      apiRequest.set('target', js_components_api_targets__WEBPACK_IMPORTED_MODULE_11__[\"default\"].MYADS_STORAGE + '/execute_query/' + qid);\n    }\n\n    var ps = this.getPubSub();\n    var api = this.getBeeHive().getService('Api');\n\n    var requestKey = this._getCacheKey(apiRequest);\n\n    var maxTry = this.getFailCacheValue(requestKey) || 0;\n\n    if (maxTry >= this.maxRetries) {\n      this.onApiRequestFailure.apply({\n        request: apiRequest,\n        key: senderKey,\n        requestKey: requestKey,\n        qm: this\n      }, [{\n        status: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"].CODES.TOO_MANY_FAILURES\n      }, 'Error', 'This request has reached maximum number of failures (wait before retrying)']);\n      var d = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();\n      return d.reject();\n    }\n\n    if (this._cache) {\n      var resp = this._cache.getSync(requestKey);\n\n      var self = this;\n\n      if (resp && resp.promise) {\n        // we have already created ajax request\n        resp.done(function () {\n          self._cache.put(requestKey, arguments);\n\n          self.onApiResponse.apply({\n            request: apiRequest,\n            key: senderKey,\n            requestKey: requestKey,\n            qm: self\n          }, arguments);\n        });\n        resp.fail(function () {\n          self._cache.invalidate(requestKey);\n\n          self.onApiRequestFailure.apply({\n            request: apiRequest,\n            pubsub: ps,\n            key: senderKey,\n            requestKey: requestKey,\n            qm: self\n          }, arguments);\n        });\n        return resp;\n      }\n\n      if (resp) {\n        // we already have data (in the cache)\n        var defer = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();\n        defer.done(function () {\n          self.onApiResponse.apply({\n            request: apiRequest,\n            key: senderKey,\n            requestKey: requestKey,\n            qm: self\n          }, resp);\n        });\n        defer.resolve();\n        return defer.promise();\n      } // create a new query\n\n\n      var promise = api.request(apiRequest, {\n        done: function done() {\n          self._cache.put(requestKey, arguments);\n\n          self.onApiResponse.apply(this, arguments);\n        },\n        fail: function fail() {\n          self._cache.invalidate(requestKey);\n\n          self.onApiRequestFailure.apply(this, arguments);\n        },\n        context: {\n          request: apiRequest,\n          key: senderKey,\n          requestKey: requestKey,\n          qm: self\n        }\n      });\n\n      this._cache.put(requestKey, promise);\n\n      return promise;\n    }\n\n    return api.request(apiRequest, {\n      done: this.onApiResponse,\n      fail: this.onApiRequestFailure,\n      context: {\n        request: apiRequest,\n        key: senderKey,\n        requestKey: requestKey,\n        qm: this\n      }\n    });\n  },\n  onApiResponse: function onApiResponse(data, textStatus, jqXHR) {\n    var qm = this.qm;\n\n    if (this.request.__STALE) {\n      return;\n    } // TODO: check the status responses\n\n\n    var response = data.responseHeader && data.responseHeader.params ? new js_components_api_response__WEBPACK_IMPORTED_MODULE_7__[\"default\"](data) : new js_components_json_response__WEBPACK_IMPORTED_MODULE_10__[\"default\"](data);\n    response.setApiQuery(this.request.get('query'));\n\n    if (qm.debug) {\n      console.log('[QM]: sending response:', qm.hasApp() ? qm.getApp().getPluginOrWidgetName(this.key.getId()) || this.key.getId() : this.key.getId(), data);\n    }\n\n    var pubsub = qm.getBeeHive().getService('PubSub'); // we cant use getPubSub() as we are sending the key\n\n    if (pubsub) pubsub.publish(this.key, pubsub.DELIVERING_RESPONSE + this.key.getId(), response);\n\n    if (qm.failedRequestsCache.getIfPresent(this.requestKey)) {\n      qm.failedRequestsCache.invalidate(this.requestKey);\n    }\n  },\n  onApiRequestFailure: function onApiRequestFailure(jqXHR, textStatus, errorThrown) {\n    var qm = this.qm;\n\n    if (this.request.__STALE) {\n      return;\n    }\n\n    var query = this.request.get('query');\n\n    if (qm.debug) {\n      console.warn('[QM]: request failed', jqXHR, textStatus, errorThrown);\n    }\n\n    var errCount = qm.getFailCacheValue(this.requestKey) || 0;\n    qm.failedRequestsCache.put(this.requestKey, errCount + 1);\n\n    if (qm.tryToRecover.apply(this, arguments)) {\n      console.warn('[QM]: attempting recovery');\n      return true; // means we are trying to recover\n    }\n\n    var feedback = new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n      code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"].CODES.API_REQUEST_ERROR,\n      msg: textStatus,\n      request: this.request,\n      error: jqXHR,\n      psk: this.key,\n      errorThrown: errorThrown,\n      text: textStatus\n    });\n    var pubsub = qm.getBeeHive().getService('PubSub');\n    if (pubsub) pubsub.publish(this.key, pubsub.FEEDBACK, feedback);\n    return false; // means: we gave up\n  },\n\n  /**\n   * Method that receives the same arguments as the error callback. It can try to\n   * recover (re-issue) the request. Note: it doesn't need to check whether the\n   * recovery is needed - if we are here, it means 'do what you can to recover'\n   *\n   * This method MUST return 'true' when the request was resent. If it doesn't\n   * return 'true' the sender will be notified about the error.\n   *\n   * If it returns a Feedback object, the sender will be notified using it\n   *\n   * @param jqXHR\n   * @param textStatus\n   * @param errorThrown\n   */\n  tryToRecover: function tryToRecover(jqXHR, textStatus, errorThrown) {\n    var qm = this.qm; // QueryMediator\n\n    var senderKey = this.key;\n    var request = this.request;\n    var requestKey = this.requestKey;\n    var status = jqXHR.status;\n\n    if (status) {\n      switch (status) {\n        case 408: // proxy timeout\n\n        case 409: // conflict\n\n        case 500: // server error\n\n        case 502: // bad gateway\n\n        case 503: // service unavailable\n\n        case 504:\n          // gateway timeout\n          (0,analytics__WEBPACK_IMPORTED_MODULE_15__[\"default\"])('send', 'event', 'introspection', 'retrying', status);\n          setTimeout(function () {\n            // we can remove the entry from the cache, because\n            // if they eventually succeed, sender will receive\n            // its data (because the promise object inside the\n            // cache contains the function to call delivery\n            if (qm._cache) {\n              var resp = qm._cache.getSync(requestKey);\n\n              if (resp && resp.promise) {\n                qm._cache.invalidate(requestKey);\n              } else if (resp) {\n                // it must have succeeded, good!\n                return;\n              }\n            } // re-send the query\n\n\n            qm._executeRequest.call(qm, request, senderKey);\n          }, qm.recoveryDelayInMs);\n          return true;\n          break;\n\n        default:\n          (0,analytics__WEBPACK_IMPORTED_MODULE_15__[\"default\"])('send', 'event', 'introspection', 'not-retrying', status, JSON.stringify(qm.mostRecentQuery.toJSON()));\n      }\n    }\n  },\n\n  /**\n   * Creates a unique, cleaned key from the request and the apiQuery\n   * @param apiRequest\n   */\n  _getCacheKey: function _getCacheKey(apiRequest) {\n    var oldQ = apiRequest.get('query');\n    var newQ = this.queryUpdater.clean(oldQ);\n    apiRequest.set('query', newQ);\n    var key = apiRequest.url();\n    apiRequest.set('query', oldQ);\n    return key;\n  },\n  reset: function reset() {\n    this.__searchCycle = {\n      waiting: {},\n      inprogress: {},\n      done: {},\n      failed: {}\n    }; // reset the datastruct\n\n    if (this._cache) {\n      this._cache.invalidateAll();\n    }\n  },\n  getAlerter: function getAlerter() {\n    return this.getApp().getController(this.alertsController || 'AlertsController');\n  },\n  // display tugboat messages if they exist\n  displayTugboatMessages: function displayTugboatMessages() {\n    var TUGBOAT_MESSAGES = {\n      AUTHOR_ANDED_WARNING: 'Author search terms combined with AND rather than OR',\n      ENTRY_DATE_OFFSET_ERROR: 'Can not combine a date and offset (negative value) for the Entry Date',\n      ENTRY_DATE_NON_NUMERIC_ERROR: 'Found a non numeric value in the Entry Date',\n      UNRECOGNIZABLE_VALUE: 'Invalid value for {} supplied'\n    };\n\n    if (!this.original_url) {\n      // without the original url there can be no messages to display\n      return;\n    }\n\n    var messages = [].concat(utils__WEBPACK_IMPORTED_MODULE_14__[\"default\"].qs('error_message', this.original_url, false) || [], utils__WEBPACK_IMPORTED_MODULE_14__[\"default\"].qs('warning_message', this.original_url, false) || []);\n    var uParams = utils__WEBPACK_IMPORTED_MODULE_14__[\"default\"].qs('unprocessed_parameter', this.original_url, false) || [];\n    messages = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].reduce(messages, function (acc, msg) {\n      msg = msg.toUpperCase();\n\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].has(TUGBOAT_MESSAGES, msg)) {\n        var updatedMsg = TUGBOAT_MESSAGES[msg];\n\n        if (msg === 'UNRECOGNIZABLE_VALUE' && uParams.length > 0) {\n          var param = encodeURIComponent(uParams.pop());\n          updatedMsg = updatedMsg.replace('{}', /^\\w+$/.test(param) ? param : 'parameter');\n        }\n\n        acc.push(updatedMsg);\n      }\n\n      return acc;\n    }, []);\n    var message;\n\n    if (messages.length > 0) {\n      messages.push('See our <a style=\"text-decoration: underline; font-weight: bold\" href=\"/help/faq/#classic-search-translator\">docs</a> for more information');\n      message = messages.join('<br/>');\n      this.getAlerter().alert(new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n        type: js_components_alerts__WEBPACK_IMPORTED_MODULE_13__[\"default\"].TYPE.INFO,\n        msg: message\n      }));\n    }\n  },\n  resetFailures: function resetFailures() {\n    this.failedRequestsCache.invalidateAll();\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(QueryMediator.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_4__[\"default\"].BeeHive, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_4__[\"default\"].App);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (QueryMediator);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/query_mediator.js?");

/***/ }),

/***/ "./src/js/components/second_order_controller.js":
/*!******************************************************!*\
  !*** ./src/js/components/second_order_controller.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! analytics */ \"./src/js/components/analytics.js\");\n\n\n\n\n\n\n/**\n * Triggered via pubsub event, this will take a set of identifiers\n * and generate a bigquery id, then replace the current query\n * with a specified field\n *\n * example query: `similar(docs(99999))`\n */\n\nvar SecondOrderController = js_components_generic_module__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  initialize: function initialize(options) {\n    this.options = _.defaults({}, options, {\n      maxQueryRows: 6000,\n      transformDebounce: 1000\n    }); // set up debounced transform\n\n    if (this.options.transformDebounce) {\n      this.transform = _.debounce(this.transform, this.options.transformDebounce);\n    }\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive.getHardenedInstance());\n    var ps = this.getBeeHive().getService('PubSub');\n    ps.subscribe(ps.CUSTOM_EVENT, _.bind(this.onCustomEvent, this));\n  },\n\n  /**\n   * Expecting an event in the following format\n   * `second-order-search/{ field }`\n   * then call the transform method\n   */\n  onCustomEvent: function onCustomEvent(event) {\n    if (event.startsWith('second-order-search/')) {\n      this.transform.apply(this, [event.split('/')[1]].concat(_.rest(arguments)));\n    }\n  },\n\n  /**\n   * Grab the list of currently selected papers from app storage\n   */\n  getSelectedIds: function getSelectedIds() {\n    var storage = this.getBeeHive().getObject('AppStorage');\n\n    if (storage && storage.getSelectedPapers) {\n      return storage.getSelectedPapers() || [];\n    }\n\n    return [];\n  },\n\n  /**\n   * get the current query from local storage\n   */\n  getCurrentQuery: function getCurrentQuery() {\n    var storage = this.getBeeHive().getObject('AppStorage');\n\n    if (storage && storage.getCurrentQuery && storage.getCurrentQuery() instanceof js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n      return storage.getCurrentQuery();\n    }\n  },\n\n  /**\n   * Grab the qid from vault by sending our list of bibcodes\n   * returning a promise\n   */\n  getBigQueryResponse: function getBigQueryResponse(ids) {\n    var ps = this.getPubSub();\n    var $dd = $.Deferred(); // create vault-style bigquery query\n\n    var bigQuery = new js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n      bigquery: \"bibcode\\n\".concat(ids.join('\\n')),\n      q: '*:*',\n      fq: '{!bitset}',\n      sort: 'date desc'\n    }); // create request\n\n    var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n      target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_4__[\"default\"].MYADS_STORAGE + '/query',\n      query: bigQuery,\n      options: {\n        type: 'POST',\n        done: function done(_ref) {\n          var qid = _ref.qid;\n          return $dd.resolve(qid);\n        },\n        fail: function fail(ev) {\n          return $dd.reject(ev);\n        }\n      }\n    });\n    ps.publish(ps.EXECUTE_REQUEST, request);\n    return $dd.promise();\n  },\n\n  /**\n   * send a *normal* query outside of search cycle\n   */\n  sendQuery: function sendQuery(query) {\n    var ps = this.getPubSub();\n    var $dd = $.Deferred(); // create request\n\n    var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n      target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_4__[\"default\"].SEARCH,\n      query: query,\n      options: {\n        type: 'GET',\n        done: function done(res) {\n          return $dd.resolve(res);\n        },\n        fail: function fail(ev) {\n          return $dd.reject(ev);\n        }\n      }\n    });\n    ps.publish(ps.EXECUTE_REQUEST, request);\n    return $dd.promise();\n  },\n\n  /**\n   * Checks if the passed in field is one of our defined FIELDS\n   */\n  validField: function validField(field) {\n    return _.contains(_.values(SecondOrderController.FIELDS), field);\n  },\n\n  /**\n   * send analytics event\n   */\n  submitAnalyticsEvent: function submitAnalyticsEvent(field) {\n    (0,analytics__WEBPACK_IMPORTED_MODULE_5__[\"default\"])('send', 'event', 'interaction', 'second-order-operation', field);\n  },\n\n  /**\n   * Check field, get selected ids, get qid from vault, and finally send\n   * navigate to the search page, starting the search cycle\n   */\n  transform: function transform(field, opts) {\n    if (!field || !this.validField(field)) {\n      throw 'must pass in a valid field';\n    }\n\n    var options = _.defaults({}, opts, {\n      onlySelected: false,\n      libraryId: null,\n      ids: [],\n      query: null\n    }); // get the selected records from appStorage\n\n\n    var selectedIds = options.ids.length > 0 ? options.ids : this.getSelectedIds(); // if field is 'limit' it should generate qid from selection\n\n    if ((selectedIds.length === 0 || !options.onlySelected) && field !== SecondOrderController.FIELDS.LIMIT && field !== SecondOrderController.FIELDS.LIBRARY && field !== SecondOrderController.FIELDS.EXCLUDE) {\n      this.transformCurrentQuery(field, options.query);\n    } else if (field === SecondOrderController.FIELDS.LIBRARY) {\n      // if field is library, no need to make the request to vault, just start search\n      this.startSearch(field, options.libraryId);\n    } else {\n      this.getQidAndStartSearch(field, selectedIds);\n    }\n  },\n\n  /**\n   * General error handler\n   */\n  handleError: function handleError(ev) {\n    var msg = 'Error occurred';\n\n    if (ev.responseJSON && ev.responseJSON.error) {\n      msg = ev.responseJSON.error;\n    }\n\n    var ps = this.getPubSub();\n    ps.publish(ps.CUSTOM_EVENT, 'second-order-search/error', {\n      message: msg\n    });\n    throw msg;\n  },\n\n  /**\n   * Wrap the current query and pull together all filter queries into\n   * the selected field.\n   *\n   * This will navigate to the search page when done\n   */\n  transformCurrentQuery: function transformCurrentQuery(field, _query) {\n    var ps = this.getPubSub();\n    var currentQuery = _query instanceof js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"] ? _query : this.getCurrentQuery();\n\n    if (!currentQuery) {\n      return;\n    }\n\n    var query = currentQuery.clone();\n    var q = [];\n    q.push(query.get('q'));\n\n    _.forEach(Object.keys(query.toJSON()), function (key) {\n      if (key.startsWith('fq_')) {\n        q.push(query.get(key));\n      }\n    });\n\n    var newQuery = new js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n      q: \"\".concat(field, \"(\").concat(q.join(' AND '), \")\"),\n      sort: 'score desc'\n    });\n    ps.publish(ps.NAVIGATE, 'search-page', {\n      q: newQuery\n    });\n  },\n\n  /**\n   * Send the ids to vault get a qid, which we then use to generate\n   * the final query.\n   *\n   * This will navigate to the search page when done\n   */\n  getQidAndStartSearch: function getQidAndStartSearch(field, ids) {\n    var _this = this;\n\n    // get the big query response from vault\n    this.getBigQueryResponse(ids).then(function (qid) {\n      _this.startSearch(field, qid);\n    }).fail(function () {\n      return _this.handleError.apply(_this, arguments);\n    });\n  },\n  startSearch: function startSearch(field, id) {\n    if (!id) {\n      throw 'no id';\n    }\n\n    var newQuery;\n\n    if (field === SecondOrderController.FIELDS.LIMIT) {\n      var currentQuery = this.getCurrentQuery() || new js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"](); // if field is limit, only do docs and retain the current sort\n\n      newQuery = new js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n        q: \"docs(\".concat(id, \")\"),\n        sort: currentQuery.get('sort') || 'score desc'\n      });\n    } else if (field === SecondOrderController.FIELDS.LIBRARY) {\n      // if library id, use the library/ prefix with the passed in ID\n      newQuery = new js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n        q: \"docs(library/\".concat(id, \")\"),\n        sort: 'date desc'\n      });\n    } else if (field === SecondOrderController.FIELDS.EXCLUDE) {\n      // modify current query, to negate set of docs\n      var _currentQuery = this.getCurrentQuery() || new js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n\n      newQuery = _currentQuery.clone();\n      newQuery.set({\n        q: \"-docs(\".concat(id, \") \").concat(_currentQuery.get('q'))\n      });\n    } else {\n      // replace the current query with our operator\n      newQuery = new js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n        q: \"\".concat(field, \"(docs(\").concat(id, \"))\"),\n        sort: 'score desc'\n      });\n    }\n\n    var ps = this.getPubSub();\n    ps.publish(ps.NAVIGATE, 'search-page', {\n      q: newQuery\n    });\n    this.submitAnalyticsEvent(field);\n  }\n});\nSecondOrderController.FIELDS = {\n  USEFUL: 'useful',\n  SIMILAR: 'similar',\n  TRENDING: 'trending',\n  REVIEWS: 'reviews',\n  LIMIT: 'limit',\n  LIBRARY: 'library',\n  EXCLUDE: 'exclude'\n};\n\n_.extend(SecondOrderController.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_1__[\"default\"].BeeHive);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (SecondOrderController);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/second_order_controller.js?");

/***/ }),

/***/ "./src/js/components/services_container.js":
/*!*************************************************!*\
  !*** ./src/js/components/services_container.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_components_facade__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/components/facade */ \"./src/js/components/facade.js\");\n/* harmony import */ var js_components_facade__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(js_components_facade__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_mixins_hardened__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/mixins/hardened */ \"./src/js/mixins/hardened.js\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/**\n * Created by rchyla on 3/18/14.\n */\n\n\n\n\nvar Services = js_components_generic_module__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend({\n  initialize: function initialize(options) {\n    this._services = underscore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].has(options, 'services') ? underscore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].clone(options.services) : {};\n  },\n  activate: function activate() {\n    var args = arguments;\n\n    underscore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].each(underscore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].values(this._services), function (service) {\n      // _.keys() preserves access order\n      if (underscore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].isObject(service) && 'activate' in service) {\n        service.activate.apply(service, args);\n      }\n    });\n  },\n  destroy: function destroy() {\n    for (var service in this._services) {\n      this.remove(service);\n    }\n  },\n  add: function add(name, service) {\n    if (this._services.hasOwnProperty(name)) {\n      throw new Error('The service: ' + name + ' is already registered, remove it first!');\n    }\n\n    if (!(name && service) || !underscore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].isString(name)) {\n      throw new Error('The key must be a string and the service is an object');\n    }\n\n    this._services[name] = service;\n  },\n  remove: function remove(name, service) {\n    if (this._services.hasOwnProperty(name)) {\n      var s = this._services[name];\n\n      if ('destroy' in s) {\n        s.destroy();\n      }\n\n      delete this._services[name];\n      return s;\n    }\n\n    return null;\n  },\n  has: function has(name) {\n    return this._services.hasOwnProperty(name);\n  },\n  get: function get(name) {\n    return this._services[name];\n  },\n  getAll: function getAll() {\n    return underscore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].pairs(this._services);\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].extend(Services.prototype, js_mixins_hardened__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n  /*\n   * A simple facade, we'll expose only services that\n   * have 'getHardenedMethod' (ie. they know to protect\n   * themselves)\n   */\n  getHardenedInstance: function getHardenedInstance() {\n    var iface = {};\n    var s;\n\n    for (var service in this._services) {\n      s = this._services[service];\n\n      if (underscore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].isObject(s) && 'getHardenedInstance' in s) {\n        iface[service] = true;\n      }\n    }\n\n    var newContainer = new this.constructor({\n      services: this._getHardenedInstance(iface, this._services)\n    });\n    return this._getHardenedInstance({\n      get: true,\n      has: true\n    }, newContainer);\n  }\n});\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Services);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/services_container.js?");

/***/ }),

/***/ "./src/js/components/session.js":
/*!**************************************!*\
  !*** ./src/js/components/session.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var js_mixins_hardened__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/mixins/hardened */ \"./src/js/mixins/hardened.js\");\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_user__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/components/user */ \"./src/js/components/user.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_mixins_api_access__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js/mixins/api_access */ \"./src/js/mixins/api_access.js\");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! utils */ \"./src/js/utils.js\");\n/*\n * A generic class that lazy-loads User info\n */\n\n\n\n\n\n\n\n\n\n\n\nvar SessionModel = backbone__WEBPACK_IMPORTED_MODULE_0___default().Model.extend({\n  defaults: function defaults() {\n    return {\n      resetPasswordToken: undefined\n    };\n  }\n});\nvar payloads = {\n  login: ['email', 'password'],\n  register: ['given_name', 'family_name', 'email', 'password1', 'password2', 'g-recaptcha-response'],\n  resetPassword1: ['g-recaptcha-response'],\n  resetPassword2: ['password1', 'password2']\n};\n\nvar getPayload = function getPayload(data, type) {\n  return JSON.stringify(_.pick(data, payloads[type]));\n};\n\nvar Session = js_components_generic_module__WEBPACK_IMPORTED_MODULE_4__[\"default\"].extend({\n  initialize: function initialize(options) {\n    var options = options || {}; // right now, this will only be used if someone forgot their password\n\n    this.model = new SessionModel();\n    this.test = options.test ? true : undefined;\n\n    _.bindAll(this, ['loginSuccess', 'loginFail', 'registerSuccess', 'registerFail', 'resetPassword1Success', 'resetPassword1Fail', 'resetPassword2Success', 'resetPassword2Fail']);\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n  },\n\n  /* methods that will be available to widgets */\n  login: function login(data) {\n    var d = $.Deferred();\n    var that = this;\n    this.sendRequestWithNewCSRF(function (csrfToken) {\n      var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n        target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].LOGIN,\n        query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({}),\n        options: {\n          type: 'POST',\n          data: getPayload(data, 'login'),\n          contentType: 'application/json',\n          headers: {\n            'X-CSRFToken': csrfToken\n          },\n          done: function done() {\n            // allow widgets to listen for success or failure\n            d.resolve.apply(d, arguments); // session response to success\n\n            that.loginSuccess.apply(that, arguments);\n          },\n          fail: function fail() {\n            d.reject.apply(d, arguments);\n            that.loginFail.apply(that, arguments);\n          },\n          beforeSend: function beforeSend(jqXHR, settings) {\n            jqXHR.session = this;\n          }\n        }\n      });\n      return this.getBeeHive().getService('Api').request(request);\n    });\n    return d.promise();\n  },\n\n  /*\n   * every time a csrf token is required, csrf manager will request a new token,\n   * and it allows you to attach callbacks to the promise it returns\n   * */\n  sendRequestWithNewCSRF: function sendRequestWithNewCSRF(callback) {\n    callback = _.bind(callback, this);\n    this.getBeeHive().getObject('CSRFManager').getCSRF().done(callback);\n  },\n  logout: function logout() {\n    this.sendRequestWithNewCSRF(function (csrfToken) {\n      var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n        target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].LOGOUT,\n        query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({}),\n        options: {\n          context: this,\n          type: 'POST',\n          headers: {\n            'X-CSRFToken': csrfToken\n          },\n          contentType: 'application/json',\n          fail: this.logoutSuccess,\n          done: this.logoutSuccess\n        }\n      });\n      return this.getBeeHive().getService('Api').request(request);\n    });\n  },\n  register: function register(data) {\n    this.sendRequestWithNewCSRF(function (csrfToken) {\n      var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n        target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].USER,\n        query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({}),\n        options: {\n          type: 'POST',\n          data: getPayload(data, 'register'),\n          contentType: 'application/json',\n          headers: {\n            'X-CSRFToken': csrfToken\n          },\n          done: this.registerSuccess,\n          fail: this.registerFail\n        }\n      });\n      return this.getBeeHive().getService('Api').request(request);\n    });\n  },\n  resetPassword1: function resetPassword1(data) {\n    var email = data.email;\n\n    var data = _.omit(data, 'email');\n\n    this.sendRequestWithNewCSRF(function (csrfToken) {\n      var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n        target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].RESET_PASSWORD + '/' + email,\n        query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({}),\n        options: {\n          type: 'POST',\n          data: getPayload(data, 'resetPassword1'),\n          headers: {\n            'X-CSRFToken': csrfToken\n          },\n          contentType: 'application/json',\n          done: this.resetPassword1Success,\n          fail: this.resetPassword1Fail\n        }\n      });\n      return this.getBeeHive().getService('Api').request(request);\n    });\n  },\n  resetPassword2: function resetPassword2(data) {\n    this.sendRequestWithNewCSRF(function (csrfToken) {\n      var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n        target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].RESET_PASSWORD + '/' + this.model.get('resetPasswordToken'),\n        query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({}),\n        options: {\n          type: 'PUT',\n          data: getPayload(data, 'resetPassword2'),\n          contentType: 'application/json',\n          headers: {\n            'X-CSRFToken': csrfToken\n          },\n          done: this.resetPassword2Success,\n          fail: this.resetPassword2Fail\n        }\n      });\n      return this.getBeeHive().getService('Api').request(request);\n    });\n  },\n\n  /**\n   * Resend verification email\n   * @param {string} email\n   */\n  resendVerificationEmail: function resendVerificationEmail(email) {\n    var self = this;\n    this.sendRequestWithNewCSRF(function (csrfToken) {\n      var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n        target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].RESEND_VERIFY.replace('{email}', email),\n        query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({}),\n        options: {\n          type: 'PUT',\n          headers: {\n            'X-CSRFToken': csrfToken\n          },\n          done: function done() {\n            var pubsub = self.getPubSub();\n            pubsub.publish(pubsub.USER_ANNOUNCEMENT, 'resend_verification_email_success');\n          },\n          fail: function fail(xhr) {\n            var pubsub = self.getPubSub();\n            var error = utils__WEBPACK_IMPORTED_MODULE_10__[\"default\"].extractErrorMessageFromAjax(xhr, 'error unknown');\n            var message = \"Resending verification email was unsuccessful (\".concat(error, \")\");\n            pubsub.publish(pubsub.ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_8__[\"default\"]({\n              code: 0,\n              msg: message,\n              type: 'danger',\n              fade: true\n            }));\n            pubsub.publish(pubsub.USER_ANNOUNCEMENT, 'resend_verification_email_fail', message);\n          }\n        }\n      });\n      return this.getBeeHive().getService('Api').request(request);\n    });\n  },\n  setChangeToken: function setChangeToken(token) {\n    this.model.set('resetPasswordToken', token);\n  },\n\n  /* private methods */\n  loginSuccess: function loginSuccess(response, status, jqXHR) {\n    // reset auth token by contacting Bootstrap, which will log user in\n    var that = this;\n    this.getApiAccess({\n      reconnect: true\n    }).done(function () {});\n  },\n  loginFail: function loginFail(xhr, status, errorThrown) {\n    var pubsub = this.getPubSub();\n    var error = utils__WEBPACK_IMPORTED_MODULE_10__[\"default\"].extractErrorMessageFromAjax(xhr, 'error unknown');\n    var message = \"Login was unsuccessful (\".concat(error, \")\");\n    pubsub.publish(pubsub.ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_8__[\"default\"]({\n      code: 0,\n      msg: message,\n      type: 'danger',\n      fade: true\n    }));\n    pubsub.publish(pubsub.USER_ANNOUNCEMENT, 'login_fail', message);\n  },\n  logoutSuccess: function logoutSuccess(response, status, jqXHR) {\n    var that = this;\n    this.getApiAccess({\n      reconnect: true\n    }).done(function () {\n      // set session state to logged out\n      that.getBeeHive().getObject('User').completeLogOut();\n    });\n  },\n  registerSuccess: function registerSuccess(response, status, jqXHR) {\n    var pubsub = this.getPubSub(); // authentication widget will show a \"success\" view in response to this user announcement\n\n    pubsub.publish(pubsub.USER_ANNOUNCEMENT, 'register_success');\n  },\n  registerFail: function registerFail(xhr, status, errorThrown) {\n    var pubsub = this.getPubSub();\n    var error = utils__WEBPACK_IMPORTED_MODULE_10__[\"default\"].extractErrorMessageFromAjax(xhr, 'error unknown');\n    var message = \"Registration was unsuccessful (\".concat(error, \")\");\n    pubsub.publish(pubsub.ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_8__[\"default\"]({\n      code: 0,\n      msg: message,\n      type: 'danger',\n      fade: true\n    }));\n    pubsub.publish(pubsub.USER_ANNOUNCEMENT, 'register_fail', message);\n  },\n  resetPassword1Success: function resetPassword1Success(response, status, jqXHR) {\n    var pubsub = this.getPubSub();\n    pubsub.publish(pubsub.USER_ANNOUNCEMENT, 'reset_password_1_success');\n  },\n  resetPassword1Fail: function resetPassword1Fail(xhr, status, errorThrown) {\n    var pubsub = this.getPubSub();\n    var error = utils__WEBPACK_IMPORTED_MODULE_10__[\"default\"].extractErrorMessageFromAjax(xhr, 'error unknown');\n    var message = \"password reset step 1 was unsuccessful (\".concat(error, \")\");\n    pubsub.publish(pubsub.ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_8__[\"default\"]({\n      code: 0,\n      msg: message,\n      type: 'danger',\n      fade: true\n    }));\n    pubsub.publish(pubsub.USER_ANNOUNCEMENT, 'reset_password_1_fail', message);\n  },\n  resetPassword2Success: function resetPassword2Success(response, status, jqXHR) {\n    var promise;\n    var pubsub; // reset auth token by contacting Bootstrap\n    // this will log the user in\n\n    promise = this.getApiAccess({\n      reconnect: true\n    }); // notify interested widgets\n\n    pubsub = this.getPubSub();\n    promise.done(function () {\n      pubsub.publish(pubsub.USER_ANNOUNCEMENT, 'reset_password_2_success');\n      var message = 'Your password has been successfully reset!'; // navigate to home page\n\n      pubsub.publish(pubsub.NAVIGATE, 'index-page');\n      pubsub.publish(pubsub.ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_8__[\"default\"]({\n        code: 0,\n        msg: message,\n        type: 'success',\n        modal: true\n      }));\n    });\n    promise.fail(function (xhr) {\n      var error = utils__WEBPACK_IMPORTED_MODULE_10__[\"default\"].extractErrorMessageFromAjax(xhr, 'error unknown');\n      var message = \"Your password was not successfully reset. Please try to follow the link from the email you received again.\\n\\n(\".concat(error, \")\");\n      pubsub.publish(pubsub.USER_ANNOUNCEMENT, 'reset_password_2_fail', message);\n      pubsub.publish(pubsub.ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_8__[\"default\"]({\n        code: 0,\n        msg: message,\n        type: 'danger',\n        modal: true\n      }));\n    });\n  },\n  resetPassword2Fail: function resetPassword2Fail(xhr, status, errorThrown) {\n    var pubsub = this.getPubSub();\n    var error = utils__WEBPACK_IMPORTED_MODULE_10__[\"default\"].extractErrorMessageFromAjax(xhr, 'error unknown');\n    var message = \"password reset step 2 was unsuccessful (\".concat(error, \")\");\n    pubsub.publish(pubsub.ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_8__[\"default\"]({\n      code: 0,\n      msg: message,\n      type: 'danger',\n      fade: true\n    }));\n    pubsub.publish(pubsub.USER_ANNOUNCEMENT, 'reset_password_2_fail', message);\n  },\n  hardenedInterface: {\n    login: 'log the user in',\n    logout: 'log the user out',\n    register: 'registers a new user',\n    resetPassword1: 'sends an email to account',\n    resetPassword2: 'updates the password',\n    setChangeToken: 'the router stores the token to reset password here',\n    resendVerificationEmail: 'resends the verification email'\n  }\n});\n\n_.extend(Session.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_5__[\"default\"].BeeHive, js_mixins_hardened__WEBPACK_IMPORTED_MODULE_3__[\"default\"], js_mixins_api_access__WEBPACK_IMPORTED_MODULE_9__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Session);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/session.js?");

/***/ }),

/***/ "./src/js/components/solr_params.js":
/*!******************************************!*\
  !*** ./src/js/components/solr_params.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_components_multi_params__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/components/multi_params */ \"./src/js/components/multi_params.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_3__);\n/*\nSubclass of the multi-param with a functionality specific for\nSOLR queries. Do not use this class directly inside your app!\nInstead, import 'api_query' and configure it properly\n\n * <p>For a list of possible parameters, please consult the links below.</p>\n *\n * @see http://wiki.apache.org/solr/CoreQueryParameters\n * @see http://wiki.apache.org/solr/CommonQueryParameters\n * @see http://wiki.apache.org/solr/SimpleFacetParameters\n * @see http://wiki.apache.org/solr/HighlightingParameters\n * @see http://wiki.apache.org/solr/MoreLikeThis\n * @see http://wiki.apache.org/solr/SpellCheckComponent\n * @see http://wiki.apache.org/solr/StatsComponent\n * @see http://wiki.apache.org/solr/TermsComponent\n * @see http://wiki.apache.org/solr/TermVectorComponent\n * @see http://wiki.apache.org/solr/LocalParams\n *\n * @param properties A map of fields to set. Refer to the list of public fields.\n * @class ParameterStore\n */\n\n\n\n\nvar SolrParams = js_components_multi_params__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  fieldsToConcatenate: [],\n  defaultOperator: ' ',\n  fieldProcessors: {\n    '*': function _(vals, self) {\n      return [vals.join(self.defaultOperator)];\n    }\n  },\n  initialize: function initialize(attributes, options) {\n    if (options) {\n      underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend(this, underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].pick(options, ['fieldsToConcatenate', 'defaultOperator', 'fieldProcessors']));\n    }\n  },\n  url: function url(resp, options) {\n    // first massage the fields, but do not touch the original values\n    // lodash has a parameter isDeep that can be set to true, but\n    // for compatibility reasons with underscore, lets' not use it\n    // the values should always be only one level deep\n    var values = underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].clone(this.attributes);\n\n    var l = this.fieldsToConcatenate.length;\n    var k = '';\n\n    for (var i = 0; i < l; i++) {\n      k = this.fieldsToConcatenate[i];\n\n      if (this.has(k)) {\n        if (this.fieldProcessors[k]) {\n          values[k] = this.fieldProcessors[k](this.get(k), this);\n        } else {\n          values[k] = this.fieldProcessors['*'](this.get(k), this);\n        }\n      }\n    } // then call the default implementation of the url handling\n\n\n    return js_components_multi_params__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.url.call(this, values);\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (SolrParams);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/solr_params.js?");

/***/ }),

/***/ "./src/js/components/solr_response.js":
/*!********************************************!*\
  !*** ./src/js/components/solr_response.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_components_json_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/components/json_response */ \"./src/js/components/json_response.js\");\n/* harmony import */ var js_components_solr_params__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/solr_params */ \"./src/js/components/solr_params.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);\n/**\n * Created by rchyla on 3/10/14.\n */\n\n/*\n * Subclass of the JSON response - it understands the JSON object as returned\n * by SOLR.\n */\n\n\n\n\n\n/*\n * Cleans the parameters object by removing empty values\n * @param {Object} obj\n */\n\nvar cleanParams = function cleanParams(obj) {\n  var out = {};\n  Object.keys(obj).forEach(function (key) {\n    if (!underscore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].isEmpty(obj[key])) {\n      out[key] = obj[key];\n    }\n  });\n  return out;\n};\n\nvar SolrResponse = js_components_json_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  initialize: function initialize() {\n    if (!this.has('responseHeader.params')) {\n      throw new Error('SOLR data error - missing: responseHeader.params');\n    }\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_3__[\"default\"].isString(this._url)) {\n      // TODO: this seems ugly, relying on the parent for values\n      var p = new js_components_solr_params__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n      this._url = new js_components_solr_params__WEBPACK_IMPORTED_MODULE_1__[\"default\"](p.parse(this._url)).url();\n    } else {\n      var queryParams = this.get('responseHeader.params');\n      this._url = new js_components_solr_params__WEBPACK_IMPORTED_MODULE_1__[\"default\"](cleanParams(queryParams)).url();\n    }\n  },\n  url: function url(resp, options) {\n    return this._url;\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (SolrResponse);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/solr_response.js?");

/***/ }),

/***/ "./src/js/components/transition.js":
/*!*****************************************!*\
  !*** ./src/js/components/transition.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n\n\nvar Transition = function Transition(endpoint, options) {\n  if (!underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(endpoint)) {\n    throw new Error('Endpoint name must be a string');\n  }\n\n  this.endpoint = endpoint;\n\n  underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(this, options);\n};\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(Transition.prototype, {\n  route: false,\n  trigger: false,\n  replace: false,\n  title: false,\n  execute: function execute() {\n    throw new Error('You must override this method');\n  }\n});\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Transition);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/transition.js?");

/***/ }),

/***/ "./src/js/components/transition_catalog.js":
/*!*************************************************!*\
  !*** ./src/js/components/transition_catalog.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_transition__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/transition */ \"./src/js/components/transition.js\");\n\n\n\nvar TransitionCatalog = function TransitionCatalog(options) {\n  this._catalog = {};\n};\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(TransitionCatalog.prototype, {\n  add: function add(transition) {\n    if (!(transition instanceof js_components_transition__WEBPACK_IMPORTED_MODULE_1__[\"default\"])) {\n      throw new Error('You can add only Transition objects');\n    }\n\n    this._catalog[transition.endpoint] = transition;\n    return transition;\n  },\n  get: function get(name) {\n    return this._catalog[name];\n  },\n  remove: function remove(name) {\n    delete this._catalog[name];\n  }\n});\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (TransitionCatalog);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/transition_catalog.js?");

/***/ }),

/***/ "./src/js/components/user.js":
/*!***********************************!*\
  !*** ./src/js/components/user.js ***!
  \***********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var js_mixins_hardened__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/mixins/hardened */ \"./src/js/mixins/hardened.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_mixins_api_access__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/mixins/api_access */ \"./src/js/mixins/api_access.js\");\n/*\n * A generic class that lazy-loads User info\n *\n *\n * there are only three USER_ANNOUNCEMENT events that widgets can subscribe to:\n *\n * user.USER_SIGNED_IN: (third argument is username)\n * user.USER_SIGNED_OUT: (third argument is undefined)\n * user.USER_INFO_CHANGE: (third argument is dict of changed values)\n *\n * the user has two models:\n *\n * userModel represents the logged-in user and\n * stores values that should be synced with the user account,\n *\n * localStorageModel represents all values stored in local storage,\n * right now this is limited to orcidModeOn\n *\n */\n\n\n\n\n\n\n\n\n\nvar LocalStorageModel;\nvar UserModel;\nvar User; // any variable that doesn't track with user accounts\n\nLocalStorageModel = backbone__WEBPACK_IMPORTED_MODULE_1___default().Model.extend({\n  defaults: function defaults() {\n    return {\n      isOrcidModeOn: false,\n      // eventually propagate this to user account\n      perPage: undefined\n    };\n  }\n}); // this data reflects user accounts\n\nUserModel = backbone__WEBPACK_IMPORTED_MODULE_1___default().Model.extend({\n  defaults: function defaults() {\n    return {\n      user: undefined,\n      link_server: undefined,\n      minAuthorPerResult: 4,\n      externalLinkAction: 'Open in new tab',\n      defaultDatabase: [{\n        name: 'Physics',\n        value: false\n      }, {\n        name: 'Astronomy',\n        value: false\n      }, {\n        name: 'General',\n        value: false\n      }],\n      defaultExportFormat: 'BibTeX',\n      defaultHideSidebars: 'Show',\n      customFormats: [],\n      recentQueries: []\n    };\n  }\n});\nUser = js_components_generic_module__WEBPACK_IMPORTED_MODULE_4__[\"default\"].extend({\n  initialize: function initialize(options) {\n    // this model is for settings that come from PersistentStorage service\n    this.localStorageModel = new LocalStorageModel();\n    this.listenTo(this.localStorageModel, 'change', this.broadcastUserDataChange); // this model is for settings that come from user accounts\n\n    this.userModel = new UserModel();\n    this.listenTo(this.userModel, 'change:user', this.broadcastUserChange);\n    this.listenTo(this.userModel, 'change', function (key) {\n      if (key !== 'user') this.broadcastUserDataChange.apply(this, arguments);\n    });\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bindAll(this, 'completeLogIn', 'completeLogOut'); // set base url, currently only necessary for change_email endpoint\n\n\n    this.base_url = this.test ? 'location.origin' : location.origin;\n    this.buildAdditionalParameters();\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive); // Check if the Orcid access was revoked by the user\n    // It will only be considered 'revoked' if a 401 is received by the API handler\n\n    var checkOrcidToken = function checkOrcidToken() {\n      var orcidApi = beehive.getService('OrcidApi');\n      var user = beehive.getObject('User'); // Only run if there is actually authData stored in the user object\n\n      if (orcidApi.authData !== null) {\n        orcidApi.checkAccessOrcidApiAccess().fail(function (xHr) {\n          var statusCode = xHr && xHr.status;\n\n          if (statusCode && statusCode === '401') {\n            orcidApi.signOut();\n            user.setOrcidMode(0);\n          }\n        });\n      }\n    };\n\n    this.getPubSub().subscribe(this.getPubSub().APP_STARTING, checkOrcidToken);\n    var storage = beehive.getService('PersistentStorage');\n\n    if (storage) {\n      var prefs = storage.get('UserPreferences');\n\n      if (prefs) {\n        this.localStorageModel.set(prefs);\n      }\n    }\n  },\n  // general persistent storage\n  _persistModel: function _persistModel() {\n    var storage = this.getBeeHive().getService('PersistentStorage');\n\n    if (storage) {\n      storage.set('UserPreferences', this.localStorageModel.toJSON());\n    }\n  },\n\n  /* generic set localStorage function */\n  setLocalStorage: function setLocalStorage(obj) {\n    this.localStorageModel.set(obj);\n\n    this._persistModel();\n  },\n\n  /* generic get localStorage function, gives you everything */\n  getLocalStorage: function getLocalStorage(obj) {\n    return this.localStorageModel.toJSON();\n  },\n  // add a query to a recent queries list\n  addToRecentQueries: function addToRecentQueries(apiQuery) {\n    var MAX = 10;\n\n    try {\n      var recent = this.userModel.get('recentQueries'); // only allow a max number of recent queries\n\n      recent.length >= MAX && recent.pop();\n      recent.unshift(apiQuery.clone().toJSON());\n      this.userModel.set('recentQueries', recent); // on set, attempt to synchronize with server\n\n      this.setUserData({\n        recentQueries: recent\n      });\n    } catch (e) {\n      recent = [];\n    }\n\n    return recent;\n  },\n  getRecentQueries: function getRecentQueries() {\n    return this.userModel.get('recentQueries') || [];\n  },\n\n  /* orcid functions */\n  setOrcidMode: function setOrcidMode(val) {\n    this.localStorageModel.set('isOrcidModeOn', val);\n\n    this._persistModel();\n  },\n  isOrcidModeOn: function isOrcidModeOn() {\n    return this.localStorageModel.get('isOrcidModeOn');\n  },\n\n  /* general functions */\n  // tell widgets that data changed, and send them that data\n  broadcastUserDataChange: function broadcastUserDataChange(changedModel) {\n    this.getPubSub().publish(this.getPubSub().USER_ANNOUNCEMENT, this.USER_INFO_CHANGE, changedModel.changed);\n  },\n  broadcastUserChange: function broadcastUserChange() {\n    // user has signed in or out\n    var message = this.userModel.get('user') ? this.USER_SIGNED_IN : this.USER_SIGNED_OUT;\n    this.getPubSub().publish(this.getPubSub().USER_ANNOUNCEMENT, message, this.userModel.get('user'));\n    this.redirectIfNecessary();\n  },\n  buildAdditionalParameters: function buildAdditionalParameters() {\n    // any extra info that needs to be sent in post or get requests\n    // but not known about by the widget models goes here\n    this.additionalParameters = {};\n  },\n  handleFailedPOST: function handleFailedPOST(jqXHR, status, errorThrown, target) {\n    var pubsub = this.getPubSub();\n    var error;\n\n    if (jqXHR.responseJSON && jqXHR.responseJSON.error) {\n      error = jqXHR.responseJSON.error;\n    } else if (jqXHR.responseText) {\n      error = jqXHR.responseText;\n    } else {\n      error = 'error unknown';\n    }\n\n    console.error('POST request failed for endpoint: [' + target + ']', error);\n  },\n  handleFailedGET: function handleFailedGET(jqXHR, status, errorThrown, target) {\n    var pubsub = this.getPubSub();\n    var error;\n\n    if (jqXHR.responseJSON && jqXHR.responseJSON.error) {\n      error = jqXHR.responseJSON.error;\n    } else if (jqXHR.responseText) {\n      error = jqXHR.responseText;\n    } else {\n      error = 'error unknown';\n    }\n\n    console.error('GET request failed for endpoint: [' + target + ']', error);\n  },\n  fetchData: function fetchData(target) {\n    return this.composeRequest({\n      target: target,\n      method: 'GET'\n    });\n  },\n\n  /*\n   * POST data to endpoint: accessible through facade\n   *\n   * */\n  postData: function postData(target, data) {\n    if (this.additionalParameters[target]) {\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(data, this.additionalParameters[target]);\n    }\n\n    return this.composeRequest({\n      target: target,\n      method: 'POST',\n      data: data\n    });\n  },\n\n  /* PUT data to pre-existing endpoint: accessible through facade */\n  putData: function putData(target, data) {\n    if (this.additionalParameters[target]) {\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(data, this.additionalParameters[target]);\n    }\n\n    return this.composeRequest({\n      target: target,\n      method: 'PUT',\n      data: data\n    });\n  },\n\n  /*\n   * every time a csrf token is required, app storage will request a new token,\n   * so it allows you to attach callbacks to the promise it returns\n   * */\n  sendRequestWithNewCSRF: function sendRequestWithNewCSRF(callback) {\n    callback = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(callback, this);\n    this.getBeeHive().getObject('CSRFManager').getCSRF().done(callback);\n  },\n\n  /*\n   * returns a promise\n   * */\n  composeRequest: function composeRequest(config) {\n    var target = config.target;\n    var method = config.method;\n    var data = config.data || {};\n    var csrf = data.csrf; // don't want to send this to the endpoint\n\n    var data = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].omit(data, 'csrf');\n\n    var endpoint = js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__[\"default\"][target];\n    var that = this;\n    var deferred = $.Deferred();\n    var requestData;\n\n    function done() {\n      deferred.resolve.apply(deferred, arguments);\n    } // will have a default fail message for get requests or put/post requests\n\n\n    function fail() {\n      var toCall = method == 'GET' ? that.handleFailedGET : that.handleFailedPOST;\n      var argsWithTarget = [].slice.apply(arguments);\n      argsWithTarget.push(target);\n      toCall.apply(that, argsWithTarget);\n      deferred.reject.apply(deferred, arguments);\n    }\n\n    requestData = {\n      target: endpoint,\n      options: {\n        context: this,\n        type: method,\n        data: !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEmpty(data) ? JSON.stringify(data) : undefined,\n        contentType: 'application/json',\n        done: done,\n        fail: fail\n      }\n    }; // it came from a form, needs to have a csrf token\n\n    if (csrf) {\n      this.sendRequestWithNewCSRF(function (csrfToken) {\n        requestData.options.headers = {\n          'X-CSRFToken': csrfToken\n        };\n        this.getBeeHive().getService('Api').request(new js_components_api_request__WEBPACK_IMPORTED_MODULE_2__[\"default\"](requestData));\n      });\n    } else {\n      this.getBeeHive().getService('Api').request(new js_components_api_request__WEBPACK_IMPORTED_MODULE_2__[\"default\"](requestData));\n    }\n\n    return deferred.promise();\n  },\n  redirectIfNecessary: function redirectIfNecessary() {\n    var pubsub = this.getPubSub(); // redirect user to wherever they were before authentication page\n\n    if (this.getBeeHive().getObject('MasterPageManager').currentChild === 'AuthenticationPage' && this.isLoggedIn()) {\n      // so that navigator can redirect to the proper page\n      var previousNav = this.getBeeHive().getService('HistoryManager').getPreviousNav(); // If there there was no history, redirect to landing page\n\n      if (!previousNav) {\n        previousNav = 'index-page';\n      }\n\n      pubsub.publish.apply(pubsub, [pubsub.NAVIGATE].concat(previousNav));\n    } else if (this.getBeeHive().getObject('MasterPageManager').currentChild === 'SettingsPage' && !this.isLoggedIn()) {\n      pubsub.publish(pubsub.NAVIGATE, 'authentication-page');\n    }\n  },\n\n  /* set user */\n  setUser: function setUser(email) {\n    this.userModel.set('user', email);\n\n    if (this.isLoggedIn()) {\n      this.completeLogIn();\n    }\n  },\n  // this function is called immediately after the login is confirmed\n  // get the user's data from myads\n  completeLogIn: function completeLogIn() {\n    var that = this;\n    this.fetchData('USER_DATA').done(function (data) {\n      that.userModel.set(data);\n    });\n  },\n  // this function is called immediately after the logout is confirmed\n  completeLogOut: function completeLogOut() {\n    this.userModel.clear();\n  },\n  // publicly accessible\n  deleteAccount: function deleteAccount() {\n    var that = this;\n    return this.composeRequest({\n      target: 'USER',\n      method: 'DELETE',\n      data: {\n        csrf: true\n      }\n    }).done(function () {\n      that.getApiAccess({\n        reconnect: true\n      }).done(function () {\n        that.completeLogOut();\n      });\n    });\n  },\n  changeEmail: function changeEmail(data) {\n    var _this = this;\n\n    var new_email = data.email;\n\n    var onDone = function onDone() {\n      // publish alert\n      var alertSuccess = function alertSuccess() {\n        setTimeout(function () {\n          var message = '<p>Please check <b>' + new_email + \"</b> for further instructions</p><p>(If you don't see the email, please <b>check your spam folder</b>)</p>\";\n\n          _this.getPubSub().publish(_this.getPubSub().ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n            code: 0,\n            msg: message,\n            type: 'success',\n            title: 'Success',\n            modal: true\n          }));\n        }, 100);\n      }; // need to do it this way so the alert doesnt get lost after page is changed\n\n\n      _this.getPubSub().subscribeOnce(_this.getPubSub().NAVIGATE, alertSuccess);\n\n      _this.getPubSub().publish(_this.getPubSub().NAVIGATE, 'index-page');\n    };\n\n    data = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pick(data, ['email', 'password']), {\n      csrf: true\n    });\n    return this.postData('CHANGE_EMAIL', data).done(onDone);\n  },\n  changePassword: function changePassword(data) {\n    data = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(data, {\n      csrf: true\n    });\n    return this.postData('CHANGE_PASSWORD', data);\n  },\n  // returns a promise\n  getToken: function getToken() {\n    return this.fetchData('TOKEN');\n  },\n  generateToken: function generateToken() {\n    return this.putData('TOKEN', {\n      csrf: true\n    });\n  },\n  getUserData: function getUserData() {\n    return this.userModel.toJSON();\n  },\n\n  /*\n   * POST an update to the myads user_data endpoint\n   * (success will automatically update the user object's model of myads data)\n   * */\n  setUserData: function setUserData(data) {\n    var that = this;\n    return this.postData('USER_DATA', data).done(function (data) {\n      that.userModel.set(data);\n    });\n  },\n  getUserName: function getUserName() {\n    return this.userModel.get('user');\n  },\n  isLoggedIn: function isLoggedIn() {\n    return !!this.userModel.get('user');\n  },\n\n  /*\n   * POST an update to the myads user_data endpoint\n   * (success will automatically update the user object's model of myads data)\n   * */\n  setMyADSData: function setMyADSData(data) {\n    return this.postData('USER_DATA', data);\n  },\n\n  /*\n   * this function queries the myads open url configuration endpoint\n   * and returns a promise that it resolves with the data\n   * (it is only needed by the preferences widget)\n   * */\n  getOpenURLConfig: function getOpenURLConfig() {\n    return this.getSiteConfig('link_servers');\n  },\n  getSiteConfig: function getSiteConfig(key) {\n    var deferred = $.Deferred();\n\n    function done(data) {\n      deferred.resolve(data);\n    }\n\n    function fail(data) {\n      deferred.reject(data);\n    }\n\n    var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n      target: key ? js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].SITE_CONFIGURATION + '/' + key : js_components_api_targets__WEBPACK_IMPORTED_MODULE_3__[\"default\"].SITE_CONFIGURATION,\n      options: {\n        type: 'GET',\n        done: done,\n        fail: fail\n      }\n    });\n    this.getBeeHive().getService('Api').request(request);\n    return deferred.promise();\n  },\n  hardenedInterface: {\n    setUser: 'set email into user',\n    isLoggedIn: 'whether the user is logged in',\n    getUserName: \"get the user's email before the @\",\n    setLocalStorage: \"sets an object in to user's local storage\",\n    getLocalStorage: \"gives you a json object for user's local storage\",\n    isOrcidModeOn: 'figure out if user has Orcid mode activated',\n    setOrcidMode: 'set orcid ui on or off',\n    getOpenURLConfig: 'get list of openurl endpoints',\n    getUserData: 'myads data',\n    setUserData: 'POST user data to myads endpoint',\n    getRecentQueries: 'get the 10 most recent queries as array',\n    addToRecentQueries: 'add a query to the set of recent queries',\n    generateToken: 'PUT to token endpoint to make a new token',\n    getToken: 'GET from token endpoint',\n    deleteAccount: 'POST to delete account endpoint',\n    changePassword: 'POST to change password endpoint',\n    changeEmail: 'POST to change email endpoint',\n    setMyADSData: '',\n    USER_SIGNED_IN: 'constant',\n    USER_SIGNED_OUT: 'constant',\n    USER_INFO_CHANGE: 'constant'\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(User.prototype, js_mixins_hardened__WEBPACK_IMPORTED_MODULE_6__[\"default\"], js_mixins_dependon__WEBPACK_IMPORTED_MODULE_5__[\"default\"].BeeHive, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_5__[\"default\"].App, js_mixins_api_access__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n  USER_SIGNED_IN: 'user_signed_in',\n  USER_SIGNED_OUT: 'user_signed_out',\n  USER_INFO_CHANGE: 'user_info_change'\n});\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (User);\n\n//# sourceURL=webpack://bumblebee/./src/js/components/user.js?");

/***/ }),

/***/ "./src/js/mixins/add_secondary_sort.js":
/*!*********************************************!*\
  !*** ./src/js/mixins/add_secondary_sort.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  // add secondary sort with correct asc/desc\n  addSecondarySort: function addSecondarySort(apiQuery) {\n    // ensure we always apply a default sort\n    if (!apiQuery.has('sort')) {\n      apiQuery.set('sort', 'date desc');\n    } // only get before the first column to prevent adding redundant secondary sort\n\n\n    var primarySort = apiQuery.get('sort')[0].split(',')[0];\n    var secondarySort = primarySort.indexOf(' asc') > -1 ? 'bibcode asc' : 'bibcode desc';\n    apiQuery.set('sort', primarySort + ', ' + secondarySort);\n  }\n});\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/add_secondary_sort.js?");

/***/ }),

/***/ "./src/js/mixins/add_stable_index_to_collection.js":
/*!*********************************************************!*\
  !*** ./src/js/mixins/add_stable_index_to_collection.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/**\n * This mixin (only has a single function) will reset the collection if numFound doesn't exist,\n * or else add  to the collection. Make sure the model for the collection has idAttribute : \"resultsIndex\"\n * to allow for the collection to add records properly.\n *\n *\n */\n\nvar WidgetPaginator = {\n  /**\n   * returns zero-indexed start val (we expect the page\n   * to be zero-indexed!)\n   */\n  getPageStart: function getPageStart(page, perPage, numFound) {\n    return numFound ? Math.min(page * perPage, numFound) : page * perPage;\n  },\n\n  /**\n   * returns final row value for constructing a page (inclusive)\n   */\n  getPageEnd: function getPageEnd(page, perPage, numFound) {\n    var endVal = this.getPageStart(page, perPage) + perPage;\n    return endVal > numFound ? numFound : endVal;\n  },\n\n  /**\n   * Returns the page number (on which the position falls)\n   * It is zero-based count\n   *\n   * @param start (zero indexed start value of record, returned by solr)\n   * @param perPage\n   * @returns {number}\n   */\n  getPageVal: function getPageVal(start, perPage) {\n    return Math.floor(start / perPage);\n  },\n\n  /**\n   * Add 'resultsIndex' attribute into the model.\n   *\n   * @param docs\n   * @param start\n   * @returns {*}\n   */\n  addPaginationToDocs: function addPaginationToDocs(docs, start) {\n    var s = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(start) ? start[0] : parseInt(start);\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(docs, function (d) {\n      d.resultsIndex = s; // non zero-indexed\n\n      d.indexToShow = s + 1;\n      s += 1;\n    });\n\n    return docs;\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (WidgetPaginator);\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/add_stable_index_to_collection.js?");

/***/ }),

/***/ "./src/js/mixins/api_access.js":
/*!*************************************!*\
  !*** ./src/js/mixins/api_access.js ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n\n\n\n\n/*\n * this simple mixin contacts the api (getApiAccess), and if the {reconnect: true} option\n * is passed to getApiAccess, will save the relevant data.\n * */\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  /**\n   * After bootstrap receives all data, this routine should decide what to do with\n   * them\n   */\n  onBootstrap: function onBootstrap(data) {\n    var beehive = this.getBeeHive(); // set the API key and other data from bootstrap\n\n    if (data.access_token) {\n      beehive.getService('Api').setVals({\n        access_token: \"\".concat(data.token_type, \" \").concat(data.access_token),\n        refresh_token: data.refresh_token,\n        expires_at: data.expires_at\n      });\n      console.warn('Redefining access_token: ' + data.access_token);\n      var userObject = beehive.getObject('User');\n      var userName = data.anonymous ? undefined : data.username;\n      userObject.setUser(userName);\n      var storage = beehive.getService('PersistentStorage');\n      storage && storage.set && storage.set('appConfig', data);\n    } else {\n      console.warn(\"bootstrap didn't provide access_token!\");\n    }\n  },\n  getApiAccess: function getApiAccess(options) {\n    options = options || {};\n    var api = this.getBeeHive().getService('Api');\n    var self = this;\n    var defer = $.Deferred(); // if token expired, make a _request\n\n    var request = options.tokenRefresh ? '_request' : 'request';\n    api[request](new js_components_api_request__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n      query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"](),\n      target: this.bootstrapUrls ? this.bootstrapUrls[0] : '/accounts/bootstrap'\n    }), {\n      done: function done(data) {\n        window.getSentry(function (sentry) {\n          sentry.setUser({\n            id: data.access_token,\n            anonymous: data.anonymous\n          });\n        });\n\n        if (options.reconnect) {\n          self.onBootstrap(data);\n        }\n\n        defer.resolve(data);\n      },\n      fail: function fail() {\n        defer.reject.apply(defer, arguments);\n      },\n      type: 'GET'\n    });\n    return defer;\n  }\n});\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/api_access.js?");

/***/ }),

/***/ "./src/js/mixins/dependon.js":
/*!***********************************!*\
  !*** ./src/js/mixins/dependon.js ***!
  \***********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_pubsub_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/pubsub_events */ \"./src/js/components/pubsub_events.js\");\n/* harmony import */ var js_components_pubsub_key__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/pubsub_key */ \"./src/js/components/pubsub_key.js\");\n/**\n * Created by rchyla on 3/13/14.\n */\n\n/*\n * This module contains a set of utilities that can be added to classes\n * to give them certain functionality\n */\n\n\n\nvar Mixin = {\n  /*\n   * BeeHive is the object that allows modules to get access to objects\n   * of the application (but we make sure these objects are protected\n   * and only application can set/change them). This mixin gives objects\n   * functions to query 'BeeHive'\n   */\n  BeeHive: {\n    // called by parents (app) to give modules access\n    setBeeHive: function setBeeHive(brundibar) {\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEmpty(brundibar)) throw new Error('Huh? Empty Beehive? Trying to be funny?');\n      this.__beehive = brundibar;\n    },\n    getBeeHive: function getBeeHive() {\n      if (!this.hasBeeHive()) throw new Error('The BeeHive is inactivate (or dead :<})');\n      return this.__beehive;\n    },\n    hasBeeHive: function hasBeeHive() {\n      if (this.__beehive && (this.__beehive.active || this.__beehive.__facade__ && this.__beehive.getActive())) {\n        return true;\n      }\n\n      return false;\n    },\n\n    /**\n     * Method which returns a masked instance of PubSub (unless the PubSub\n     * is already a hardened instance; which carries its own key)\n     *\n     * You can call pubsub.publish() without having to supply the pubsub key\n     * (which is what most controllers want to do; there are only some\n     * exceptions to this rule; ie. query-mediator). If you need to get\n     * access to the full PubSub (and you have it inside BeeHive) then do\n     * this.getBeeHive().getService('PubSub')\n     */\n    getPubSub: function getPubSub() {\n      if (!this.hasBeeHive()) throw new Error('The BeeHive is inactive (or dead >:})');\n      if (!this.__ctx) this.__ctx = {};\n      if (this.__ctx.pubsub) return this.__ctx.pubsub;\n\n      var pubsub = this.__beehive.getService('PubSub');\n\n      if (pubsub && pubsub.__facade__) return pubsub; // build a unique key for this instance\n\n      this.__ctx.pubsub = {\n        _key: pubsub.getPubSubKey(),\n        _exec: function _exec(name, args) {\n          args = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].toArray(args);\n          if (args[0] instanceof js_components_pubsub_key__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) throw Error('You have given us a PubSub key, this.publish() method does not need it.');\n          args.unshift(this._key);\n          pubsub[name].apply(pubsub, args);\n        },\n        publish: function publish() {\n          this._exec('publish', arguments);\n        },\n        subscribe: function subscribe() {\n          this._exec('subscribe', arguments);\n        },\n        subscribeOnce: function subscribeOnce() {\n          this._exec('subscribeOnce', arguments);\n        },\n        unsubscribe: function unsubscribe() {\n          this._exec('unsubscribe', arguments);\n        },\n        getCurrentPubSubKey: function getCurrentPubSubKey() {\n          return this._key;\n        }\n      };\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(this.__ctx.pubsub, js_components_pubsub_events__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n      return this.__ctx.pubsub;\n    },\n    hasPubSub: function hasPubSub() {\n      if (this.hasBeeHive()) return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isObject(this.__beehive.getService('PubSub'));\n      return false;\n    }\n  },\n  App: {\n    setApp: function setApp(app) {\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isUndefined(app)) throw new Error('App object cannot be empty');\n      this.__app = app;\n    },\n    getApp: function getApp() {\n      return this.__app;\n    },\n    hasApp: function hasApp() {\n      return !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEmpty(this.__app);\n    }\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (Mixin);\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/dependon.js?");

/***/ }),

/***/ "./src/js/mixins/discovery_bootstrap.js":
/*!**********************************************!*\
  !*** ./src/js/mixins/discovery_bootstrap.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_pubsub_events__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/pubsub_events */ \"./src/js/components/pubsub_events.js\");\n/* harmony import */ var hbs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! hbs */ \"./src/libs/requirejs-plugins/hbs.js\");\n/* harmony import */ var hbs__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(hbs__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/*\n * This module contains a set of utilities to bootstrap Discovery app\n */\n\n\n\n\n\n\n\n\nvar startGlobalHandler = function startGlobalHandler() {\n  var routes = ['classic-form', 'paper-form', 'index', 'search', 'execute-query', 'abs', 'user', 'orcid-instructions', 'public-libraries'];\n  var regx = new RegExp('^#?(/?(' + routes.join('|') + ').*/?)?$', 'i');\n\n  var isPushState = function isPushState() {\n    return (backbone__WEBPACK_IMPORTED_MODULE_1___default().history) && (backbone__WEBPACK_IMPORTED_MODULE_1___default().history).options && (backbone__WEBPACK_IMPORTED_MODULE_1___default().history).options.pushState;\n  };\n\n  var transformHref = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].memoize(function (href) {\n    return regx.test(href) ? href.replace(/^\\/?#\\/?/, '/') : false;\n  });\n\n  var navigate = function navigate(ev) {\n    if (window.bbb) {\n      try {\n        var nav = bbb.getBeeHive().getService('Navigator');\n        nav.router.navigate(ev.data.url, {\n          trigger: true,\n          replace: false\n        });\n        return false;\n      } catch (e) {\n        console.error(e.message);\n      }\n    } else {\n      console.error('cannot find application object');\n    }\n  };\n\n  var metaKey = false;\n\n  var handleNavigation = function handleNavigation(event) {\n    if (!isPushState()) return;\n    var $el = $(this); // elements can set `data-dont-handle=\"true\"` to explicitly tell handler to skip\n\n    if ($el.data().dontHandle) {\n      return;\n    }\n\n    var url = transformHref($el.attr('href'));\n\n    if (url) {\n      var old = $el.attr('href'); // update the href on the element\n\n      $el.attr('href', url); // handle metakey presses\n\n      if (event.metaKey || event.ctrlKey) {\n        metaKey = true;\n        return;\n      }\n\n      if (metaKey && event.type === 'focusin') {\n        metaKey = false;\n        return;\n      }\n\n      metaKey = false; // add the click handler (run once)\n\n      $el.one('click', {\n        url: url\n      }, navigate); // reset to the old url\n\n      $el.one('mouseup blur', function () {\n        $el.attr('href', old);\n      });\n      return false;\n    }\n  };\n\n  $(document).on('mousedown focus', 'a', handleNavigation);\n};\n\nvar Mixin = {\n  configure: function configure() {\n    var conf = this.getObject('DynamicConfig');\n\n    if (conf) {\n      var beehive = this.getBeeHive();\n      var api = beehive.getService('Api');\n\n      if (conf.root) {\n        api.url = conf.root + '/' + api.url;\n        this.root = conf.root;\n      }\n\n      if (conf.debug !== undefined) {\n        beehive.debug = conf.debug;\n        this.getController('QueryMediator').debug = conf.debug;\n      }\n\n      if (conf.apiRoot) {\n        api.url = conf.apiRoot;\n      }\n\n      if (conf.version) {\n        api.clientVersion = conf.version;\n      } // ApiTargets has a _needsCredentials array that contains all endpoints\n      // that require cookies\n\n\n      api.modifyRequestOptions = function (opts, request) {\n        // there is a list of endpoints that DONT require cookies, if this endpoint\n        // is not in that list,\n        if (js_components_api_targets__WEBPACK_IMPORTED_MODULE_6__[\"default\"]._doesntNeedCredentials.indexOf(request.get('target')) == -1) {\n          opts.xhrFields = {\n            withCredentials: true\n          };\n        }\n      };\n\n      var orcidApi = beehive.getService('OrcidApi');\n\n      if (conf.orcidProxy) {\n        orcidApi.orcidProxyUri = location.origin + conf.orcidProxy;\n      }\n\n      this.bootstrapUrls = conf.bootstrapUrls;\n\n      if (conf.useCache) {\n        this.triggerMethodOnAll('activateCache');\n      }\n    }\n  },\n  bootstrap: function bootstrap() {\n    // XXX:rca - solve this better, through config\n    var beehive = this.getBeeHive();\n    var dynConf = this.getObject('DynamicConfig');\n    var timeout = 10000;\n    var defer = $.Deferred(); // check out the local storage to see if we have a copy\n\n    var storage = beehive.getService('PersistentStorage');\n    var config = storage.get('appConfig');\n\n    if (config && config.expires_at && config.expires_at > Math.floor(Date.now() / 1000)) {\n      return defer.resolve(config).promise();\n    } // this is the application dynamic config\n\n\n    var api = this.getBeeHive().getService('Api'); // load configuration from remote endpoints\n\n    if (this.bootstrapUrls) {\n      var pendingReqs = this.bootstrapUrls.length;\n      var retVal = {}; // harvest information from the remote urls and merge it into one object\n\n      var opts = {\n        done: function done(data) {\n          pendingReqs--;\n\n          underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(retVal, data);\n\n          if (pendingReqs <= 0) defer.resolve(retVal);\n        },\n        fail: function fail() {\n          pendingReqs--;\n          if (pendingReqs <= 0) defer.resolve(retVal);\n        },\n        type: 'GET',\n        timeout: timeout - 1\n      };\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(this.bootstrapUrls, function (url) {\n        if (url.indexOf('http') > -1) {\n          opts.u = url;\n          api.request(new js_components_api_request__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n            query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"](),\n            target: ''\n          }), opts);\n        } else {\n          delete opts.u;\n          api.request(new js_components_api_request__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n            query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"](),\n            target: url\n          }), opts);\n        }\n      });\n\n      setTimeout(function () {\n        if (defer.state() === 'resolved') {\n          return;\n        }\n\n        defer.reject(new Error('Timed out while loading modules'));\n      }, timeout);\n    } else {\n      setTimeout(function () {\n        defer.resolve({});\n      }, 1);\n    }\n\n    return defer;\n  },\n\n  /**\n   * Reload the application - by simply changing the URL (append bbbRedirect=1)\n   * If the url already contains 'bbbRedirect', redirect to the error page.\n   * @param errorPage\n   */\n  reload: function reload(endPage) {\n    if (location.search.indexOf('debug') > -1) {\n      console.warn('Debug stop, normally would reload to: ' + endPage);\n      return; // do nothing\n    }\n\n    if (location.search && location.search.indexOf('bbbRedirect=1') > -1) {\n      return this.redirect(endPage);\n    }\n\n    location.search = location.search ? location.search + '&bbbRedirect=1' : 'bbbRedirect=1';\n  },\n  redirect: function redirect(endPage) {\n    if (this.router) {\n      location.pathname = this.router.root + endPage;\n    } // let's replace the last element from pathname - this code will run only when\n    // router is not yet available; therefore it should hit situations when the app\n    // was not loaded (but it is not bulletproof - the urls can vary greatly)\n    // TODO: intelligently explore the rigth url (by sending HEAD requests)\n\n\n    location.href = location.protocol + '//' + location.hostname + ':' + location.port + location.pathname.substring(0, location.pathname.lastIndexOf('/')) + '/' + endPage;\n  },\n  start: function start(Router) {\n    var defer = $.Deferred();\n    var app = this;\n    var beehive = this.getBeeHive();\n    var api = beehive.getService('Api');\n    var conf = this.getObject('DynamicConfig'); // set the config into the appstorage\n    // TODO: find a more elegant solution\n\n    this.getBeeHive().getObject('AppStorage').setConfig(conf);\n\n    var complain = function complain(x) {\n      throw new Error('Ooops. Check you config! There is no ' + x + ' component @#!');\n    };\n\n    var navigator = app.getBeeHive().Services.get('Navigator');\n    if (!navigator) complain('services.Navigator');\n    var masterPageManager = app.getObject('MasterPageManager');\n    if (!masterPageManager) complain('objects.MasterPageManager'); // get together all pages and insert widgets there\n\n    masterPageManager.assemble(app).done(function () {\n      // attach the master page to the body\n      var $main = $('div#body-template-container');\n\n      if (window.__PRERENDERED) {\n        var $content = $('div#content-container');\n        $($content.selector, masterPageManager.view.el).html($content.html());\n        $main.html(masterPageManager.view.el);\n      } else {\n        $main.html(masterPageManager.view.el);\n      } // kick off routing\n\n\n      app.router = new Router();\n      app.router.activate(beehive.getHardenedInstance()); // get ready to handle navigation signals\n\n      navigator.start(app);\n      navigator.router = app.router; // this feels hackish\n\n      var noPushState = location.search.indexOf('pushstate=false') > -1; // Trigger the initial route and enable HTML5 History API support\n\n      var newConf = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].defaults({\n        pushState: noPushState ? false : undefined\n      }, conf && conf.routerConf);\n\n      backbone__WEBPACK_IMPORTED_MODULE_1___default().history.start(newConf); // apply a global link handler for push state (after router is started)\n\n      startGlobalHandler();\n      defer.resolve();\n    });\n    return defer.promise();\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (Mixin);\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/discovery_bootstrap.js?");

/***/ }),

/***/ "./src/js/mixins/expose_metadata.js":
/*!******************************************!*\
  !*** ./src/js/mixins/expose_metadata.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n\n\n\n\nvar NAME = '__EXPORT_RESULTS_AS_BIBTEX__';\nvar mixin = {\n  /**\n   *\n   * Gets an array of documents and exposes a function on\n   * the global object which, when called, will make a request\n   * to `/export` to retrieve a bibtex string.\n   *\n   * This global method can't be called\n   * more than once per cycle.\n   *\n   * @param {object[]} docs - array of documents\n   */\n  __exposeMetadata: function __exposeMetadata() {\n    var _this = this;\n\n    var docs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    window[NAME] = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].once(function () {\n      return new Promise(function (resolve, reject) {\n        var ids = docs.map(function (d) {\n          return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(d.identifier) ? d.identifier[0] : d.identifier;\n        });\n\n        var ps = _this.getPubSub();\n\n        var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n          target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_1__[\"default\"].EXPORT + 'bibtex',\n          query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n            bibcode: ids\n          }),\n          options: {\n            type: 'POST',\n            done: function done(_ref) {\n              var bibtexString = _ref.export;\n              resolve({\n                identifiers: ids,\n                bibtexString: bibtexString\n              });\n            },\n            fail: function fail(ev) {\n              return reject(ev);\n            }\n          }\n        });\n        ps.publish(ps.EXECUTE_REQUEST, request);\n      });\n    });\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (mixin);\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/expose_metadata.js?");

/***/ }),

/***/ "./src/js/mixins/form_view_functions.js":
/*!**********************************************!*\
  !*** ./src/js/mixins/form_view_functions.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n // some functions to be used by form views which auto-validate\n\nvar formFunctions = {\n  // for the view\n  checkValidationState: function checkValidationState() {\n    // hide help\n    if (this.model.isValidSafe()) {\n      this.$('button[type=submit]').prev('.help-block').html('').addClass('no-show');\n    }\n  },\n  // for the view\n  // when someone clicks on submit button\n  // parent views/controllers need to listen for \"submit-form\" event\n  triggerSubmit: function triggerSubmit(e) {\n    // (only show error messages if submit == true), so once user has unsuccessfully\n    // submitted 1 time\n    // don't need to reset because view will be disposed of after successful submit event\n    this.submit = true;\n\n    if (this.model.isValid(true)) {\n      var working = '<i class=\"fa fa-lg fa-spinner fa-pulse\" aria-hidden=\"true\"></i> Working...';\n      this.trigger('submit-form', this.model);\n      this.$('button[type=submit]').prev('.help-block').addClass('no-show');\n      this.$('button[type=submit]').removeClass('btn-success').addClass('disabled').html(working);\n    } else {\n      this.$('button[type=submit]').prev('.help-block').removeClass('no-show').html('Fields missing or incomplete');\n    }\n\n    return false;\n  },\n  // for the view, to be called onRender\n  activateValidation: function activateValidation() {\n    Backbone.Validation.bind(this, {\n      forceUpdate: true\n    });\n    this.stickit();\n  },\n  // for the model\n  // a way to validate all fields without causing invalid states for empty fields\n  isValidSafe: function isValidSafe() {\n    // check everything that has required=true before you do this.isValid(), and make sure it isn't empty\n    // otherwise the way it is set up, the form will show invalid markers for unentered fields\n    var allRequired = true;\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(this.validation, function (v, k) {\n      if (v.required && !this.get(k)) {\n        allRequired = false;\n      }\n    }, this);\n\n    if (allRequired && this.isValid(true)) {\n      return true;\n    }\n  },\n  // for the model, if it has a validation hash from backbone-validation\n  // right now, useful only for user setting models that combine user-entered info and info from the server\n  reset: function reset() {\n    var valKeys = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(this.validation);\n\n    var skipReset = Array.isArray(this.skipReset) ? this.skipReset : [];\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(this.attributes, function (_v, k) {\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contains(valKeys, k) && !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contains(skipReset, k)) {\n        this.unset(k, {\n          silent: true\n        });\n      }\n    }, this);\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (formFunctions);\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/form_view_functions.js?");

/***/ }),

/***/ "./src/js/mixins/formatter.js":
/*!************************************!*\
  !*** ./src/js/mixins/formatter.js ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar f = {};\n/*\n * takes a number or string, returns a string\n * */\n\nf.formatNum = function (num) {\n  var withCommas = [];\n  num += '';\n  var parts = num.split('.');\n  var extra = '';\n\n  if (parts.length === 2) {\n    num = parts[0];\n    extra = '.' + parts[1];\n  }\n\n  if (num.length < 4) {\n    return num + extra;\n  }\n\n  num = num.split('').reverse();\n\n  _.each(num, function (n, i) {\n    withCommas.unshift(n);\n\n    if ((i + 1) % 3 === 0 && i !== num.length - 1) {\n      withCommas.unshift(',');\n    }\n  });\n\n  return withCommas.join('') + extra;\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (f);\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/formatter.js?");

/***/ }),

/***/ "./src/js/mixins/hardened.js":
/*!***********************************!*\
  !*** ./src/js/mixins/hardened.js ***!
  \***********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_facade__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/facade */ \"./src/js/components/facade.js\");\n/* harmony import */ var js_components_facade__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(js_components_facade__WEBPACK_IMPORTED_MODULE_1__);\n/**\n * Created by rchyla on 3/18/14.\n */\n\n\nvar Mixin = {\n  /*\n   * Creates a hardened instance of itself, it uses\n   * interface description from 'hardenedInterface'\n   * Implementations need to populate 'hardenedInterface'\n   * with list of properties and methods that should be exposed\n   * through the Facade\n   */\n  _getHardenedInstance: function _getHardenedInstance(iface, objectIn) {\n    if (!('hardenedInterface' in this) && !iface) {\n      throw Error('Error: this.hardenedInterface is not defined');\n    }\n\n    return new (js_components_facade__WEBPACK_IMPORTED_MODULE_1___default())(iface || ('hardenedInterface' in this ? this.hardenedInterface : {}), objectIn);\n  },\n  getHardenedInstance: function getHardenedInstance(iface) {\n    return this._getHardenedInstance(iface, this);\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (Mixin);\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/hardened.js?");

/***/ }),

/***/ "./src/js/mixins/link_generator_mixin.js":
/*!***********************************************!*\
  !*** ./src/js/mixins/link_generator_mixin.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_mixins_openurl_generator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/mixins/openurl_generator */ \"./src/js/mixins/openurl_generator.js\");\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n\n\nvar GATEWAY_BASE_URL = '/link_gateway/';\nvar DEFAULT_ORDERING = ['ADS_PDF', 'ADS_SCAN', 'INSTITUTION', 'PUB_PDF', 'PUB_HTML', 'EPRINT_PDF', 'EPRINT_HTML', 'AUTHOR_PDF', 'AUTHOR_HTML'];\n\nvar sortByDefaultOrdering = function sortByDefaultOrdering(sources) {\n  // initially sort the whole list by the DEFAULT_ORDERING array\n  var sortedSources = sources.sort(function (a, b) {\n    var aIndex = DEFAULT_ORDERING.indexOf(a.rawType);\n    var bIndex = DEFAULT_ORDERING.indexOf(b.rawType); // If both elements are in the DEFAULT_ORDERING array, sort based on their indices\n\n    if (aIndex !== -1 && bIndex !== -1) {\n      return aIndex - bIndex;\n    } // If only 'a' is in DEFAULT_ORDERING, move it before 'b'\n\n\n    if (aIndex !== -1) {\n      return -1;\n    } // If only 'b' is in DEFAULT_ORDERING, move it before 'a'\n\n\n    if (bIndex !== -1) {\n      return 1;\n    } // If both elements are not in DEFAULT_ORDERING, maintain their relative order\n\n\n    return 0;\n  }); // then make sure that sources in DEFAULT_ORDERING are pushed to the top\n\n  return [].concat(_toConsumableArray(sortedSources.filter(function (source) {\n    return DEFAULT_ORDERING.includes(source.rawType);\n  })), _toConsumableArray(sortedSources.filter(function (source) {\n    return !DEFAULT_ORDERING.includes(source.rawType);\n  })));\n};\n/**\n * @typedef {Object} LinkType\n * @property {string} name - Full name\n * @property {string} shortName - shorter name for display\n * @property {string} description - longer description\n * @property {('PDF' | 'SCAN' | 'HTML')} type - Resource type\n */\n\n/**\n * set of link types and descriptions\n * @type {Object.<string, LinkType>}\n */\n\n\nvar LINK_TYPES = {\n  '4TU.ResearchData': {\n    shortName: '4TU.ResearchData',\n    description: 'International data repository for science, engineering and design'\n  },\n  AcA: {\n    shortName: 'AcA',\n    description: 'Acta Astronomica Data Files'\n  },\n  ADS_PDF: {\n    name: 'ADS PDF',\n    shortName: 'ADS',\n    description: 'ADS PDF',\n    type: 'PDF'\n  },\n  ADS_SCAN: {\n    name: 'ADS Scanned Article',\n    description: 'ADS scanned article',\n    shortName: 'ADS',\n    type: 'SCAN'\n  },\n  AHED: {\n    shortName: 'AHED',\n    description: 'Astrobiology Habitable Environments Database'\n  },\n  ALMA: {\n    shortName: 'ALMA',\n    description: 'Atacama Large Millimeter/submillimeter Array'\n  },\n  ArcticData: {\n    shortName: 'ArcticData',\n    description: 'Arctic Data Center'\n  },\n  ARI: {\n    shortName: 'ARI',\n    description: 'Astronomisches Rechen-Institut'\n  },\n  ARTEMIS: {\n    shortName: 'ARTEMIS',\n    description: 'Acceleration Reconnection Turbulence & Electrodynamics of Moon Interaction with the Sun'\n  },\n  AstroGeo: {\n    shortName: 'AstroGeo',\n    description: 'USGS Astrogeology Science Center'\n  },\n  Astroverse: {\n    shortName: 'Astroverse',\n    description: 'CfA Dataverse'\n  },\n  ASU: {\n    shortName: 'ASU',\n    description: 'Arizona State University'\n  },\n  ATNF: {\n    shortName: 'ATNF',\n    description: 'Australia Telescope Online Archive'\n  },\n  Author: {\n    shortName: 'Author',\n    description: 'Author Hosted Dataset'\n  },\n  AUTHOR_HTML: {\n    name: 'Author Article',\n    shortName: 'Author',\n    description: 'Link to HTML page provided by author',\n    type: 'HTML'\n  },\n  AUTHOR_PDF: {\n    name: 'Author PDF',\n    shortName: 'Author',\n    description: 'Link to PDF page provided by author',\n    type: 'PDF'\n  },\n  BAS: {\n    shortName: 'BAS',\n    description: 'British Antarctic Survey'\n  },\n  BAVJ: {\n    shortName: 'BAVJ',\n    description: 'Data of the German Association for Variable Stars'\n  },\n  BICEP2: {\n    shortName: 'BICEP2',\n    description: 'BICEP/Keck Data'\n  },\n  CADC: {\n    shortName: 'CADC',\n    description: 'Canadian Astronomy Data Center'\n  },\n  Caltech: {\n    shortName: 'Caltech',\n    description: 'California Institute of Technology'\n  },\n  CDS: {\n    shortName: 'CDS',\n    description: 'Strasbourg Astronomical Data Center'\n  },\n  Chandra: {\n    shortName: 'Chandra',\n    description: 'Chandra X-Ray Observatory'\n  },\n  ClimateDataStore: {\n    shortName: 'ClimateDataStore',\n    description: 'Climate Data Store'\n  },\n  CMDN: {\n    shortName: 'CMDN',\n    description: 'China Meteorological Data Service Centre'\n  },\n  CXO: {\n    shortName: 'CXO',\n    description: 'Chandra Data Archive'\n  },\n  DARTS: {\n    shortName: 'DARTS',\n    description: 'Data ARchives and Transmission System'\n  },\n  Dataverse: {\n    shortName: 'Dataverse',\n    description: 'Dataverse Project'\n  },\n  Dryad: {\n    shortName: 'Dryad',\n    description: 'International Repository of Research Data'\n  },\n  EARTHCHEM: {\n    shortName: 'EARTHCHEM',\n    description: 'Open-access repository for geochemical datasets'\n  },\n  ECMWF: {\n    shortName: 'ECMWF',\n    description: 'European Centre for Medium-Range Weather Forecasts'\n  },\n  EMFISIS: {\n    shortName: 'EMFISIS',\n    description: 'An instrument suite on the Van Allen Probes'\n  },\n  EPRINT_HTML: {\n    name: 'Preprint Article',\n    shortName: 'Preprint',\n    description: 'Preprint article',\n    type: 'HTML'\n  },\n  EPRINT_PDF: {\n    name: 'Preprint PDF',\n    shortName: 'Preprint',\n    description: 'Preprint PDF',\n    type: 'PDF'\n  },\n  ERGSC: {\n    shortName: 'ERGSC',\n    description: 'ERG Science Center'\n  },\n  ESA: {\n    shortName: 'ESA',\n    description: 'ESAC Science Data Center'\n  },\n  ESGF: {\n    shortName: 'ESGF',\n    description: 'Earth System Grid Federation'\n  },\n  ESO: {\n    shortName: 'ESO',\n    description: 'European Southern Observatory'\n  },\n  ETHZ: {\n    shortName: 'ETHZ',\n    description: 'ETH Zurich Research Collection'\n  },\n  FDSN: {\n    shortName: 'FDSN',\n    description: 'International Federation of Digital Seismograph Networks'\n  },\n  Figshare: {\n    shortName: 'Figshare',\n    description: 'Online Open Access Repository'\n  },\n  figshare: {\n    shortName: 'figshare',\n    description: 'Online Open Access Repository'\n  },\n  GCPD: {\n    shortName: 'GCPD',\n    description: 'The General Catalogue of Photometric Data'\n  },\n  Gemini: {\n    shortName: 'Gemini',\n    description: 'Gemini Observatory Archive'\n  },\n  Github: {\n    shortName: 'Github',\n    description: 'Web-based version-control and collaboration platform for software developers.'\n  },\n  GRAS: {\n    shortName: 'GRAS',\n    description: 'Lunar and Planet Exploration Program Ground Application System'\n  },\n  GTC: {\n    shortName: 'GTC',\n    description: 'Gran Telescopio CANARIAS Public Archive'\n  },\n  HEASARC: {\n    shortName: 'HEASARC',\n    description: 'NASA High Energy Astrophysics Science Archive Research Center'\n  },\n  Herschel: {\n    shortName: 'Herschel',\n    description: 'Herschel Science Center'\n  },\n  IBVS: {\n    shortName: 'IBVS',\n    description: 'Information Bulletin on Variable Stars'\n  },\n  INES: {\n    shortName: 'INES',\n    description: 'IUE Newly Extracted Spectra'\n  },\n  IRIS: {\n    shortName: 'IRIS',\n    description: 'Incorporated Research Institutions for Seismology'\n  },\n  IRSA: {\n    shortName: 'IRSA',\n    description: 'NASA/IPAC Infrared Science Archive'\n  },\n  ISO: {\n    shortName: 'ISO',\n    description: 'Infrared Space Observatory'\n  },\n  JOSS: {\n    shortName: 'JOSS',\n    description: 'Journal of Open Source Software'\n  },\n  JWST: {\n    shortName: 'JWST',\n    description: 'JWST Proposal Info'\n  },\n  KOA: {\n    shortName: 'KOA',\n    description: 'Keck Observatory Archive'\n  },\n  LAADS: {\n    shortName: 'LAADS',\n    description: 'Level-1 and Atmosphere Archive & Distribution System Distributed Active Archive Center'\n  },\n  label: {\n    shortName: 'label',\n    description: 'name'\n  },\n  LASP: {\n    shortName: 'LASP',\n    description: 'Laboratory for Atmospheric and Space Physics'\n  },\n  LPL: {\n    shortName: 'LPL',\n    description: 'Lunar and Planetary Laboratory'\n  },\n  MAST: {\n    shortName: 'MAST',\n    description: 'Mikulski Archive for Space Telescopes'\n  },\n  MetOffice: {\n    shortName: 'MetOffice',\n    description: 'Met Office'\n  },\n  MIT: {\n    shortName: 'MIT',\n    description: 'Massachusetts Institute of Technology'\n  },\n  NASA: {\n    shortName: 'NASA',\n    description: 'NASA Data Portal'\n  },\n  NCAR: {\n    shortName: 'NCAR',\n    description: 'National Center for Atmospheric Research'\n  },\n  NED: {\n    shortName: 'NED',\n    description: 'NASA/IPAC Extragalactic Database'\n  },\n  NExScI: {\n    shortName: 'NExScI',\n    description: 'NASA Exoplanet Archive'\n  },\n  NOAA: {\n    shortName: 'NOAA',\n    description: 'National Oceanic and Atmospheric Administration'\n  },\n  NOAO: {\n    shortName: 'NOAO',\n    description: 'National Optical Astronomy Observatory'\n  },\n  OSF: {\n    shortName: 'OSF',\n    description: 'Open Science Foundation'\n  },\n  PANGAEA: {\n    shortName: 'PANGAEA',\n    description: 'Digital Data Library and a Data Publisher for Earth System Science'\n  },\n  pangaea: {\n    shortName: 'pangaea',\n    description: 'Digital Data Library and a Data Publisher for Earth System Science'\n  },\n  PASA: {\n    shortName: 'PASA',\n    description: 'Publication of the Astronomical Society of Australia Datasets'\n  },\n  PDG: {\n    shortName: 'PDG',\n    description: 'Particle Data Group'\n  },\n  PDS: {\n    shortName: 'PDS',\n    description: 'The NASA Planetary Data System'\n  },\n  PDSS: {\n    shortName: 'PDSS',\n    description: 'The NASA Planetary Data System'\n  },\n  PIK: {\n    shortName: 'PIK',\n    description: 'Potsdam Institute for Climate Impact Research'\n  },\n  protocols: {\n    shortName: 'protocols',\n    description: 'Collaborative Platform and Preprint Server for Science Methods and Protocols'\n  },\n  PUB_HTML: {\n    name: 'Publisher Article',\n    shortName: 'Publisher',\n    description: 'Electronic on-line publisher article (HTML)',\n    type: 'HTML'\n  },\n  PUB_PDF: {\n    name: 'Publisher PDF',\n    shortName: 'Publisher',\n    description: 'Publisher PDF',\n    type: 'PDF'\n  },\n  ScienceBase: {\n    shortName: 'ScienceBase',\n    description: 'ScienceBase'\n  },\n  SIMBAD: {\n    shortName: 'SIMBAD',\n    description: 'SIMBAD Database at the CDS'\n  },\n  Spitzer: {\n    shortName: 'Spitzer',\n    description: 'Spitzer Space Telescope'\n  },\n  TDR: {\n    shortName: 'TDR',\n    description: 'Texas Data Respository'\n  },\n  THEMIS: {\n    shortName: 'THEMIS',\n    description: 'Time History of Events and Macroscopic Interactions During Substorms'\n  },\n  TNS: {\n    shortName: 'TNS',\n    description: 'Transient Name Server'\n  },\n  UNAVCO: {\n    shortName: 'UNAVCO',\n    description: 'UNAVCO'\n  },\n  Vizier: {\n    shortName: 'VizieR',\n    description: 'VizieR Catalog Service'\n  },\n  XMM: {\n    shortName: 'XMM',\n    description: 'XMM Newton Science Archive'\n  },\n  Zenodo: {\n    shortName: 'Zenodo',\n    description: 'Zenodo Archive'\n  }\n};\n\nvar enc = function enc(str) {\n  return encodeURIComponent(str);\n};\n/**\n * Create the resolver url\n * @param {string} bibcode - the bibcode\n * @param {string} target - the source target (i.e. PUB_HTML)\n * @returns {string} - the new url\n */\n\n\nvar _createGatewayUrl = function _createGatewayUrl(bibcode, target) {\n  if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(bibcode) && underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(target)) {\n    return GATEWAY_BASE_URL + enc(bibcode) + '/' + target;\n  }\n\n  return '';\n};\n/**\n * process the link data\n *\n * Proceeds in this manner:\n * 1. Check the property to find ESOURCE and DATA\n * 2. If there, find the property on the parent object\n * 3. Process by some rules\n *  3.1. If OPENACCESS property is present, then all esourses ending with _HTML are open\n *  3.2. If <field>_OPENACCESS property is present, then the corresponding esource field is open\n *  3.3. If electr field is present, check if a linkServer is provided among some other things\n *\n * @param {object} data - the data object to process\n * @returns {object} - the fulltext and data sources\n */\n\n\nvar _processLinkData = function _processLinkData(data) {\n  var createGatewayUrl = this._createGatewayUrl;\n  var fullTextSources = [];\n  var dataProducts = [];\n  var countOpenUrls = 0;\n  var property = data.property; // check the esources property\n\n  underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(data.esources, function (el) {\n    var parts = el.split('_');\n    var linkInfo = LINK_TYPES[el];\n    var linkServer = data.link_server;\n    var identifier = data.doi || data.issn || data.isbn; // Create an OpenURL\n    // Only create an openURL if the following is true:\n    //   - The article HAS an Identifier (doi, issn, isbn)\n    //   - The user is authenticated\n    //   - the user HAS a library link server\n\n    if (identifier && linkServer && countOpenUrls < 1) {\n      fullTextSources.push({\n        url: (0,js_mixins_openurl_generator__WEBPACK_IMPORTED_MODULE_1__.getOpenUrl)({\n          metadata: data,\n          linkServer: linkServer\n        }),\n        openUrl: true,\n        type: 'INSTITUTION',\n        shortName: 'My Institution',\n        name: 'My Institution',\n        description: 'Find Article At My Institution',\n        rawType: 'INSTITUTION'\n      });\n      countOpenUrls += 1;\n    }\n\n    if (parts.length > 1) {\n      // if the entry is a publisher link, we need to do an extra step\n      if (parts[0] === 'PUB') {\n        fullTextSources.push({\n          url: createGatewayUrl(data.bibcode, el),\n          open: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contains(property, parts[0] + '_OPENACCESS'),\n          // if the publisher field is present, use it as the shortName & name\n          shortName: data.publisher || linkInfo && linkInfo.shortName || el,\n          name: data.publisher || linkInfo && linkInfo.name || el,\n          type: linkInfo && linkInfo.type || 'HTML',\n          description: linkInfo && linkInfo.description,\n          rawType: el\n        });\n      } else {\n        fullTextSources.push({\n          url: createGatewayUrl(data.bibcode, el),\n          open: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contains(property, parts[0] + '_OPENACCESS'),\n          shortName: linkInfo && linkInfo.shortName || el,\n          name: linkInfo && linkInfo.name || el,\n          type: linkInfo && linkInfo.type || 'HTML',\n          description: linkInfo && linkInfo.description,\n          rawType: el\n        });\n      } // if entry cannot be split, then it will not be open access\n\n    } else {\n      fullTextSources.push({\n        url: createGatewayUrl(data.bibcode, el),\n        open: false,\n        shortName: linkInfo && linkInfo.shortName || el,\n        name: linkInfo && linkInfo.name || el,\n        type: linkInfo && linkInfo.type || 'HTML',\n        description: linkInfo && linkInfo.description,\n        rawType: el\n      });\n    }\n  }); // if no preprint link is present, check links_data as well to make sure\n\n\n  var hasEprint = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find(fullTextSources, {\n    name: LINK_TYPES.EPRINT_PDF.name\n  });\n\n  if (!hasEprint && underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(data.links_data)) {\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(data.links_data, function (linkData) {\n      var link = JSON.parse(linkData);\n\n      if (/preprint/i.test(link.type)) {\n        var info = LINK_TYPES.EPRINT_PDF;\n        fullTextSources.push({\n          url: link.url,\n          open: true,\n          shortName: info && info.shortName || link.type,\n          name: info && info.name || link.type,\n          type: info && info.type || 'HTML',\n          description: info && info.description,\n          rawType: 'EPRINT_PDF'\n        });\n      }\n    });\n  } // check the data property\n\n\n  underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(data.data, function (product) {\n    var parts = product.split(':');\n    var linkInfo = LINK_TYPES[parts[0]]; // are there any without a count? just make them 1\n\n    if (parts.length > 1) {\n      dataProducts.push({\n        url: createGatewayUrl(data.bibcode, parts[0]),\n        count: parts[1],\n        name: linkInfo ? linkInfo.shortName : parts[0],\n        description: linkInfo ? linkInfo.description : parts[0]\n      });\n    } else {\n      dataProducts.push({\n        url: createGatewayUrl(data.bibcode, product),\n        count: '1',\n        name: linkInfo ? linkInfo.shortName : product,\n        description: linkInfo ? linkInfo.description : product\n      });\n    }\n  }); // sort the data products by descending by count\n\n\n  dataProducts = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sortBy(dataProducts, 'count').reverse();\n  return {\n    fullTextSources: sortByDefaultOrdering(fullTextSources),\n    dataProducts: dataProducts\n  };\n};\n/**\n * Parse a data object to pull out the references/citations and table of contents\n * it will also return a copy of the data object with a links property added\n * @param {object} _data - the data object to parse\n * @returns {object} - copy of the data object with links prop added\n */\n\n\nvar _parseLinksDataForModel = function _parseLinksDataForModel(_data, linksData) {\n  var links = {\n    list: [],\n    data: [],\n    text: []\n  };\n\n  var data = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({}, _data, {\n    links: links\n  }); // map linksData to links object\n\n\n  if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isPlainObject(linksData)) {\n    links = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign(links, {\n      data: links.data.concat(linksData.dataProducts || []),\n      text: links.text.concat(linksData.fullTextSources || [])\n    });\n  }\n\n  if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isPlainObject(data)) {\n    // check for the citations property\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isPlainObject(data['[citations]']) && underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(data.bibcode)) {\n      var citations = data['[citations]']; // push it onto the links if the citation count is higher than 0\n\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isNumber(citations.num_citations) && citations.num_citations > 0) {\n        links.list.push({\n          letter: 'C',\n          name: 'Citations (' + citations.num_citations + ')',\n          url: '#abs/' + enc(data.bibcode) + '/citations'\n        });\n      } // push onto the links if the reference count is higher than 0\n\n\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isNumber(citations.num_references) && citations.num_references > 0) {\n        links.list.push({\n          letter: 'R',\n          name: 'References (' + citations.num_references + ')',\n          url: '#abs/' + enc(data.bibcode) + '/references'\n        });\n      }\n    } // check that we have property and whether table of contents is found\n\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(data.property) && underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(data.bibcode)) {\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contains(data.property, 'TOC')) {\n        links.list.push({\n          letter: 'T',\n          name: 'Table of Contents',\n          url: '#abs/' + enc(data.bibcode) + '/toc'\n        });\n      }\n    }\n  } else {\n    throw new Error('data must be a plain object');\n  }\n\n  return data;\n};\n/**\n * Takes data--a json object from apiResponse--and augments it with a \"links\"\n * object. This is used for item views in the results widget. This is to be called\n * by the processData method of a widget.\n *\n */\n\n\nvar parseLinksData = function parseLinksData(data) {\n  var parseLinksDataForModel = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this._parseLinksDataForModel, this);\n\n  var parseResourcesData = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.parseResourcesData, this);\n\n  if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(data)) {\n    return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(data, function (d) {\n      try {\n        var linkData = parseResourcesData(d);\n        return parseLinksDataForModel(d, linkData);\n      } catch (e) {\n        return d;\n      }\n    });\n  }\n\n  return [];\n};\n/**\n * Check that data is an object and that it has the correct properties\n *\n * @param {object} data - the data to parse\n */\n\n\nvar parseResourcesData = function parseResourcesData(data) {\n  var processLinkData = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this._processLinkData, this); // data must have 'property' and sub-props\n\n\n  if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isPlainObject(data)) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(data.property) && underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(data.bibcode)) {\n      // make sure if property has a esource or data, we find it on data as well\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contains(data.property, 'ESOURCE') && !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].has(data, 'esources')) {\n        throw new Error('if `property` property contains `ESOURCE`, then data must have `esources` field');\n      }\n\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contains(data.property, 'DATA') && !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].has(data, 'data')) {\n        throw new Error('if `property` property contains `DATA`, then data must have `data` field');\n      }\n\n      return processLinkData(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({}, data));\n    }\n\n    throw new Error('data must have `property` and `bibcode`');\n  } else {\n    throw new Error('data must be a plain object');\n  }\n};\n/**\n * Takes in a type and an identifier and will generate a link\n * @param {string} bibcode - the bibcode\n * @param {string} type - the type of identifier\n * @param {string|array} identifier - the identifier to use to build the url\n * @returns {string}\n */\n\n\nvar createUrlByType = function createUrlByType(bibcode, type, identifier) {\n  var id = identifier;\n\n  if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(id)) {\n    id = id[0];\n  }\n\n  if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(bibcode) && underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(type) && underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(id)) {\n    return GATEWAY_BASE_URL + bibcode + '/' + type + ':' + id;\n  }\n\n  return '';\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  LINK_TYPES: LINK_TYPES,\n  parseLinksData: parseLinksData,\n  parseResourcesData: parseResourcesData,\n  createUrlByType: createUrlByType,\n  _createGatewayUrl: _createGatewayUrl,\n  _processLinkData: _processLinkData,\n  _parseLinksDataForModel: _parseLinksDataForModel\n});\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/link_generator_mixin.js?");

/***/ }),

/***/ "./src/js/mixins/openurl_generator.js":
/*!********************************************!*\
  !*** ./src/js/mixins/openurl_generator.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n/**\n * @typedef Metadata\n * @property {string[]} page\n * @property {string[]} doi\n * @property {string} doctype\n * @property {string} bibcode\n * @property {string} author\n * @property {string} issue\n * @property {string} volume\n * @property {string} pub\n * @property {string} year\n * @property {string[]} title\n * @property {string[]} issn\n * @property {string[]} isbn\n */\n\n/**\n * check if value is string\n * @param {any} val value to test\n * @returns {boolean}\n */\n\nvar isString = function isString(val) {\n  return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(val);\n};\n/**\n * Check if value is an array\n * @param {any} val value to test\n * @returns {boolean}\n */\n\n\nvar isArray = function isArray(val) {\n  return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(val);\n};\n/**\n * ADS specific fields\n */\n\n\nvar STATIC_FIELDS = {\n  url_ver: 'Z39.88-2004',\n  rft_val_fmt: 'info:ofi/fmt:kev:mtx:',\n  rfr_id: 'info:sid/ADS',\n  sid: 'ADS'\n};\n/**\n * Generates an OpenUrl using metadata and a linkServer\n * @param {object} options\n * @param {Metadata} options.metadata field data from database\n * @param {string} options.linkServer base url to use for generating link\n * @returns {string} the openUrl url\n */\n\nvar getOpenUrl = function getOpenUrl(options) {\n  var _ref = options || {},\n      metadata = _ref.metadata,\n      _ref$linkServer = _ref.linkServer,\n      linkServer = _ref$linkServer === void 0 ? '' : _ref$linkServer;\n\n  var _ref2 = metadata || {},\n      page = _ref2.page,\n      doi = _ref2.doi,\n      doctype = _ref2.doctype,\n      bibcode = _ref2.bibcode,\n      author = _ref2.author,\n      issue = _ref2.issue,\n      volume = _ref2.volume,\n      pub = _ref2.pub,\n      year = _ref2.year,\n      title = _ref2.title,\n      issn = _ref2.issn,\n      isbn = _ref2.isbn; // parse out degree based on bibcode\n\n\n  var degree = isString(bibcode) && (bibcode.includes('PhDT') ? 'PhD' : bibcode.includes('MsT') ? 'Masters' : false); // genre is \"disseration\" for phd thesis, otherwise use doctype/article\n\n  var genre = isString(doctype) && isString(bibcode) && bibcode.includes('PhDT') ? 'dissertation' : isString(doctype) ? doctype : 'article'; // parse various fields to create a context object\n\n  var parsed = _objectSpread({}, STATIC_FIELDS, {\n    'rft.spage': isArray(page) ? page[0].split('-')[0] : false,\n    id: isArray(doi) ? 'doi:' + doi[0] : false,\n    genre: genre,\n    rft_id: [isArray(doi) ? 'info:doi/' + doi[0] : false, isString(bibcode) ? 'info:bibcode/' + bibcode : false],\n    'rft.degree': degree,\n    'rft.aulast': isString(author) ? author.split(', ')[0] : false,\n    'rft.aufirst': isString(author) ? author.split(', ')[1] : false,\n    'rft.issue': isString(issue) ? issue : false,\n    'rft.volume': isString(volume) ? volume : false,\n    'rft.jtitle': isString(pub) ? pub : false,\n    'rft.date': isString(year) ? year : false,\n    'rft.atitle': isArray(title) ? title[0] : false,\n    'rft.issn': isArray(issn) ? issn[0] : false,\n    'rft.isbn': isArray(isbn) ? isbn[0] : false,\n    'rft.genre': genre,\n    rft_val_fmt: STATIC_FIELDS.rft_val_fmt + (isString(doctype) ? doctype : 'article')\n  }); // add extra fields to context object\n\n\n  var context = _objectSpread({}, parsed, {\n    spage: parsed['rft.spage'],\n    volume: parsed['rft.volume'],\n    title: parsed['rft.jtitle'],\n    atitle: parsed['rft.atitle'],\n    aulast: parsed['rft.aulast'],\n    aufirst: parsed['rft.aufirst'],\n    date: parsed['rft.date'],\n    isbn: parsed['rft.isbn'],\n    issn: parsed['rft.issn']\n  }); // if the linkServer has query string, just append to the end\n\n\n  var openUrl = linkServer.includes('?') ? linkServer + '&' : linkServer + '?'; // generate array of query params from the context object\n\n  var fields = Object.keys(context).filter(function (k) {\n    return context[k];\n  }).map(function (key) {\n    if (context[key]) {\n      if (isArray(context[key])) {\n        return context[key].filter(function (v) {\n          return v;\n        }).map(function (val) {\n          return \"\".concat(key, \"=\").concat(val);\n        }).join('&');\n      }\n\n      return \"\".concat(key, \"=\").concat(context[key]);\n    }\n  });\n  return encodeURI(openUrl + fields.join('&'));\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  getOpenUrl: getOpenUrl\n});\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/openurl_generator.js?");

/***/ }),

/***/ "./src/js/mixins/papers_utils.js":
/*!***************************************!*\
  !*** ./src/js/mixins/papers_utils.js ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _wrapRegExp() { _wrapRegExp = function _wrapRegExp(re, groups) { return new BabelRegExp(re, undefined, groups); }; var _super = RegExp.prototype; var _groups = new WeakMap(); function BabelRegExp(re, flags, groups) { var _this = new RegExp(re, flags); _groups.set(_this, groups || _groups.get(re)); return _setPrototypeOf(_this, BabelRegExp.prototype); } _inherits(BabelRegExp, RegExp); BabelRegExp.prototype.exec = function (str) { var result = _super.exec.call(this, str); if (result) result.groups = buildGroups(result, this); return result; }; BabelRegExp.prototype[Symbol.replace] = function (str, substitution) { if (typeof substitution === \"string\") { var groups = _groups.get(this); return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) { return \"$\" + groups[name]; })); } else if (typeof substitution === \"function\") { var _this = this; return _super[Symbol.replace].call(this, str, function () { var args = arguments; if (_typeof(args[args.length - 1]) !== \"object\") { args = [].slice.call(args); args.push(buildGroups(args, _this)); } return substitution.apply(this, args); }); } else { return _super[Symbol.replace].call(this, str, substitution); } }; function buildGroups(result, re) { var g = _groups.get(re); return Object.keys(g).reduce(function (groups, name) { groups[name] = result[g[name]]; return groups; }, Object.create(null)); } return _wrapRegExp.apply(this, arguments); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  /**\n   * Receives the  ISO8601 date string (actually, browsers will be able to parse\n   * range of date strings, but you should be careful and not count on that!)\n   *\n   * And returns a string in requested format; when the minute is set to 0,\n   * we will that the month was not given (ADS didn't know about it)\n   *\n   * @param dateString\n   *    string in ISO8601 format\n   * @param format\n   *    string, jquery-ui datepicker for options\n   * @param options\n   * @returns {*}\n   */\n  formatDate: function formatDate(dateString) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var _options$format = options.format,\n        format = _options$format === void 0 ? 'YYYY/MM' : _options$format;\n\n    var regex = _wrapRegExp(/^(\\d{4})-(\\d{2}|00)-(\\d{2}|00)$/, {\n      year: 1,\n      month: 2,\n      day: 3\n    });\n\n    var match = dateString.match(regex);\n    if (!match) return null;\n    var _match$groups = match.groups,\n        year = _match$groups.year,\n        month = _match$groups.month,\n        day = _match$groups.day;\n    var monthMissing = month === '00';\n    var dayMissing = day === '00';\n    var y = parseInt(year, 10);\n    var m = monthMissing ? 0 : parseInt(month, 10) - 1;\n    var d = dayMissing ? 1 : parseInt(day, 10);\n    var date = new Date(Date.UTC(y, m, d));\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isNaN(date.getTime())) return y.toString(); // Determine the output based on missing parts\n\n    if (monthMissing && dayMissing) return y.toString();\n    if (monthMissing) return y.toString();\n    if (dayMissing) return \"\".concat(y, \"/\").concat((m + 1).toString().padStart(2, '0')); // Full format (only 'YYYY/MM' supported for now)\n\n    if (format === 'YYYY/MM') {\n      return \"\".concat(y, \"/\").concat((m + 1).toString().padStart(2, '0'));\n    } // Fallback: return ISO date\n\n\n    return date.toISOString().split('T')[0];\n  },\n  shortenAbstract: function shortenAbstract(abs, maxLen) {\n    maxLen = maxLen || 300; // if this function returns undefined,\n    // the template knows to just show the whole abstract\n\n    if (abs.length <= maxLen) return undefined;\n    var i = abs.slice(0, maxLen).lastIndexOf(' ');\n    return abs.slice(0, i + 1) + '...';\n  },\n\n  /**\n   * This method prepares data for consumption by the template on a per-doc basis\n   *\n   * @returns {*}\n   */\n  prepareDocForViewing: function prepareDocForViewing(data) {\n    var shownAuthors;\n    var maxAuthorNames = 3;\n\n    if (data.author && data.author.length > maxAuthorNames) {\n      data.extraAuthors = data.author.length - maxAuthorNames;\n      shownAuthors = data.author.slice(0, maxAuthorNames);\n    } else if (data.author) {\n      shownAuthors = data.author;\n    }\n\n    if (data.author) {\n      var format = function format(d, i, arr) {\n        var l = arr.length - 1;\n\n        if (i === l || l === 0) {\n          return d; // last one, or only one\n        }\n\n        return d + ';';\n      };\n\n      data.authorFormatted = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(shownAuthors, format);\n      data.allAuthorFormatted = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(data.author, format);\n    }\n\n    data.formattedDate = data.formattedDate || (data.pubdate ? this.formatDate(data.pubdate) : undefined);\n    data.shortAbstract = data.abstract ? this.shortenAbstract(data.abstract) : undefined;\n    data.details = data.details || {\n      shortAbstract: data.shortAbstract,\n      pub: data.pub,\n      abstract: data.abstract\n    };\n    data.num_citations = data['[citations]'] ? data['[citations]'].num_citations : undefined;\n    data.identifier = data.bibcode ? data.bibcode : data.identifier; // make sure undefined doesn't become \"undefined\"\n\n    data.encodedIdentifier = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isUndefined(data.identifier) ? data.identifier : encodeURIComponent(data.identifier);\n\n    if (data.pubdate || data.shortAbstract) {\n      data.popover = true;\n    }\n\n    if (this.model) data.orderNum = this.model.get('resultsIndex') + 1;\n    return data;\n  }\n});\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/papers_utils.js?");

/***/ }),

/***/ "./src/js/mixins/side_bar_manager.js":
/*!*******************************************!*\
  !*** ./src/js/mixins/side_bar_manager.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/**\n * manages the state of the side bars\n */\n\n\nvar state = new (backbone__WEBPACK_IMPORTED_MODULE_0___default().Model.extend({\n  defaults: {\n    recent: true,\n    show: true\n  }\n}))();\nvar SideBarManager = {\n  /**\n   * Try to get the current sidebar state from user data\n   * This will be the value coming from user settings\n   */\n  _getUpdateFromUserData: function _getUpdateFromUserData() {\n    try {\n      var ud = this.getBeeHive().getObject('User').getUserData();\n      if (!ud) return false;\n      return !ud.defaultHideSidebars ? false : /show/i.test(ud.defaultHideSidebars);\n    } catch (e) {\n      return false;\n    }\n  },\n\n  /**\n   * Initialize the manager\n   * this will start subscriptions and do an initial check on user data\n   */\n  init: function init() {\n    this.setSidebarState(this._getUpdateFromUserData());\n\n    _.bindAll(this, ['_onFeedback', '_onUserAnnouncement', '_updateSidebarState']);\n\n    var ps = this.getPubSub();\n    if (!ps) return;\n    ps.subscribe(ps.FEEDBACK, this._onFeedback);\n    ps.subscribe(ps.USER_ANNOUNCEMENT, this._onUserAnnouncement);\n    state.on('change:show', this._updateSidebarState);\n  },\n\n  /**\n   * Update the sidebar state, this will trigger/broadcast the change\n   * and update the view to actually spread the middle panel to full screen\n   */\n  _updateSidebarState: _.throttle(function () {\n    var val = this.getSidebarState();\n    var view = this.view;\n\n    if (view && view.showCols) {\n      view.showCols({\n        left: val,\n        right: val\n      });\n    }\n\n    this.broadcast('page-manager-message', 'side-bars-update', val);\n    this.trigger('page-manager-message', 'side-bars-update', val);\n  }, 100),\n\n  /**\n   * On user announcement (user data change) update the sidebar state\n   */\n  _onUserAnnouncement: function _onUserAnnouncement(ev, changed) {\n    // only update if the changed key was defaultHideSidebars\n    if (_.contains(_.keys(changed), 'defaultHideSidebars')) {\n      this.setSidebarState(!changed.defaultHideSidebars ? true : /show/i.test(changed.defaultHideSidebars));\n    }\n  },\n\n  /**\n   * Feedback handler\n   * this will update the state when either of the *_SPACE events are called\n   * @param {ApiFeedback} feedback\n   */\n  _onFeedback: function _onFeedback(feedback) {\n    switch (feedback.code) {\n      case js_components_api_feedback__WEBPACK_IMPORTED_MODULE_1__[\"default\"].CODES.MAKE_SPACE:\n        return this.onMakeSpace();\n\n      case js_components_api_feedback__WEBPACK_IMPORTED_MODULE_1__[\"default\"].CODES.UNMAKE_SPACE:\n        return this.onUnMakeSpace();\n\n      default:\n        return null;\n    }\n  },\n\n  /**\n   * Save the current state and\n   * set the sidebar state to `false`\n   */\n  onMakeSpace: function onMakeSpace() {\n    if (!state.has('recent')) {\n      state.set('recent', this.getSidebarState());\n    }\n\n    this.setSidebarState(false);\n  },\n\n  /**\n   * if the saved state is set, then update the side bar to that value\n   * and unset the saved state.\n   *\n   * only \"unmake space\" if \"make space\" was called previously\n   */\n  onUnMakeSpace: function onUnMakeSpace() {\n    if (state.has('recent')) {\n      this.setSidebarState(state.get('recent'));\n      state.unset('recent');\n    }\n  },\n\n  /**\n   * Toggle the current state\n   */\n  toggleSidebarState: function toggleSidebarState() {\n    this.setSidebarState(!this.getSidebarState());\n  },\n\n  /**\n   * Set the sidebar state to a new value\n   * this will trigger an update even if the value doesn't change\n   * @param {Boolean} value - the new state value\n   */\n  setSidebarState: function setSidebarState(value) {\n    state.set('show', value);\n    state.trigger('change:show');\n  },\n\n  /**\n   * get the current sidebar state\n   * @returns {Boolean} - the current state\n   */\n  getSidebarState: function getSidebarState() {\n    return state.get('show');\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (SideBarManager);\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/side_bar_manager.js?");

/***/ }),

/***/ "./src/js/mixins/user_change_rows.js":
/*!*******************************************!*\
  !*** ./src/js/mixins/user_change_rows.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n\n\n/*\n * use this model as a base for any widget that needs to request\n * varying numbers of records from solr and visualize/export/etc them\n * in some way.\n *\n * Currently used by metrics and visualization widgets (not export for now)\n * they set the relevant solr vals into the model in the\n * processResponse function\n * */\n\nvar mixin = {};\nmixin.Model = Backbone.Model.extend({\n  initialize: function initialize(options) {\n    this.on('change:numFound', this.updateMax);\n    this.on('change:rows', this.updateCurrent);\n\n    if (!options.widgetName) {\n      throw new Error('need to configure with widget name so we can get limit/default info from api_targets._limits');\n    }\n\n    var defaults = {\n      // returned by solr query: rows requested\n      rows: undefined,\n      // returned by solr query: total available\n      numFound: undefined,\n      // the smaller of either rows or numFound\n      current: undefined,\n      // the smaller of either numFound or maxAllowed\n      max: undefined,\n      // records that user has requested\n      userVal: undefined\n    };\n\n    _.extend(defaults, js_components_api_targets__WEBPACK_IMPORTED_MODULE_1__[\"default\"]._limits[options.widgetName]);\n\n    this.defaults = function () {\n      return defaults;\n    };\n\n    this.set(this.defaults());\n  },\n  updateMax: function updateMax() {\n    var m = _.min([this.get('limit'), this.get('numFound')]);\n\n    this.set('max', m);\n  },\n  updateCurrent: function updateCurrent() {\n    this.set('current', _.min([this.get('rows'), this.get('numFound')]));\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (mixin);\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/user_change_rows.js?");

/***/ }),

/***/ "./src/js/mixins/widget_mixin_method.js":
/*!**********************************************!*\
  !*** ./src/js/mixins/widget_mixin_method.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_mixins_widget_utility__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/mixins/widget_utility */ \"./src/js/mixins/widget_utility.js\");\n\n\nvar mixin = function mixin(from, methods) {\n  var to = this.prototype; // we add those methods which exists on `from` but not on `to` to the latter\n\n  _.extend(from, to); //  and we do the same for events\n\n\n  _.extend(from.events, to.events);\n\n  _.each(Array.prototype.slice.call(arguments, 1), function (m) {\n    js_mixins_widget_utility__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extendMethod(to, from, m);\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (mixin);\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/widget_mixin_method.js?");

/***/ }),

/***/ "./src/js/mixins/widget_state_manager.js":
/*!***********************************************!*\
  !*** ./src/js/mixins/widget_state_manager.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n\n\n/**\n * Abstract error pubsub-like manager.  Allows for hooks to be applied that\n * match API feedback codes\n *\n * @constructor\n */\n\nvar ErrorHandlerManager = function ErrorHandlerManager() {\n  this.handlers = {};\n  /**\n   * Attach a new handler to an API feedback code\n   *\n   * @param {Number} code - feedback code\n   * @param {function} cb - callback function\n   */\n\n  this.on = function (code, cb) {\n    this.handlers[code].push(cb);\n  };\n  /**\n   * Remove handler by passing in the callback function\n   *\n   * @param {function} cb - callback function\n   */\n\n\n  this.off = function (cb) {\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(this.handlers, function (v, k) {\n      var idx = v.indexOf(cb);\n\n      if (idx > -1) {\n        v.splice(idx, 1);\n      }\n    });\n  };\n  /**\n   * Fire off the callbacks for a particular code\n   *\n   * @param {Number} code - feedback code\n   * @param {Array} args - arguments to pass to the callback\n   * @param {object} ctx - callback's `this` property\n   */\n\n\n  this.fire = function (code, args, ctx) {\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(this.handlers[code], function (cb) {\n      cb.apply(ctx, args);\n    });\n  };\n\n  underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].reduce(js_components_api_feedback__WEBPACK_IMPORTED_MODULE_1__[\"default\"].CODES, function (res, code) {\n    res[code] = [];\n    return res;\n  }, this.handlers);\n};\n/*\n  Widget state manager mixin\n   This mixin will allow widgets to call lifecycle updates which can then have\n  handlers attached.  The mixin can also serve as a way for page managers to\n  react to widget status updates, since certain widgets should be\n  handled differently depending on their type and importance.\n   The typical way this is used is to call `activateWidget` during the activate\n  call on the widget itself.  Then call the various state updates when the widget\n  is performing actions.\n   The default states are: ready, loading, idle, errored\n   Widgets can attach handlers to the various status updates (i.e. onReady, onLoading, etc.)\n   note: during the activation, the widget's pubsubkey is captured and is used\n  to identify the appropriate feedback.  This way the handlers aren't called for\n  events the widget doesn't care about.\n */\n\n\nvar WidgetStateManagerMixin = {\n  STATES: {\n    LOADING: 'loading',\n    ERRORED: 'errored',\n    IDLE: 'idle',\n    READY: 'ready'\n  },\n\n  /**\n   * Creates a new instance of the handlerManager and subscribes to the\n   * api feedback calls.  It also sets the first state update.\n   */\n  activateWidget: function activateWidget() {\n    this.__widgetHandlerManager = new ErrorHandlerManager();\n    var pubsub = this.getPubSub();\n    pubsub.subscribe(pubsub.FEEDBACK, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.__handleFeedback, this));\n    this.updateState('ready');\n  },\n\n  /**\n   * Upon new feedback from the API, this function will grab the current\n   * pubSubKey Id for this widget and compare it to the one listed on the\n   * feedback object.  If they match, then the handlers are fired off for that\n   * code.\n   *\n   * @param {ApiFeedback} feedback\n   * @param {PubSubKey} pubSubKey\n   * @private\n   */\n  __handleFeedback: function __handleFeedback(feedback, pubSubKey) {\n    var id = this.getPubSub().getCurrentPubSubKey().getId();\n\n    if (id === pubSubKey.getId()) {\n      this.__widgetHandlerManager.fire(feedback.code, arguments, this);\n    }\n  },\n\n  /**\n   * Attaches a new handler onto an API code\n   *\n   * @param {Number} code - feedback code\n   * @param {function} handler - handler function\n   */\n  attachHandler: function attachHandler(code, handler) {\n    try {\n      this.__widgetHandlerManager.on(code, handler);\n    } catch (e) {\n      console.error(e);\n    }\n  },\n\n  /**\n   * Attaches a general handler to all api feedback codes\n   *\n   * Includes the positive error codes and api request failures\n   *\n   * @param {function} handler - handler function\n   */\n  attachGeneralHandler: function attachGeneralHandler(handler) {\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(js_components_api_feedback__WEBPACK_IMPORTED_MODULE_1__[\"default\"].CODES, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function (code) {\n      if (code > 0 || code === js_components_api_feedback__WEBPACK_IMPORTED_MODULE_1__[\"default\"].CODES.API_REQUEST_ERROR) {\n        this.attachHandler(code, handler);\n      }\n    }, this));\n  },\n\n  /**\n   * Detaches a particular handler from all codes\n   *\n   * @param cb\n   */\n  detachHandler: function detachHandler(cb) {\n    this.__widgetHandlerManager.off(cb);\n  },\n\n  /**\n   * Called when the state changes to 'ready'\n   */\n  onReady: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].noop,\n\n  /**\n   * Called when the state changes to 'loading'\n   */\n  onLoading: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].noop,\n\n  /**\n   * Called when the state changes to 'idle'\n   */\n  onIdle: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].noop,\n\n  /**\n   * Called when the state changes to 'errored'\n   */\n  onErrored: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].noop,\n\n  /**\n   * Called on all state changes\n   */\n  onStateChange: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].noop,\n\n  /**\n   * Called by widgets to update their own state.  This will update the current\n   * state and also call any handlers.\n   *\n   * @param {string} state - the state to update to\n   */\n  updateState: function updateState(state) {\n    if (!state || !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(state) || state === this.__state) {\n      // do nothing\n      return;\n    }\n\n    var prev = this.__state;\n    this.__state = state;\n\n    this.__fireStateHandler();\n\n    this.onStateChange.call(this, state, prev);\n  },\n\n  /**\n   * Get the current state value\n   */\n  getState: function getState() {\n    return this.__state;\n  },\n\n  /**\n   * This method looks at the current state and if a matching handler is\n   * provided, it will call it accordingly.\n   *\n   * @private\n   */\n  __fireStateHandler: function __fireStateHandler() {\n    var handlers = {};\n    handlers.ready = this.onReady;\n    handlers.loading = this.onLoading;\n    handlers.idle = this.onIdle;\n    handlers.errored = this.onErrored;\n    handlers[this.__state] && handlers[this.__state].call(this, this);\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (WidgetStateManagerMixin);\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/widget_state_manager.js?");

/***/ }),

/***/ "./src/js/mixins/widget_utility.js":
/*!*****************************************!*\
  !*** ./src/js/mixins/widget_utility.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar Utils = {}; // Helper method to extend an already existing method\n\nUtils.extendMethod = function (to, from, methodName) {\n  // if the method is defined on from ...\n  if (!_.isUndefined(from[methodName])) {\n    var old = to[methodName]; // ... we create a new function on to\n\n    to[methodName] = function () {\n      // wherein we first call the method which exists on `to`\n      var oldReturn = old.apply(this, arguments); // and then call the method on `from`\n\n      from[methodName].apply(this, arguments); // and then return the expected result,\n      // i.e. what the method on `to` returns\n\n      return oldReturn;\n    };\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Utils);\n\n//# sourceURL=webpack://bumblebee/./src/js/mixins/widget_utility.js?");

/***/ }),

/***/ "./src/js/modules/orcid/bio.js":
/*!*************************************!*\
  !*** ./src/js/modules/orcid/bio.js ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jsonpath__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonpath */ \"./src/libs/jsonpath.js\");\n/* harmony import */ var jsonpath__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonpath__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_modules_orcid_work__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/modules/orcid/work */ \"./src/js/modules/orcid/work.js\");\n\n\n\nvar PATHS = {\n  firstName: '$.name[\"given-names\"].value',\n  lastName: '$.name[\"family-name\"].value',\n  orcid: '$.name.path'\n};\n\nvar Bio = function Bio(bio) {\n  this._root = bio || {};\n\n  this.get = function (path) {\n    var val = jsonpath__WEBPACK_IMPORTED_MODULE_1___default().query(this._root, path);\n    return val[0];\n  };\n\n  this.toADSFormat = function () {\n    return {\n      responseHeader: {\n        params: {\n          orcid: this.getOrcid(),\n          firstName: this.getFirstName(),\n          lastName: this.getLastName()\n        }\n      }\n    };\n  }; // generate getters for each path on PATHS\n\n\n  underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].reduce(PATHS, function (obj, p, k) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(k) && k.slice) {\n      var prop = k[0].toUpperCase() + k.slice(1);\n      obj['get' + prop] = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].partial(obj.get, p);\n    }\n\n    return obj;\n  }, this);\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Bio);\n\n//# sourceURL=webpack://bumblebee/./src/js/modules/orcid/bio.js?");

/***/ }),

/***/ "./src/js/modules/orcid/extension.js":
/*!*******************************************!*\
  !*** ./src/js/modules/orcid/extension.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }\n/* harmony export */ });\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_query_updater */ \"./src/js/components/api_query_updater.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var js_modules_orcid_work__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/modules/orcid/work */ \"./src/js/modules/orcid/work.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/**\n * Extension for a controller; it adds a functionality that allows a widget\n * to handle ORCID actions.\n *\n * It is installed as return OrcidExtension(WidgetClass)\n */\n\n\n\n\n\n\n\n\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(WidgetClass) {\n  var queryUpdater = new js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_3__[\"default\"]('OrcidExtension');\n  var processDocs = WidgetClass.prototype.processDocs;\n  var activate = WidgetClass.prototype.activate;\n  var onAllInternalEvents = WidgetClass.prototype.onAllInternalEvents;\n\n  WidgetClass.prototype.activate = function (beehive) {\n    this.setBeeHive(beehive);\n    activate.apply(this, arguments);\n    var pubsub = beehive.hasService('PubSub') && beehive.getService('PubSub');\n    pubsub.subscribe(pubsub.CUSTOM_EVENT, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.onCustomEvent));\n  };\n\n  WidgetClass.prototype.onCustomEvent = function (event, bibcodes) {\n    /**\n     * Find the models for each of the bibcodes\n     * Filter out ones that can't perform the action\n     * Trigger the action on each of the views\n     */\n    var orcidAction = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function (action, bibcodes) {\n      var _this = this;\n\n      var models = [];\n      bibcodes.forEach(function (bibcode) {\n        var model = _this.hiddenCollection.find(function (m) {\n          return m.get('bibcode') === bibcode;\n        });\n\n        if (model) {\n          models.push(model);\n        }\n      }); // go through each model and grab the view for triggering\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(models, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function (m) {\n        // only continue if the model has the action available\n        var actions = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(m.get('orcid').actions, 'action');\n\n        if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contains(actions, action)) {\n          var view = this.view.children.findByModel(m);\n\n          if (view) {\n            view.trigger('OrcidAction', {\n              action: action,\n              view: view,\n              model: m\n            });\n          } else {\n            WidgetClass.prototype.onAllInternalEvents.call(this, 'childview:OrcidAction', null, {\n              action: action,\n              model: m\n            });\n          }\n        }\n      }, this));\n    }, this);\n\n    switch (event) {\n      case 'orcid-bulk-claim':\n        orcidAction('orcid-add', bibcodes);\n        break;\n\n      case 'orcid-bulk-update':\n        orcidAction('orcid-update', bibcodes);\n        break;\n\n      case 'orcid-bulk-delete':\n        orcidAction('orcid-delete', bibcodes);\n        break;\n\n      default:\n    }\n  };\n  /**\n   * Apply messages or other information to the orcid control under\n   * each record.  This will return a set of actions based on the\n   * metadata passed in.\n   *\n   * @example\n   * { isSourcedByADS: true, isCreatedByOthers: false, isCreatedByADS: true }\n   *\n   * //returns:\n   * { actions: { update: {...}, delete: {...}, view: {...} }, provenance: 'ads' }\n   *\n   * @returns {object} - orcid action options\n   */\n\n\n  WidgetClass.prototype._getOrcidInfo = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].memoize(function (recInfo) {\n    var msg = {\n      actions: {},\n      provenance: null\n    };\n\n    if (recInfo.isCreatedByOthers && recInfo.isCreatedByADS) {\n      msg.actions.update = {\n        title: 'update in ORCID',\n        caption: 'Update ADS version with latest data',\n        action: 'orcid-update'\n      };\n      msg.actions.delete = {\n        title: 'delete from ORCID',\n        caption: 'Delete ADS version from ORCID',\n        action: 'orcid-delete'\n      };\n      msg.actions.view = {\n        title: 'view in ORCID',\n        caption: \"Another version exists (we don't have rights to update it)\",\n        action: 'orcid-view'\n      };\n    } else if (recInfo.isCreatedByOthers && !recInfo.isCreatedByADS) {\n      if (recInfo.isKnownToADS) {\n        msg.actions.add = {\n          title: 'add ADS version ORCID',\n          caption: \"ORCID already has a record for this article (we don't have rights to update it).\",\n          action: 'orcid-add'\n        };\n      }\n\n      msg.actions.view = {\n        title: 'view in ORCID',\n        caption: \"Another version exists (we don't have rights to update it)\",\n        action: 'orcid-view'\n      };\n    } else if (!recInfo.isCreatedByOthers && recInfo.isCreatedByADS) {\n      msg.actions.update = {\n        title: 'update in ORCID',\n        caption: 'Update ADS version with latest data',\n        action: 'orcid-update'\n      };\n      msg.actions.delete = {\n        title: 'delete from ORCID',\n        caption: 'Delete ADS version from ORCID',\n        action: 'orcid-delete'\n      };\n    } else {\n      msg.actions.add = {\n        title: 'add to ORCID',\n        caption: 'Add ADS version to ORCID',\n        action: 'orcid-add'\n      };\n    }\n\n    if (recInfo.isCreatedByADS && recInfo.isCreatedByOthers) {\n      msg.provenance = 'ads'; // duplicate, but just to be explicit\n    } else if (recInfo.isCreatedByADS) {\n      msg.provenance = 'ads';\n    } else if (recInfo.isCreatedByOthers) {\n      msg.provenance = 'others';\n    } else {\n      msg.provenance = null;\n    }\n\n    return msg;\n  }, function (ret) {\n    return [ret.isCreatedByADS, ret.isCreatedByOthers, ret.isKnownToADS, ret.provenance];\n  });\n  /**\n   * Set the pending state on a set of docs\n   * @param {array} docs the docs the update\n   * @param {boolean} pending the new pending state\n   */\n\n  WidgetClass.prototype._setDocsToPending = function (docs, pending) {\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(docs, function (d) {\n      var p = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isBoolean(pending) ? pending : true;\n      d.orcid = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({}, d.orcid, {\n        pending: p\n      });\n    });\n  };\n  /**\n   * Takes in a set of documents, should be a result of a search or orcid\n   * record page.  In either case, it will match the models by bibcode and\n   * update their orcid metadata\n   *\n   * @param {object[]} docs - the docs to update\n   * @returns {object[]} - the updated docs\n   */\n\n\n  WidgetClass.prototype.addOrcidInfo = function (docs) {\n    var self = this;\n    var failRetry = false;\n    var getDocInfo = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].noop; // add orcid info to the documents\n\n    var orcidApi = this.getBeeHive().getService('OrcidApi');\n\n    if (!orcidApi || !orcidApi.hasAccess()) {\n      return docs;\n    } // find all pending models, and update them with an error state\n\n\n    var setPendingToError = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debounce(function () {\n      // go through the current models, and if something is pending\n      // make it show an error\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(self.hiddenCollection.models, function (m) {\n        var orcid = m.get('orcid');\n\n        if (orcid.pending) {\n          orcid = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({}, orcid, {\n            pending: false,\n            error: 'Error while applying Orcid Data'\n          });\n          m.set('orcid', orcid);\n        }\n      });\n    }, 100); // find all pending models, and update them to a default state\n\n\n    var setPendingToDefaultActions = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debounce(function () {\n      var defaultActions = self._getOrcidInfo({}); // go through the current models, and if something is pending\n      // make it show an error\n\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(self.hiddenCollection.models, function (m) {\n        if (m.get('orcid') && m.get('orcid').pending) {\n          m.set('orcid', defaultActions);\n        }\n      });\n    }, 100); // attempt to find the model to update and update it's orcid actions\n\n\n    var onSuccess = function onSuccess(documents, count) {\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rest(arguments), function (info, i) {\n        // since the order is maintain from the promises we can grab by index\n        var work = documents[i]; // get the new set of actions\n\n        var actions = self._getOrcidInfo(info); // if the record was created by ADS, we can update it now\n\n\n        if (info.sourcedByADS && underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isUndefined(work.source_name)) {\n          work.source_name = 'NASA Astrophysics Data System';\n        }\n\n        work.orcid = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({}, work.orcid, actions, {\n          pending: false\n        }); // make sure the doc has any information we gained\n\n        if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isUndefined(work.identifier)) {\n          work.identifier = work._work.getIdentifier();\n        }\n\n        var model = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find(self.hiddenCollection.models, function (m) {\n          // do our best to find the match\n          return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isPlainObject(work._work) && work._work === m.get('_work') || !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isUndefined(work.identifier) && work.identifier === m.get('identifier');\n        }); // found the model, update it\n\n\n        if (model) {\n          var sources; // grab the array of sources, if it exists\n\n          if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isPlainObject(work._work)) {\n            sources = work._work.getSources();\n          }\n\n          if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isUndefined(model.get('identifier')) && self.orcidWidget) {\n            model.set('identifier', work.identifier);\n          }\n\n          model.set({\n            orcid: actions,\n            source_name: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(sources) ? sources.join('; ') : model.get('source_name')\n          });\n        } else if (count < 60) {\n          underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].delay(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(onSuccess, self, [work], count + 1), 500);\n        } // if entry has children, remove them\n\n\n        if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(info.children)) {\n          underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(info.children, function (putcode) {\n            var model = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find(self.hiddenCollection.models, function (m) {\n              return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(putcode) && putcode === m.get('_work').getPutCode();\n            });\n\n            if (model) {\n              self.removeModel(model);\n            } else {// do nothing\n            }\n          });\n        }\n      });\n    }; // retry once, then just set everything still pending to errored\n\n\n    var onFail = function onFail(documents) {\n      if (!failRetry) {\n        failRetry = true;\n        return getDocInfo(documents);\n      } // set everything pending to be an error\n\n\n      return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].defer(setPendingToError);\n    }; // set all docs to pending and start the async doc info requests\n\n\n    getDocInfo = function getDocInfo(documents) {\n      var promises = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(documents, function (d) {\n        return orcidApi.getRecordInfo(d).done(function (info) {\n          // if the record was created by ADS, we can update it now\n          if (info.sourcedByADS && underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isUndefined(d.source_name)) {\n            d.source_name = 'NASA Astrophysics Data System';\n          } // no matter what, update the docs asap\n\n\n          d.orcid = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({}, d.orcid, self._getOrcidInfo(info), {\n            pending: false\n          });\n        });\n      }); // start the docs to pending\n\n\n      self._setDocsToPending(documents); // wait for all the promises to resolve\n\n\n      $.when.apply($, promises).then(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].partial(onSuccess, documents), underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].partial(onFail, documents));\n    };\n\n    getDocInfo(docs);\n    return docs;\n  };\n  /**\n   * Sync up the collection with orid information currently on the\n   * hidden collection\n   */\n\n\n  WidgetClass.prototype._paginationUpdate = function () {\n    var self = this;\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(this.hiddenCollection.models, function (hiddenModel) {\n      var match = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find(self.collection.models, function (model) {\n        return model.get('_work') === hiddenModel.get('_work');\n      });\n\n      if (match && match.get('orcid').pending) {\n        match.set('orcid', hiddenModel.get('orcid'));\n      }\n    });\n  };\n  /**\n   * update the models with orcid information\n   * @param {number=} tries - number of current retries\n   */\n\n\n  WidgetClass.prototype._updateModelsWithOrcid = function (models, tries) {\n    var modelsToUpdate = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].filter(models || this.hiddenCollection.models, function (m) {\n      return !m.has('_work') && m.has('identifier');\n    });\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEmpty(modelsToUpdate)) {\n      if (tries < 60) {\n        underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].delay(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(self._updateModelsWithOrcid, self, null, tries + 1), 500);\n      }\n\n      return;\n    } // this creates a connection between model->orcid, and updates source name\n\n\n    var oApi = this.getBeeHive().getService('OrcidApi');\n    oApi.getUserProfile().done(function (profile) {\n      var works = profile.getWorks();\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(modelsToUpdate, function (m) {\n        var exIds = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flatten(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].values(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pick(m.attributes, ['identifier'])));\n\n        underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(works, function (w) {\n          var wIds = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].flatten(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].values(w.getIdentifier()));\n\n          var idMatch = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].intersection(exIds, wIds).length > 0;\n\n          if (idMatch) {\n            m.set({\n              source_name: w.getSources().join('; '),\n              _work: w\n            });\n          } else if (tries < 60) {\n            underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].delay(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(self._updateModelsWithOrcid, self, [m], tries + 1), 500);\n          }\n        });\n      });\n    });\n  };\n  /**\n   * if orcidMode is on, update the set of new docs with orcid information\n   * @param {ApiResponse} apiResponse - the response from the api\n   * @param {array} docs - set of docs to be processed\n   * @param {object} pagination - pagination data (i.e. start, page, etc)\n   */\n\n\n  WidgetClass.prototype.processDocs = function (apiResponse, docs, pagination) {\n    docs = processDocs.apply(this, arguments);\n    var user = this.getBeeHive().getObject('User'); // for results list only show if orcidModeOn, for orcid big widget show always\n\n    if (user && user.isOrcidModeOn() || this.orcidWidget) {\n      var params = apiResponse.get('responseHeader.params');\n      var docsSoFar = parseInt(params.start) + parseInt(params.rows);\n      var result = this.addOrcidInfo(docs, docsSoFar);\n\n      if (pagination.numFound !== result.length) {\n        underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(pagination, this.getPaginationInfo(apiResponse, docs));\n      }\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].delay(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this._updateModelsWithOrcid, this, 0), 1000);\n\n      return result;\n    }\n\n    return docs;\n  };\n  /**\n   * Enhances the model with ADS metadata (iff we are coming from orcid)\n   * or with Orcid metadata, iff we are coming from ADS. So, it works\n   * both ways and can be used in both the search results views and in\n   * the pure orcid listings\n   *\n   * @param model\n   * @returns {*}\n   */\n\n\n  WidgetClass.prototype.mergeADSAndOrcidData = function (model) {\n    var self = this;\n    var final = $.Deferred();\n    var oApi = self.getBeeHive().getService('OrcidApi');\n    /**\n     * Take the full orcid work (not summary) and extend the current matched\n     * model with the data from each source\n     *\n     * @param {Work} fullOrcidWork\n     * @param {object} adsResponse\n     */\n\n    var onRecieveFullADSWork = function onRecieveFullADSWork(fullOrcidWork, adsResponse) {\n      var adsWork = adsResponse.response && adsResponse.response.docs && adsResponse.response.docs[0]; // work around to make sure updates work properly\n\n      fullOrcidWork = new js_modules_orcid_work__WEBPACK_IMPORTED_MODULE_5__[\"default\"](fullOrcidWork._root, true);\n      var parsedOrcidWork = fullOrcidWork.toADSFormat();\n      parsedOrcidWork = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isPlainObject(parsedOrcidWork) ? parsedOrcidWork : {};\n      adsWork = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isPlainObject(adsWork) ? adsWork : {}; // extend the current model with our new information\n\n      model.set(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({}, model.attributes, parsedOrcidWork, adsWork));\n      final.resolve(model);\n    };\n    /**\n     * reject on failure\n     */\n\n\n    var onADSFailure = function onADSFailure() {\n      final.reject.apply(final, arguments);\n    };\n    /**\n     * reject on failure\n     */\n\n\n    var onOrcidFailure = function onOrcidFailure() {\n      final.reject.apply(final, arguments);\n    };\n    /**\n     * After getting back the full orcid work, we\n     * create a new query to find an ADS match\n     *\n     * @param {Work} fullOrcidWork - the full orcid work record\n     */\n\n\n    var onRecieveFullOrcidWork = function onRecieveFullOrcidWork(fullOrcidWork) {\n      var identifier = model.get('identifier');\n      var q = new js_components_api_query__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n        q: 'identifier:' + queryUpdater.quoteIfNecessary(identifier),\n        fl: 'title,abstract,bibcode,author,pub,pubdate,doi,doctype'\n      });\n      var req = new js_components_api_request__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n        query: q,\n        target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_4__[\"default\"].SEARCH,\n        options: {\n          done: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].partial(onRecieveFullADSWork, fullOrcidWork),\n          fail: onADSFailure\n        }\n      });\n      var pubSub = self.getPubSub();\n      pubSub.publish(pubSub.EXECUTE_REQUEST, req);\n    };\n\n    var work = model.get('_work');\n\n    if (work) {\n      oApi.getWork(work.getPutCode()).done(onRecieveFullOrcidWork).fail(onOrcidFailure);\n    } else {\n      this._findWorkByModel(model).done(function (work) {\n        oApi.getWork(work.getPutCode()).done(onRecieveFullOrcidWork).fail(onOrcidFailure);\n      }).fail(onOrcidFailure);\n    }\n\n    return final.promise();\n  };\n  /**\n   * Finds a work by comparing a model to what we retrieve from ORCID,\n   * It can also take a profile param that bypasses the call to orcid, if\n   * it isn't necessary to get the most up-to-date data.\n   *\n   * @param {object} [model] model\n   * @param {Profile} _profile\n   * @private\n   */\n\n\n  WidgetClass.prototype._findWorkByModel = function (model, _profile) {\n    var $dd = $.Deferred();\n    var oApi = this.getBeeHive().getService('OrcidApi');\n\n    var exId = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pick(model.attributes, ['identifier']);\n\n    var exIds = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pick(model.attributes, ['all_ids']);\n\n    var oldOrcid = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(model.get('orcid') || {});\n\n    var profile = null;\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isUndefined(_profile)) {\n      profile = oApi.getUserProfile();\n    }\n\n    var success = function success(profile) {\n      var works = profile.getWorks();\n      var noUpdate = true;\n      var putCode = null;\n\n      var matchedWork = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find(works, function (w) {\n        var wIds = w.getIdentifier();\n        noUpdate = exId.identifier === wIds;\n        putCode = w.getPutCode();\n        return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contains(exIds.all_ids, wIds);\n      });\n\n      if (matchedWork) {\n        if (!noUpdate) {\n          var work = js_modules_orcid_work__WEBPACK_IMPORTED_MODULE_5__[\"default\"].adsToOrcid(model.attributes, putCode);\n          oApi.updateWork(work);\n        }\n\n        $dd.resolve(matchedWork);\n      } else {\n        $dd.reject();\n        var msg = 'Could not find a matching ORCiD Record';\n        console.error.apply(console, [msg].concat(arguments));\n        model.set('orcid', underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(oldOrcid, {\n          pending: false,\n          error: msg\n        }));\n      }\n    };\n\n    var fail = function fail() {\n      $dd.reject.apply($dd, arguments);\n      var msg = 'Error retrieving ORCiD profile';\n      console.error.apply(console, [msg].concat(arguments));\n      model.set('orcid', underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(oldOrcid, {\n        pending: false,\n        error: msg\n      }));\n    };\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isUndefined(_profile)) {\n      profile.done(success);\n      profile.fail(fail);\n    } else {\n      success(_profile);\n    }\n\n    return $dd.promise();\n  };\n  /**\n   * Remove a particular model from the collection and do some\n   * clean up on the view to make sure things show up okay\n   *\n   * @param {Backbone.Model} model - the model to be removed\n   */\n\n\n  WidgetClass.prototype.removeModel = function (model) {\n    var idx = model.resultsIndex;\n    this.hiddenCollection.remove(model);\n    var models = this.hiddenCollection.models;\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rest(models, idx), function (m) {\n      m.set('resultsIndex', m.get('resultsIndex') - 1);\n      m.set('indexToShow', m.get('indexToShow') - 1);\n    });\n\n    var showRange = this.model.get('showRange');\n\n    var range = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].range(showRange[0], showRange[1] + 1);\n\n    var visible = [];\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(range, function (i) {\n      if (models[i] && models[i].set) {\n        models[i].set('visible', true);\n        models[i].resultsIndex = i;\n        models[i].set('resultsIndex', i);\n        models[i].set('indexToShow', i + 1);\n        visible.push(models[i]);\n      }\n    });\n\n    this.hiddenCollection.reset(models);\n    this.collection.reset(visible); // reset the total number of papers\n\n    this.model.set('totalPapers', models.length);\n  };\n  /**\n   * Called when any internal event is triggered\n   *\n   * @param {string} ev - the event\n   * @param {object} arg1 - extra event information\n   * @param {object} data - event action data\n   */\n\n\n  WidgetClass.prototype.onAllInternalEvents = function (ev, arg1, data) {\n    if (ev === 'childview:OrcidAction') {\n      var self = this;\n      var action = data.action;\n      var orcidApi = this.getBeeHive().getService('OrcidApi');\n\n      var oldOrcid = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(data.model.get('orcid') || {});\n\n      var pubsub = this.getPubSub();\n      pubsub.publish(pubsub.CUSTOM_EVENT, 'orcid-action', action);\n      var handlers = {\n        'orcid-add': function orcidAdd(model) {\n          model.set('orcid', {\n            pending: true\n          });\n\n          var onAddComplete = function onAddComplete() {\n            self._findWorkByModel(model).done(function (work) {\n              // we should be able to assume some record info\n              var recInfo = {\n                isCreatedByADS: true,\n                isCreatedByOthers: false,\n                isKnownToADS: true,\n                provenance: 'ads'\n              };\n              model.set({\n                orcid: self._getOrcidInfo(recInfo),\n                source_name: work.getSources().join('; ')\n              });\n              self.trigger('orcidAction:' + action, model);\n            });\n          };\n\n          var doAdd = function doAdd(adsWork) {\n            orcidApi.addWork(adsWork).done(onAddComplete).fail(function addFailed(xhr, error, state) {\n              // there is a conflicting record, update record\n              if (state === 'CONFLICT') {\n                return onAddComplete();\n              }\n\n              var msg = 'Failed to add entry, please try again';\n              console.error.apply(console, [msg].concat(arguments));\n              model.set('orcid', underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(oldOrcid, {\n                pending: false,\n                error: msg\n              }));\n            });\n          };\n\n          var newWork = js_modules_orcid_work__WEBPACK_IMPORTED_MODULE_5__[\"default\"].adsToOrcid(model.attributes);\n\n          if (newWork) {\n            doAdd(newWork);\n          } else {\n            var msg = 'There was a problem adding the record, try again';\n            console.error.apply(console, [msg].concat(arguments));\n            model.set('orcid', underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(oldOrcid, {\n              pending: false,\n              error: msg\n            }));\n          }\n        },\n        'orcid-delete': function orcidDelete(model) {\n          model.set('orcid', {\n            pending: true\n          });\n\n          var deleteSuccess = function deleteSuccess() {\n            // Remove entry from collection after delete\n            if (self.orcidWidget) {\n              self.removeModel(model);\n            } else {\n              // reset orcid actions\n              model.set('orcid', self._getOrcidInfo({}));\n            }\n\n            self.trigger('orcidAction:' + action, model);\n          };\n\n          var performDelete = function performDelete(work) {\n            orcidApi.deleteWork(work.getPutCode()).done(deleteSuccess).fail(function deleteFail(xhr, error, state) {\n              /*\n              record not found, treat like the delete worked\n              Subsequent deletes on an already deleted entity can cause\n              404s\n              */\n              if (state === 'NOT FOUND') {\n                return deleteSuccess();\n              }\n\n              var msg = 'Error deleting record, please try again';\n              console.error.apply(console, [msg].concat(arguments));\n              model.set('orcid', underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(oldOrcid, {\n                pending: false,\n                error: msg\n              }));\n            });\n          };\n\n          var work = model.get('_work');\n\n          if (work) {\n            performDelete(work);\n          } else {\n            self._findWorkByModel(model).done(performDelete);\n          }\n        },\n        'orcid-update': function orcidUpdate(model) {\n          model.set('orcid', {\n            pending: true\n          });\n\n          var failedUpdating = function failedUpdating() {\n            var msg = 'Error updating record, please try again';\n            console.error.apply(console, [msg].concat(arguments));\n            model.set('orcid', underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(oldOrcid, {\n              pending: false,\n              error: msg\n            }));\n          };\n\n          self.mergeADSAndOrcidData(model) // done merging, begin update\n          .done(function (model) {\n            var putCode = model.get('_work').getPutCode();\n            var work = js_modules_orcid_work__WEBPACK_IMPORTED_MODULE_5__[\"default\"].adsToOrcid(model.attributes, putCode);\n\n            if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isNull(work)) {\n              // if something went wrong parsing the work, fail it here\n              return failedUpdating(work);\n            }\n\n            orcidApi.updateWork(work) // update successful\n            .done(function doneUpdating(orcidWork) {\n              var work = new js_modules_orcid_work__WEBPACK_IMPORTED_MODULE_5__[\"default\"](orcidWork, true);\n              orcidApi.getRecordInfo(work.toADSFormat()) // done getting record info, update model\n              .done(function doneGettingRecordInfo(recInfo) {\n                model.set('orcid', self._getOrcidInfo(recInfo));\n                self.trigger('orcidAction:' + action, model);\n              });\n            }) // update failed, update model accordingly\n            .fail(failedUpdating); // update the model with the updated data\n\n            model.set(model.attributes, {\n              silent: true\n            });\n          }) // merging failed, update the model\n          .fail(function failedMerging() {\n            var msg = 'Failed to merge ORCiD and ADS data';\n            console.error.apply(console, [msg].concat(arguments));\n            model.set('orcid', underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(oldOrcid, {\n              pending: false,\n              error: msg\n            }));\n          });\n        },\n        'orcid-login': function orcidLogin() {\n          orcidApi.signIn();\n        },\n        'orcid-logout': function orcidLogout() {\n          orcidApi.signOut();\n        },\n        'orcid-view': function orcidView(model) {\n          // send them to the work on their orcid profile\n          var url = model.get('orcidWorkPath');\n\n          if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(url)) {\n            var win = window.open(url, '_blank');\n            win.focus();\n          }\n        }\n      };\n      handlers[action] && handlers[action](data.model);\n    }\n\n    return onAllInternalEvents.apply(this, arguments);\n  };\n\n  return WidgetClass;\n}\n;\n\n//# sourceURL=webpack://bumblebee/./src/js/modules/orcid/extension.js?");

/***/ }),

/***/ "./src/js/modules/orcid/module.js":
/*!****************************************!*\
  !*** ./src/js/modules/orcid/module.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }\n/* harmony export */ });\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_modules_orcid_orcid_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/modules/orcid/orcid_api */ \"./src/js/modules/orcid/orcid_api.js\");\n/**\n * ORCID module is the main component for enabling communication with ORCID Api\n *\n * It should be installed through discovery.config.js, it needs to go into\n * the controllers section (because it will create an instance of the OrcidApi\n * and insert that into services)\n *\n * You config should look like:\n *\n *   'js/apps/discovery/main': {\n *\n *      core: {\n *       controllers: {\n *         Orcid: 'js/modules/orcid/module'\n *         ....\n *         }\n *   }\n *\n */\n\n\n\n\nvar OrcidModule = js_components_generic_module__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend({\n  activate: function activate(beehive) {\n    var config = beehive.getObject('DynamicConfig');\n\n    if (!config) {\n      throw new Error('DynamicConfig is not available to Orcid module');\n    }\n\n    var redirectUrlBase = config.orcidRedirectUrlBase || location.protocol + '//' + location.host;\n    var orcidClientId = config.orcidClientId;\n    var orcidApiEndpoint = config.orcidApiEndpoint;\n    var orcidLoginEndpoint = config.orcidLoginEndpoint;\n\n    if (!orcidClientId || !orcidApiEndpoint) {\n      throw new Error('Missing configuration for ORCID module: orcidApiEndpoint, orcidClientId');\n    } // TODO:rca - clean up this\n\n\n    var opts = {\n      redirectUrlBase: redirectUrlBase,\n      apiEndpoint: orcidApiEndpoint,\n      clientId: orcidClientId,\n      worksUrl: orcidApiEndpoint + '/{0}/orcid-works',\n      loginUrl: orcidLoginEndpoint + '?scope=/orcid-profile/read-limited%20/orcid-works/create%20/orcid-works/update&response_type=code&access_type=offline' + '&show_login=true' + '&client_id=' + orcidClientId,\n      exchangeTokenUrl: orcidApiEndpoint + '/exchangeOAuthCode'\n    };\n\n    underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(config, {\n      Orcid: opts\n    });\n\n    this.activateDependencies(beehive);\n  },\n  activateDependencies: function activateDependencies(beehive) {\n    var orcidApi = beehive.getService('OrcidApi');\n\n    if (orcidApi) {\n      // already activated\n      return;\n    }\n\n    orcidApi = new js_modules_orcid_orcid_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\n    orcidApi.activate(beehive);\n    beehive.addService('OrcidApi', orcidApi);\n  }\n});\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__() {\n  return {\n    activate: function activate(beehive) {\n      var om = new OrcidModule();\n      om.activate(beehive);\n    }\n  };\n}\n;\n\n//# sourceURL=webpack://bumblebee/./src/js/modules/orcid/module.js?");

/***/ }),

/***/ "./src/js/modules/orcid/orcid_api.js":
/*!*******************************************!*\
  !*** ./src/js/modules/orcid/orcid_api.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bootstrap */ \"./src/libs/bootstrap/bootstrap.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var js_components_pubsub_events__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/components/pubsub_events */ \"./src/js/components/pubsub_events.js\");\n/* harmony import */ var js_mixins_link_generator_mixin__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/mixins/link_generator_mixin */ \"./src/js/mixins/link_generator_mixin.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_mixins_hardened__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! js/mixins/hardened */ \"./src/js/mixins/hardened.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! js/components/api_query_updater */ \"./src/js/components/api_query_updater.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_modules_orcid_work__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! js/modules/orcid/work */ \"./src/js/modules/orcid/work.js\");\n/* harmony import */ var js_modules_orcid_profile__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! js/modules/orcid/profile */ \"./src/js/modules/orcid/profile.js\");\n/* harmony import */ var js_modules_orcid_bio__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! js/modules/orcid/bio */ \"./src/js/modules/orcid/bio.js\");\n/**\n * This is the core of the ORCID implementation\n * Written by (rca) - totally re-implemented the\n * initial implementation.\n *\n * The important details are:\n *\n *  - all communication with ORCID happens in JSON\n *  - there are multiple access points\n *    addWork()\n *    updateWork()\n *    deleteWork()\n *\n *    But in reality, the ORCID API allows the following\n *    operations:\n *\n *      reading (GET)\n *      adding (POST)\n *      updating (PUT)\n *      deleting (DELETE)\n *\n * This module will be contacting a web-service, such\n * a service needs to allows CORS requests (since we\n * run inside a browser)\n *\n * Our implementation of the orcid-proxy can be found\n * at:  http://github.com/adsabs/orcid-service\n *\n * The important configuration details are configured\n * in the ./module.js (the module will actually create\n * OrcidApi and insert it into the beehive)\n *\n *\n * TODO:\n *  - error handling (discover more error situations and\n *    take care of them; such as duplicated put-codes)\n *\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar OrcidApi = js_components_generic_module__WEBPACK_IMPORTED_MODULE_4__[\"default\"].extend({\n  /**\n   * Initialize the service\n   */\n  initialize: function initialize() {\n    this.userData = {};\n    this.addCache = [];\n    this.deleteCache = [];\n    this.getUserProfileCache = [];\n    this.authData = null;\n    this.addWait = 3000;\n    this.deleteWait = 100;\n    this.profileWait = 100;\n    this.maxAddChunkSize = 100;\n    this.maxDeleteChunkSize = 10;\n    this.db = {};\n    this.clearDBWait = 30000;\n    this.dbUpdatePromise = null;\n    this.maxQuerySize = 100;\n    this.queryUpdater = new js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_12__[\"default\"]('orcid_api');\n    this.orcidApiTimeout = 30000; // 30 seconds\n\n    this.adsQueryTimeout = 10; // 10 seconds\n\n    this.dirty = true; // initialize as dirty, so it updates\n  },\n\n  /**\n   * Activate the service.  Setup the configuration and\n   * save the current ORCID preferences.\n   *\n   * @param {BeeHive} beehive\n   */\n  activate: function activate(beehive) {\n    var storage = beehive.getService('PersistentStorage');\n    var config = beehive.getObject('DynamicConfig');\n    this.setBeeHive(beehive);\n    this.config = {};\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(this.config, config.Orcid);\n\n    if (storage) {\n      var orcid = storage.get('Orcid');\n\n      if (orcid && orcid.authData) {\n        this.saveAccessData(orcid.authData);\n      }\n    }\n\n    this._addWork = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debounce(this._addWork, this.addWait);\n    this._getUserProfile = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debounce(this._getUserProfile, this.profileWait);\n    this._deleteWork = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debounce(this._deleteWork, this.deleteWait);\n  },\n\n  /**\n   * Checks access to ORCID api by making request for a user profile\n   * returns a promise; done() means success, fail() no access\n   *\n   * @returns {jQuery.Promise}\n   */\n  checkAccessOrcidApiAccess: function checkAccessOrcidApiAccess() {\n    if (this.hasAccess()) {\n      return this.getUserProfile();\n    }\n\n    return jquery__WEBPACK_IMPORTED_MODULE_2___default().Deferred().reject().promise();\n  },\n\n  /**\n   * Checks to see if the api has been given authentication information\n   * from ORCiD, and if that information has expired or not\n   * @returns {boolean}\n   */\n  hasAccess: function hasAccess() {\n    if (this.authData && this.authData.expires) {\n      return this.authData.expires > new Date().getTime();\n    }\n\n    return false;\n  },\n\n  /**\n   * Redirects to ORCID where the user logs in and ORCID will forward\n   * user back to us\n   *\n   * @param {String} [targetRoute='#user/orcid'] targetRoute\n   */\n  signIn: function signIn(targetRoute) {\n    this.getPubSub().publish(this.getPubSub().APP_EXIT, {\n      type: 'orcid',\n      url: this.config.loginUrl + '&redirect_uri=' + encodeURIComponent(this.config.redirectUrlBase + (targetRoute || '/user/orcid'))\n    }); // make sure to redirect to the proper page after sign in\n\n    this.getPubSub().publish(this.getPubSub().ORCID_ANNOUNCEMENT, 'login');\n  },\n\n  /**\n   * Set the preferences for the user\n   *\n   * @param {Object} userData - user data to update\n   * @returns {*|jQuery.Promise}\n   */\n  setADSUserData: function setADSUserData(userData) {\n    var url = this.getBeeHive().getService('Api').url + js_components_api_targets__WEBPACK_IMPORTED_MODULE_11__[\"default\"].ORCID_PREFERENCES + '/' + this.authData.orcid;\n    var request = this.createRequest(url, {\n      method: 'POST'\n    }, userData);\n    request.fail(function () {\n      var msg = 'ADS ORCiD preferences could not be set';\n      console.error.apply(console, [msg].concat(arguments));\n    });\n    return request;\n  },\n\n  /**\n   * Uses the ADS ORCID preferences endpoint to grab the preferences\n   * for this user\n   *\n   * @returns {*|jQuery.Promise}\n   */\n  getADSUserData: function getADSUserData() {\n    var self = this;\n    var url = this.getBeeHive().getService('Api').url + js_components_api_targets__WEBPACK_IMPORTED_MODULE_11__[\"default\"].ORCID_PREFERENCES + '/' + this.authData.orcid;\n    var request = this.createRequest(url);\n    request.fail(function () {\n      self.signOut();\n      self.getBeeHive().getObject('User').setOrcidMode(0);\n      var title = 'Expired ORCID login';\n      var msg = ['Your ORCID login has expired.', 'Please reload the page and sign in again to access the page.', '', '<button onclick=\"location.reload()\" class=\"btn btn-primary\" role=\"button\">Reload</button>'];\n      var pubSub = self.getPubSub();\n      pubSub.publish(pubSub.ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_13__[\"default\"]({\n        title: title,\n        msg: msg.join('<br/>'),\n        modal: true,\n        type: 'warning'\n      }));\n    });\n    return request;\n  },\n  getUserBio: function getUserBio() {\n    var dd = new (jquery__WEBPACK_IMPORTED_MODULE_2___default().Deferred)();\n    var url = this.getBeeHive().getService('Api').url + js_components_api_targets__WEBPACK_IMPORTED_MODULE_11__[\"default\"].ORCID_NAME + '/' + this.authData.orcid;\n    var request = this.createRequest(url);\n    request.fail(function () {\n      var msg = 'ADS name could not be retrieved';\n      console.error.apply(console, [msg].concat(arguments));\n      dd.reject();\n    });\n    request.done(function (bio) {\n      var orcidBio = new js_modules_orcid_bio__WEBPACK_IMPORTED_MODULE_16__[\"default\"](bio);\n      dd.resolve(orcidBio);\n    });\n    return dd.promise();\n  },\n\n  /**\n   * Forgets the OAuth access_token\n   */\n  signOut: function signOut() {\n    this.saveAccessData(null);\n    this.getPubSub().publish(this.getPubSub().ORCID_ANNOUNCEMENT, 'logout');\n  },\n\n  /**\n   * Checks if the exchange code is present on the string\n   *\n   * @param {String} searchString\n   * @returns {boolean}\n   */\n  hasExchangeCode: function hasExchangeCode(searchString) {\n    return !!this.getExchangeCode(searchString);\n  },\n\n  /**\n   * Get the exchange token from the location string or one specified\n   * @param {String} [searchString=window.location.search] searchString\n   * @returns {*|String|Undefined}\n   */\n  getExchangeCode: function getExchangeCode(searchString) {\n    return this.getUrlParameter('code', searchString || window.location.search);\n  },\n\n  /**\n   * Extract values from the URL (used to get code from redirects)\n   *\n   * @param {String} sParam - parameter to find\n   * @param {String} searchString - string to search\n   * @returns {String|Undefined} - value of param, if found\n   */\n  getUrlParameter: function getUrlParameter(sParam, searchString) {\n    var sPageURL = searchString.substring(1);\n    var sURLVariables = sPageURL.split('&');\n\n    for (var i = 0; i < sURLVariables.length; i++) {\n      var sParameterName = sURLVariables[i].split('=');\n\n      if (sParameterName[0] === sParam) {\n        return decodeURIComponent(sParameterName[1]);\n      }\n    }\n  },\n\n  /**\n   * Using access code retrieve the access_token from ORCID\n   *\n   * Example response:\n   *  {\"access_token\":\"4274a0f1-36a1-4152-9a6b-4246f166bafe\",\"token_type\":\"Bearer\",\"ex\n   *  pires_in\":3599,\"scope\":\"/orcid-works/create /orcid-profile/read-limited /orcid-w\n   *  orks/update\",\"orcid\":\"0000-0001-8178-9506\",\"name\":\"Roman Chyla\"}\n   *\n   * @param {String} oAuthCode\n   * @returns {jQuery.Promise}\n   */\n  getAccessData: function getAccessData(oAuthCode) {\n    var api = this.getBeeHive().getService('Api');\n    var promise = jquery__WEBPACK_IMPORTED_MODULE_2___default().Deferred();\n    var opts = {\n      url: this.config.exchangeTokenUrl,\n      done: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(promise.resolve, promise),\n      fail: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(promise.reject, promise),\n      always: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(promise.always, promise),\n      headers: {\n        Accept: 'application/json',\n        Authorization: api.access_token\n      }\n    };\n    api.request(new js_components_api_request__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n      target: this.config.exchangeTokenUrl,\n      query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_8__[\"default\"]({\n        code: oAuthCode\n      })\n    }), opts);\n    return promise.promise();\n  },\n\n  /**\n   * Save the passed in authentication data from orcid\n   * into user persistent storage for safe keeping.\n   *\n   * @param {object} authData - the authentication data\n   */\n  saveAccessData: function saveAccessData(authData) {\n    var beehive = this.getBeeHive();\n\n    if (authData && !authData.expires && authData.expires_in) {\n      authData.expires = new Date().getTime() + (authData.expires_in * 1000 - 1000);\n    }\n\n    this.authData = authData;\n    var storage = beehive.getService('PersistentStorage');\n\n    if (storage) {\n      var orcid = storage.get('Orcid') || {};\n      orcid.authData = authData;\n      storage.set('Orcid', orcid);\n    }\n  },\n\n  /**\n   * ===============================================================================\n   * API ORCID access points\n   * ===============================================================================\n   */\n\n  /**\n   * Convenience method for converting target short name into the full url\n   * @param {String} name - short name for endpoint\n   * @param {Array|Number} [putCodes] putCodes - putcodes to append to end of url\n   * @returns {string} - the url\n   */\n  getUrl: function getUrl(name, putCodes) {\n    var targets = {\n      profile_bib: '/orcid-profile/simple',\n      profile_full: '/orcid-profile/full?update=True',\n      works: '/orcid-works',\n      work: '/orcid-work'\n    };\n    var url = this.config.apiEndpoint + '/' + this.authData.orcid + targets[name];\n    var end = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(putCodes) ? putCodes.join(',') : putCodes;\n\n    if (end) {\n      url += '/' + end;\n    }\n\n    return url;\n  },\n\n  /**\n   * Create a new request and filter success/fail always to appropriate methods\n   * @param {String} url - url to send request to\n   * @param {Object} [options={}] options - options for request\n   * @param {Object} [data] data - payload of message\n   * @returns {jQuery.Promise} promise object for request\n   */\n  createRequest: function createRequest(url, options, data) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isUndefined(url)) {\n      throw new Error('Url must be defined');\n    }\n\n    var $dd = jquery__WEBPACK_IMPORTED_MODULE_2___default().Deferred();\n    var prom = this.sendData(url, data, options || {});\n    prom.done(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind($dd.resolve, $dd));\n    prom.fail(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind($dd.reject, $dd));\n    prom.always(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind($dd.always, $dd));\n    return $dd.promise();\n  },\n\n  /**\n   * Debounced method for keeping lots of request for the profile at bay.\n   * This method will resolve all awaiting promises when there has been an\n   * idle period following the initial request.\n   *\n   * Different from getWorks, because with profile we are only concerned\n   * with the most up-to-date response.  So a single response to resolve them\n   * all is good enough.\n   */\n  _getUserProfile: function _getUserProfile() {\n    var self = this;\n    var request = this.createRequest(this.getUrl('profile_full')); // get everything so far in the cache\n\n    var cache = self.getUserProfileCache.splice(0);\n    request.done(function (profile) {\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(cache, function (promise) {\n        orcidProfile = new js_modules_orcid_profile__WEBPACK_IMPORTED_MODULE_15__[\"default\"](profile);\n        promise.resolve(orcidProfile.setWorks(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(profile, function (profile, idx) {\n          return new js_modules_orcid_work__WEBPACK_IMPORTED_MODULE_14__[\"default\"](profile);\n        })));\n      });\n    });\n    request.fail(function () {\n      var args = arguments;\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(cache, function (promise) {\n        promise.reject.apply(promise, args);\n      });\n    });\n  },\n\n  /**\n   * Retrieves user profile\n   * Must have scope: /orcid-profile/read-limited\n   *\n   * Adds to the internal profile cache, which\n   *\n   * @returns {jQuery.Promise<Profile>} - Promise that resolves with profile\n   */\n  getUserProfile: function getUserProfile() {\n    var $dd = jquery__WEBPACK_IMPORTED_MODULE_2___default().Deferred();\n    this.getUserProfileCache.push($dd);\n\n    this._getUserProfile.call(this);\n\n    return $dd.promise();\n  },\n\n  /**\n   * Retrieve an entire work entry from ORCiD\n   * This is different than the summary, it includes all information they\n   * have in their system for the entry.\n   *\n   * This is necessary to get the author information\n   *\n   * @param {Number} putCode - putcode to be retrieved\n   * @returns {jQuery.Promise<Work>} - promise that resolves with the work\n   */\n  getWork: function getWork(putCode) {\n    var $dd = jquery__WEBPACK_IMPORTED_MODULE_2___default().Deferred();\n    this.createRequest(this.getUrl('works', putCode)).done(function (work) {\n      $dd.resolve(new js_modules_orcid_work__WEBPACK_IMPORTED_MODULE_14__[\"default\"](work));\n    }).fail(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind($dd.reject, $dd));\n    return $dd.promise();\n  },\n\n  /**\n   * Retrieve the full works as an array,\n   * this can take any number of putcodes, it will chunk the requests and\n   * return a deferred that will resolve with an array of works\n   *\n   * @param {Array} putCodes - putcodes to be retrieved\n   * @returns {jQuery.Promise<Work[]>}\n   */\n  getWorks: function getWorks(putCodes) {\n    if (!underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(putCodes)) {\n      throw new TypeError('putcodes must be an Array');\n    }\n\n    var $dd = jquery__WEBPACK_IMPORTED_MODULE_2___default().Deferred();\n    var chunkSize = 50;\n    var proms = [];\n\n    for (var i = 0, j = putCodes.length; i < j; i += chunkSize) {\n      var chunk = putCodes.slice(i, i + chunkSize);\n      var url = this.getUrl('works') + '/' + chunk.join(',');\n      proms.push(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].partial(this.createRequest, url));\n    }\n\n    var reqs = jquery__WEBPACK_IMPORTED_MODULE_2___default().when.apply((jquery__WEBPACK_IMPORTED_MODULE_2___default()), proms);\n    reqs.done(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind($dd.resolve, $dd));\n    reqs.fail(function () {\n      // we are passed an array for EACH argument, so passing the whole thing\n      $dd.reject(arguments);\n    });\n    return $dd.promise();\n  },\n\n  /**\n   * Update an existing ORCiD work.  This method requires that the putcode\n   * for the work be present in the update object.\n   *\n   * @param {Object} work - object containing updated orcid information\n   * @param {Number} work[\"put-code\"] - putcode to update\n   * @returns {jQuery.Promise} - promise for the request\n   */\n  updateWork: function updateWork(work) {\n    if (!underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isPlainObject(work)) {\n      throw new TypeError('Work should be a simple object');\n    }\n\n    var putcode = work['put-code'];\n\n    if (!putcode) {\n      return jquery__WEBPACK_IMPORTED_MODULE_2___default().Deferred().reject().promise();\n    }\n\n    var url = this.getUrl('works', putcode);\n    return this.createRequest(url, {\n      method: 'PUT'\n    }, work);\n  },\n\n  /**\n   * Delete a single work from ORCiD\n   *\n   * @param {String | Number} putCode - putcode of work to be deleted\n   * @returns {jQuery.Promise} - promise for the request\n   */\n  deleteWork: function deleteWork(putCode) {\n    if (!putCode) {\n      return jquery__WEBPACK_IMPORTED_MODULE_2___default().Deferred().reject('No Putcode found').promise();\n    }\n\n    var $dd = jquery__WEBPACK_IMPORTED_MODULE_2___default().Deferred();\n    this.deleteCache.push({\n      // create unique request id to ride along with request\n      id: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].uniqueId(),\n      putCode: putCode,\n      promise: $dd\n    });\n\n    this._deleteWork.call(this);\n\n    return $dd.promise();\n  },\n\n  /**\n   * Debounced method that takes chunks of deletes and fires them off\n   * in batches, this way we don't send 100 at once.\n   */\n  _deleteWork: function _deleteWork() {\n    var self = this;\n    var cachedDeletes = this.deleteCache.slice(0);\n    var chunk;\n    var promises = [];\n    var chunks = []; // chunk up the deletes\n\n    for (var i = 0; i < cachedDeletes.length; i += this.maxDeleteChunkSize) {\n      chunk = cachedDeletes.slice(i, i + this.maxDeleteChunkSize);\n      chunks.push(chunk);\n    } // take each chunk, loop through them creating a request for each\n\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(chunks, function (c, i) {\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(c, function (del) {\n        // add the promise object to array for checking later\n        promises.push(del.promise.promise()); // staggered delays, for example:\n        // 1st request -> wait 3 seconds\n        // 2nd request -> wait 6 seconds\n        // 3rd request -> wait 9 seconds\n        // ...\n\n        underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].delay(function () {\n          // create the request for each delete\n          var request = self.createRequest(self.getUrl('works', del.putCode), {\n            beforeSend: function beforeSend(xhr) {\n              xhr._id = del.id;\n            },\n            method: 'DELETE'\n          }); // apply the promise handlers\n\n          request.done(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(del.promise.resolve, del.promise)).fail(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(del.promise.reject, del.promise)).always(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(del.promise.always, del.promise)); // remove the entry from the cache\n\n          var idx = self.deleteCache.indexOf(del);\n          self.deleteCache.splice(idx, idx + 1);\n        }, self.deleteWait * i);\n      });\n    }); // resolve remaining promises\n\n\n    var finalizeCacheEntries = function finalizeCacheEntries() {\n      self.deleteCache = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].reduce(self.deleteCache, function (res, entry) {\n        entry.promise.state() === 'pending' ? entry.promise.reject() : res.push(entry);\n        return res;\n      }, []);\n    };\n\n    jquery__WEBPACK_IMPORTED_MODULE_2___default().when.apply((jquery__WEBPACK_IMPORTED_MODULE_2___default()), promises).always(finalizeCacheEntries);\n  },\n\n  /**\n   * Add new ORCiD work\n   * This will add an entry to an internal cache which will be used when\n   * the requests finally run.  Here we provide the old work, id and promise\n   * to the cache.\n   *\n   * @param {Object} orcidWork\n   */\n  addWork: function addWork(orcidWork) {\n    if (!underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isPlainObject(orcidWork)) {\n      throw new TypeError('Should be plain object');\n    }\n\n    var $dd = jquery__WEBPACK_IMPORTED_MODULE_2___default().Deferred();\n    this.addCache.push({\n      // create unique request id to ride along with request\n      id: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].uniqueId(),\n      work: orcidWork,\n      promise: $dd\n    });\n\n    this._addWork.call(this);\n\n    return $dd.promise();\n  },\n\n  /**\n   * Debounced method for adding works\n   * This method will run iif it has been called once and then an\n   * idle period has passed without another call.  At that point it will\n   * get the current cache and make a request.\n   *\n   * Cached entries are checked against ids that ride along the request on\n   * the xhr object.\n   *\n   * @private\n   * @returns {*}\n   */\n  _addWork: function _addWork() {\n    var self = this;\n\n    var cachedWorks = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(self.addCache, 'work');\n\n    var cachedIds = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(self.addCache, 'id');\n\n    var prom = self._addWorks(cachedWorks, cachedIds); // On success, create a new work and remove the entry from the cache\n\n\n    prom.done(function (workResponse) {\n      // workResponse will be in ID:WORK format\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(workResponse, function (work, id) {\n        var cacheEntry = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find(self.addCache, function (e) {\n          return e.id === id;\n        });\n\n        if (!cacheEntry) {\n          console.error('No Cache entry found');\n          return true;\n        }\n\n        var promise = cacheEntry.promise;\n        var oldWork = cacheEntry.work; // check to see if the work is an error message, { error: {...} }\n\n        if (!work) {\n          // something weird going on with work, just reject\n          promise.reject();\n        } else if (work.error) {\n          // check to see if it's just a conflict\n          if (work.error['response-code'] === 409) {\n            promise.resolve(oldWork);\n          } else {\n            promise.reject();\n          }\n        } else {\n          // no errors, resolve with the new work, { work: {...} }\n          promise.resolve(new js_modules_orcid_work__WEBPACK_IMPORTED_MODULE_14__[\"default\"](work.work));\n        } // remove from the cache\n\n\n        var idx = self.addCache.indexOf(cacheEntry);\n        self.addCache.splice(idx, idx + 1);\n      });\n    }); // on fail, reject the promises\n    // this should receive a list of ids which we can finish up with\n\n    prom.fail(function (ids) {\n      var args = arguments;\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(ids, function (id) {\n        // find the cache entry\n        var idx = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findIndex(self.addCache, {\n          id: id\n        });\n\n        if (idx >= 0) {\n          // grab reference to promise\n          var promise = self.addCache[idx].promise; // remove entry from cache\n\n          self.addCache.splice(idx, idx + 1); // if it is still pending, reject it now\n\n          if (promise.state() === 'pending') {\n            promise.reject.apply(promise, args);\n          }\n        }\n      });\n    });\n  },\n\n  /**\n   * Add multiple works to ORCiD\n   * This method will chunk the incoming works by a maximum chunk size\n   * and send a separate request for each.  When all requests complete, it\n   * will aggregate and index them using unique request ids\n   *\n   * @private\n   * @param {Object[]} orcidWorks\n   * @param {Number[]} ids\n   */\n  _addWorks: function _addWorks(orcidWorks, ids) {\n    var self = this;\n\n    if (!underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(orcidWorks) || !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(ids)) {\n      throw new TypeError('works and ids must be arrays');\n    }\n\n    var $dd = jquery__WEBPACK_IMPORTED_MODULE_2___default().Deferred();\n    var promises = [];\n    var chunk;\n    var chunkIds;\n\n    for (var i = 0; i < orcidWorks.length; i += this.maxAddChunkSize) {\n      chunk = orcidWorks.slice(i, i + this.maxAddChunkSize);\n      chunkIds = ids.slice(i, i + this.maxAddChunkSize); // create bulk object\n\n      var bulkWorks = {\n        bulk: []\n      };\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(chunk, function (w) {\n        bulkWorks.bulk.push({\n          work: w\n        });\n      });\n\n      var url = this.getUrl('works');\n      promises.push(this.createRequest(url, {\n        beforeSend: function beforeSend(xhr) {\n          xhr.cacheIds = chunkIds;\n        },\n        method: 'POST'\n      }, bulkWorks));\n    } // when all the promises finish, aggregate the result and index by id\n\n\n    jquery__WEBPACK_IMPORTED_MODULE_2___default().when.apply((jquery__WEBPACK_IMPORTED_MODULE_2___default()), promises).then(function () {\n      // make sure arguments is an 2d array\n      var doneArgs = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(arguments[0]) ? arguments : [arguments];\n\n      var obj = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].reduce(doneArgs, function (res, args) {\n        var works = args && args[0] && args[0].bulk;\n        var ids = args && args[2] && args[2].cacheIds; // build response object, indexed by ids\n\n        underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(ids, function (id, idx) {\n          res[id] = works[idx];\n        });\n\n        return res;\n      }, {});\n\n      $dd.resolve(obj);\n    }, function (xhr) {\n      self.setDirty();\n      $dd.reject.apply($dd, [xhr.cacheIds].concat(arguments));\n    });\n    return $dd.promise();\n  },\n  // #############################################################################\n\n  /**\n   * Use Api service to make a request to the ORCID api\n   *\n   * @param {string} url - request url\n   * @param {Object} [data={}] data - request payload\n   * @param {Object} [opts={}] opts - request options\n   * @returns {*}\n   */\n  sendData: function sendData(url, data, opts) {\n    var result = jquery__WEBPACK_IMPORTED_MODULE_2___default().Deferred();\n    opts = opts || {};\n    var options = {\n      type: 'GET',\n      url: url,\n      contentType: 'application/json',\n      cache: !!this.dbUpdatePromise,\n      // true = do not generate _ parameters (let browser cache responses)\n      timeout: this.orcidApiTimeout,\n      done: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(result.resolve, result),\n      fail: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(result.reject, result),\n      always: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(result.always, result)\n    };\n\n    if (data) {\n      options.dataType = 'json';\n      options.data = JSON.stringify(data); // because ORCID sends empty response for POST requests\n      // we must be able to handle it properly (but it is not\n      // nice of them)\n\n      options.converters = {\n        '* text': window.String,\n        'text html': true,\n        'text json': function textJson(input) {\n          input = input || '{}';\n          return jquery__WEBPACK_IMPORTED_MODULE_2___default().parseJSON(input);\n        },\n        'text xml': (jquery__WEBPACK_IMPORTED_MODULE_2___default().parseXML)\n      };\n    } else {\n      options.data = null; // to prevent api.request() from adding {} to the url params\n    }\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(options, opts);\n\n    var api = this.getBeeHive().getService('Api');\n\n    if (!options.headers) {\n      options.headers = {};\n    }\n\n    options.headers.Authorization = api.access_token;\n\n    if (!options.headers['Orcid-Authorization'] && this.authData) {\n      options.headers['Orcid-Authorization'] = 'Bearer ' + this.authData.access_token;\n    }\n\n    if (!options.headers['Content-Type']) {\n      options.headers['Content-Type'] = 'application/json';\n    }\n\n    if (!options.headers.Accept) {\n      options.headers.Accept = 'application/json';\n    }\n\n    api.request(new js_components_api_request__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n      target: url,\n      query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_8__[\"default\"](),\n      options: options\n    }));\n    return result.promise();\n  },\n\n  /**\n   * Takes in a query containing all identifiers to check against what is in\n   * ADS.  Query will return all known (to ADS) records, but in the following\n   * format:\n   *\n   * \"IDENTIFIER_TYPE:IDENTIFIER_VALUE\": \"BIBCODE\"\n   *\n   * @example\n   * q = ['bibcode:2018CNSNS..56..270Q OR alternate_bibcode:2018CNSNS..56..270Q']\n   * // returns:\n   * {\n   *  \"bibcode:2018CNSNS..56..270Q\": \"2018CNSNS..56..270Q\"\n   *  \"doi:10.1016/j.cnsns.2017.08.014\": \"2018CNSNS..56..270Q\"\n   * }\n   *\n   * @param {ApiQuery} apiQuery - query to check\n   * @returns {jQuery.Promise<Object>} - request promise\n   * @private\n   */\n  _checkIdsInADS: function _checkIdsInADS(apiQuery) {\n    var api = this.getBeeHive().getService('Api');\n    var dd = jquery__WEBPACK_IMPORTED_MODULE_2___default().Deferred();\n    apiQuery.set('fl', 'bibcode, doi, alternate_bibcode');\n    apiQuery.set('rows', '5000');\n\n    var onDone = function onDone(data) {\n      if (!data || !data.response || !data.response.docs) {\n        return dd.resolve({});\n      } // we have to create an identifier string for each\n\n\n      var ret = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].reduce(data.response.docs, function (res, doc) {\n        var bibcode = doc.bibcode.toLowerCase();\n        var key = 'identifier:' + bibcode;\n        res[key] = bibcode;\n\n        underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(doc.doi, function (doi) {\n          var key = 'identifier:' + doi.toLowerCase().replace('doi:', '');\n          res[key] = bibcode;\n        });\n\n        underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(doc.alternate_bibcode, function (ab) {\n          var key = 'identifier:' + ab.toLowerCase();\n          res[key] = bibcode;\n        });\n\n        return res;\n      }, {});\n\n      dd.resolve(ret);\n    };\n\n    var onFail = function onFail() {\n      dd.resolve({});\n    };\n\n    api.request(new js_components_api_request__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n      target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_11__[\"default\"].SEARCH,\n      query: apiQuery,\n      options: {\n        done: onDone,\n        fail: onFail\n      }\n    })).fail(onFail); // reject after timeout, if necessary\n\n    (function check(count) {\n      if (dd.state() === 'pending' && count <= 0) {\n        return dd.reject('Request Timeout');\n      }\n\n      if (dd.state() === 'resolved') {\n        return;\n      }\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].delay(check, 1000, --count);\n    })(this.adsQueryTimeout);\n\n    return dd.promise();\n  },\n\n  /**\n   * Check if the work was sourced by ADS\n   * @param {Work} work\n   */\n  isSourcedByADS: function isSourcedByADS(work) {\n    return work.getSourceName().indexOf('NASA Astrophysics Data System') > -1;\n  },\n\n  /**\n   * Generate a query string by doing custom joins on the array.  Each entry\n   * in the passed in query gets checked and added to the generated string\n   * by \"OR\"-ing them together.\n   *\n   * @example\n   * _buildQuery({\n   *  identifier: ['2018CNSNS..56..270Q', '2017CNSNS..56..270Q']\n   * });\n   * // returns:\n   * { \"q\": [\n   *  \"identifier:2018CNSNS..56..270Q OR identifier:2017CNSNS..56..270Q\"\n   * ]}\n   *\n   * @param {Object} query - query object used to build new ApiQuery\n   * @param {string[]} [query.identifier] query.identifier\n   * @returns {ApiQuery} - a new api query to use in a request\n   * @private\n   */\n  _buildQuery: function _buildQuery(query) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEmpty(query) || !query.identifier) {\n      return null;\n    } // reformat array as 'identifier:xxx OR identifier:xxx'\n\n\n    var q = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].filter(query.identifier, function (i) {\n      // grab only non-empty entries\n      return !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEmpty(i.trim()) || i === 'NONE';\n    }).join(' OR '); // don't let an empty query string through\n\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEmpty(q)) {\n      return null;\n    }\n\n    return new js_components_api_query__WEBPACK_IMPORTED_MODULE_8__[\"default\"]({\n      q: 'identifier:(' + q + ')'\n    });\n  },\n\n  /**\n   * Updates our current knowledge of ORCID Data\n   * This will typically be only summaries of works\n   *\n   * @param {Profile} [profile] profile\n   */\n  updateDatabase: function updateDatabase(profile) {\n    var self = this;\n\n    if (this.dbUpdatePromise && this.dbUpdatePromise.state() === 'pending') {\n      return this.dbUpdatePromise.promise();\n    }\n\n    this.dbUpdatePromise = jquery__WEBPACK_IMPORTED_MODULE_2___default().Deferred(); // set the database object and resolve the promise\n\n    var finishUpdate = function finishUpdate(db) {\n      var dbPromise = self.dbUpdatePromise;\n      self.setClean();\n      self.db = db;\n\n      if (dbPromise) {\n        dbPromise.resolve();\n      }\n\n      setTimeout(function () {\n        if (dbPromise && dbPromise.state() !== 'pending') {\n          dbPromise = null;\n          self.setDirty();\n        }\n      }, self.clearDBWait);\n    }; // apply the update to the database\n\n\n    var update = function update(profile) {\n      // get the works and all external IDs for them\n      var works = profile.getWorks();\n      var query = [];\n      var db = {};\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(works, function addIdsToDatabase(w, i) {\n        var key = 'identifier:';\n        var ids = w.getIdentifier();\n        key += ids;\n\n        if (key) {\n          query.push(key);\n          db[key.toLowerCase()] = {\n            sourcedByADS: self.isSourcedByADS(w),\n            putcode: w.getPutCode(),\n            idx: i\n          };\n        }\n      });\n\n      if (query.length && self.maxQuerySize > 0) {\n        var whereClauses = [];\n        query = query.sort();\n\n        var steps = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].range(0, query.length, self.maxQuerySize);\n\n        for (var i = 0; i < steps.length; i++) {\n          var q = {};\n\n          for (var j = steps[i]; j < steps[i] + self.maxQuerySize; j++) {\n            if (j >= query.length) break;\n            var ps = query[j].split(':');\n            if (!q[ps[0]]) q[ps[0]] = [];\n            q[ps[0]].push(self.queryUpdater.quoteIfNecessary(ps[1]));\n          }\n\n          var newQuery = self._buildQuery(q);\n\n          if (newQuery) {\n            whereClauses.push(self._checkIdsInADS(newQuery));\n          }\n        }\n      } else {\n        finishUpdate(db);\n      }\n      /**\n       * This will receive a set of of identifier strings that are in the\n       * following format:\n       *\n       * @example\n       * [\n       *  identifier:2017geoji.tmp...42f:\"2017geoji.209..597f\",\n       *  identifier:2017gml...tmp...20d:\"2017gml...tmp...20d\"\n       * ]\n       *\n       * It will then update the database, by setting a bibcode property on\n       * each record.  Also, if the record is not found here, it will be\n       * unset (-1) so that it won't be counted as an orcid record.\n       *\n       */\n\n\n      var querySuccess = function querySuccess(ids) {\n        // Update each orcid record with identifier info gained from ADS\n        underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(db, function (v, key) {\n          var bibcode = ids[key]; // ADS did not find a record for this identifier\n\n          if (!bibcode) {\n            db[key].idx = -1;\n          } else {\n            db[key].bibcode = bibcode;\n          }\n        });\n\n        finishUpdate(db);\n      }; // on fail, alert the console and finish the update\n\n\n      var queryFailure = function queryFailure() {\n        console.error.apply(console, ['Error processing response from ADS'].concat(arguments));\n        finishUpdate(db);\n      };\n\n      jquery__WEBPACK_IMPORTED_MODULE_2___default().when.apply((jquery__WEBPACK_IMPORTED_MODULE_2___default()), whereClauses).then(querySuccess, queryFailure);\n    };\n\n    if (profile) {\n      update(profile);\n    } else {\n      // if we aren't passed a profile, get the current one\n      this.getUserProfile().done(update).fail(function () {\n        self.dbUpdatePromise.reject.apply(self.dbUpdatePromise, arguments);\n      });\n    }\n\n    return self.dbUpdatePromise.promise();\n  },\n\n  /**\n   * Creates a metadata object based on the work that is passed in that\n   * helps with understanding the record's relationship with ADS.  Figures\n   * out if the record is sourced by ADS, whether it is known, and whether\n   * ADS has the rights to update/delete it.\n   *\n   * @param {object} adsWork\n   */\n  getRecordInfo: function getRecordInfo(adsWork) {\n    var self = this;\n    var dd = jquery__WEBPACK_IMPORTED_MODULE_2___default().Deferred();\n    /**\n     * Creates a metadata object based on the record data passed in.\n     *\n     * @returns {{\n     *  isCreatedByADS: boolean,\n     *  isCreatedByOthers: boolean,\n     *  isKnownToADS: boolean,\n     *  provenance: null\n     * }}\n     *\n     * @param {object} adsWork\n     */\n\n    var getRecordMetaData = function getInfo(adsWork) {\n      var out = {\n        isCreatedByADS: false,\n        isCreatedByOthers: false,\n        isKnownToADS: false,\n        provenance: null\n      };\n      /*\n      Looking to match the work record passed in to the entry in the db\n      Then we can add some metadata like whether it was an ADS sourced\n      record or not\n        */\n\n      var updateRecord = function updateRecord(v, k) {\n        // db is always 'identifier:xxx'\n        var key = ('identifier:' + v).toLowerCase();\n        var rec = self.db[key];\n\n        if (rec) {\n          if (rec.sourcedByADS) {\n            out.isCreatedByADS = true;\n          } else {\n            out.isCreatedByOthers = true;\n          }\n\n          if (rec.idx > -1) {\n            out.isKnownToADS = true;\n          }\n\n          out = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({}, out, rec);\n        }\n      };\n\n      var ids = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pick(adsWork, 'identifier', 'bibcode', 'doi', 'alternate_bibcode');\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(ids, function (value, key) {\n        if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(value)) {\n          underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(value, updateRecord);\n        } else {\n          updateRecord(value, key, out);\n        }\n      });\n\n      return out;\n    };\n\n    if (this.needsUpdate()) {\n      this.updateDatabase().done(function () {\n        dd.resolve(getRecordMetaData(adsWork));\n      }).fail(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(dd.reject, dd));\n    } else {\n      dd.resolve(getRecordMetaData(adsWork));\n    }\n\n    return dd.promise();\n  },\n\n  /**\n   * Determines if the database needs to be updated.  It may, if there have\n   * been updates/deletes or if the internal timeout fired.\n   *\n   * @returns {boolean}\n   */\n  needsUpdate: function needsUpdate() {\n    return this.dirty;\n  },\n  setDirty: function setDirty() {\n    this.dirty = true;\n  },\n  setClean: function setClean() {\n    this.dirty = false;\n  },\n  hardenedInterface: {\n    hasAccess: 'boolean indicating access to ORCID Api',\n    getUserProfile: 'get user profile',\n    getUserBio: 'get user bio',\n    signIn: 'login',\n    signOut: 'logout',\n    getADSUserData: '',\n    setADSUserData: '',\n    getRecordInfo: 'provides info about a document',\n    addWork: 'add a new orcid work',\n    deleteWork: 'remove an entry from orcid',\n    updateWork: 'update an orcid work',\n    getWork: 'get an orcid work',\n    getWorks: 'get an array of orcid works'\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(OrcidApi.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_5__[\"default\"].BeeHive);\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(OrcidApi.prototype, js_mixins_hardened__WEBPACK_IMPORTED_MODULE_10__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (OrcidApi);\n\n//# sourceURL=webpack://bumblebee/./src/js/modules/orcid/orcid_api.js?");

/***/ }),

/***/ "./src/js/modules/orcid/profile.js":
/*!*****************************************!*\
  !*** ./src/js/modules/orcid/profile.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jsonpath__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonpath */ \"./src/libs/jsonpath.js\");\n/* harmony import */ var jsonpath__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonpath__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_modules_orcid_work__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/modules/orcid/work */ \"./src/js/modules/orcid/work.js\");\n\n\n\nvar PATHS = {\n  workSummaries: '$'\n};\n/**\n *\n * @module Profile\n * @param profile\n * @constructor\n */\n\nvar Profile = function Profile(profile) {\n  this._root = profile || {};\n  this.works = [];\n  /**\n   * search profile for value at specified path\n   *\n   * @param {String} path - path to search\n   * @returns {*} value found at path\n   */\n\n  this.get = function (path) {\n    var val = jsonpath__WEBPACK_IMPORTED_MODULE_1___default().query(this._root, path);\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEmpty(val)) {\n      return null;\n    }\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(val) && val.length <= 1) {\n      return val[0];\n    }\n\n    return val;\n  };\n  /**\n   * Gets all the work summaries from the profile\n   * Shallow (only grabs the first entry)\n   *\n   * @returns {Work[]} - the array of Work summaries\n   */\n\n\n  this.getWorks = function () {\n    return this.works;\n  };\n  /**\n   * Set the profile works\n   *\n   * @param {*} works\n   */\n\n\n  this.setWorks = function (works) {\n    this.works = works;\n    return this;\n  };\n  /**\n   * Convenience method for generating an ADS response object\n   * this can then be used to update the pagination of lists of orcid works\n   *\n   * @returns {{\n   *  responseHeader: {\n   *    params: {\n   *      orcid: String,\n   *      firstName: String,\n   *      lastName: String\n   *    }\n   *  },\n   *  response: {\n   *    numFound: Number,\n   *    start: Number,\n   *    docs: (Object[])\n   *  }\n   * }}\n   */\n\n\n  this.toADSFormat = function () {\n    var docs = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sortBy(this.getWorks(), function (w) {\n      return w.getTitle();\n    });\n\n    docs = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(docs, function (d) {\n      return d.toADSFormat();\n    });\n    return {\n      responseHeader: {\n        params: {}\n      },\n      response: {\n        numFound: docs.length,\n        start: 0,\n        docs: docs\n      }\n    };\n  }; // generate getters for each path on PATHS\n\n\n  underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].reduce(PATHS, function (obj, p, k) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(k) && k.slice) {\n      var prop = k[0].toUpperCase() + k.slice(1);\n      obj['get' + prop] = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].partial(obj.get, p);\n    }\n\n    return obj;\n  }, this); // to maintain old behavior, make sure works is filled when the profile is created\n\n\n  this.works = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(this.getWorkSummaries(), function (w) {\n    return new js_modules_orcid_work__WEBPACK_IMPORTED_MODULE_2__[\"default\"](w);\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Profile);\n\n//# sourceURL=webpack://bumblebee/./src/js/modules/orcid/profile.js?");

/***/ }),

/***/ "./src/js/modules/orcid/work.js":
/*!**************************************!*\
  !*** ./src/js/modules/orcid/work.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jsonpath__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonpath */ \"./src/libs/jsonpath.js\");\n/* harmony import */ var jsonpath__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonpath__WEBPACK_IMPORTED_MODULE_1__);\n\n\nvar ADSPATHS = {\n  status: '$.status',\n  title: '$.title',\n  publicationDateMonth: '$.pubmonth',\n  publicationDateYear: '$.pubyear',\n  lastModifiedDate: '$.updated',\n  sourceName: '$.source',\n  putCode: '$.putcode',\n  identifier: '$.identifier'\n};\nvar ORCIDPATHS = {\n  createdDate: '$[\"created-date\"].value',\n  lastModifiedDate: '$[\"last-modified-date\"].value',\n  sourceOrcidIdUri: '$.source[\"source-orcid\"].uri',\n  sourceOrcidIdPath: '$.source[\"source-orcid\"].path',\n  sourceOrcidIdHost: '$.source[\"source-orcid\"].host',\n  sourceClientIdUri: '$.source[\"source-client-id\"].uri',\n  sourceClientIdPath: '$.source[\"source-client-id\"].path',\n  sourceClientIdHost: '$.source[\"source-client-id\"].host',\n  sourceName: '$.source[\"source-name\"].value',\n  putCode: '$[\"put-code\"]',\n  path: '$.path',\n  title: '$[\"title\"].title.value',\n  subtitle: '$[\"title\"].subtitle.value',\n  translatedTitle: '$[\"title\"][\"translated-title\"].value',\n  translatedTitleLang: '$[\"title\"][\"translated-title\"][\"language-code\"]',\n  journalTitle: '$[\"journal-title\"].value',\n  shortDescription: '$[\"short-description\"]',\n  citationType: '$.citation[\"citation-type\"]',\n  citationValue: '$.citation[\"citation-value\"]',\n  type: '$.type',\n  publicationDateYear: '$[\"publication-date\"].year.value',\n  publicationDateMonth: '$[\"publication-date\"].month.value',\n  publicationDateDay: '$[\"publication-date\"].day.value',\n  publicationDateMedia: '$[\"publication-date\"][\"media-type\"]',\n  url: '$.url.value',\n  contributorOrcidUri: '$[\"contributors\"].contributor..[\"contributor-orcid\"].uri',\n  contributorOrcidPath: '$[\"contributors\"].contributor..[\"contributor-orcid\"].path',\n  contributorOrcidHost: '$[\"contributors\"].contributor..[\"contributor-orcid\"].host',\n  contributorName: '$[\"contributors\"].contributor..[\"credit-name\"].value',\n  contributorEmail: '$[\"contributors\"].contributor..[\"contributor-email\"].value',\n  contributorAttributes: '$[\"contributors\"].contributor..[\"contributor-attributes\"]',\n  contributorSequence: '$[\"contributors\"].contributor..[\"contributor-attributes\"][\"contributor-sequence\"]',\n  contributorRole: '$[\"contributors\"].contributor..[\"contributor-attributes\"][\"contributor-role\"]',\n  externalIdValue: '$[\"external-ids\"][\"external-id\"]..[\"external-id-value\"]',\n  externalIdType: '$[\"external-ids\"][\"external-id\"]..[\"external-id-type\"]',\n  externalIdUrl: '$[\"external-ids\"][\"external-id\"]..[\"external-id-url\"]',\n  externalIdRelationship: '$[\"external-ids\"][\"external-id\"]..[\"external-id-relationship\"]',\n  country: '$.country.value',\n  visibility: '$.visibility.value',\n  identifier: '$.identifier'\n};\n/**\n * Convenience class that allows easy conversion between ADS and ORCiD works.\n * @module Work\n * @param work\n * @param useOrcidPaths\n * @constructor\n */\n\nvar Work = function Work(work, useOrcidPaths) {\n  work = work || {};\n  this.useOrcidPaths = useOrcidPaths; // find the inner summary as the root\n\n  this._root = work;\n  this.sources = [];\n  /**\n   * get the sources array\n   * if the array is empty, it returns an array containing the single source name\n   *\n   * @returns {Array} - the sources\n   */\n\n  this.getSources = function () {\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEmpty(this.sources)) {\n      return [this.getSourceName()];\n    }\n\n    return this.sources;\n  };\n  /**\n   * Set the sources array\n   *\n   * @param {Array} sources\n   * @returns {Array} - the sources\n   */\n\n\n  this.setSources = function (sources) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(sources)) {\n      this.sources = sources;\n    }\n\n    return this.sources;\n  };\n  /**\n   * Get the value at path\n   *\n   * @param {string} path - path on _root element to find\n   * @returns {*} - value found at path\n   */\n\n\n  this.get = function (path) {\n    var val = jsonpath__WEBPACK_IMPORTED_MODULE_1___default().query(this._root, path);\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEmpty(val)) {\n      return null;\n    }\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(val) && val.length <= 1) {\n      return val[0];\n    }\n\n    return val;\n  };\n  /**\n   * Returns the generated ORCiD work from the current _root object.\n   * The object will be based on the paths in ADSPATHS\n   *\n   * @returns {*} - ORCiD formatted object\n   */\n\n\n  this.getAsOrcid = function () {\n    return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].reduce(ORCIDPATHS, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function (res, p) {\n      var val = this.get(p);\n\n      if (val) {\n        if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(val)) {\n          underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(val, function (v, i) {\n            jsonpath__WEBPACK_IMPORTED_MODULE_1___default().value(res, p.replace('..', '[' + i + ']'), v);\n          });\n        } else {\n          jsonpath__WEBPACK_IMPORTED_MODULE_1___default().value(res, p, val);\n        }\n      }\n\n      return res;\n    }, this), {});\n  };\n  /**\n   * Creates an ADS formatted object\n   *\n   * @returns {*} - ADS formatted object\n   */\n\n\n  this.toADSFormat = function () {\n    var ids;\n\n    if (this.useOrcidPaths) {\n      ids = this.getExternalIds();\n\n      if (ids.doi) {\n        ids.doi = [ids.doi];\n      }\n\n      ids.identifier = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].values(ids)[0];\n    }\n\n    return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({}, {\n      title: [this.getTitle()],\n      formattedDate: this.getFormattedPubDate(),\n      source_name: this.getSources().join('; '),\n      identifier: this.getIdentifier(),\n      _work: this\n    }, ids);\n  };\n  /**\n   * Creates an object containing all external ids\n   * @example\n   * { bibcode: [\"2018CNSNS..56..270Q\"], doi: [...] }\n   *\n   * @returns {Object} - object containing external ids\n   */\n\n\n  this.getExternalIds = function () {\n    var types = this.getExternalIdType();\n    var values = this.getExternalIdValue();\n    types = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(types) ? types : [types];\n    values = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(values) ? values : [values];\n\n    if (types.length !== values.length) {\n      return {};\n    }\n\n    return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].reduce(types, function (res, t, i) {\n      res[t] = values[i];\n      return res;\n    }, {});\n  };\n  /**\n   * Format publication date\n   *\n   * @returns {string} - formatted pub date\n   */\n\n\n  this.getFormattedPubDate = function () {\n    var year = this.getPublicationDateYear() || '????';\n    var month = this.getPublicationDateMonth() || '??';\n    return year + '/' + month;\n  }; // get correct set of paths based on options\n\n\n  var paths = this.useOrcidPaths ? ORCIDPATHS : ADSPATHS; // create getters for each of the PATHS\n\n  underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].reduce(paths, function (obj, p, k) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(k) && k.slice) {\n      var prop = k[0].toUpperCase() + k.slice(1);\n      obj['get' + prop] = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].partial(obj.get, p);\n    }\n\n    return obj;\n  }, this);\n};\n/**\n * Creates an ORCiD Work from an ADS record.\n *\n * @static\n * @param {Object} adsWork - the ads record\n * @param {Number} [putCode] putCode - putcode to apply to work\n * @returns {Object} - the ORCiD work\n */\n\n\nWork.adsToOrcid = function (adsWork, putCode) {\n  var ads = {\n    pubdate: '$.pubdate',\n    abstract: '$.abstract',\n    bibcode: '$.bibcode',\n    pub: '$.pub',\n    doi: '$.doi[0]',\n    author: '$.author[*]',\n    title: '$.title[0]',\n    type: '$.doctype',\n    all_ids: '$.all_ids'\n  };\n\n  var put = function put(obj, p, val) {\n    if (val) {\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(val)) {\n        underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(val, function (v, i) {\n          jsonpath__WEBPACK_IMPORTED_MODULE_1___default().value(obj, p.replace('..', '[' + i + ']'), v);\n        });\n      } else {\n        jsonpath__WEBPACK_IMPORTED_MODULE_1___default().value(obj, p, val);\n      }\n    }\n\n    return obj;\n  };\n\n  var get = function get(path) {\n    var val = jsonpath__WEBPACK_IMPORTED_MODULE_1___default().query(adsWork, path);\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEmpty(val)) {\n      return null;\n    }\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(val) && val.length <= 1) {\n      return val[0] || '';\n    }\n\n    return val || '';\n  };\n\n  var work = {};\n\n  var worktype = function worktype(adsType) {\n    var oType = {\n      article: 'JOURNAL_ARTICLE',\n      inproceedings: 'CONFERENCE_PAPER',\n      abstract: 'CONFERENCE_ABSTRACT',\n      eprint: 'WORKING_PAPER',\n      phdthesis: 'DISSERTATION',\n      techreport: 'RESEARCH_TECHNIQUE',\n      inbook: 'BOOK_CHAPTER',\n      circular: 'RESEARCH_TOOL',\n      misc: 'OTHER',\n      book: 'BOOK',\n      proceedings: 'BOOK',\n      bookreview: 'BOOK_REVIEW',\n      erratum: 'JOURNAL_ARTICLE',\n      proposal: 'OTHER',\n      newsletter: 'NEWSLETTER_ARTICLE',\n      catalog: 'DATA_SET',\n      intechreport: 'RESEARCH_TECHNIQUE',\n      mastersthesis: 'DISSERTATION',\n      obituary: 'OTHER',\n      pressrelease: 'OTHER',\n      software: 'RESEARCH_TECHNIQUE',\n      talk: 'LECTURE_SPEECH'\n    };\n    return oType[adsType] || 'JOURNAL_ARTICLE';\n  };\n\n  try {\n    var exIds = {\n      types: [],\n      values: [],\n      relationships: []\n    }; // handle doi or bibcode not existing\n\n    var bib = get(ads.bibcode);\n    var doi = get(ads.doi);\n\n    if (bib) {\n      exIds.types.push('bibcode');\n      exIds.values.push(bib);\n      exIds.relationships.push('SELF');\n    }\n\n    if (doi) {\n      exIds.types.push('doi');\n      exIds.values.push(doi);\n      exIds.relationships.push('SELF');\n    }\n\n    var all_ids = get(ads.all_ids);\n    var arxiv = false;\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(all_ids)) {\n      arxiv = all_ids.find(function (element) {\n        return element.toLowerCase().startsWith('arxiv');\n      });\n    }\n\n    if (arxiv) {\n      arxiv = arxiv.substr(6);\n      exIds.types.push('arxiv');\n      exIds.values.push(arxiv);\n      exIds.relationships.push('SELF');\n    }\n\n    put(work, ORCIDPATHS.publicationDateYear, get(ads.pubdate).split('-')[0]);\n\n    if (get(ads.pubdate).split('-')[1] === '00') {\n      put(work, ORCIDPATHS.publicationDateMonth, null);\n    } else {\n      put(work, ORCIDPATHS.publicationDateMonth, get(ads.pubdate).split('-')[1]);\n    }\n\n    put(work, ORCIDPATHS.shortDescription, get(ads.abstract).slice(0, 4997) + '...');\n    put(work, ORCIDPATHS.externalIdType, exIds.types);\n    put(work, ORCIDPATHS.externalIdValue, exIds.values);\n    put(work, ORCIDPATHS.externalIdRelationship, exIds.relationships);\n    put(work, ORCIDPATHS.journalTitle, get(ads.pub));\n    put(work, ORCIDPATHS.type, worktype(get(ads.type)));\n    var author = get(ads.author);\n    author = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(author) ? author : [author];\n    put(work, ORCIDPATHS.contributorName, author);\n\n    var roles = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(author, function () {\n      return 'AUTHOR';\n    });\n\n    put(work, ORCIDPATHS.contributorRole, roles);\n    put(work, ORCIDPATHS.title, get(ads.title));\n\n    if (putCode) {\n      put(work, ORCIDPATHS.putCode, putCode);\n    }\n  } catch (e) {\n    return null;\n  }\n\n  return work;\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Work);\n\n//# sourceURL=webpack://bumblebee/./src/js/modules/orcid/work.js?");

/***/ }),

/***/ "./src/js/page_managers/controller.js":
/*!********************************************!*\
  !*** ./src/js/page_managers/controller.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var hbs_js_page_managers_templates_results_page_layout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! hbs!js/page_managers/templates/results-page-layout */ \"./src/js/page_managers/templates/results-page-layout.html\");\n/* harmony import */ var hbs_js_page_managers_templates_results_page_layout__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(hbs_js_page_managers_templates_results_page_layout__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var hbs_js_page_managers_templates_results_control_row__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! hbs!js/page_managers/templates/results-control-row */ \"./src/js/page_managers/templates/results-control-row.html\");\n/* harmony import */ var hbs_js_page_managers_templates_results_control_row__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(hbs_js_page_managers_templates_results_control_row__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var js_page_managers_three_column_view__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/page_managers/three_column_view */ \"./src/js/page_managers/three_column_view.js\");\n/* harmony import */ var js_page_managers_view_mixin__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/page_managers/view_mixin */ \"./src/js/page_managers/view_mixin.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n\n\n\n\n\n\n\n\n\nvar PRIORITY_WIDGETS = ['ShowAbstract'];\nvar PageManagerController = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_5__[\"default\"].extend({\n  initialize: function initialize(options) {\n    this.widgets = {};\n    this.widgetDoms = {};\n    this.initialized = false;\n    this.widgetId = null;\n    this.assembled = false;\n\n    underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(this, underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].pick(options, ['debug', 'widgetId']));\n  },\n\n  /**\n   * Necessary step: during activation we'll collect list of widgets\n   * that were referenced by the template (and store them for future\n   * reference)\n   *\n   * @param beehive\n   */\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n    this.debug = beehive.getDebug(); // XXX:rca - think of st better\n\n    this.view = this.createView({\n      debug: this.debug,\n      widgets: this.widgets\n    });\n  },\n  setWidgetId: function setWidgetId(n) {\n    this.widgetId = n;\n  },\n\n  /**\n   * Creates the view: the pagemanger view (from the template\n   * that references widgets)\n   *\n   * @param options\n   * @returns {ThreeColumnView}\n   */\n  createView: function createView(options) {\n    return new js_page_managers_three_column_view__WEBPACK_IMPORTED_MODULE_6__[\"default\"](options);\n  },\n\n  /**\n   * Render the widgets and append them inside the appropriate places inside the\n   * template. This happens only 1x during the lifetime of the page manager\n   *\n   * @param app\n   */\n  assemble: function assemble(app) {\n    var defer = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n\n    if (this.assembled) {\n      defer.resolve(this.view.el);\n      return defer.promise();\n    }\n\n    this.assembled = true;\n    this.view.render();\n    var self = this;\n    var el;\n\n    underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(self.widgetDoms, self.getWidgetsFromTemplate(self.view.$el));\n\n    var promises = [];\n    var domsToRender = {};\n\n    underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].each(self.widgetDoms, function (widgetDom, widgetName) {\n      if (!app.hasWidget(widgetName)) {\n        delete self.widgetDoms[widgetName];\n        delete self.widgets[widgetName];\n        return;\n      }\n\n      var promise = app._getWidget(widgetName).done(function (widget) {\n        if (self.persistentWidgets && self.persistentWidgets.indexOf(widgetName) > -1) {\n          // this increments the counter so the widget won't be de-referenced when this\n          // page manager is disassembled\n          app.incrRefCount('widget', widgetName);\n        }\n\n        if (widget) {\n          var doRender = function doRender() {\n            // in case the user passed data params on the dom element,\n            // create props on the widget\n            underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assign(widget, {\n              componentParams: jquery__WEBPACK_IMPORTED_MODULE_0___default()(widgetDom).data()\n            });\n\n            var $el = jquery__WEBPACK_IMPORTED_MODULE_0___default()('*[data-widget=\"' + widgetName + '\"]');\n            var content = $el.length > 0 ? $el.html().trim() : '';\n\n            if (window.__PRERENDERED && widget.view && PRIORITY_WIDGETS.indexOf(widgetName) > -1 && $el.length > 0 && content.length > 0) {\n              if (typeof widget.view.handlePrerenderedContent === 'function') {\n                widget.view.handlePrerenderedContent(content, $el);\n              }\n\n              window.__PRERENDERED = false;\n            } else {\n              el = widget.getEl ? widget.getEl() : widget.render().el;\n              domsToRender[widgetName] = el;\n            }\n          }; // maybe it is a page-manager (this is a security hole though!)\n\n\n          widget.assemble ? widget.assemble(app).done(doRender) : doRender();\n          self.widgets[widgetName] = widget;\n        }\n      });\n\n      promises.push(promise);\n    }, this);\n\n    jquery__WEBPACK_IMPORTED_MODULE_0___default().when.apply((jquery__WEBPACK_IMPORTED_MODULE_0___default()), promises).then(function () {\n      // wait until everything has assembled before swapping out doms\n      underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].forEach(domsToRender, function (v, k) {\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()(self.widgetDoms[k]).html(v);\n      });\n\n      defer.resolve();\n    }).fail(function () {\n      console.error('Generic error - we were not successul in assembling page');\n      if (arguments.length) console.error(arguments);\n      defer.reject();\n    });\n    return defer.promise();\n  },\n  disAssemble: function disAssemble(app) {\n    underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].each(underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].keys(this.widgets), function (widgetName) {\n      var widget = this.widgets[widgetName];\n      if (widget.disAssemble) widget.disAssemble();\n      app.returnWidget(widgetName);\n\n      if (!app._isBarbarianAlive('widget:' + widgetName)) {\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()(this.widgetDoms[widgetName]).empty();\n      } else {\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()(this.widgetDoms[widgetName]).detach();\n      }\n\n      delete this.widgets[widgetName];\n      delete this.widgetDoms[widgetName];\n    }, this);\n\n    this.assembled = false;\n  },\n\n  /**\n   * Display the widgets that are under our control (and hide all the rest)\n   *\n   * @param pageName\n   * @returns {exports.el|*|queryBuilder.el|p.el|AppView.el|view.el}\n   */\n  show: function show(pageName) {\n    var self = this;\n\n    if (!pageName) {\n      this.showAll();\n    } else {\n      this.hideAll(); // show just those that are requested + always show alerts widget\n\n      var args = [].slice.apply(arguments);\n\n      underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].each(args, function (widgetName) {\n        if (self.widgets[widgetName]) {\n          var widget = self.widgets[widgetName]; // don't call render each time or else we\n          // would have to re-delegate widget events\n\n          var $wcontainer = self.view.$el.find('[data-widget=\"' + widgetName + '\"]');\n\n          if ($wcontainer.length) {\n            var d = $wcontainer.data('debug');\n\n            if (d !== undefined && d && !self.debug) {\n              return; // skip widgets that are there only for debugging\n            }\n\n            $wcontainer.append(widget.el ? widget.el : widget.view.el); // set data props from the container on the widget\n\n            underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assign(widget, {\n              componentParams: $wcontainer.data()\n            });\n\n            try {\n              self.widgets[widgetName].triggerMethod('show');\n            } catch (e) {\n              console.error('Error when displaying widget: ' + widgetName, e.message, e.stack);\n            }\n          } else {\n            console.warn('Cannot insert widget: ' + widgetName + ' (no selector [data-widget=\"' + widgetName + '\"])');\n          }\n        } else if (self.debug) console.error('Cannot show widget: ' + widgetName + '(because, frankly... there is no such widget there!)');\n      });\n    }\n\n    this.triggerMethod('show');\n    return this.view;\n  },\n  hideAll: function hideAll() {\n    // hide all widgets that are under our control\n    underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].each(this.widgets, function (w) {\n      if (w.noDetach) return;\n\n      if ('detach' in w && underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isFunction(w.detach)) {\n        w.detach();\n      } else if (w.view && w.view.$el) {\n        w.view.$el.detach();\n      } else if (w.$el) {\n        w.$el.detach();\n      }\n    });\n\n    return this.view;\n  },\n  showAll: function showAll() {\n    var self = this; // show just those that are requested\n\n    underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].each(underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].keys(self.widgets), function (widgetName) {\n      var widget = self.widgets[widgetName]; // don't call render each time or else we\n      // would have to re-delegate widget events\n\n      var $wcontainer = self.view.$el.find('[data-widget=\"' + widgetName + '\"]');\n      $wcontainer.append(widget.el ? widget.el : widget.view.el); // set data props from the container on the widget\n\n      underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assign(widget, {\n        componentParams: $wcontainer.data()\n      });\n\n      self.widgets[widgetName].triggerMethod('show');\n    });\n\n    return this.view;\n  },\n\n  /**\n   * broadcast the event to all other managed widgets\n   * (call trigger on them)\n   */\n  broadcast: function broadcast() {\n    var args = arguments;\n\n    underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].each(this.widgets, function (widget, widgetName) {\n      widget.trigger.apply(widget, args);\n    }, this);\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(PageManagerController.prototype, js_page_managers_view_mixin__WEBPACK_IMPORTED_MODULE_7__[\"default\"], js_mixins_dependon__WEBPACK_IMPORTED_MODULE_8__[\"default\"].BeeHive, {\n  // override the pubsub - we give every child the same (hardened)\n  // instance of pubsub\n  getPubSub: function getPubSub() {\n    if (this._ps && this.hasPubSub()) return this._ps;\n    this._ps = this.getBeeHive().getHardenedInstance().getService('PubSub');\n    return this._ps;\n  }\n});\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (PageManagerController);\n\n//# sourceURL=webpack://bumblebee/./src/js/page_managers/controller.js?");

/***/ }),

/***/ "./src/js/page_managers/master.js":
/*!****************************************!*\
  !*** ./src/js/page_managers/master.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_page_managers_controller__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/page_managers/controller */ \"./src/js/page_managers/controller.js\");\n/* harmony import */ var hbs_js_page_managers_templates_aria_announcement__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! hbs!js/page_managers/templates/aria-announcement */ \"./src/js/page_managers/templates/aria-announcement.html\");\n/* harmony import */ var hbs_js_page_managers_templates_aria_announcement__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(hbs_js_page_managers_templates_aria_announcement__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var hbs_js_page_managers_templates_master_page_manager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! hbs!js/page_managers/templates/master-page-manager */ \"./src/js/page_managers/templates/master-page-manager.html\");\n/* harmony import */ var hbs_js_page_managers_templates_master_page_manager__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(hbs_js_page_managers_templates_master_page_manager__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/*\n * Master manager is a simple widget which keeps track of what is\n * inside DOM - and on command swaps/adds/removes the subordinate\n * page managers (plus gives them commands on what to display).\n *\n * Page managers will be discovered automatically, from the\n * application object. But we need to know where in the page\n * should the managers be inserted.\n *\n * */\n\n\n\n\n\n\n\nvar WidgetData = Backbone.Model.extend({\n  defaults: function defaults() {\n    return {\n      id: undefined,\n      // widgetId\n      isSelected: false,\n      object: undefined,\n      options: undefined // options used for the last show() call\n\n    };\n  }\n});\nvar WidgetCollection = Backbone.Collection.extend({\n  model: WidgetData,\n  selectOne: function selectOne(widgetId) {\n    var s = null;\n    this.each(function (m) {\n      if (m.id == widgetId) {\n        s = m;\n      } else {\n        m.set('isSelected', false, {\n          silent: true\n        });\n      }\n    });\n    s.set('isSelected', true);\n  }\n});\nvar WidgetModel = Backbone.Model.extend({\n  defaults: function defaults() {\n    return {\n      name: undefined,\n      numCalled: 0,\n      numAttached: 0,\n      ariaAnnouncement: undefined\n    };\n  }\n});\nvar MasterView = marionette__WEBPACK_IMPORTED_MODULE_5___default().ItemView.extend({\n  className: 's-master-page-manager',\n  constructor: function constructor(options) {\n    options = options || {};\n    if (!options.collection) options.collection = new WidgetCollection();\n    if (!options.model) options.model = new WidgetModel();\n    options.template = (hbs_js_page_managers_templates_master_page_manager__WEBPACK_IMPORTED_MODULE_4___default());\n    marionette__WEBPACK_IMPORTED_MODULE_5___default().ItemView.prototype.constructor.call(this, options);\n  },\n  // transition between page managers\n  changeManager: function changeManager() {\n    var model = this.collection.findWhere({\n      isSelected: true\n    }); // call the subordinate page-manager\n\n    var res = model.attributes.object.show.apply(model.attributes.object, model.attributes.options); // detach previous controller\n\n    this.$('.dynamic-container').children().detach();\n    this.$('.dynamic-container').append(res.$el);\n    model.attributes.numAttach += 1; // scroll to top\n\n    $(document.documentElement).scrollTop(0); // and fix the search bar back in its default spot\n\n    $('.s-search-bar-full-width-container').removeClass('s-search-bar-motion');\n    $('.s-quick-add').removeClass('hidden');\n  },\n  // transition widgets within a manager\n  changeWithinManager: function changeWithinManager() {\n    var model = this.collection.findWhere({\n      isSelected: true\n    });\n    model.attributes.object.show.apply(model.attributes.object, model.attributes.options);\n    model.attributes.numAttach += 1;\n  }\n});\nvar MasterPageManager = js_page_managers_controller__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend({\n  initialize: function initialize(options) {\n    options = options || {};\n    this.view = new MasterView(options);\n    this.collection = this.view.collection;\n    this.model = this.view.model;\n    js_page_managers_controller__WEBPACK_IMPORTED_MODULE_2__[\"default\"].prototype.initialize.apply(this, arguments);\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n    var pubsub = this.getPubSub();\n    pubsub.subscribe(pubsub.ARIA_ANNOUNCEMENT, this.handleAriaAnnouncement);\n  },\n  assemble: function assemble(app) {\n    this.setApp(app);\n    return js_page_managers_controller__WEBPACK_IMPORTED_MODULE_2__[\"default\"].prototype.assemble.call(this, app);\n  },\n  show: function show(pageManagerName, options, context) {\n    var defer = $.Deferred();\n    var app = this.getApp();\n\n    if (!this.collection.find({\n      id: pageManagerName\n    })) {\n      this.collection.add({\n        id: pageManagerName\n      });\n    }\n\n    var pageManagerModel = this.collection.find({\n      id: pageManagerName\n    });\n    var self = this;\n\n    var activatePage = function activatePage(pageManagerWidget) {\n      // it's a new page\n      if (!pageManagerModel.get('isSelected')) {\n        pageManagerModel.set({\n          options: options,\n          object: pageManagerWidget\n        });\n        self.collection.selectOne(pageManagerName);\n        self.view.changeManager();\n      } else {\n        // it's within a page\n        pageManagerModel.set({\n          options: options,\n          object: pageManagerWidget\n        }); // it's already selected, trigger a change within the manager\n\n        self.view.changeWithinManager();\n      }\n\n      if (context && pageManagerWidget.provideContext) {\n        pageManagerWidget.provideContext.call(pageManagerWidget, context);\n      }\n\n      var previousPMName = self.currentChild;\n      self.currentChild = pageManagerName; // disassemble the old one (behind the scenes)\n\n      if (previousPMName && previousPMName != pageManagerName) {\n        var oldPM = self.collection.find({\n          id: previousPMName\n        });\n\n        if (oldPM && oldPM.get('object')) {\n          oldPM.set('numDetach', oldPM.get('numDetach') + 1); // XXX:rca - widgets are disappearing, probably must call incrCounter separately\n          // oldPM.get('object').disAssemble(app);\n        }\n      }\n\n      self.getPubSub().publish(self.getPubSub().ARIA_ANNOUNCEMENT, pageManagerName);\n      defer.resolve();\n    }; // if the model does not already reference the actual manager widget, add it now\n\n\n    var promise;\n\n    if (pageManagerModel.get('object')) {\n      activatePage(pageManagerModel.get('object'));\n      return defer.promise();\n    }\n\n    app._getWidget(pageManagerName).then(function (pageManagerWidget) {\n      // will throw error if not there\n      pageManagerModel.set('object', pageManagerWidget);\n\n      if (!pageManagerWidget) {\n        console.error('unable to find page manager: ' + pageManagerName);\n      }\n\n      if (pageManagerWidget.assemble) {\n        // assemble the new page manager (while the old one is still in place)\n        pageManagerWidget.assemble(app).then(function () {\n          activatePage(pageManagerWidget);\n        });\n      } else {\n        console.error('eeeek, ' + pageManagerName + ' has no assemble() method!');\n        defer.reject();\n      }\n    });\n\n    return defer.promise();\n  },\n  // used by discovery mediator\n  getCurrentActiveChild: function getCurrentActiveChild() {\n    return this.collection.get(this.currentChild).get('object'); // brittle?\n  },\n\n  /**\n   * Return the instances that are under our control and are\n   * not active any more\n   */\n  disAssemble: function disAssemble() {\n    _.each(this.collection.models, function (model) {\n      if (model.attributes.isSelected) {\n        var pManager = model.get('object');\n\n        if (pManager.disAssemble) {\n          pManager.disAssemble(this.getApp());\n        } else if (pManager.destroy) {\n          pManager.destroy();\n        } else {\n          throw new Error('Contract breach, no way to get ridd of the widget/page manager');\n        }\n      }\n\n      model.set({\n        isSelected: false,\n        object: null\n      });\n      this.assembled = false;\n    }, this);\n  },\n  handleAriaAnnouncement: function handleAriaAnnouncement(msg) {\n    // template will match the page name with the proper message\n    // this doesn't work using voiceover when it's inside a div container for some infuriating reason,\n    // the skip to link becomes unfocusable\n    $('a#skip-to-main-content').remove();\n    $('div#aria-announcement-container').remove();\n    $('#app-container').before(hbs_js_page_managers_templates_aria_announcement__WEBPACK_IMPORTED_MODULE_3___default()({\n      page: msg\n    }));\n  }\n});\n\n_.extend(MasterPageManager.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_6__[\"default\"].App);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (MasterPageManager);\n\n//# sourceURL=webpack://bumblebee/./src/js/page_managers/master.js?");

/***/ }),

/***/ "./src/js/page_managers/one_column_view.js":
/*!*************************************************!*\
  !*** ./src/js/page_managers/one_column_view.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n\n\nvar OneColumnView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  initialize: function initialize(options) {\n    var options = options || {};\n    this.widgets = options.widgets;\n  },\n  onRender: function onRender() {\n    var self = this; // var widgets = this.getWidgetsFromTemplate(this.$el,\n    //  !Marionette.getOption(this, \"debug\"));\n    // _.extend(this.widgets, widgets);\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (OneColumnView);\n\n//# sourceURL=webpack://bumblebee/./src/js/page_managers/one_column_view.js?");

/***/ }),

/***/ "./src/js/page_managers/templates/aria-announcement.html":
/*!***************************************************************!*\
  !*** ./src/js/page_managers/templates/aria-announcement.html ***!
  \***************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"<a\\n  href=\\\"#main-content\\\"\\n  id=\\\"skip-to-main-content\\\"\\n  class=\\\"sr-only sr-only-focusable\\\"\\n  data-dont-handle=\\\"true\\\"\\n  >Skip to main content</a\\n>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \"\\n<a\\n  href=\\\"#main-content\\\"\\n  id=\\\"skip-to-main-content\\\"\\n  class=\\\"sr-only sr-only-focusable\\\"\\n  data-dont-handle=\\\"true\\\"\\n  >Skip to main content</a\\n>\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    return \" home page \";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    return \" search results page \";\n},\"9\":function(container,depth0,helpers,partials,data) {\n    return \" article abstract page \";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"page\") : depth0),\"SearchPage\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":9,\"column\":12}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"page\") : depth0),\"DetailsPage\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":13},\"end\":{\"line\":17,\"column\":12}}})) != null ? stack1 : \"\")\n    + \"\\n<div id=\\\"aria-announcement-container\\\" role=\\\"status\\\">\\n  Now on \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"page\") : depth0),\"LandingPage\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":9},\"end\":{\"line\":20,\"column\":64}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"page\") : depth0),\"SearchPage\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":65},\"end\":{\"line\":21,\"column\":50}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"page\") : depth0),\"DetailsPage\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":51},\"end\":{\"line\":22,\"column\":39}}})) != null ? stack1 : \"\")\n    + \"\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/page_managers/templates/aria-announcement.html?");

/***/ }),

/***/ "./src/js/page_managers/templates/authentication-page-layout.html":
/*!************************************************************************!*\
  !*** ./src/js/page_managers/templates/authentication-page-layout.html ***!
  \************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"s-message-control-row\\\" id=\\\"message-control-row\\\">\\n    <div data-widget=\\\"AlertsWidget\\\"/>\\n</div>\\n<div class=\\\"row s-darker-background\\\" style=\\\"margin-right:0;\\\"\\\">\\n    <div class=\\\"col-sm-12\\\">\\n        <div data-widget=\\\"Authentication\\\"/>\\n\\n    </div>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/page_managers/templates/authentication-page-layout.html?");

/***/ }),

/***/ "./src/js/page_managers/templates/master-page-manager.html":
/*!*****************************************************************!*\
  !*** ./src/js/page_managers/templates/master-page-manager.html ***!
  \*****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div id=\\\"navbar-container\\\">\\n  <div data-widget=\\\"NavbarWidget\\\"/>\\n</div>\\n\\n<div id=\\\"alerts-container\\\">\\n  <div data-widget=\\\"AlertsWidget\\\"/>\\n</div>\\n\\n<div id=\\\"content-container\\\">\\n  <div class=\\\"dynamic-container s-dynamic-container\\\"></div>\\n</div>\\n\\n<div id=\\\"footer-container\\\">\\n  <div data-widget=\\\"FooterWidget\\\"/>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/page_managers/templates/master-page-manager.html?");

/***/ }),

/***/ "./src/js/page_managers/templates/results-control-row.html":
/*!*****************************************************************!*\
  !*** ./src/js/page_managers/templates/results-control-row.html ***!
  \*****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"s-results-control-row-container\\\">\\n    <div class=\\\"col-sm-6\\\">\\n        <div data-widget=\\\"BreadcrumbsWidget\\\" class=\\\"s-display-inline-block\\\"/>\\n    </div>\\n\\n\\n    <div class=\\\"col-xs-12 col-sm-6\\\" style=\\\"padding-right:0; padding-left:0;\\\">\\n        <div class=\\\"s-results-action-buttons\\\">\\n            <div id=\\\"search-results-sort\\\" class=\\\"col-xs-12 col-md-5 clearfix\\\" style=\\\"margin-bottom:10px;\\\">\\n                <div data-widget=\\\"Sort\\\" class=\\\"s-display-inline-block pull-right\\\"/>\\n            </div>\\n            <div id=\\\"search-results-actions\\\" class=\\\"col-xs-12 col-md-7\\\">\\n                <div><button id=\\\"results-actions-toggle\\\" class=\\\"btn btn-primary-faded s-display-inline-block pull-right\\\">\\n                    <i class=\\\"fa fa-book\\\" alt=\\\"open actions\\\"></i> Actions\\n                </button></div>\\n                <div data-widget=\\\"VisualizationDropdown\\\" class=\\\"s-display-inline-block pull-right\\\"/>\\n                <div data-widget=\\\"ExportDropdown\\\" class=\\\"s-display-inline-block pull-right\\\"/>\\n            </div>\\n        </div>\\n    </div>\\n\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/page_managers/templates/results-control-row.html?");

/***/ }),

/***/ "./src/js/page_managers/templates/results-page-layout.html":
/*!*****************************************************************!*\
  !*** ./src/js/page_managers/templates/results-page-layout.html ***!
  \*****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div id=\\\"results-page-layout\\\" class=\\\"s-results-page-layout\\\">\\n  <div class=\\\"row s-stable-search-bar-height\\\">\\n    <div class=\\\"s-search-bar-full-width-container\\\" role=\\\"search\\\">\\n      <div class=\\\"col-xs-0 col-sm-12 col-md-2 s-back-button-container\\\">\\n        <a href=\\\"/\\\" class=\\\"back-button btn btn-sm btn-default\\\">\\n          <i class=\\\"fa fa-arrow-left\\\" aria-hidden=\\\"true\\\"></i> Start New\\n          Search</a\\n        >\\n      </div>\\n      <div\\n        class=\\\"col-xs-12 col-sm-9 col-md-7 s-search-bar-row\\\"\\n        id=\\\"search-bar-row\\\"\\n        data-widget=\\\"SearchWidget\\\"\\n      ></div>\\n    </div>\\n  </div>\\n  <div class=\\\"row s-message-control-row\\\" id=\\\"message-control-row\\\">\\n    <span data-widget=\\\"AlertsWidgetx\\\"></span>\\n  </div>\\n  <div class=\\\"row s-results-control-row\\\" id=\\\"results-control-row\\\"></div>\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-xs-12 s-dynamic-page-body\\\" id=\\\"dynamic-page-body\\\" style=\\\"overflow: hidden\\\">\\n      <div class=\\\"max-width-wrapper\\\">\\n        <div>\\n          <div\\n            class=\\\"hidden-xs col-sm-3 col-md-2 s-left-column s-results-column\\\"\\n            id=\\\"results-left-column\\\"\\n          >\\n            <h2 class=\\\"sr-only\\\">Filters for the Current Search</h2>\\n            <div class=\\\"left-col-container s-left-col-container\\\">\\n              <div data-widget=\\\"AuthorFacet\\\" />\\n              <div data-widget=\\\"DatabaseFacet\\\" />\\n              <div data-widget=\\\"RefereedFacet\\\" />\\n              <div data-widget=\\\"AffiliationFacet\\\" />\\n              <div data-widget=\\\"KeywordFacet\\\" />\\n              <div data-widget=\\\"BibstemFacet\\\" />\\n              <div data-widget=\\\"BibgroupFacet\\\" />\\n              <div data-widget=\\\"ObjectFacet\\\" />\\n              <div data-widget=\\\"NedObjectFacet\\\" />\\n              <div data-widget=\\\"DataFacet\\\" />\\n              <div data-widget=\\\"VizierFacet\\\" />\\n              <div data-widget=\\\"PubtypeFacet\\\" />\\n            </div>\\n          </div>\\n\\n          <div\\n            class=\\\"col-sm-9 col-md-7  s-results-middle-column s-results-column\\\"\\n            id=\\\"results-middle-column\\\"\\n          >\\n            <div\\n              class=\\\"main-content-container s-main-content-container\\\"\\n              id=\\\"main-content\\\"\\n              tabindex=\\\"-1\\\"\\n              role=\\\"main\\\"\\n              aria-label=\\\"container for search results and other main content\\\"\\n            >\\n              <div data-widget=\\\"Results\\\" />\\n              <div data-widget=\\\"AuthorAffiliationTool\\\" />\\n              <div data-widget=\\\"ExportWidget\\\" data-origin=\\\"results-page\\\" />\\n              <div data-widget=\\\"AuthorNetwork\\\" />\\n              <div data-widget=\\\"PaperNetwork\\\" />\\n              <div data-widget=\\\"Metrics\\\" data-allow-redirect=\\\"true\\\" />\\n              <div data-widget=\\\"BubbleChart\\\" />\\n              <div data-widget=\\\"ConceptCloud\\\" />\\n              <div data-widget=\\\"CitationHelper\\\" />\\n            </div>\\n          </div>\\n          \\n          <div id=\\\"results-right-column\\\">\\n            <div data-widget=\\\"QueryInfo\\\" class=\\\"s-right-column col-sm-3\\\" id=\\\"query-info-container\\\"/>\\n            <div\\n              class=\\\"hidden-xs col-sm-3 col-md-3 results-right-column s-right-column s-results-column\\\"\\n            >\\n              <h2 class=\\\"sr-only\\\">\\n                Additional Functionality (Information about your query, and more\\n                search filters)\\n              </h2>\\n\\n              <div data-widget=\\\"MyAdsFreeform\\\" />\\n              <div data-widget=\\\"OrcidSelector\\\" />\\n              <div data-widget=\\\"GraphTabs\\\" />\\n              <div data-widget=\\\"QueryDebugInfo\\\" data-debug=\\\"true\\\" />\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/page_managers/templates/results-page-layout.html?");

/***/ }),

/***/ "./src/js/page_managers/three_column_view.js":
/*!***************************************************!*\
  !*** ./src/js/page_managers/three_column_view.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var hbs_js_page_managers_templates_results_page_layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hbs!js/page_managers/templates/results-page-layout */ \"./src/js/page_managers/templates/results-page-layout.html\");\n/* harmony import */ var hbs_js_page_managers_templates_results_page_layout__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hbs_js_page_managers_templates_results_page_layout__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var hbs_js_page_managers_templates_results_control_row__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! hbs!js/page_managers/templates/results-control-row */ \"./src/js/page_managers/templates/results-control-row.html\");\n/* harmony import */ var hbs_js_page_managers_templates_results_control_row__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(hbs_js_page_managers_templates_results_control_row__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n\n\n\n\n\n/*\n * keeps track of the open/closed state of the three columns\n * */\n\nvar ResultsStateModel = Backbone.Model.extend({\n  defaults: function defaults() {\n    return {\n      left: 'open',\n      right: 'open',\n      user_left: null,\n      user_right: null\n    };\n  }\n});\nvar ThreeColumnView = marionette__WEBPACK_IMPORTED_MODULE_1___default().ItemView.extend({\n  initialize: function initialize(options) {\n    var options = options || {};\n    this.widgets = options.widgets;\n    this.model = new ResultsStateModel();\n  },\n  destroy: function destroy() {\n    marionette__WEBPACK_IMPORTED_MODULE_1___default().ItemView.prototype.destroy.call(this, arguments);\n  },\n  template: (hbs_js_page_managers_templates_results_page_layout__WEBPACK_IMPORTED_MODULE_2___default()),\n  modelEvents: {\n    'change:left': '_updateColumnView',\n    'change:right': '_updateColumnView'\n  },\n  events: {\n    'click .btn-expand': 'onClickToggleColumns'\n  },\n  onRender: function onRender() {\n    this.$('#results-control-row').append(hbs_js_page_managers_templates_results_control_row__WEBPACK_IMPORTED_MODULE_3___default()());\n    this.displaySearchBar(this.options.displaySearchBar);\n    this.displayControlRow(this.options.displayControlRow);\n    this.displayLeftColumn(this.options.displayLeftColumn);\n    this.displayRightColumn(this.options.displayRightColumn);\n    this.displayMiddleColumn(this.options.displayMiddleColumn);\n  },\n  onShow: function onShow() {\n    // these functions must be called every time the template is inserted\n    this.displaySearchBar(true);\n  },\n  displaySearchBar: function displaySearchBar(show) {\n    $('#search-bar-row').toggle(show === undefined ? true : show);\n  },\n  displayLeftColumn: function displayLeftColumn(show) {\n    this.$('.s-left-col-container').toggle(show === undefined ? true : show);\n  },\n  displayControlRow: function displayControlRow(show) {\n    this.$('#results-control-row').toggle(show === undefined ? true : show);\n  },\n  displayRightColumn: function displayRightColumn(show) {\n    this.$('.s-left-col-container').toggle(show === undefined ? true : show);\n  },\n  displayMiddleColumn: function displayMiddleColumn(show) {\n    this.$('.s-left-col-container').toggle(show === undefined ? true : show);\n  },\n  _returnBootstrapClasses: function _returnBootstrapClasses() {\n    var classes = this.classList;\n    var toRemove = [];\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(classes, function (c) {\n      if (c.indexOf('col-') !== -1) {\n        toRemove.push(c);\n      }\n    });\n\n    return toRemove.join(' ');\n  },\n\n  /**\n   * Method to display/hide columns, accepts object with keys:\n   *  left: true/false\n   *  right: true|false\n   *  force: true if you want to override user action (i.e. open\n   *         column, even if they changed it manually)\n   * @param options\n   */\n  showCols: function showCols(options) {\n    options = options || {\n      left: true,\n      right: true,\n      force: false\n    };\n    var keys = ['left', 'right'];\n\n    for (var i = 0; i < keys.length; i++) {\n      var k = keys[i];\n\n      if (k in options) {\n        var ul = this.model.get('user_' + k);\n\n        if (ul === null) {\n          this.model.set(k, options[k] ? 'open' : 'closed');\n        } else if (options.force) {\n          this.model.set(k, options[k] ? 'open' : 'closed');\n          this.model.set('user_' + k, null);\n        }\n      }\n    }\n  },\n  _updateColumnView: function _updateColumnView() {\n    var leftState;\n    var rightState;\n    var $leftCol;\n    var $rightCol;\n    var $middleCol;\n    leftState = this.model.get('left');\n    rightState = this.model.get('right');\n    $leftCol = this.$('#results-left-column');\n    $rightCol = this.$('#results-right-column');\n    $middleCol = this.$('#results-middle-column');\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each([['left', leftState, $leftCol], ['right', rightState, $rightCol]], function (x) {\n      if (x[1] == 'open') {\n        x[2].removeClass('hidden');\n        var $col = x[2];\n        setTimeout(function () {\n          $col.children().show(0);\n        }, 200);\n      } else {\n        x[2].addClass('hidden');\n      }\n    });\n\n    if (leftState === 'open' && rightState === 'open') {\n      $middleCol.removeClass(this._returnBootstrapClasses).addClass('col-sm-9 col-md-7');\n    } // else if (leftState === \"closed\" && rightState === \"open\") {\n    //  $middleCol.removeClass(this._returnBootstrapClasses)\n    //      .addClass(\"col-md-9 col-sm-12\")\n    // }\n    // else if (leftState === \"open\" && rightState === \"closed\") {\n    //  $middleCol.removeClass(this._returnBootstrapClasses)\n    //      .addClass(\"col-md-10 col-sm-8\")\n    // }\n    else if (leftState === 'closed' && rightState === 'closed') {\n      $middleCol.removeClass(this._returnBootstrapClasses).addClass('col-md-12 col-sm-12');\n    }\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (ThreeColumnView);\n\n//# sourceURL=webpack://bumblebee/./src/js/page_managers/three_column_view.js?");

/***/ }),

/***/ "./src/js/page_managers/toc_controller.js":
/*!************************************************!*\
  !*** ./src/js/page_managers/toc_controller.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_page_managers_controller__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/page_managers/controller */ \"./src/js/page_managers/controller.js\");\n/* harmony import */ var js_page_managers_toc_widget__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/page_managers/toc_widget */ \"./src/js/page_managers/toc_widget.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! analytics */ \"./src/js/components/analytics.js\");\n\n\n\n\n\n/*\n * need to provide a toc template for the toc view when you inherit from this\n * */\n\nvar PageManagerController = js_page_managers_controller__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend({\n  initialize: function initialize() {\n    js_page_managers_controller__WEBPACK_IMPORTED_MODULE_2__[\"default\"].prototype.initialize.apply(this, arguments); // debounce this method to keep from double navigating\n\n    if (!window.__BUMBLEBEE_TESTING_MODE__) {\n      this.onWidgetSelected = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debounce(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.onWidgetSelected, this), 100);\n    }\n  },\n  createView: function createView(options) {\n    if (this.pageConfig) {\n      return new this.pageConfig.view(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(options, {\n        template: this.pageConfig.template\n      }));\n    }\n\n    return js_page_managers_controller__WEBPACK_IMPORTED_MODULE_2__[\"default\"].prototype.createView.call(this, options);\n  },\n  assemble: function assemble(app) {\n    var defer = $.Deferred();\n\n    if (!this.navConfig) {\n      defer.reject(new Error('TOC widget is being assembled without navigation configuration (navConfig)'));\n      return defer.promise();\n    }\n\n    if (this.assembled) {\n      defer.resolve();\n      return defer.promise();\n    }\n\n    var self = this;\n    js_page_managers_controller__WEBPACK_IMPORTED_MODULE_2__[\"default\"].prototype.assemble.apply(this, arguments).done(function () {\n      var tocTemplate = marionette__WEBPACK_IMPORTED_MODULE_1___default().getOption(self, 'TOCTemplate');\n\n      if (self.TOCEvents) {\n        // initiate the TOC view\n        self.widgets.tocWidget = new js_page_managers_toc_widget__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n          template: tocTemplate,\n          events: marionette__WEBPACK_IMPORTED_MODULE_1___default().getOption(self, 'TOCEvents'),\n          navConfig: marionette__WEBPACK_IMPORTED_MODULE_1___default().getOption(self, 'navConfig')\n        });\n      } else {\n        // initiate the TOC view\n        self.widgets.tocWidget = new js_page_managers_toc_widget__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n          template: tocTemplate,\n          navConfig: marionette__WEBPACK_IMPORTED_MODULE_1___default().getOption(self, 'navConfig')\n        });\n      } // insert the TOC nav view into its slot\n\n\n      self.view.$('.nav-container').append(self.widgets.tocWidget.render().el);\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(self.widgets), function (w) {\n        self.listenTo(this.widgets[w], 'page-manager-event', underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.onPageManagerEvent, this, this.widgets[w]));\n        self.broadcast('page-manager-message', 'new-widget', w);\n      }, self);\n\n      defer.resolve();\n    });\n    return defer.promise();\n  },\n\n  /**\n   * Listens to and receives signals from managed widgets.\n   * It will discover their 'widgetId' and broadcasts the\n   * data via a page-manager-message to all widgets in the\n   * collection.\n   *\n   * @param event\n   * @param data\n   */\n  onPageManagerEvent: function onPageManagerEvent(widget, event, data) {\n    data = data || {};\n    var sender = null;\n    var widgetId = null; // try to find/identify sender\n\n    if (widget) {\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pairs(this.widgets), function (w) {\n        if (w[1] === widget) {\n          widgetId = w[0];\n          sender = w[1];\n        }\n      });\n    }\n\n    if (event == 'widget-ready' && sender !== null) {\n      data.widgetId = widgetId;\n      this.broadcast('page-manager-message', event, data);\n    } else if (event == 'widget-selected') {\n      this.onWidgetSelected.apply(this, arguments);\n    } else if (event == 'broadcast-payload') {\n      this.broadcast('page-manager-message', event, data);\n    } else if (event == 'navigate') {\n      // XXX:rca - why to almost equal events?\n      this.getPubSub().publish(this.getPubSub().NAVIGATE, data.navCommand, data.sub);\n    } else if (event == 'apply-function') {\n      // XXX:rca - to remove\n      data.func.apply(this);\n    }\n  },\n  onWidgetSelected: function onWidgetSelected(widget, event, data) {\n    var bibcode = widget.model.get('bibcode');\n    var target = data.idAttribute.toLowerCase().replace('show', '');\n    (0,analytics__WEBPACK_IMPORTED_MODULE_4__[\"default\"])('send', 'event', 'interaction', 'toc-link-followed', {\n      target: target,\n      bibcode: bibcode\n    });\n    this.broadcast('page-manager-message', 'widget-selected', data);\n    this.getPubSub().publish(this.getPubSub().NAVIGATE, data.idAttribute, data);\n  },\n  onPageManagerMessage: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].noop,\n  setActive: function setActive(widgetName, subView) {\n    // now inform the widget of the subView to show\n    if (subView && this.widgets[widgetName].setSubView instanceof Function) {\n      this.widgets[widgetName].setSubView(subView);\n    }\n\n    if (subView) {\n      widgetName = widgetName + '__' + subView;\n    }\n\n    this.widgets.tocWidget.collection.selectOne(widgetName);\n  },\n  onDestroy: function onDestroy() {\n    this.stopListening();\n    this.widgets = {};\n    this.view.destroy();\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (PageManagerController);\n\n//# sourceURL=webpack://bumblebee/./src/js/page_managers/toc_controller.js?");

/***/ }),

/***/ "./src/js/page_managers/toc_widget.js":
/*!********************************************!*\
  !*** ./src/js/page_managers/toc_widget.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_1__);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n/*\n * widget to coordinate the showing of other widgets within the framework of a TOC page manager\n * You need to provide a template with a nav that looks like this: (with the data attributes\n * corresponding to NAV EVENTS in the navigator.js file, e.g.\n *\n * this.set('ClassicSearchForm', function() {\n * app.getObject('MasterPageManager').show('LandingPage', [\"ClassicSearchForm\"]);\n * });\n *\n * MUST have a navConfig object: e.g.\n *   navConfig : {\n *   UserPreferences : {\"title\": \"User Preferences\", \"path\":\"user/settings/preferences\",\"category\":\"preferences\" },\n *    UserSettings__email : {\"title\": \"Change Email\", \"path\":\"user/settings/email\",\"category\":\"settings\"},\n *    }\n *\n *\n toc widget listens to \"new-widget\" event and, if it can find teh corresponding data in the markup,\n adds an entry to its nav\n the toc controller will call a navigate event when the toc widget emits a \"widget-selected\" event\n * */\n\nvar WidgetData = backbone__WEBPACK_IMPORTED_MODULE_0___default().Model.extend({\n  defaults: function defaults() {\n    var _ref;\n\n    return _ref = {\n      id: undefined,\n      // widgetId\n      path: undefined,\n      title: undefined,\n      showCount: false,\n      category: undefined,\n      isActive: false,\n      isSelected: false,\n      numFound: 0\n    }, _defineProperty(_ref, \"showCount\", true), _defineProperty(_ref, \"alwaysThere\", false), _ref;\n  }\n});\nvar WidgetCollection = backbone__WEBPACK_IMPORTED_MODULE_0___default().Collection.extend({\n  model: WidgetData,\n  initialize: function initialize() {\n    // trigger when one of the models is selected, this ensures that\n    // we capture any initial load (like on page load, not directly clicked)\n    this.on('change:isSelected', function (model) {\n      // only trigger if going from false -> true\n      if (model.get('isSelected')) {\n        this.trigger('widget-selected', model);\n      }\n    });\n  },\n  selectOne: function selectOne(widgetId) {\n    var s = null;\n    this.each(function (m) {\n      if (m.id == widgetId) {\n        s = m;\n      } else {\n        m.set('isSelected', false, {\n          silent: true\n        });\n      }\n    }); // make sure that `s` exists, otherwise just set it to the first element\n\n    s = s || this.first();\n    s.set('isSelected', true);\n  },\n  comparator: function comparator(m) {\n    return m.get('order');\n  }\n});\nvar WidgetModel = backbone__WEBPACK_IMPORTED_MODULE_0___default().Model.extend({\n  defaults: function defaults() {\n    return {\n      bibcode: undefined,\n      query: undefined,\n      path: undefined,\n      idAttribute: undefined\n    };\n  }\n});\nvar TocNavigationView = marionette__WEBPACK_IMPORTED_MODULE_1___default().ItemView.extend({\n  initialize: function initialize(options) {\n    options = options || {};\n    this.collection = options.collection || new WidgetCollection();\n    this.model = options.model || new WidgetModel();\n    this.on('page-manager-message', this.onPageManagerMessage); // if any of the models in the collection are selected, trigger an event here\n\n    this.listenTo(this.collection, 'widget-selected', function (model) {\n      var val = model.get('id').split('__');\n      this.model.set({\n        path: model.get('path'),\n        idAttribute: val[0],\n        subView: val.length > 1 ? val[1] : undefined\n      }); // trigger when collection selection is made\n\n      this.triggerSelection();\n    });\n\n    if (!options.template) {\n      // for testing\n      this.template = function () {\n        return '';\n      };\n    }\n  },\n  // or else controller will detach, and then never put it back\n  noDetach: true,\n  serializeData: function serializeData() {\n    var data = this.model.toJSON();\n    var col = this.collection.toJSON();\n    var groupedCollectionJSON; // if any entries from the data has a \"category\" param, group by that, otherwise, just return it\n\n    if (_.find(col, function (c) {\n      return c.category !== undefined;\n    })) {\n      groupedCollectionJSON = _.groupBy(this.collection.toJSON(), function (object) {\n        return object.category;\n      });\n      data = _.extend(data, groupedCollectionJSON);\n    } else {\n      data = _.extend(data, {\n        tabs: col\n      });\n    }\n\n    return data;\n  },\n  events: {\n    'click a': 'navigateToPage'\n  },\n  navigateToPage: function navigateToPage(e) {\n    var $t = $(e.currentTarget);\n    var idAttribute = $t.attr('data-widget-id');\n    var data = {\n      idAttribute: idAttribute\n    }; // it's inactive\n\n    if ($t.find('div').hasClass('s-nav-inactive')) {\n      return false;\n    } // it's active\n\n\n    if (idAttribute !== this.$('.s-nav-selected').attr('data-widget-id')) {\n      data.href = $t.attr('href'); // make sure only a single element is selected\n\n      this.collection.selectOne(idAttribute); // finally, close the mobile menu, which might be open\n\n      this.$el.parent('.nav-container').removeClass('show');\n      $('button.toggle-menu').html(' <i class=\"fa fa-bars\" aria-hidden=\"true\"></i> Show Menu');\n    }\n\n    return false;\n  },\n  modelEvents: {\n    'change:bibcode': 'resetActiveStates',\n    change: 'render'\n  },\n  collectionEvents: {\n    add: 'render',\n    'change:isActive': 'render',\n    'change:isSelected': 'render',\n    'change:numFound': 'render'\n  },\n\n  /*\n   every time the bibcode changes (got by subscribing to pubsub.DISPLAY_DOCUMENTS)\n   clear the collection of isactive and numfound in the models of the toc widget, so that the next view on\n   the widget will show the appropriate defaults\n   */\n  resetActiveStates: function resetActiveStates() {\n    var path = this.model.get('path');\n    this.collection.each(function (model) {\n      // if idAttr is set, then set that one as selected\n      model.set({\n        isSelected: path === model.get('path'),\n        isActive: true,\n        numFound: 0\n      });\n    }); // trigger on bibcode update\n\n    this.triggerSelection();\n  },\n  triggerSelection: function triggerSelection() {\n    // if nothing is selected, select the abstract element and return\n    if (this.collection.where({\n      isSelected: true\n    }).length === 0) {\n      return this.collection.selectOne('ShowAbstract');\n    }\n\n    var path = this.model.get('path') || 'abstract';\n    var encodedId = encodeURIComponent(this.model.get('bibcode'));\n    var data = {\n      idAttribute: this.model.get('idAttribute') || 'showAbstract',\n      subView: this.model.get('subView') || '',\n      href: 'abs/' + (encodedId || '') + '/' + path,\n      bibcode: this.model.get('bibcode')\n    };\n    this.trigger('page-manager-event', 'widget-selected', data);\n  },\n  selectDefaultNavItem: function selectDefaultNavItem() {\n    var tocConfig = marionette__WEBPACK_IMPORTED_MODULE_1___default().getOption(this, 'navConfig');\n    var found = tocConfig[0];\n\n    _.each(tocConfig, function (v, k) {\n      if (v.isSelected) {\n        found = k;\n        return false;\n      }\n    });\n\n    this.collection.selectOne(found);\n  },\n  onPageManagerMessage: function onPageManagerMessage(event, data) {\n    if (event == 'new-widget') {\n      // building the toc collection\n      var widgetId = arguments[1];\n      var tocData = marionette__WEBPACK_IMPORTED_MODULE_1___default().getOption(this, 'navConfig');\n      var widgetData = tocData[widgetId];\n\n      if (widgetData) {\n        var toAdd = _.extend(_.clone(widgetData), {\n          id: widgetId\n        });\n\n        this.collection.add(toAdd);\n      } else {\n        // it might be a widget name + subview in the form ShowExport__bibtex\n        // id consists of widgetId + arg param\n        var widgetsWithSubViews = _.pick(tocData, function (v, k) {\n          return k.split('__') && k.split('__')[0] == widgetId;\n        });\n\n        _.each(widgetsWithSubViews, function (v, k) {\n          // arg is the identifying factor-- joining with double underscore so it can be split later\n          var toAdd = _.extend(_.clone(v), {\n            id: k\n          });\n\n          this.collection.add(toAdd);\n        }, this);\n      }\n    } else if (event == 'widget-ready') {\n      // if there are no docs then go to the default view and exit here\n      if (data.noDocs) {\n        return this.selectDefaultNavItem();\n      }\n\n      var model = this.collection.get(data.widgetId);\n\n      _.defaults(data, {\n        isActive: !!data.numFound\n      });\n\n      if (model) {\n        model.set(_.pick(data, model.keys()));\n      } // if the widget should reset, switch to the default view\n\n\n      if (data.shouldReset) {\n        if (model && model.get('isSelected')) {\n          this.selectDefaultNavItem();\n        }\n\n        model && model.set('isActive', false);\n      }\n    } else if (event === 'broadcast-payload') {\n      this.model.set('bibcode', data.bibcode);\n    } else if (event == 'dynamic-nav') {// expects object like {links : [{title: x, id : y}]}\n      // insert dynamic nav entries into the nav template\n    }\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (TocNavigationView);\n\n//# sourceURL=webpack://bumblebee/./src/js/page_managers/toc_widget.js?");

/***/ }),

/***/ "./src/js/page_managers/view_mixin.js":
/*!********************************************!*\
  !*** ./src/js/page_managers/view_mixin.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n\n\nvar PageManagerMixin = {\n  getWidgetsFromTemplate: function getWidgetsFromTemplate(template, isDebug) {\n    var widgets = {};\n    var widgetTargets = jquery__WEBPACK_IMPORTED_MODULE_1___default()(template).find('[data-widget]');\n\n    if (widgetTargets.length > 0) {\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(widgetTargets, function (widgetTarget) {\n        var widgetName = widgetTarget.getAttribute('data-widget');\n        var isDebug = widgetTarget.getAttribute('data-debug');\n\n        if (isDebug && isDebug == 'true' && !isDebug) {\n          return;\n        }\n\n        widgets[widgetName] = widgetTarget;\n      });\n    }\n\n    return widgets;\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (PageManagerMixin);\n\n//# sourceURL=webpack://bumblebee/./src/js/page_managers/view_mixin.js?");

/***/ }),

/***/ "./src/js/react/PageManager.js":
/*!*************************************!*\
  !*** ./src/js/react/PageManager.js ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/page_managers/controller */ \"./src/js/page_managers/controller.js\");\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n\nvar PageManager = js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  assemble: function () {\n    var _assemble = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    function assemble() {\n      return _assemble.apply(this, arguments);\n    }\n\n    return assemble;\n  }(),\n\n  /**\n   * This method will create the view, really this is a container for the react\n   * widget to render into, the list of widgets should be passed by the page manager\n   */\n  createView: function createView(_ref) {\n    var _ref$widgets = _ref.widgets,\n        widgets = _ref$widgets === void 0 ? {} : _ref$widgets;\n    var keys = Object.keys(widgets);\n    var widget = keys.length > 0 ? keys[0] : null;\n\n    if (widget) {\n      var inner = document.createElement('div');\n      inner.setAttribute('data-widget', widget);\n      var el = document.createElement('div');\n      el.appendChild(inner);\n      return new Backbone.View({\n        el: el\n      });\n    }\n\n    return new Backbone.View();\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (PageManager);\n\n//# sourceURL=webpack://bumblebee/./src/js/react/PageManager.js?");

/***/ }),

/***/ "./src/js/services/api.js":
/*!********************************!*\
  !*** ./src/js/services/api.js ***!
  \********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var js_components_api_response__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/api_response */ \"./src/js/components/api_response.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_mixins_hardened__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/mixins/hardened */ \"./src/js/mixins/hardened.js\");\n/* harmony import */ var js_mixins_api_access__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js/mixins/api_access */ \"./src/js/mixins/api_access.js\");\n\n\n\n\n\n\n\n\n\n\nvar Api = js_components_generic_module__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend({\n  url: '/api/1/',\n  // usually overriden during app bootstrap\n  clientVersion: null,\n  outstandingRequests: 0,\n  access_token: null,\n  refresh_token: null,\n  expires_at: null,\n  defaultTimeoutInMs: 60000,\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n  },\n  done: function done(data, textStatus, jqXHR) {\n    // TODO: check the status responses\n    var response = new js_components_api_response__WEBPACK_IMPORTED_MODULE_5__[\"default\"](data);\n    response.setApiQuery(this.request.get('query'));\n    this.api.trigger('api-response', response);\n  },\n  fail: function fail(jqXHR, textStatus, errorThrown) {\n    console.error('API call failed:', JSON.stringify(this.request.url()), jqXHR.status, errorThrown);\n    var pubsub = this.api.hasBeeHive() ? this.api.getPubSub() : null;\n\n    if (pubsub) {\n      var feedback = new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n        code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_7__[\"default\"].CODES.API_REQUEST_ERROR,\n        msg: textStatus,\n        request: this.request,\n        error: jqXHR,\n        psk: this.key || this.api.getPubSub().getCurrentPubSubKey(),\n        errorThrown: errorThrown,\n        text: textStatus,\n        beVerbose: true\n      });\n      pubsub.publish(pubsub.FEEDBACK, feedback);\n    } else if (this.api) this.api.trigger('api-error', this, jqXHR, textStatus, errorThrown);\n  },\n  initialize: function initialize() {\n    this.always = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function () {\n      this.outstandingRequests--;\n    }, this);\n  },\n  getNumOutstandingRequests: function getNumOutstandingRequests() {\n    return this.outstandingRequests;\n  },\n  // used by api_access.js\n  setVals: function setVals(obj) {\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(obj, function (v, k) {\n      this[k] = v;\n    }, this);\n  },\n\n  /**\n   * Before executing an ajax request, this will be passed\n   * the options and can modify them. Typically, clients\n   * make want to provide their own implementation.\n   *\n   * @param opts\n   */\n  modifyRequestOptions: function modifyRequestOptions(opts) {// do nothing\n  },\n  hardenedInterface: {\n    request: 'make a request to the API',\n    setVals: 'set a value on API (such as new access token)'\n  }\n});\n\nApi.prototype._request = function (request, options) {\n  options = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({}, options, request.get('options'));\n  var data;\n  var self = this;\n  var query = request.get('query');\n\n  if (query && !(query instanceof js_components_api_query__WEBPACK_IMPORTED_MODULE_6__[\"default\"])) {\n    throw Error('Api.query must be instance of ApiQuery');\n  }\n\n  if (query) {\n    data = options.contentType === 'application/json' ? JSON.stringify(query.toJSON()) : query.url();\n  }\n\n  var target = request.get('target') || '';\n  var u;\n\n  if (target.indexOf('http') > -1) {\n    u = target;\n  } else {\n    u = this.url + (target.length > 0 && target.indexOf('/') == 0 ? target : target ? '/' + target : target);\n  }\n\n  u = u.substring(0, this.url.length - 2) + u.substring(this.url.length - 2, u.length).replace('//', '/');\n\n  if (!u) {\n    throw Error(\"Sorry, you can't use api without url\");\n  }\n\n  var opts = {\n    type: 'GET',\n    url: u,\n    dataType: 'json',\n    data: data,\n    contentType: 'application/x-www-form-urlencoded',\n    context: {\n      request: request,\n      api: self\n    },\n    timeout: this.defaultTimeoutInMs,\n    headers: {},\n    cache: true // do not generate _ parameters (let browser cache responses),\n\n  };\n\n  if (options.timeout) {\n    opts.timeout = options.timeout;\n  }\n\n  if (this.clientVersion) {\n    opts.headers['X-BB-Api-Client-Version'] = this.clientVersion;\n  }\n\n  if (this.access_token) {\n    opts.headers.Authorization = this.access_token;\n\n    if (/accounts\\/bootstrap/i.test(target)) {\n      opts.headers.Authorization = '';\n    }\n  } // extend, rather than replace, the headers with user-supplied headers if any\n\n\n  underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(opts.headers, options.headers); // one potential problem is that 'options' will override\n  // whatever is set above (other than headers) (so if sb wants to shoot himself/herself,\n  // we gave them the weapon... ;-))\n\n\n  underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(opts, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].omit(options, 'headers'));\n\n  this.outstandingRequests++;\n  this.modifyRequestOptions(opts, request); // use the native fetch api for sending the request\n  // this can help with downloading blob and other non-text responses\n\n  if (options.useFetch && options.fetchOptions) {\n    var fetchOpts = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({\n      credentials: 'include',\n      mode: 'cors',\n      timeout: this.defaultTimeoutInMs\n    }, options.fetchOptions);\n\n    fetchOpts.headers = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({\n      'Content-Type': opts.contentType\n    }, opts.headers, options.fetchOptions.headers);\n    var prom = window.fetch(opts.url, fetchOpts).then(function (response) {\n      self.always.call(opts.context, response);\n\n      if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isFunction(opts.always)) {\n        opts.always.call(opts.context, response);\n      } // handle any response errors (404, 500, etc.)\n\n\n      if (!response.ok) {\n        (opts.fail || self.fail).call(opts.context, response);\n        throw Error(response.statusText);\n      } // otherwise call done\n\n\n      (opts.done || self.done).call(opts.context, response);\n    }) // handle network errors\n    .catch(function (error) {\n      (opts.fail || self.fail).call(opts.context, error);\n      throw Error(error);\n    }); // add a done property to the promise so it plays well with\n    // methods expecting jquery\n\n    return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(prom, {\n      done: prom.then,\n      fail: prom.catch\n    });\n  }\n\n  var jqXhr = jquery__WEBPACK_IMPORTED_MODULE_1___default().ajax(opts).always(opts.always ? [this.always, opts.always] : this.always).done(opts.done || this.done).fail(opts.fail || this.fail);\n  jqXhr = jqXhr.promise(jqXhr);\n  return jqXhr;\n}; // stubbable for testing\n\n\nApi.prototype.getCurrentTimestamp = function () {\n  return Math.floor(Date.now() / 1000);\n};\n\nApi.prototype.request = function (request, options) {\n  var that = this;\n  var refreshRetries = 3;\n\n  var refreshToken = function refreshToken() {\n    var d = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();\n    var req = that.getApiAccess({\n      tokenRefresh: true,\n      reconnect: true\n    });\n    req.done(function () {\n      d.resolve(that._request(request, options));\n    });\n    req.fail(function () {\n      --refreshRetries > 0 ? underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].delay(refreshToken, 1000) : d.reject.apply(d, arguments);\n    });\n    return d.promise();\n  };\n\n  if (!this.expires_at) {\n    return refreshToken();\n  } // expires_at is in UTC, not local time\n\n\n  var expiration = this.expires_at;\n  var now = this.getCurrentTimestamp();\n  var difference = expiration - now; // fewer than 2 minutes before token expires\n\n  if (difference < 120) {\n    return refreshToken();\n  }\n\n  return this._request(request, options);\n};\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(Api.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_4__[\"default\"].BeeHive, js_mixins_hardened__WEBPACK_IMPORTED_MODULE_8__[\"default\"], js_mixins_api_access__WEBPACK_IMPORTED_MODULE_9__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Api);\n\n//# sourceURL=webpack://bumblebee/./src/js/services/api.js?");

/***/ }),

/***/ "./src/js/services/default_pubsub.js":
/*!*******************************************!*\
  !*** ./src/js/services/default_pubsub.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_generic_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/generic_module */ \"./src/js/components/generic_module.js\");\n/* harmony import */ var js_components_pubsub_key__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/pubsub_key */ \"./src/js/components/pubsub_key.js\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * Provides the nervous system of the application. There may exist\n * different breeds of this animal and application can choose\n * which ones to use.\n *\n * The intended usage is this:\n *\n *   1. Applicaiton creates a PubSub [any implementation]\n *   2. Application loads modules/views and gives them this PubSub\n *      - modules/views can subscribe to the PubSub (ie. view.listenTo(PubSub)\n *      - modules can trigger events through the PubSub (ie. pubSub.trigger('name', ....))\n *   3. Application activates the PubSub and calls 'self-check'\n *      - the pubsub will check whether it contains providers that can handle\n *        all signals\n *\n *\n * All topics subscribed to are broadcasted using Backbone.Event. The modules/view have\n * no access to the Application object. The PubSub serves as a 'middleman'\n *\n * For the moment, this object is not protected (you should implement) the facade\n * that hides it. But it provides all necessary functionality to make it robust and\n * secured. Ie. only modules with approprite keys can subscribe/publish/unscubscribe\n *\n * Also, errors are caught and counted. Actions can be fired to treat offending\n * callbacks.\n * */\n\n\n\n // unfortunately, these methods are not part of the BB.Events class\n// so we have to duplicate them iff we want to provide a queue which\n// handles failed callbacks\n// ------------------------ copied from BB ------------------------------------------\n// Regular expression used to split event strings.\n\nvar eventSplitter = /\\s+/; // Implement fancy features of the Events API such as multiple event\n// names `\"change blur\"` and jQuery-style event maps `{change: action}`\n// in terms of the existing API.\n\nvar eventsApi = function eventsApi(obj, action, name, rest) {\n  if (!name) return true; // Handle event maps.\n\n  if (_typeof(name) === 'object') {\n    for (var key in name) {\n      obj[action].apply(obj, [key, name[key]].concat(rest));\n    }\n\n    return false;\n  } // Handle space separated event names.\n\n\n  if (eventSplitter.test(name)) {\n    var names = name.split(eventSplitter);\n\n    for (var i = 0, l = names.length; i < l; i++) {\n      obj[action].apply(obj, [names[i]].concat(rest));\n    }\n\n    return false;\n  }\n\n  return true;\n}; // ------------------------ /copied from BB ------------------------------------------\n\n\nvar PubSub = js_components_generic_module__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend({\n  className: 'PubSub',\n  initialize: function initialize(options) {\n    this._issuedKeys = {};\n    this.strict = true;\n    this.handleErrors = true;\n    this._errors = {};\n    this.errWarningCount = 10; // this many errors trigger warning\n\n    underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(this, underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].pick(options, ['strict', 'handleErrors', 'errWarningCount']));\n\n    this.pubSubKey = js_components_pubsub_key__WEBPACK_IMPORTED_MODULE_3__[\"default\"].newInstance({\n      creator: {}\n    }); // this.getPubSubKey(); // the key the pubsub uses for itself\n\n    this._issuedKeys[this.pubSubKey.getId()] = this.pubSubKey.getCreator();\n    this.running = true;\n    this.debug = false;\n  },\n\n  /*\n   * when pubsub is activated it will issue signal 'pubsub.starting'\n   * and it will check whether there are events that cannot possibly\n   * by handled by some listeners\n   */\n  start: function start() {\n    this.publish(this.pubSubKey, this.OPENING_GATES);\n    this.publish(this.pubSubKey, this.OPEN_FOR_BUSINESS);\n    this.running = true;\n  },\n\n  /*\n   * Sends a signal 'pubsub.closing' to all listeners and then\n   * immediately shuts down the queue and removes any keys\n   */\n  destroy: function destroy() {\n    this.publish(this.pubSubKey, this.CLOSING_GATES);\n    this.off();\n    this.publish(this.pubSubKey, this.CLOSED_FOR_BUSINESS);\n    this.running = false;\n    this._issuedKeys = {};\n  },\n\n  /*\n   * subscribe() -> undefined or error\n   *\n   *  - key: instance of PubSubKey (it must be known\n   *         to this PubSub - so typically it is a key\n   *         issued by this PubSub)\n   *  - name: string, name of the event (can be name\n   *         accepted by Backbone)\n   *  - callback: a function to call (you cannot supply\n   *         context, so if the callback needs to be bound\n   *         use: _.bind(callback, context)\n   *\n   */\n  subscribe: function subscribe(key, name, callback) {\n    if (!this.isRunning()) {\n      throw new Error('PubSub has been closed, ignoring futher requests');\n    }\n\n    this._checkKey(key, name, callback);\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isUndefined(name)) {\n      throw new Error('You tried to subscribe to undefined event. Error between chair and keyboard?');\n    }\n\n    this.on(name, callback, key); // the key becomes context\n\n    if (name.indexOf(key.getId()) == -1) this.on(name + key.getId(), callback, key); // this is for individual responses\n  },\n\n  /*\n   * subscribeOnce() -> undefined or error\n   *\n   *  Just like subscribe, but it will be removed by PubSub once\n   *  it has been called\n   *\n   *  - key: instance of PubSubKey (it must be known\n   *         to this PubSub - so typically it is a key\n   *         issued by this PubSub)\n   *  - name: string, name of the event (can be name\n   *         accepted by Backbone)\n   *  - callback: a function to call (you cannot supply\n   *         context, so if the callback needs to be bound\n   *         use: _.bind(callback, context)\n   *\n   */\n  subscribeOnce: function subscribeOnce(key, name, callback) {\n    this._checkKey(key, name, callback);\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isUndefined(name)) {\n      throw new Error('You tried to subscribe to undefined event. Error between chair and keyboard?');\n    }\n\n    this.once(name, callback, key); // the key becomes context\n\n    if (name.indexOf(key.getId()) == -1) this.once(name + key.getId(), callback, key); // this is for individual responses\n  },\n\n  /*\n   * unsubscribe() -> undefined or error\n   *\n   *  - key: instance of PubSubKey (it must be known\n   *         to this PubSub - so typically it is a key\n   *         issued by this PubSub)\n   *  - name: string, name of the event (can be name\n   *         accepted by Backbone)\n   *  - callback: a function to call (you cannot supply\n   *         context, so if the callback needs to be bound\n   *         use: _.bind(callback, context)\n   *\n   *  When you supply only:\n   *   - key: all callbacks registered under this key will\n   *          be removed\n   *   - key+name: all callbacks for this key (module) and\n   *         event will be removed\n   *   - key+name+callback: the most specific call, it will\n   *         remove only one callback (if it is there)\n   *\n   */\n  unsubscribe: function unsubscribe(key, name, callback) {\n    this._checkKey(key, name, callback);\n\n    var context = key;\n\n    if (name && callback) {\n      this.off(name, callback, context);\n      this.off(name + key.getId(), callback, context);\n    } else if (name || callback) {\n      this.off(name, callback, context);\n      this.off(name + key.getId(), callback, context);\n    } else {\n      // remove all events of this subscriber\n      var names = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].keys(this._events);\n\n      var name;\n      var events;\n      var ev;\n      var i;\n      var l;\n      var k;\n      var j;\n      var toRemove = [];\n\n      for (i = 0, l = names.length; i < l; i++) {\n        name = names[i];\n\n        if (events = this._events[name]) {\n          for (j = 0, k = events.length; j < k; j++) {\n            ev = events[j];\n\n            if (ev.context === context) {\n              toRemove.push({\n                name: name,\n                event: ev\n              });\n            }\n          }\n        }\n      }\n\n      underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].each(toRemove, function (x) {\n        this.off(x.name, x.event.callback, x.event.context);\n      }, this);\n    }\n  },\n\n  /*\n   * publish(key, event-name, arguments...) -> undef\n   *\n   * Publish the message with any set of arguments\n   * into the queue. No checking is done whether there\n   * are callbacks that can handle the event\n   */\n  publish: function publish() {\n    if (!this.isRunning()) {\n      console.error('PubSub has been closed, ignoring futher requests');\n      return;\n    }\n\n    this._checkKey(arguments[0]);\n\n    var args = Array.prototype.slice.call(arguments, 1);\n\n    if (args.length == 0 || underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isUndefined(args[0])) {\n      throw new Error('You tried to trigger undefined event. Error between chair and keyboard?');\n    } // push the key back into the arguments (it identifies the sender)\n\n\n    args.push(arguments[0]); // console.log('publishing', arguments, args);\n    // this is faster, default BB implementation\n\n    if (!this.handleErrors) {\n      return this.trigger.apply(this, args);\n    } // safer, default\n\n\n    return this.triggerHandleErrors.apply(this, args);\n  },\n  getCurrentPubSubKey: function getCurrentPubSubKey() {\n    return this.pubSubKey;\n  },\n\n  /*\n   * getPubSubKey() -> PubSubKey\n   *\n   * Returns a new instance of PubSubKey - every\n   * subscriber must obtain one instance of the key\n   * and use it for all calls to publish/(un)subscribe\n   *\n   * If this queue is running in a strict mode, the\n   * keys will be remembered and they will be checked\n   * during the calls.\n   */\n  getPubSubKey: function getPubSubKey() {\n    var k = js_components_pubsub_key__WEBPACK_IMPORTED_MODULE_3__[\"default\"].newInstance({\n      creator: this.pubSubKey\n    }); // creator identifies issuer of the key\n\n    if (this.strict) {\n      if (this._issuedKeys[k.getId()]) {\n        throw Error('The key with id', k.getId(), 'has been already registered!');\n      }\n\n      this._issuedKeys[k.getId()] = k.getCreator();\n    }\n\n    return k;\n  },\n\n  /*\n   * Says whether this PubSub is running in a strict mode\n   */\n  isStrict: function isStrict() {\n    return this.strict;\n  },\n\n  /*\n   * Checks the key - subscriber must supply it when calling\n   */\n  _checkKey: function _checkKey(key, name, callback) {\n    if (this.strict) {\n      if (underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isUndefined(key)) {\n        throw new Error('Every request must be accompanied by PubSubKey');\n      }\n\n      if (!(key instanceof js_components_pubsub_key__WEBPACK_IMPORTED_MODULE_3__[\"default\"])) {\n        throw new Error('Key must be instance of PubSubKey. ' + \"(If you are trying to pass context, you can't do that. Instead, \" + 'wrap your callback into: _.bind(callback, context))' + '\\n' + 'Perhaps the PubSub you are using is the non-protected version?');\n      }\n\n      if (!this._issuedKeys.hasOwnProperty(key.getId())) {\n        throw new Error(\"Your key is not known to us, sorry, you can't use this queue.\");\n      }\n\n      if (this._issuedKeys[key.getId()] !== key.getCreator()) {\n        throw new Error(\"Your key has wrong identity, sorry, you can't use this queue.\");\n      }\n    }\n  },\n  // Copied and modified version of the BB trigger - we deal with errors\n  // and optionally execute stuff asynchronously\n  triggerHandleErrors: function triggerHandleErrors(name) {\n    // almost the same as BB impl, but we call local triggerEvents\n    // that do error handling\n    if (!this._events) return this;\n    var args = Array.prototype.slice.call(arguments, 1);\n    if (!eventsApi(this, 'trigger', name, args)) return this;\n    var events = this._events[name];\n    var allEvents = this._events.all;\n    if (events) this.triggerEvents(events, args);\n    if (allEvents) this.triggerEvents(allEvents, arguments);\n    return this;\n  },\n  // A modified version of BB - errors will not disrupt the queue\n  triggerEvents: function triggerEvents(events, args) {\n    var ev;\n    var i = -1;\n    var l = events.length;\n    var a1 = args[0];\n    var a2 = args[1];\n    var a3 = args[2];\n\n    switch (args.length) {\n      case 0:\n        while (++i < l) {\n          try {\n            (ev = events[i]).callback.call(ev.ctx);\n          } catch (e) {\n            this.handleCallbackError(e, ev, args);\n          }\n        }\n\n        return;\n\n      case 1:\n        while (++i < l) {\n          try {\n            (ev = events[i]).callback.call(ev.ctx, a1);\n          } catch (e) {\n            this.handleCallbackError(e, ev, args);\n          }\n        }\n\n        return;\n\n      case 2:\n        while (++i < l) {\n          try {\n            (ev = events[i]).callback.call(ev.ctx, a1, a2);\n          } catch (e) {\n            this.handleCallbackError(e, ev, args);\n          }\n        }\n\n        return;\n\n      case 3:\n        while (++i < l) {\n          try {\n            (ev = events[i]).callback.call(ev.ctx, a1, a2, a3);\n          } catch (e) {\n            this.handleCallbackError(e, ev, args);\n          }\n        }\n\n        return;\n\n      default:\n        while (++i < l) {\n          try {\n            (ev = events[i]).callback.apply(ev.ctx, args);\n          } catch (e) {\n            this.handleCallbackError(e, ev, args);\n          }\n        }\n\n    }\n  },\n  // the default implementation just counts the number of errors per module (key) and\n  // triggers pubsub.many_errors\n  handleCallbackError: function handleCallbackError(e, event, args) {\n    console.warn('[PubSub] Error: ', event, args, e.message, e.stack);\n\n    if (this.debug) {\n      throw e;\n    } else {\n      console.warn(e.stack);\n    }\n\n    var kid = event.ctx.getId();\n    var nerr = this._errors[kid] = (this._errors[kid] || 0) + 1;\n\n    if (nerr % this.errWarningCount == 0) {\n      this.publish(this.pubSubKey, this.BIG_FIRE, nerr, e, event, args);\n    }\n  },\n  isRunning: function isRunning() {\n    return this.running;\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (PubSub);\n\n//# sourceURL=webpack://bumblebee/./src/js/services/default_pubsub.js?");

/***/ }),

/***/ "./src/js/services/pubsub.js":
/*!***********************************!*\
  !*** ./src/js/services/pubsub.js ***!
  \***********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_mixins_hardened__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/mixins/hardened */ \"./src/js/mixins/hardened.js\");\n/* harmony import */ var pubsub_service_impl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! pubsub_service_impl */ \"./src/js/services/default_pubsub.js\");\n/* harmony import */ var js_components_pubsub_events__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/pubsub_events */ \"./src/js/components/pubsub_events.js\");\n/**\n * Created by rchyla on 3/16/14.\n */\n\n\n\n\n\nvar PubSub = pubsub_service_impl__WEBPACK_IMPORTED_MODULE_3__[\"default\"].extend({\n  /*\n   * Wraps itself into a Facade that can be shared with other modules\n   * (it is read-only); absolutely non-modifiable and provides the\n   * following callbacks:\n   *  - publish\n   *  - subscribe\n   *  - unsubscribe\n   *  - getPubSubKey\n   */\n  hardenedInterface: {\n    subscribe: 'register callback',\n    unsubscribe: 'deregister callback',\n    publish: 'send data to the queue',\n    getPubSubKey: 'get secret key'\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(PubSub.prototype, js_mixins_hardened__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n  /**\n   * The PubSub hardened instance will expose different\n   * api - it doesn't allow modules to pass the PubSubKey\n   *\n   * @param iface\n   * @returns {*}\n   */\n  getHardenedInstance: function getHardenedInstance(iface) {\n    iface = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].clone(iface || this.hardenedInterface); // build a unique key for this instance\n\n    var ctx = {\n      key: this.getPubSubKey()\n    };\n    var self = this; // purpose of these functions is to expose simplified\n    // api (without need to pass pubsubkey explicitly)\n\n    iface.publish = function () {\n      self.publish.apply(self, [ctx.key].concat(underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].toArray(arguments)));\n    };\n\n    iface.subscribe = function () {\n      self.subscribe.apply(self, [ctx.key].concat(underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].toArray(arguments)));\n    };\n\n    iface.unsubscribe = function () {\n      self.unsubscribe.apply(self, [ctx.key].concat(underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].toArray(arguments)));\n    };\n\n    iface.subscribeOnce = function () {\n      self.subscribeOnce.apply(self, [ctx.key].concat(underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].toArray(arguments)));\n    };\n\n    iface.getCurrentPubSubKey = function () {\n      return ctx.key;\n    };\n\n    var hardened = this._getHardenedInstance(iface, this);\n\n    underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(hardened, js_components_pubsub_events__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\n\n    return hardened;\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(PubSub.prototype, js_components_pubsub_events__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (PubSub);\n\n//# sourceURL=webpack://bumblebee/./src/js/services/pubsub.js?");

/***/ }),

/***/ "./src/js/services/storage.js":
/*!************************************!*\
  !*** ./src/js/services/storage.js ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }\n/* harmony export */ });\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_persistent_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/persistent_storage */ \"./src/js/components/persistent_storage.js\");\n\n // TODO:rca - make sure that the service is loaded at the bootstrap and persisted\n// before the app exits (and that nothing can change the data inbetween; we can\n// let them do that; but we'll not care for it\n\nvar Storage = js_components_persistent_storage__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend({\n  activate: function activate(beehive) {// this.setBeeHive(beehive);\n    // var pubsub = beehive.getService('PubSub');\n    // pubsub.subscribeOnce(pubsub.getPubSubKey(), pubsub.APP_BOOTSTRAPPED, this.onAppBootstrapped);\n  },\n  onAppBootstrapped: function onAppBootstrapped() {\n    var beehive = this.getBeeHive();\n    var rconf = beehive.getObject('DynamicConfig');\n\n    if (!rconf) {\n      throw new Error('DynamicConfig is missing');\n    }\n\n    var name = rconf.namespace; // the unique id that identifies this application (it serves as a namespace)\n\n    if (!name) {\n      console.warn('Application namespace not set; persistent storage will be created without it');\n      name = '';\n    }\n\n    this._store = this._createStore(name);\n  }\n});\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__() {\n  return new Storage({\n    name: 'storage-service'\n  });\n}\n;\n\n//# sourceURL=webpack://bumblebee/./src/js/services/storage.js?");

/***/ }),

/***/ "./src/js/utils.js":
/*!*************************!*\
  !*** ./src/js/utils.js ***!
  \*************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! analytics */ \"./src/js/components/analytics.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./src/libs/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\n\n\nvar qs = function qs(key, str, separator) {\n  // eslint-disable-next-line no-useless-escape\n  var k = key.replace(/[*+?^$.[\\]{}()|\\\\\\/]/g, '\\\\$&'); // escape RegEx meta chars\n\n  var pattern = '(^|[\\\\?&])' + k + '=[^&]*';\n  var match = (str || window.location.hash).match(new RegExp(pattern, 'g'));\n\n  if (!match) {\n    return null;\n  }\n\n  var clean = []; // remove 'key=' from string, combine with optional separator and unquote spaces\n\n  for (var i = 0; i < match.length; i += 1) {\n    clean.push(match[i].replace(new RegExp('(^|[\\\\?&])' + k + '='), ''));\n  }\n\n  if (separator) {\n    var msg = clean.join(separator); // works even if separator is undefined\n\n    return decodeURIComponent(msg.replace(/\\+/g, ' '));\n  }\n\n  if (separator === false) {\n    return underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].map(clean, function (msg) {\n      return decodeURIComponent(msg.replace(/\\+/g, ' '));\n    });\n  }\n\n  return null;\n};\n\nvar updateHash = function updateHash(key, value, hash) {\n  // eslint-disable-next-line no-useless-escape\n  var k = key.replace(/[*+?^$.[\\]{}()|\\\\\\/]/g, '\\\\$&');\n  var h = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isString(hash) ? hash : window.location.hash;\n  var match = h.match(new RegExp('&?' + k + '=([^&]+)(&|$)'));\n\n  if (match) {\n    var mat = match[0].replace(match[1], value);\n    return h.replace(match[0], mat);\n  }\n\n  return hash;\n};\n\nvar difference = function difference(obj, base) {\n  return underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].transform(obj, function (result, value, key) {\n    if (!underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isEqual(value, base[key])) {\n      result[key] = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isObject(value) && underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isObject(base[key]) ? difference(value, base[key]) : value;\n    }\n  });\n}; // get the current browser information\n\n\nvar getBrowserInfo = function getBrowserInfo() {\n  // do this inline, so we only request when necessary\n  var $dd = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred(); // reject after 3 seconds\n\n  var timeoutId = setTimeout(function () {\n    $dd.reject();\n  }, 3000);\n\n  window.require(['bowser'], function (bowser) {\n    window.clearTimeout(timeoutId);\n    $dd.resolve(bowser.parse(window.navigator.userAgent));\n  }, function () {\n    $dd.reject();\n  });\n\n  return $dd.promise();\n};\n\nvar TimingEvent = /*#__PURE__*/function () {\n  function TimingEvent() {\n    var timingVar = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'Timers';\n    var timingCategory = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'Generic Timer';\n    var timingLabel = arguments.length > 2 ? arguments[2] : undefined;\n\n    _classCallCheck(this, TimingEvent);\n\n    this.timingCategory = timingCategory;\n    this.timingVar = timingVar;\n    this.timingLabel = timingLabel;\n    this.time = null;\n  }\n\n  _createClass(TimingEvent, [{\n    key: \"start\",\n    value: function start() {\n      this.time = +new Date();\n      this._emitted = false;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      // do not emit an event if we haven't started timing or already emitted\n      if (this._emitted) {\n        return;\n      }\n\n      var time = +new Date() - this.time;\n      (0,analytics__WEBPACK_IMPORTED_MODULE_2__[\"default\"])('send', 'timing', {\n        timingCategory: this.timingCategory,\n        timingVar: this.timingVar,\n        timingLabel: this.timingLabel,\n        timingValue: time\n      });\n      this._emitted = true;\n    }\n  }]);\n\n  return TimingEvent;\n}();\n\nvar waitForSelector = function waitForSelector() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  var $dd = jquery__WEBPACK_IMPORTED_MODULE_0___default().Deferred();\n  var timeout = 3100; // 31 seconds\n\n  var ref = null;\n\n  (function check(n) {\n    var $el = jquery__WEBPACK_IMPORTED_MODULE_0___default().apply(void 0, args);\n\n    if ($el.length) {\n      return $dd.resolve($el);\n    }\n\n    if (n >= timeout) {\n      return $dd.reject('timeout');\n    }\n\n    ref = setTimeout(function () {\n      window.requestAnimationFrame(function () {\n        check(n += 1);\n      });\n    }, 100);\n    return null;\n  })(0);\n\n  $dd.promise.destroy = function () {\n    window.clearTimeout(ref);\n    $dd.reject();\n  };\n\n  return $dd.promise();\n};\n\nvar withPrerenderedContent = function withPrerenderedContent(view) {\n  view.handlePrerenderedContent = function (content, $el) {\n    // setup the elements so events are properly delegated\n    var selector = view.tagName + '.' + view.className;\n    view.$el = jquery__WEBPACK_IMPORTED_MODULE_0___default()(selector, $el); // stops mathjax from pre-rendering before we replace the content\n\n    jquery__WEBPACK_IMPORTED_MODULE_0___default()('>', view.$el).addClass('tex2jax_ignore');\n    view.el = view.$el.get(0);\n    view.delegateEvents(); // replace the current marionette template renderer for a moment\n\n    var _renderTmpl = view._renderTemplate;\n\n    view._renderTemplate = function () {}; // reset template renderer on first model change\n\n\n    view.model.once('change', function () {\n      view._renderTemplate = _renderTmpl;\n    });\n  };\n\n  return view;\n};\n\nvar escapeRegExp = function escapeRegExp(value) {\n  return value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n};\n\nvar makeApiQuery = function makeApiQuery(params) {\n  return new js_components_api_query__WEBPACK_IMPORTED_MODULE_4__[\"default\"](params);\n};\n\nvar makeApiRequest = function makeApiRequest(params) {\n  return new js_components_api_request__WEBPACK_IMPORTED_MODULE_5__[\"default\"](params);\n};\n\nvar extractErrorMessageFromAjax = function extractErrorMessageFromAjax(maybeXHR, defaultMessage) {\n  if (typeof maybeXHR !== 'undefined' && typeof maybeXHR.responseJSON !== 'undefined') {\n    if (typeof maybeXHR.responseJSON.error === 'string') {\n      return maybeXHR.responseJSON.error;\n    } else if (typeof maybeXHR.responseJSON.message === 'string') {\n      return maybeXHR.responseJSON.message;\n    }\n  }\n\n  return defaultMessage;\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  qs: qs,\n  updateHash: updateHash,\n  difference: difference,\n  getBrowserInfo: getBrowserInfo,\n  TimingEvent: TimingEvent,\n  waitForSelector: waitForSelector,\n  withPrerenderedContent: withPrerenderedContent,\n  escapeRegExp: escapeRegExp,\n  makeApiQuery: makeApiQuery,\n  makeApiRequest: makeApiRequest,\n  extractErrorMessageFromAjax: extractErrorMessageFromAjax\n});\n\n//# sourceURL=webpack://bumblebee/./src/js/utils.js?");

/***/ }),

/***/ "./src/js/widgets/abstract/templates/abstract_template.html":
/*!******************************************************************!*\
  !*** ./src/js/widgets/abstract/templates/abstract_template.html ***!
  \******************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"<a target=\\\"prev\\\">prev</a>\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \" <a target=\\\"next\\\">next</a>\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"loading\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(6, data, 0),\"inverse\":container.program(8, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":20},\"end\":{\"line\":11,\"column\":7}}})) != null ? stack1 : \"\")\n    + \" \";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \" \"\n    + ((stack1 = container.invokePartial(__webpack_require__(/*! ../../../wraps/widget/loading/template.html */ \"./src/js/wraps/widget/loading/template.html\"),depth0,{\"name\":\"js/wraps/widget/loading/template\",\"hash\":{\"widgetLoadingSize\":\"big\",\"hideCloseButton\":true},\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \" \";\n},\"8\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"error\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.program(11, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":47},\"end\":{\"line\":11,\"column\":0}}})) != null ? stack1 : \"\");\n},\"9\":function(container,depth0,helpers,partials,data) {\n    return \"\\n<h2>Error loading abstract</h2>\\n\";\n},\"11\":function(container,depth0,helpers,partials,data) {\n    return \"<h2 class=\\\"s-abstract-title\\\">Abstract Not Found</h2>\\n<div class=\\\"s-abstract-text\\\">\\n  No valid abstract selected for retrieval or abstract not yet indexed in ADS.\\n</div>\\n\";\n},\"13\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=depth0 != null ? depth0 : (container.nullContext || {}), alias3=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n\\n<h2 class=\\\"s-abstract-title\\\">\\n  \"\n    + ((stack1 = alias1((depth0 != null ? lookupProperty(depth0,\"title\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias2,((stack1 = (depth0 != null ? lookupProperty(depth0,\"titleLink\") : depth0)) != null ? lookupProperty(stack1,\"href\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(14, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":14,\"column\":14},\"end\":{\"line\":16,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</h2>\\n\\n<button\\n  class=\\\"btn btn-xs btn-default-flat s-toggle-aff print-hidden\\\"\\n  id=\\\"toggle-aff\\\"\\n>\\n  Show affiliations\\n</button>\\n<span id=\\\"pending-aff\\\" style=\\\"display: none;\\\"\\n><i class=\\\"fa fa-spinner fa-spin\\\" aria-hidden=\\\"true\\\"></i\\n><span class=\\\"sr-only\\\">Loading affiliations</span></span\\n>\\n<span id=\\\"fail-aff\\\" class=\\\"text-danger\\\" style=\\\"display: none;\\\"\\n><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i\\n><span class=\\\"sr-only\\\">affiliations loading</span></span\\n>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias2,((stack1 = (depth0 != null ? lookupProperty(depth0,\"authorAff\") : depth0)) != null ? lookupProperty(stack1,\"length\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(16, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":33,\"column\":0},\"end\":{\"line\":173,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"\\n<div class=\\\"s-abstract-text\\\">\\n  <h4 class=\\\"sr-only\\\">Abstract</h4>\\n  <p>\\n    \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias2,(depth0 != null ? lookupProperty(depth0,\"abstract\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(36, data, 0),\"inverse\":container.program(38, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":178,\"column\":4},\"end\":{\"line\":180,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"  </p>\\n</div>\\n\\n<br/>\\n<dl class=\\\"s-abstract-dl-horizontal\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias2,(depth0 != null ? lookupProperty(depth0,\"pub_raw\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(40, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":186,\"column\":2},\"end\":{\"line\":191,\"column\":9}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias2,(depth0 != null ? lookupProperty(depth0,\"book_author\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(42, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":191,\"column\":10},\"end\":{\"line\":198,\"column\":9}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias2,(depth0 != null ? lookupProperty(depth0,\"formattedDate\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(47, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":198,\"column\":10},\"end\":{\"line\":201,\"column\":9}}})) != null ? stack1 : \"\")\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias2,(depth0 != null ? lookupProperty(depth0,\"doi\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(49, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":202,\"column\":2},\"end\":{\"line\":218,\"column\":9}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias2,(depth0 != null ? lookupProperty(depth0,\"arxiv\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(52, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":218,\"column\":10},\"end\":{\"line\":232,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"\\n  <dt>Bibcode:</dt>\\n  <dd>\\n    <button\\n      class=\\\"btn btn-link copy-btn\\\"\\n      style=\\\"padding: 0px\\\"\\n      id=\\\"abs-bibcode-copy\\\"\\n      data-clipboard-text=\\\"\"\n    + alias3(alias1((depth0 != null ? lookupProperty(depth0,\"bibcode\") : depth0), depth0))\n    + \"\\\"\\n      aria-label=\\\"copy bibcode\\\"\\n    >\\n      \"\n    + alias3(alias1((depth0 != null ? lookupProperty(depth0,\"bibcode\") : depth0), depth0))\n    + \"\\n      <i\\n        class=\\\"icon-help\\\"\\n        aria-hidden=\\\"true\\\"\\n        data-toggle=\\\"popover\\\"\\n        data-container=\\\"body\\\"\\n        data-content=\\\"The bibcode is assigned by the ADS as a unique identifier for the paper.\\\"\\n      ></i>\\n    </button>\\n    <span id=\\\"abs-bibcode-copy-msg\\\" class=\\\"text-info\\\" style=\\\"display: none;\\\"\\n    >Copied!</span\\n    >\\n  </dd>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias2,(depth0 != null ? lookupProperty(depth0,\"keyword\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(54, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":257,\"column\":2},\"end\":{\"line\":268,\"column\":9}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias2,(depth0 != null ? lookupProperty(depth0,\"comment\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(60, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":268,\"column\":10},\"end\":{\"line\":273,\"column\":9}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias2,(depth0 != null ? lookupProperty(depth0,\"pubnote\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(62, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":273,\"column\":10},\"end\":{\"line\":278,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</dl>\\n<br/>\\n<a\\n  class=\\\"small pull-right text-faded\\\"\\n  href=\\\"/feedback/correctabstract?bibcode=\"\n    + alias3(alias1((depth0 != null ? lookupProperty(depth0,\"bibcode\") : depth0), depth0))\n    + \"\\\"\\n  title=\\\"Provide feedback or suggest corrections\\\"\\n>\\n  <span class=\\\"fa-stack\\\">\\n    <i class=\\\"fa fa-comment-o fa-stack-2x\\\" aria-hidden=\\\"true\\\"></i>\\n    <i class=\\\"fa fa-exclamation fa-stack-1x\\\" aria-hidden=\\\"true\\\"></i>\\n  </span>\\n  Feedback/Corrections?\\n</a>\\n\\n\";\n},\"14\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n  <a href=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"titleLink\") : depth0)) != null ? lookupProperty(stack1,\"href\") : stack1), depth0))\n    + \"\\\">\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"titleLink\") : depth0)) != null ? lookupProperty(stack1,\"text\") : stack1), depth0))\n    + \"</a>\\n\";\n},\"16\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"hasMoreAuthors\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(17, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":33,\"column\":25},\"end\":{\"line\":40,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"\\n<div id=\\\"authors-and-aff\\\" class=\\\"s-authors-and-aff\\\">\\n  <ul class=\\\"list-inline\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"authorAff\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(19, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":44,\"column\":4},\"end\":{\"line\":103,\"column\":13}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"hasMoreAuthors\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(32, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":103,\"column\":14},\"end\":{\"line\":110,\"column\":11}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"authorAffExtra\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(34, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":110,\"column\":12},\"end\":{\"line\":170,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"  </ul>\\n</div>\\n\";\n},\"17\":function(container,depth0,helpers,partials,data) {\n    return \"\\n<button\\n  class=\\\"btn btn-xs btn-default-flat s-toggle-authors print-hidden\\\"\\n  id=\\\"toggle-more-authors\\\"\\n>\\n  Show all authors\\n</button>\\n\";\n},\"19\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, alias3=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <li class=\\\"author\\\">\\n      <a href=\\\"search/q=author:\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"5\") : depth0), depth0))\n    + \"&sort=date%20desc,%20bibcode%20desc\\\">\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"0\") : depth0), depth0))\n    + \"\\n      </a>\\n      <span>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"2\") : depth0),\"-\",{\"name\":\"compare\",\"hash\":{\"operator\":\"!==\"},\"fn\":container.program(20, data, 0),\"inverse\":container.program(22, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":50,\"column\":8},\"end\":{\"line\":98,\"column\":46}}})) != null ? stack1 : \"\")\n    + \"\\n      </span>\\n      <span class=\\\"affiliation hide\\\"> (<i>\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"1\") : depth0), depth0))\n    + \"</i>)</span>\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias3,(data && lookupProperty(data,\"last\")),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(28, data, 0),\"inverse\":container.program(30, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":100,\"column\":66},\"end\":{\"line\":101,\"column\":29}}})) != null ? stack1 : \"\")\n    + \"\\n    </li>\\n    \";\n},\"20\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        <a\\n          class=\\\"orcid-author\\\"\\n          href=\\\"search/q=orcid:\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"2\") : depth0), depth0))\n    + \"&sort=date%20desc,%20bibcode%20desc\\\"\\n        >\\n          <img\\n            class=\\\"inactive\\\"\\n            src=\\\"../../styles/img/orcid-inactive.svg\\\"\\n            alt=\\\"search by orcid\\\"\\n          />\\n          <img\\n            class=\\\"active hidden\\\"\\n            src=\\\"../../styles/img/orcid-active.svg\\\"\\n            alt=\\\"search by orcid\\\"\\n          />\\n        </a>\\n        \";\n},\"22\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"3\") : depth0),\"-\",{\"name\":\"compare\",\"hash\":{\"operator\":\"!==\"},\"fn\":container.program(23, data, 0),\"inverse\":container.program(25, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":66,\"column\":17},\"end\":{\"line\":98,\"column\":33}}})) != null ? stack1 : \"\")\n    + \" \";\n},\"23\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n        <a\\n          class=\\\"orcid-author\\\"\\n          href=\\\"search/q=orcid:\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"3\") : depth0), depth0))\n    + \"&sort=date%20desc,%20bibcode%20desc\\\"\\n        >\\n          <img\\n            class=\\\"inactive\\\"\\n            src=\\\"../../styles/img/orcid-inactive.svg\\\"\\n            alt=\\\"search by orcid\\\"\\n          />\\n          <img\\n            class=\\\"active hidden\\\"\\n            src=\\\"../../styles/img/orcid-active.svg\\\"\\n            alt=\\\"search by orcid\\\"\\n          />\\n        </a>\\n        \";\n},\"25\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"4\") : depth0),\"-\",{\"name\":\"compare\",\"hash\":{\"operator\":\"!==\"},\"fn\":container.program(26, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":82,\"column\":17},\"end\":{\"line\":98,\"column\":20}}})) != null ? stack1 : \"\")\n    + \" \";\n},\"26\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n        <a\\n          class=\\\"orcid-author\\\"\\n          href=\\\"search/q=orcid:\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"4\") : depth0), depth0))\n    + \"&sort=date%20desc,%20bibcode%20desc\\\"\\n        >\\n          <img\\n            class=\\\"inactive\\\"\\n            src=\\\"../../styles/img/orcid-inactive.svg\\\"\\n            alt=\\\"search by orcid\\\"\\n          />\\n          <img\\n            class=\\\"active hidden\\\"\\n            src=\\\"../../styles/img/orcid-active.svg\\\"\\n            alt=\\\"search by orcid\\\"\\n          />\\n        </a>\\n        \";\n},\"28\":function(container,depth0,helpers,partials,data) {\n    return \"\";\n},\"30\":function(container,depth0,helpers,partials,data) {\n    return \";\";\n},\"32\":function(container,depth0,helpers,partials,data) {\n    return \"\\n    <li class=\\\"author\\\">\\n      ;\\n      <span class=\\\"extra-dots\\\">\\n        <a data-target=\\\"more-authors\\\" title=\\\"Show all authors\\\">...</a>\\n      </span>\\n    </li>\\n    \";\n},\"34\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, alias3=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n\\n    <li class=\\\"author extra hide\\\">\\n      <a href=\\\"search/q=author:\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"5\") : depth0), depth0))\n    + \"&sort=date%20desc,%20bibcode%20desc\\\">\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"0\") : depth0), depth0))\n    + \"\\n      </a>\\n      <span>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"2\") : depth0),\"-\",{\"name\":\"compare\",\"hash\":{\"operator\":\"!==\"},\"fn\":container.program(20, data, 0),\"inverse\":container.program(22, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":117,\"column\":8},\"end\":{\"line\":165,\"column\":46}}})) != null ? stack1 : \"\")\n    + \"\\n      </span>\\n      <span class=\\\"affiliation hide\\\"> (<i>\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"1\") : depth0), depth0))\n    + \"</i>)</span>\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias3,(data && lookupProperty(data,\"last\")),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(28, data, 0),\"inverse\":container.program(30, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":167,\"column\":66},\"end\":{\"line\":168,\"column\":29}}})) != null ? stack1 : \"\")\n    + \"\\n    </li>\\n\";\n},\"36\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" \"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"abstract\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \" \";\n},\"38\":function(container,depth0,helpers,partials,data) {\n    return \"\\n    <i>No abstract</i>\\n\";\n},\"40\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <dt>Publication:</dt>\\n  <dd>\\n    <div id=\\\"article-publication\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"pub_raw\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</div>\\n  </dd>\\n  \";\n},\"42\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n  <dt>\\n    Book Author\"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"book_author\") : depth0)) != null ? lookupProperty(stack1,\"length\") : stack1),1,{\"name\":\"compare\",\"hash\":{\"operator\":\">\"},\"fn\":container.program(43, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":193,\"column\":15},\"end\":{\"line\":193,\"column\":76}}})) != null ? stack1 : \"\")\n    + \":\\n  </dt>\\n  <dd>\\n    \"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"book_author\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(45, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":196,\"column\":4},\"end\":{\"line\":196,\"column\":74}}})) != null ? stack1 : \"\")\n    + \"\\n  </dd>\\n  \";\n},\"43\":function(container,depth0,helpers,partials,data) {\n    return \"(s)\";\n},\"45\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<a href=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"href\") : depth0), depth0))\n    + \"\\\">\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"name\") : depth0), depth0))\n    + \"</a>\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"delim\") : depth0), depth0));\n},\"47\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n  <dt>Pub Date:</dt>\\n  <dd>\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"formattedDate\") : depth0), depth0))\n    + \"</dd>\\n\";\n},\"49\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <dt>DOI:</dt>\\n  <dd>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"doi\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(50, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":205,\"column\":4},\"end\":{\"line\":216,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"  </dd>\\n  \";\n},\"50\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <p class=\\\"doi-p\\\">\\n      <a\\n        data-target=\\\"DOI\\\"\\n        href=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"href\") : depth0), depth0))\n    + \"\\\"\\n        target=\\\"_blank\\\"\\n        rel=\\\"noreferrer noopener\\\"\\n      >\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"doi\") : depth0), depth0))\n    + \"</a\\n      >\\n      <i class=\\\"fa fa-external-link\\\" aria-hidden=\\\"true\\\"></i>\\n    </p>\\n\";\n},\"52\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n  <dt>arXiv:</dt>\\n  <dd>\\n    <span>\\n      <a\\n        data-target=\\\"arXiv\\\"\\n        href=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"arxiv\") : depth0)) != null ? lookupProperty(stack1,\"href\") : stack1), depth0))\n    + \"\\\"\\n        target=\\\"_blank\\\"\\n        rel=\\\"noreferrer noopener\\\"\\n      >\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"arxiv\") : depth0)) != null ? lookupProperty(stack1,\"id\") : stack1), depth0))\n    + \"</a\\n      >\\n      <i class=\\\"fa fa-external-link\\\" aria-hidden=\\\"true\\\"></i>\\n    </span>\\n  </dd>\\n\";\n},\"54\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <dt>Keywords:</dt>\\n  <dd>\\n    <ul class=\\\"list-inline\\\">\\n      \"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"keyword\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(55, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":261,\"column\":6},\"end\":{\"line\":265,\"column\":23}}})) != null ? stack1 : \"\")\n    + \"\\n    </ul>\\n  </dd>\\n  \";\n},\"55\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(data && lookupProperty(data,\"last\")),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(56, data, 0),\"inverse\":container.program(58, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":261,\"column\":24},\"end\":{\"line\":265,\"column\":13}}})) != null ? stack1 : \"\")\n    + \" \";\n},\"56\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"\\n      <li>\"\n    + ((stack1 = container.lambda(depth0, depth0)) != null ? stack1 : \"\")\n    + \"</li>\\n\";\n},\"58\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"      <li>\"\n    + ((stack1 = container.lambda(depth0, depth0)) != null ? stack1 : \"\")\n    + \";</li>\\n      \";\n},\"60\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n  <dt>Comments:</dt>\\n  <dd>\\n    \"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"comment\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"\\n  </dd>\\n  \";\n},\"62\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n  <dt>E-Print Comments:</dt>\\n  <dd>\\n    \"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"pubnote\") : depth0), depth0))\n    + \"\\n  </dd>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<!--<div id=\\\"article-navigation\\\">\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"hasPrev\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":33},\"end\":{\"line\":1,\"column\":80}}})) != null ? stack1 : \"\")\n    + \"|\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"hasNext\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":81},\"end\":{\"line\":1,\"column\":129}}})) != null ? stack1 : \"\")\n    + \"</div>-->\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"bibcode\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.program(13, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":0},\"end\":{\"line\":293,\"column\":11}}})) != null ? stack1 : \"\");\n},\"usePartial\":true,\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/abstract/templates/abstract_template.html?");

/***/ }),

/***/ "./src/js/widgets/abstract/widget.js":
/*!*******************************************!*\
  !*** ./src/js/widgets/abstract/widget.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var clipboard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! clipboard */ \"./src/libs/clipboard.js\");\n/* harmony import */ var clipboard__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(clipboard__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var cache__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! cache */ \"./src/libs/cache.js\");\n/* harmony import */ var cache__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(cache__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var hbs_js_widgets_abstract_templates_abstract_template__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! hbs!js/widgets/abstract/templates/abstract_template */ \"./src/js/widgets/abstract/templates/abstract_template.html\");\n/* harmony import */ var hbs_js_widgets_abstract_templates_abstract_template__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_abstract_templates_abstract_template__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_mixins_link_generator_mixin__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! js/mixins/link_generator_mixin */ \"./src/js/mixins/link_generator_mixin.js\");\n/* harmony import */ var js_mixins_papers_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! js/mixins/papers_utils */ \"./src/js/mixins/papers_utils.js\");\n/* harmony import */ var mathjax__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! mathjax */ \"./node_modules/mathjax/unpacked/MathJax.js\");\n/* harmony import */ var mathjax__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(mathjax__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! bootstrap */ \"./src/libs/bootstrap/bootstrap.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! utils */ \"./src/js/utils.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! analytics */ \"./src/js/components/analytics.js\");\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * Created by alex on 5/19/14.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar MAX_AUTHORS = 20;\nvar AbstractModel = backbone__WEBPACK_IMPORTED_MODULE_4___default().Model.extend({\n  defaults: function defaults() {\n    return {\n      abstract: undefined,\n      title: undefined,\n      authorAff: undefined,\n      page: undefined,\n      pub: undefined,\n      pubdate: undefined,\n      keywords: undefined,\n      bibcode: undefined,\n      pub_raw: undefined,\n      doi: undefined,\n      citation_count: undefined,\n      titleLink: undefined,\n      pubnote: undefined,\n      loading: true,\n      error: false\n    };\n  },\n  parse: function parse(doc) {\n    var maxAuthors = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : MAX_AUTHORS;\n\n    var getDOIUrl = function getDOIUrl(doi) {\n      return js_mixins_link_generator_mixin__WEBPACK_IMPORTED_MODULE_11__[\"default\"].createUrlByType(doc.bibcode, 'doi', doi);\n    }; // generate URLs for each doi\n\n\n    doc.doi = Array.isArray(doc.doi) ? doc.doi.map(function (doi) {\n      return {\n        doi: doi,\n        href: getDOIUrl(doi)\n      };\n    }) : doc.doi ? [{\n      doi: doc.doi,\n      href: getDOIUrl(doc.doi)\n    }] : doc.doi; // \"aff\" is the name of the affiliations array that comes from solr\n\n    doc.aff = Array.isArray(doc.aff) ? doc.aff : [];\n    doc.author = Array.isArray(doc.author) ? doc.author : []; // remove html-encoding from affiliations\n\n    doc.aff = doc.aff.map(underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].unescape);\n    var numAuthors = doc.author.length;\n\n    var defaultList = underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].range(numAuthors).map(function () {\n      return '-';\n    });\n\n    if (doc.aff.length) {\n      doc.hasAffiliation = underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].without(doc.aff, '-').length; // joining author and aff\n\n      doc.authorAff = underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].zip(doc.author, doc.aff, doc.orcid_pub ? doc.orcid_pub : defaultList, doc.orcid_user ? doc.orcid_user : defaultList, doc.orcid_other ? doc.orcid_other : defaultList);\n    } else if (doc.author) {\n      doc.hasAffiliation = false;\n      doc.authorAff = underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].zip(doc.author, underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].range(doc.author.length), doc.orcid_pub ? doc.orcid_pub : defaultList, doc.orcid_user ? doc.orcid_user : defaultList, doc.orcid_other ? doc.orcid_other : defaultList);\n    }\n\n    if (doc.page && doc.page.length) {\n      doc.page = doc.page[0];\n    } // only true if there was an author array\n    // now add urls\n\n\n    if (doc.authorAff) {\n      underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].each(doc.authorAff, function (el, index) {\n        doc.authorAff[index][5] = encodeURIComponent('\"' + el[0] + '\"').replace(/%20/g, '+');\n      });\n\n      if (doc.authorAff.length > maxAuthors) {\n        doc.authorAffExtra = doc.authorAff.slice(maxAuthors, doc.authorAff.length);\n        doc.authorAff = doc.authorAff.slice(0, maxAuthors);\n      }\n\n      doc.hasMoreAuthors = doc.authorAffExtra && doc.authorAffExtra.length;\n    }\n\n    if (doc.pubdate) {\n      doc.formattedDate = js_mixins_papers_utils__WEBPACK_IMPORTED_MODULE_12__[\"default\"].formatDate(doc.pubdate, {\n        format: 'MMMM DD YYYY',\n        missing: {\n          day: 'MMMM YYYY',\n          month: 'YYYY'\n        }\n      });\n    }\n\n    if (doc.title && doc.title.length) {\n      doc.title = doc.title[0];\n      var docTitleLink = doc.title.match(/<a.*href=\"(.*?)\".*?>(.*)<\\/a>/i); // Find any links that are buried in the text of the title\n      // Parse it out and convert to BBB hash links, if necessary\n\n      if (docTitleLink) {\n        doc.title = doc.title.replace(docTitleLink[0], '').trim();\n        doc.titleLink = {\n          href: docTitleLink[1],\n          text: docTitleLink[2]\n        };\n\n        if (doc.titleLink.href.match(/^\\/abs/)) {\n          doc.titleLink.href = '#' + doc.titleLink.href.slice(1);\n        }\n      }\n    }\n\n    if (doc.comment) {\n      doc.comment = underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].unescape(doc.comment);\n    }\n\n    if (doc.pubnote) {\n      doc.pubnote = underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].unescape(doc.pubnote);\n    } // handle book_author field\n\n\n    if (doc.book_author && Array.isArray(doc.book_author) && doc.book_author.length > 0) {\n      doc.book_author = doc.book_author.map(function (name, i) {\n        return {\n          name: name,\n          href: \"#search?q=book_author:\\\"\".concat(name, \"\\\"&sort=date%20desc,%20bibcode%20desc\"),\n          delim: i < doc.book_author.length - 1 ? '; ' : ''\n        };\n      });\n    }\n\n    var ids = Array.isArray(doc.identifier) ? doc.identifier : doc.original_identifier;\n    var id = (ids || []).find(function (v) {\n      return v.match(/^arxiv/i);\n    });\n\n    if (id) {\n      doc.arxiv = {\n        id: id,\n        href: js_mixins_link_generator_mixin__WEBPACK_IMPORTED_MODULE_11__[\"default\"].createUrlByType(doc.bibcode, 'arxiv', id.split(':')[1])\n      };\n    }\n\n    return doc;\n  }\n});\nvar AbstractView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  tagName: 'article',\n  className: 's-abstract-metadata',\n  modelEvents: {\n    change: 'render'\n  },\n  template: (hbs_js_widgets_abstract_templates_abstract_template__WEBPACK_IMPORTED_MODULE_9___default()),\n  events: {\n    'click #toggle-aff': 'toggleAffiliation',\n    'click #toggle-more-authors': 'toggleMoreAuthors',\n    'click a[data-target=\"more-authors\"]': 'toggleMoreAuthors',\n    'click a[target=\"prev\"]': 'onClick',\n    'click a[target=\"next\"]': 'onClick',\n    'click a[data-target=\"DOI\"]': 'emitAnalytics',\n    'click a[data-target=\"arXiv\"]': 'emitAnalytics',\n    'mouseenter .orcid-author': 'highlightOrcidAuthor',\n    'mouseleave .orcid-author': 'unhighlightOrcidAuthor'\n  },\n  highlightOrcidAuthor: function highlightOrcidAuthor(e) {\n    var $target = jquery__WEBPACK_IMPORTED_MODULE_5___default()(e.currentTarget);\n    var $active = $target.find('.active');\n\n    if ($active.hasClass('hidden')) {\n      $active.removeClass('hidden');\n      $target.find('.inactive').addClass('hidden');\n    }\n  },\n  unhighlightOrcidAuthor: function unhighlightOrcidAuthor(e) {\n    var $target = jquery__WEBPACK_IMPORTED_MODULE_5___default()(e.currentTarget);\n    var $inactive = $target.find('.inactive');\n\n    if ($inactive.hasClass('hidden')) {\n      $inactive.removeClass('hidden');\n      $target.find('.active').addClass('hidden');\n    }\n  },\n  toggleMoreAuthors: function toggleMoreAuthors() {\n    this.$('.author.extra').toggleClass('hide');\n    this.$('.author .extra-dots').toggleClass('hide');\n\n    if (this.$('.author.extra').hasClass('hide')) {\n      this.$('#toggle-more-authors').text('Show all authors');\n    } else {\n      this.$('#toggle-more-authors').text('Hide authors');\n    }\n\n    return false;\n  },\n  toggleAffiliation: function toggleAffiliation() {\n    var _this = this;\n\n    this.$('fail-aff').hide();\n    this.$('#pending-aff').show();\n    this.trigger('fetchAffiliations', function (err) {\n      _this.$('#pending-aff').hide();\n\n      if (err) {\n        _this.$('#fail-aff').show();\n\n        setTimeout(function () {\n          _this.$('#fail-aff').hide();\n        }, 3000);\n        return;\n      }\n\n      _this.$('.affiliation').toggleClass('hide');\n\n      if (_this.$('.affiliation').hasClass('hide')) {\n        _this.$('#toggle-aff').text('Show affiliations');\n      } else {\n        _this.$('#toggle-aff').text('Hide affiliations');\n      }\n    });\n    return false;\n  },\n  onClick: function onClick(ev) {\n    this.trigger(jquery__WEBPACK_IMPORTED_MODULE_5___default()(ev.target).attr('target'));\n    return false;\n  },\n  emitAnalytics: function emitAnalytics(e) {},\n  copyBibcode: function copyBibcode() {\n    if (!this.bibcodeClipboard) {\n      this.bibcodeClipboard = new (clipboard__WEBPACK_IMPORTED_MODULE_3___default())('#abs-bibcode-copy');\n      this.bibcodeClipboard.on('success', function () {\n        jquery__WEBPACK_IMPORTED_MODULE_5___default()('#abs-bibcode-copy-msg').show().fadeOut(1000);\n      });\n    }\n  },\n  onRender: function onRender() {\n    this.$('.icon-help').popover({\n      trigger: 'hover',\n      placement: 'right',\n      html: true,\n      container: 'body'\n    });\n\n    if ((mathjax__WEBPACK_IMPORTED_MODULE_13___default())) {\n      mathjax__WEBPACK_IMPORTED_MODULE_13___default().Hub.Queue(['Typeset', (mathjax__WEBPACK_IMPORTED_MODULE_13___default().Hub), this.$('.s-abstract-title', this.el).get(0)]);\n      mathjax__WEBPACK_IMPORTED_MODULE_13___default().Hub.Queue(['Typeset', (mathjax__WEBPACK_IMPORTED_MODULE_13___default().Hub), this.$('.s-abstract-text', this.el).get(0)]);\n    }\n\n    this.copyBibcode();\n  }\n});\nvar AbstractWidget = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_8__[\"default\"].extend({\n  initialize: function initialize(options) {\n    options = options || {};\n    this.model = options.data ? new AbstractModel(options.data, {\n      parse: true\n    }) : new AbstractModel();\n    this.view = utils__WEBPACK_IMPORTED_MODULE_15__[\"default\"].withPrerenderedContent(new AbstractView({\n      model: this.model\n    }));\n    this.listenTo(this.view, 'all', this.onAllInternalEvents);\n    js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_8__[\"default\"].prototype.initialize.apply(this, arguments);\n    this._docs = {};\n    this.maxAuthors = MAX_AUTHORS;\n    this.isFetchingAff = false;\n    this.listenTo(this.model, 'change:bibcode', this._onAbstractLoaded);\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n    this.activateWidget();\n    this.attachGeneralHandler(this.onApiFeedback);\n    var pubsub = beehive.getService('PubSub');\n\n    underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].bindAll(this, ['onNewQuery', 'dispatchRequest', 'processResponse', 'onDisplayDocuments']);\n\n    pubsub.subscribe(pubsub.START_SEARCH, this.onNewQuery);\n    pubsub.subscribe(pubsub.INVITING_REQUEST, this.dispatchRequest);\n    pubsub.subscribe(pubsub.DELIVERING_RESPONSE, this.processResponse);\n    pubsub.subscribe(pubsub.DISPLAY_DOCUMENTS, this.onDisplayDocuments);\n  },\n  onApiFeedback: function onApiFeedback(feedback) {\n    // there was an error\n    if (feedback && feedback.error) {\n      this.showError();\n      this.updateState(this.STATES.ERRORED);\n    }\n  },\n  defaultQueryArguments: {\n    fl: 'identifier,[citations],abstract,author,book_author,orcid_pub,publisher,orcid_user,orcid_other,bibcode,citation_count,comment,doi,id,keyword,page,property,pub,pub_raw,pubdate,pubnote,read_count,title,volume,database',\n    rows: 1\n  },\n  mergeStashedDocs: function mergeStashedDocs(docs) {\n    underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].each(docs, function (d) {\n      if (!this._docs[d.bibcode]) {\n        this._docs[d.bibcode] = this.model.parse(d);\n      }\n    }, this);\n  },\n  onNewQuery: function onNewQuery(apiQuery) {\n    // only empty docs array if it truly is a new query\n    var newQueryJSON = apiQuery.toJSON();\n\n    var currentStreamlined = underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].pick(this.getCurrentQuery().toJSON(), underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].keys(newQueryJSON));\n\n    if (JSON.stringify(newQueryJSON) !== JSON.stringify(currentStreamlined)) {\n      this._docs = {};\n    }\n  },\n  dispatchRequest: function dispatchRequest(apiQuery) {\n    this.setCurrentQuery(apiQuery);\n    js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_8__[\"default\"].prototype.dispatchRequest.apply(this, arguments);\n  },\n  // bibcode is already in _docs\n  displayBibcode: function displayBibcode(bibcode) {\n    // if _docs is empty, stop here\n    if (underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].isEmpty(this._docs)) {\n      return;\n    } // wipe out the former values, because this new set of data\n    // might not have every key\n\n\n    this.model.clear({\n      silent: true\n    });\n    this.model.set(this._docs[bibcode]);\n    this._current = bibcode; // let other widgets know details\n\n    var c = this._docs[bibcode]['[citations]'] || {\n      num_citations: 0,\n      num_references: 0\n    };\n    var resolvedCitations = c ? c.num_citations : 0;\n    this.trigger('page-manager-event', 'broadcast-payload', {\n      title: this._docs[bibcode].title,\n      abstract: this._docs[bibcode].abstract,\n      // this should be superfluous, widgets already subscribe to display_documents\n      bibcode: bibcode,\n      // used by citation list widget\n      citation_discrepancy: this._docs[bibcode].citation_count - resolvedCitations,\n      citation_count: this._docs[bibcode].citation_count,\n      references_count: c.num_references,\n      read_count: this._docs[bibcode].read_count,\n      property: this._docs[bibcode].property\n    });\n\n    if (this.hasPubSub()) {\n      var ps = this.getPubSub();\n      ps.publish(ps.CUSTOM_EVENT, 'update-document-title', this._docs[bibcode].title);\n    }\n\n    this.updateState(this.STATES.IDLE);\n  },\n  onAbstractPage: function onAbstractPage() {\n    // hacky way of confirming the page we're on\n    return /\\/abstract$/.test(backbone__WEBPACK_IMPORTED_MODULE_4___default().history.getFragment());\n  },\n  onDisplayDocuments: function onDisplayDocuments(apiQuery) {\n    this.updateState(this.STATES.LOADING);\n    var stashedDocs = []; // check to see if a query is already in progress (the way bbb is set up, it will be)\n    // if so, auto fill with docs initially requested by results widget\n\n    try {\n      stashedDocs = this.getBeeHive().getObject('DocStashController').getDocs();\n    } catch (e) {\n      stashedDocs = [];\n    } finally {\n      this.mergeStashedDocs(stashedDocs);\n    }\n\n    var bibcode = this.parseIdentifierFromQuery(apiQuery);\n\n    if (bibcode === 'null') {\n      var msg = {\n        numFound: 0,\n        noDocs: true\n      };\n      this.showError({\n        noDocs: true\n      });\n      this.trigger('page-manager-event', 'widget-ready', msg);\n      return;\n    }\n\n    if (this._docs[bibcode]) {\n      // we have already loaded it\n      this.displayBibcode(bibcode);\n    } else {\n      if (apiQuery.has('__show')) return; // cycle protection\n\n      var q = apiQuery.clone();\n      q.set('__show', bibcode); // this will add required fields\n\n      this.dispatchRequest(q);\n    }\n  },\n  onAllInternalEvents: function onAllInternalEvents(ev, arg1) {\n    if ((ev === 'next' || ev === 'prev') && this._current) {\n      var keys = underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].keys(this._docs);\n\n      var pubsub = this.getPubSub();\n\n      var curr = underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].indexOf(keys, this._current);\n\n      if (curr > -1) {\n        if (ev === 'next' && curr + 1 < keys.length) {\n          pubsub.publish(pubsub.DISPLAY_DOCUMENTS, keys[curr + 1]);\n        } else if (curr - 1 > 0) {\n          pubsub.publish(pubsub.DISPLAY_DOCUMENTS, keys[curr - 1]);\n        }\n      }\n    }\n\n    if (ev === 'fetchAffiliations') {\n      this.fetchAffiliations(arg1);\n    }\n  },\n  fetchAffiliations: function fetchAffiliations(cb) {\n    var _this2 = this;\n\n    if ((!this.model.has('aff') || this.model.get('aff').length === 0) && !this.isFetchingAff) {\n      this.isFetchingAff = true;\n      var ps = this.getPubSub();\n      var query = this.getCurrentQuery().clone();\n      query.unlock();\n\n      var _this$model$toJSON = this.model.toJSON(),\n          bibcode = _this$model$toJSON.bibcode,\n          author = _this$model$toJSON.author,\n          orcid_pub = _this$model$toJSON.orcid_pub,\n          orcid_user = _this$model$toJSON.orcid_user,\n          orcid_other = _this$model$toJSON.orcid_other;\n\n      query.set('q', \"identifier:\".concat(bibcode));\n      query.set('fl', ['aff', 'orcid_pub', 'orcid_user', 'orcid_other']);\n      query.set('rows', 1);\n      ps.publish(ps.EXECUTE_REQUEST, new js_components_api_request__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n        target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].SEARCH,\n        query: query,\n        options: {\n          always: function always() {\n            _this2.isFetchingAff = false;\n          },\n          done: function done(resp) {\n            if (resp && resp.response && resp.response.docs && resp.response.docs.length > 0) {\n              var newEntries = _this2.model.parse({\n                author: author,\n                orcid_pub: orcid_pub,\n                orcid_user: orcid_user,\n                orcid_other: orcid_other,\n                aff: resp.response.docs[0].aff\n              });\n\n              _this2._docs[bibcode] = _objectSpread({}, _this2._docs[bibcode], newEntries);\n\n              _this2.model.set(newEntries);\n            }\n\n            cb();\n          },\n          fail: function fail(err) {\n            cb(err);\n          }\n        }\n      }));\n    } else {\n      cb();\n    }\n  },\n  _onAbstractLoaded: function _onAbstractLoaded() {\n    var doc = this.model.toJSON();\n    var ps = this.getPubSub();\n\n    if (ps && doc) {\n      ps.publish(ps.CUSTOM_EVENT, 'latest-abstract-data', doc);\n    }\n  },\n  processResponse: function processResponse(apiResponse) {\n    var r = apiResponse.toJSON();\n    var self = this;\n\n    if (r.response && r.response.docs) {\n      var docs = r.response.docs;\n\n      var __show = apiResponse.get('responseHeader.params.__show', false, '');\n\n      underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].each(docs, function (doc) {\n        var d = self.model.parse(doc, self.maxAuthors);\n        var ids = d.identifier; // if __show is defined and it is found in the list of identifiers or only a single document\n        // was provided - then set the __show value to the bibcode of the document\n\n        if (__show && (ids && ids.length > 0 && underscore__WEBPACK_IMPORTED_MODULE_6__[\"default\"].contains(ids, __show) || docs.length === 1)) {\n          __show = d.bibcode;\n        }\n\n        self._docs[d.bibcode] = d;\n      });\n\n      if (__show) {\n        this.displayBibcode(__show);\n      }\n    }\n\n    var msg = {};\n    msg.numFound = apiResponse.get('response.numFound', false, 0);\n\n    if (msg.numFound === 0) {\n      this.showError({\n        noDocs: true\n      });\n      msg.noDocs = true;\n    }\n\n    this.trigger('page-manager-event', 'widget-ready', msg);\n  },\n  showError: function showError(opts) {\n    var options = opts || {}; // if noDocs, do not set error\n\n    this.model.set({\n      error: !options.noDocs,\n      loading: false\n    });\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (AbstractWidget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/abstract/widget.js?");

/***/ }),

/***/ "./src/js/widgets/alerts/modal_view.js":
/*!*********************************************!*\
  !*** ./src/js/widgets/alerts/modal_view.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var hbs_js_widgets_alerts_templates_modal_template__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! hbs!js/widgets/alerts/templates/modal_template */ \"./src/js/widgets/alerts/templates/modal_template.html\");\n/* harmony import */ var hbs_js_widgets_alerts_templates_modal_template__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_alerts_templates_modal_template__WEBPACK_IMPORTED_MODULE_1__);\n\n\nvar ModalView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  id: '#alert-modal-content',\n  template: (hbs_js_widgets_alerts_templates_modal_template__WEBPACK_IMPORTED_MODULE_1___default()),\n  showModal: function showModal() {\n    $('#alert-modal').modal('show');\n  },\n  closeModal: function closeModal() {\n    $('#alert-modal').modal('hide');\n  },\n  modelEvents: {\n    change: 'render'\n  },\n  render: function render() {\n    // append parent container at end of html, where it needs to be\n    // this will prevent creation of infinite modals at the end of the document as before\n    if (!$('#modal-alert-content').length) {\n      // append to end of document\n      $('body').append(function () {\n        var out = '';\n\n        if ($('#alert-modal-label').length === 0) {\n          out += '<div id=\"alert-modal-label\" class=\"sr-only\">Alert</div>';\n        }\n\n        out += '<div class=\"modal fade\" id=\"alert-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"alert-modal-label\" aria-hidden=\"true\"></div>';\n        return out;\n      });\n      this.setElement($('#alert-modal')[0]);\n    }\n\n    if (!this.model.get('modal')) return; // log the error to console as well\n\n    if (this.model.get('type') === 'danger') {\n      console.error('error feedback: ', this.model.get('title'), this.model.get('msg'));\n    }\n\n    return marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.prototype.render.apply(this, arguments);\n  },\n  onRender: function onRender() {\n    this.showModal();\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (ModalView);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/alerts/modal_view.js?");

/***/ }),

/***/ "./src/js/widgets/alerts/page_top_alert.js":
/*!*************************************************!*\
  !*** ./src/js/widgets/alerts/page_top_alert.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var hbs_js_widgets_alerts_templates_page_top_alert__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! hbs!js/widgets/alerts/templates/page_top_alert */ \"./src/js/widgets/alerts/templates/page_top_alert.html\");\n/* harmony import */ var hbs_js_widgets_alerts_templates_page_top_alert__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_alerts_templates_page_top_alert__WEBPACK_IMPORTED_MODULE_1__);\n\n\nvar AlertView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  tagName: 'span',\n  className: 'alert-banner',\n  template: (hbs_js_widgets_alerts_templates_page_top_alert__WEBPACK_IMPORTED_MODULE_1___default()),\n  modelEvents: {\n    change: 'render'\n  },\n  events: {\n    'click #page-top-alert button.close': 'close'\n  },\n  close: function close() {\n    this.$('.alert').css('display', 'none');\n  },\n  render: function render() {\n    if (this.model.get('modal')) return this;\n\n    if (!this.model.get('msg') && !this.model.get('title')) {\n      this.$el.html('');\n      return this;\n    }\n\n    return marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.prototype.render.apply(this, arguments); // log the error to console as well\n\n    if (this.model.get('type') === 'danger') {\n      console.error('error feedback: ', this.model.get('title'), this.model.get('msg'));\n    }\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (AlertView);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/alerts/page_top_alert.js?");

/***/ }),

/***/ "./src/js/widgets/alerts/templates/modal_template.html":
/*!*************************************************************!*\
  !*** ./src/js/widgets/alerts/templates/modal_template.html ***!
  \*************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"        <i class=\\\"icon-danger fa-2x\\\" aria-hidden=\\\"true\\\"></i>\\n        \";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \"\\n        <i class=\\\"icon-success fa-2x\\\" aria-hidden=\\\"true\\\"></i>\\n        \";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    return \" \";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<!--html for modal alerts-->\\n\\n<div class=\\\"modal-dialog \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"type\") || (depth0 != null ? lookupProperty(depth0,\"type\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"type\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":25},\"end\":{\"line\":3,\"column\":33}}}) : helper)))\n    + \"\\\">\\n  <div class=\\\"modal-content\\\" id=\\\"modal-alert-content\\\">\\n    <div class=\\\"modal-header\\\">\\n      <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\">\\n        <span aria-hidden=\\\"true\\\">&times;</span\\n        ><span class=\\\"sr-only\\\">Close</span>\\n      </button>\\n\\n      <h4 class=\\\"modal-title\\\" id=\\\"alert-modal-label\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"type\") : depth0),\"danger\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":8},\"end\":{\"line\":14,\"column\":20}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"type\") : depth0),\"success\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":14,\"column\":21},\"end\":{\"line\":16,\"column\":20}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"type\") : depth0),\"warning\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":21},\"end\":{\"line\":16,\"column\":61}}})) != null ? stack1 : \"\")\n    + \" \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":62},\"end\":{\"line\":16,\"column\":71}}}) : helper)))\n    + \"\\n      </h4>\\n    </div>\\n    <div class=\\\"modal-body\\\">\\n      \"\n    + ((stack1 = ((helper = (helper = lookupProperty(helpers,\"msg\") || (depth0 != null ? lookupProperty(depth0,\"msg\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"msg\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":6},\"end\":{\"line\":20,\"column\":15}}}) : helper))) != null ? stack1 : \"\")\n    + \"\\n    </div>\\n    <div class=\\\"modal-footer\\\">\\n      <button type=\\\"button\\\" class=\\\"btn btn-default btn-sm\\\" data-dismiss=\\\"modal\\\">\\n        Close\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/alerts/templates/modal_template.html?");

/***/ }),

/***/ "./src/js/widgets/alerts/templates/page_top_alert.html":
/*!*************************************************************!*\
  !*** ./src/js/widgets/alerts/templates/page_top_alert.html ***!
  \*************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"alert alert-\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"type\") || (depth0 != null ? lookupProperty(depth0,\"type\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"type\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":24},\"end\":{\"line\":2,\"column\":32}}}) : helper)))\n    + \"\\\" id=\\\"page-top-alert\\\">\\n  <div>\\n    \"\n    + ((stack1 = ((helper = (helper = lookupProperty(helpers,\"msg\") || (depth0 != null ? lookupProperty(depth0,\"msg\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"msg\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":4},\"end\":{\"line\":4,\"column\":13}}}) : helper))) != null ? stack1 : \"\")\n    + \"\\n  </div>\\n  <div>\\n    <button type=\\\"button\\\" class=\\\"close\\\">\\n      <span aria-hidden=\\\"true\\\"\\n        ><i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i></span\\n      ><span class=\\\"sr-only\\\">Close</span>\\n    </button>\\n  </div>\\n</div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"msg\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":14,\"column\":7}}})) != null ? stack1 : \"\");\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/alerts/templates/page_top_alert.html?");

/***/ }),

/***/ "./src/js/widgets/alerts/widget.js":
/*!*****************************************!*\
  !*** ./src/js/widgets/alerts/widget.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_components_alerts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/alerts */ \"./src/js/components/alerts.js\");\n/* harmony import */ var js_widgets_alerts_modal_view__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/widgets/alerts/modal_view */ \"./src/js/widgets/alerts/modal_view.js\");\n/* harmony import */ var js_widgets_alerts_page_top_alert__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/widgets/alerts/page_top_alert */ \"./src/js/widgets/alerts/page_top_alert.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var jquery_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jquery-ui */ \"./src/libs/jquery-ui.js\");\n/* harmony import */ var jquery_ui__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(jquery_ui__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! bootstrap */ \"./src/libs/bootstrap/bootstrap.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_9__);\n/**\n * This widget is capable of displaying messages to the user, however it does not\n * listen on the PubSub. It is invoked/controlled by alerts_mediator. That is the\n * controller which decides what to do.\n */\n\n\n\n\n\n\n\n\n\n\nvar AlertModel = Backbone.Model.extend({\n  defaults: {\n    type: 'info',\n    msg: undefined,\n    title: undefined,\n    events: undefined,\n    modal: false\n  }\n});\n/*\n * function called in onRender method of all alert views\n * this allows for custom events to be added to the alert views\n * when the events happen, a promise is resolved with the name of the event\n * NOTE: this assumes there is only 1 event per alert view\n *\n * Need to add events object to apiFeedback passed into alerts:\n * events: {\n *   'click': 'button[data-dismiss=modal]'\n * }\n * */\n\nfunction delegateAdditionalEvents() {\n  var self = this;\n  var events = this.model.get('events');\n  var delegateEventSplitter = /^(\\S+)\\s*(.*)$/; // first, remove previous events\n\n  if (this.$el) {\n    this.$el.off('.customEvents' + this.mid);\n  } // attach functions to events; copied from backbone\n  // when 'event' is fired, it will call/resolve the\n  // promise object with the name of the event\n\n\n  if (events) {\n    _.each(events, function (evtValue, evt) {\n      var match = evt.match(delegateEventSplitter);\n      var eventName = match[1];\n      var selector = match[2];\n      var key = evt; // create an event listener that resolves the promise\n      // with the supplied data when there is the proper event\n\n      var method = function method(ev) {\n        var promise = this.model.get('promise');\n        var evts = this.model.get('events');\n\n        if (evts[key]) {\n          promise.resolve(evts[key]);\n        } else {\n          promise.resolve(key);\n        } // unless it is modal, close it automatically\n\n\n        if (!this.model.get('modal')) {\n          this.model.set('msg', null);\n        }\n\n        return false;\n      };\n\n      method = _.bind(method, self);\n      eventName += '.customEvents' + this.mid;\n\n      if (selector === '') {\n        self.$el.on(eventName, method);\n      } else {\n        self.$el.on(eventName, selector, method);\n      }\n    });\n  }\n}\n\nvar modalOnRender = js_widgets_alerts_modal_view__WEBPACK_IMPORTED_MODULE_5__[\"default\"].prototype.onRender;\n\njs_widgets_alerts_modal_view__WEBPACK_IMPORTED_MODULE_5__[\"default\"].prototype.onRender = function () {\n  delegateAdditionalEvents.apply(this, arguments);\n  if (modalOnRender) modalOnRender.apply(this, arguments);\n};\n\nvar bannerOnRender = js_widgets_alerts_page_top_alert__WEBPACK_IMPORTED_MODULE_6__[\"default\"].prototype.onRender;\n\njs_widgets_alerts_page_top_alert__WEBPACK_IMPORTED_MODULE_6__[\"default\"].prototype.onRender = function () {\n  delegateAdditionalEvents.apply(this, arguments);\n  if (bannerOnRender) bannerOnRender.apply(this, arguments);\n};\n\nvar AlertsWidget = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend({\n  initialize: function initialize(options) {\n    this.model = new AlertModel();\n    this.view = new js_widgets_alerts_page_top_alert__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n      model: this.model\n    });\n    this.modalView = new js_widgets_alerts_modal_view__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n      model: this.model\n    });\n    js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_1__[\"default\"].prototype.initialize.apply(this, arguments);\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive); // listen to navigate event and close widget\n\n    var pubsub = this.getPubSub();\n    pubsub.subscribe(pubsub.NAVIGATE, this.modalView.closeModal);\n  },\n  alert: function alert(feedback) {\n    var promise = jquery__WEBPACK_IMPORTED_MODULE_7___default().Deferred();\n    this.model.set({\n      msg: feedback.msg,\n      events: feedback.events,\n      title: feedback.title,\n      type: feedback.type || 'info',\n      modal: feedback.modal,\n      promise: promise\n    });\n    return promise.promise();\n  },\n  closeView: function closeView() {\n    this.view.close();\n    this.modalView.closeModal();\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (AlertsWidget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/alerts/widget.js?");

/***/ }),

/***/ "./src/js/widgets/api_query/templates/item-view.html":
/*!***********************************************************!*\
  !*** ./src/js/widgets/api_query/templates/item-view.html ***!
  \***********************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<td class=\\\"key\\\"><input type=\\\"text\\\" name=\\\"key\\\" value=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"key\") || (depth0 != null ? lookupProperty(depth0,\"key\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"key\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":53},\"end\":{\"line\":1,\"column\":60}}}) : helper)))\n    + \"\\\"/></td>\\n<td class=\\\"value\\\"><input type=\\\"text\\\" name=\\\"value\\\" value=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"value\") || (depth0 != null ? lookupProperty(depth0,\"value\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"value\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":57},\"end\":{\"line\":2,\"column\":66}}}) : helper)))\n    + \"\\\"/></td>\\n<td> <a class=\\\"remove\\\">remove</a></td>\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/api_query/templates/item-view.html?");

/***/ }),

/***/ "./src/js/widgets/api_query/templates/widget-view.html":
/*!*************************************************************!*\
  !*** ./src/js/widgets/api_query/templates/widget-view.html ***!
  \*************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div id=\\\"api-query\\\" class=\\\"well well-small\\\">\\n    <h5>Query Inspection</h5>\\n    <form>\\n        <input type=\\\"text\\\" placeholder=\\\"Copy&Paste serialized query here\\\" id=\\\"api-query-input\\\" value=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"initialValue\") || (depth0 != null ? lookupProperty(depth0,\"initialValue\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"initialValue\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":102},\"end\":{\"line\":4,\"column\":118}}}) : helper)))\n    + \"\\\"/>\\n        <button id=\\\"api-query-load\\\">Load</button>\\n        <button id=\\\"api-query-add\\\">Add</button>\\n        <button id=\\\"api-query-run\\\">Run</button>\\n\\n    <table id=\\\"api-query-values\\\">\\n\\n    </table>\\n\\n    Result: <pre id=\\\"api-query-result\\\"></pre>\\n    </form>\\n</div>\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/api_query/templates/widget-view.html?");

/***/ }),

/***/ "./src/js/widgets/api_query/widget.js":
/*!********************************************!*\
  !*** ./src/js/widgets/api_query/widget.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_pubsub_events__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/pubsub_events */ \"./src/js/components/pubsub_events.js\");\n/* harmony import */ var hbs_js_widgets_api_query_templates_widget_view__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! hbs!js/widgets/api_query/templates/widget-view */ \"./src/js/widgets/api_query/templates/widget-view.html\");\n/* harmony import */ var hbs_js_widgets_api_query_templates_widget_view__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_api_query_templates_widget_view__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var hbs_js_widgets_api_query_templates_item_view__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! hbs!js/widgets/api_query/templates/item-view */ \"./src/js/widgets/api_query/templates/item-view.html\");\n/* harmony import */ var hbs_js_widgets_api_query_templates_item_view__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_api_query_templates_item_view__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/**\n * Created by rchyla on 3/19/14.\n */\n\n\n\n\n\n\n\n\n // Model\n\nvar KeyValue = backbone__WEBPACK_IMPORTED_MODULE_2___default().Model.extend({}); // Collection of data\n\nvar KeyValueCollection = backbone__WEBPACK_IMPORTED_MODULE_2___default().Collection.extend({\n  model: KeyValue\n});\nvar ItemView = marionette__WEBPACK_IMPORTED_MODULE_3___default().ItemView.extend({\n  tagName: 'tr',\n  template: (hbs_js_widgets_api_query_templates_item_view__WEBPACK_IMPORTED_MODULE_7___default()),\n  events: {\n    'click .remove': 'removeItem',\n    'blur input[name=key]': 'onChange',\n    'blur input[name=value]': 'onChange'\n  },\n  onChange: function onChange(ev) {\n    var container = jquery__WEBPACK_IMPORTED_MODULE_1___default()(ev.target);\n\n    var attr = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(this.model.attributes);\n\n    var newVal = jquery__WEBPACK_IMPORTED_MODULE_1___default()(ev.target).val();\n\n    if (container.attr('name') == 'key' && attr.key != newVal) {\n      this.trigger('key-changed', this.model, newVal);\n    } else if (container.attr('name') == 'value' && attr.value != newVal) {\n      this.trigger('value-changed', this.model, newVal);\n    }\n  },\n  removeItem: function removeItem(ev) {\n    this.trigger('remove-clicked', this.model);\n    return false;\n  }\n});\nvar WidgetView = marionette__WEBPACK_IMPORTED_MODULE_3___default().CompositeView.extend({\n  template: (hbs_js_widgets_api_query_templates_widget_view__WEBPACK_IMPORTED_MODULE_6___default()),\n  childView: ItemView,\n  childViewContainer: '#api-query-values',\n  events: {\n    'click button#api-query-load': 'loadApiQuery',\n    'click button#api-query-add': 'addNewItem',\n    'click button#api-query-run': 'runApiQuery',\n    'submit form': 'loadApiQuery'\n  },\n  addNewItem: function addNewItem(ev) {\n    this.trigger('add-new-item', this);\n    return false;\n  },\n  loadApiQuery: function loadApiQuery(ev) {\n    var data = this.$el.find('input#api-query-input').val();\n\n    if (data && underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(data) && data.trim().length > 0) {\n      this.trigger('load-api-query', data);\n    }\n\n    return false;\n  },\n  runApiQuery: function runApiQuery(ev) {\n    var q = new js_components_api_query__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(this.collection.models, function (a) {\n      var attr = a.attributes;\n\n      if (attr.key) {\n        q.set(attr.key, attr.value.split('|'));\n      }\n    });\n\n    this.$el.find('#api-query-result').text(q.url());\n    this.trigger('run-api-query', q);\n    return false;\n  },\n  updateInputBox: function updateInputBox(data) {\n    this.$el.find('input#api-query-input').val(data);\n  },\n  removeKey: function removeKey(data) {\n    this.trigger('remove-key', data);\n  }\n});\nvar WidgetController = marionette__WEBPACK_IMPORTED_MODULE_3___default().Controller.extend({\n  initialize: function initialize(apiQuery) {\n    if (!apiQuery || !(apiQuery instanceof js_components_api_query__WEBPACK_IMPORTED_MODULE_4__[\"default\"])) {\n      apiQuery = new js_components_api_query__WEBPACK_IMPORTED_MODULE_4__[\"default\"](); // empty\n    }\n\n    this.collection = new KeyValueCollection(this.getData(apiQuery));\n    this.view = new WidgetView({\n      collection: this.collection,\n      model: new KeyValue({\n        initialValue: apiQuery.url() || 'q=planet'\n      })\n    });\n    this.listenTo(this.view, 'all', this.onAll);\n    return this;\n  },\n  render: function render() {\n    this.view.render();\n    return this.view;\n  },\n  onLoad: function onLoad(apiQuery) {\n    if (this.collection) {\n      this.collection.reset(this.getData(apiQuery));\n    } else {\n      this.initialize(apiQuery);\n    }\n  },\n\n  /**\n   * This is the central function - listening to all events\n   * in this widget's views; and manipulating the models\n   * that back views\n   */\n  onAll: function onAll() {\n    // console.log('onAll', arguments[0]);\n    var event = arguments[0];\n\n    if (event == 'childview:remove-clicked') {\n      arguments[2].destroy();\n    } else if (event == 'childview:key-changed') {\n      arguments[2].set('key', arguments[3]);\n    } else if (event == 'childview:value-changed') {\n      arguments[2].set('value', arguments[3]);\n    } else if (event == 'add-new-item') {\n      arguments[1].collection.add({\n        key: '',\n        value: ''\n      });\n    } else if (event == 'load-api-query') {\n      this.onLoad(arguments[1]);\n    } else if (event == 'run-api-query') {\n      this.view.updateInputBox(arguments[1].url()); // update the input box\n\n      this.onRun(arguments[1]);\n    }\n  },\n\n  /**\n   * Function to massage input values and return what we want to\n   * pass to the model\n   *\n   * @param apiQuery\n   * @returns {*|Array}\n   */\n  getData: function getData(apiQuery) {\n    if (!apiQuery) {\n      throw Error('Wrong input!');\n    }\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(apiQuery)) {\n      apiQuery = new js_components_api_query__WEBPACK_IMPORTED_MODULE_4__[\"default\"]().load(apiQuery);\n    }\n\n    var pairs = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(apiQuery.pairs(), function (pair) {\n      return {\n        key: pair[0],\n        value: pair[1].join('|')\n      };\n    });\n\n    return pairs;\n  },\n\n  /**\n   * The methods below are only working if you activate the widget and\n   * pass it BeeHive\n   *\n   * @param beehive\n   */\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n    var pubsub = this.getPubSub();\n    pubsub.subscribe('all', underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.onAllPubSub, this));\n  },\n\n  /**\n   * Catches and displays ApiQuery that has travelled through the\n   * PubSub queue\n   */\n  onAllPubSub: function onAllPubSub() {\n    var event = arguments[0];\n\n    if (event == js_components_pubsub_events__WEBPACK_IMPORTED_MODULE_5__[\"default\"].START_SEARCH || event == js_components_pubsub_events__WEBPACK_IMPORTED_MODULE_5__[\"default\"].INVITING_REQUEST) {\n      console.log('[debug:ApiQueryWidget]', arguments[0]); // this.onLoad(arguments[1]);\n\n      this.view.updateInputBox(arguments[1].url()); // update the input\n    }\n  },\n\n  /**\n   * Called by the UI View when 'Run' is clicked; you can override\n   * the method to provide your own impl\n   *\n   * @param ApiQuery\n   */\n  onRun: function onRun(apiQuery) {\n    if (this.hasPubSub()) {\n      this.getPubSub().publish(this.getPubSub().START_SEARCH, apiQuery);\n    }\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(WidgetController.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_8__[\"default\"].BeeHive);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (WidgetController);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/api_query/widget.js?");

/***/ }),

/***/ "./src/js/widgets/authentication/templates/container.html":
/*!****************************************************************!*\
  !*** ./src/js/widgets/authentication/templates/container.html ***!
  \****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div\\n  class=\\\"form-container s-form-container  col-sm-10 col-sm-offset-1  col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3\\\"\\n  style=\\\"padding-right: 0;\\\"\\n></div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/authentication/templates/container.html?");

/***/ }),

/***/ "./src/js/widgets/authentication/templates/log-in.html":
/*!*************************************************************!*\
  !*** ./src/js/widgets/authentication/templates/log-in.html ***!
  \*************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <div class=\\\"row\\\">\\n    <div class=\\\"col-sm-10 col-sm-offset-1 text-center\\\">\\n      <div class=\\\"alert alert-danger\\\">\\n        <p>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"errorMsg\") || (depth0 != null ? lookupProperty(depth0,\"errorMsg\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"errorMsg\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":42,\"column\":11},\"end\":{\"line\":42,\"column\":23}}}) : helper)))\n    + \"</p>\\n        <p><a class=\\\"link\\\" id=\\\"dismiss-error\\\">Dismiss</a></p>\\n      </div>\\n    </div>\\n  </div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"panel panel-default\\\">\\n  <legend class=\\\"panel-heading\\\">\\n    Log in to ADS\\n  </legend>\\n  <form class=\\\"panel-body\\\">\\n    <div class=\\\"form-group has-feedback\\\">\\n      <label for=\\\"email\\\" class=\\\"control-label\\\"> Email address </label>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n      <input type=\\\"email\\\" class=\\\"form-control\\\" name=\\\"email\\\" id=\\\"email\\\" placeholder=\\\"Enter email\\\" />\\n    </div>\\n\\n    <div class=\\\"form-group has-feedback\\\">\\n      <label for=\\\"password\\\" class=\\\"control-label\\\"> Password </label>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n      <input type=\\\"password\\\" class=\\\"form-control\\\" name=\\\"password\\\" id=\\\"password\\\" placeholder=\\\"Password\\\" />\\n    </div>\\n\\n    <button type=\\\"button\\\" class=\\\"btn btn-link show-reset-password-1\\\">\\n      Forgot your password?\\n    </button>\\n    <span class=\\\"help-block no-show s-help-block\\\"></span>\\n\\n    <div class=\\\"form-group has-feedback\\\">\\n      <span class=\\\"help-block no-show s-help-block s-help-block-submit\\\"></span>\\n      <button type=\\\"submit\\\" class=\\\"btn btn-primary-faded submit-login\\\">\\n        Submit\\n      </button>\\n    </div>\\n\\n    <div style=\\\"display: flex; justify-content: center;\\\">\\n      <strong>Don't have an account yet?&nbsp;<button type=\\\"button\\\" href=\\\"#\\\" class=\\\"btn btn-link show-register\\\">Register</button></strong>\\n    </div>\\n    <div style=\\\"display: flex; justify-content: center; align-items: center\\\">\\n      <div style=\\\"margin-right: 1rem\\\"></div> <button type=\\\"button\\\" class=\\\"btn btn-link show-resend-verification-email\\\">Resend verification email?</button>\\n    </div>\\n  </form>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"hasError\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":38,\"column\":2},\"end\":{\"line\":47,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/authentication/templates/log-in.html?");

/***/ }),

/***/ "./src/js/widgets/authentication/templates/register.html":
/*!***************************************************************!*\
  !*** ./src/js/widgets/authentication/templates/register.html ***!
  \***************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <div class=\\\"row\\\">\\n    <div class=\\\"col-sm-10 col-sm-offset-1 text-center\\\">\\n      <div class=\\\"alert alert-danger\\\">\\n        <p>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"errorMsg\") || (depth0 != null ? lookupProperty(depth0,\"errorMsg\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"errorMsg\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":72,\"column\":11},\"end\":{\"line\":72,\"column\":23}}}) : helper)))\n    + \"</p>\\n        <p><a class=\\\"link\\\" id=\\\"dismiss-error\\\">Dismiss</a></p>\\n      </div>\\n    </div>\\n  </div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"panel panel-default\\\">\\n  <legend class=\\\"panel-heading\\\">Register for an ADS Account\\n  </legend>\\n  <form class=\\\"panel-body\\\">\\n    <div class=\\\"form-group has-feedback\\\">\\n      <label for=\\\"given_name\\\" class=\\\"control-label\\\">\\n        First Name\\n      </label>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n      <input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"given_name\\\" id=\\\"given_name\\\" placeholder=\\\"First Name\\\"/>\\n    </div>\\n\\n    <div class=\\\"form-group has-feedback\\\">\\n      <label for=\\\"family_name\\\" class=\\\"control-label\\\">\\n        Last Name\\n      </label>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n      <input type=\\\"text\\\" class=\\\"form-control\\\" name=\\\"family_name\\\" id=\\\"family_name\\\" placeholder=\\\"Last Name\\\"/>\\n    </div>\\n\\n    <div class=\\\"form-group has-feedback\\\">\\n      <label for=\\\"email\\\" class=\\\"control-label\\\">\\n        Email address\\n        <span style=\\\"color:red\\\">*</span>\\n      </label>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n      <input type=\\\"email\\\" class=\\\"form-control\\\" name=\\\"email\\\" id=\\\"email\\\" placeholder=\\\"me@example.com\\\"/>\\n    </div>\\n\\n    <div class=\\\"form-group has-feedback\\\">\\n      <label for=\\\"password1\\\" class=\\\"control-label\\\">\\n        Password\\n        <span style=\\\"color:red\\\">*</span>\\n        <small class=\\\"s-user-help\\\"> at least 8 characters, with at least 1 number and 1 capital letter</small>\\n      </label>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n      <input type=\\\"password\\\" class=\\\"form-control\\\" name=\\\"password1\\\" id=\\\"password1\\\" placeholder=\\\"********\\\"/>\\n    </div>\\n\\n    <div class=\\\"form-group has-feedback\\\">\\n      <label for=\\\"password2\\\" class=\\\"control-label\\\">\\n        Re-enter Password\\n        <span style=\\\"color:red\\\">*</span>\\n      </label>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n      <input type=\\\"password\\\" class=\\\"form-control\\\" name=\\\"password2\\\" id=\\\"password2\\\" placeholder=\\\"********\\\"/>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <button type=\\\"submit\\\" class=\\\"btn btn-primary-faded submit-register\\\" data-form-name=\\\"register\\\">Submit</button>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n    </div>\\n\\n    <div style=\\\"display: flex; justify-content: center;\\\">\\n      <strong>Already have an account?&nbsp;<a class=\\\"show-login\\\">Login</a></strong>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" style=\\\"margin-top: 2rem; display: flex; justify-content: center\\\">\\n      <div class=\\\"g-recaptcha\\\">\\n        <small class=\\\"recaptcha-msg\\\">This site is protected by reCAPTCHA and the Google\\n          <a href=\\\"https://policies.google.com/privacy\\\" target=\\\"_blank\\\" rel=\\\"noreferrer\\\">Privacy Policy</a> and\\n          <a href=\\\"https://policies.google.com/terms\\\" target=\\\"_blank\\\" rel=\\\"noreferrer\\\">Terms of Service</a>\\n          apply.</small>\\n      </div>\\n    </div>\\n  </form>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"hasError\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":68,\"column\":2},\"end\":{\"line\":77,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/authentication/templates/register.html?");

/***/ }),

/***/ "./src/js/widgets/authentication/templates/resend-verification-email.html":
/*!********************************************************************************!*\
  !*** ./src/js/widgets/authentication/templates/resend-verification-email.html ***!
  \********************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <div class=\\\"row\\\">\\n    <div class=\\\"col-sm-10 col-sm-offset-1 text-center\\\">\\n      <div class=\\\"alert alert-danger\\\">\\n        <p>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"errorMsg\") || (depth0 != null ? lookupProperty(depth0,\"errorMsg\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"errorMsg\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":11},\"end\":{\"line\":19,\"column\":23}}}) : helper)))\n    + \"</p>\\n        <p><a class=\\\"link\\\" id=\\\"dismiss-error\\\">Dismiss</a></p>\\n      </div>\\n    </div>\\n  </div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"panel panel-default\\\">\\n  <div class=\\\"panel-heading\\\">Resend Verification Email</div>\\n  <form class=\\\"panel-body\\\">\\n    <div class=\\\"form-group has-feedback\\\">\\n      <label for=\\\"email\\\" class=\\\"control-label\\\">Email address</label>\\n      <input type=\\\"email\\\" class=\\\"form-control\\\" id=\\\"email\\\" name=\\\"email\\\" placeholder=\\\"Enter email\\\" required>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n    </div>\\n    <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\">Resend Verification Email</button>\\n  </form>\\n  <div style=\\\"margin-top: 1rem; text-align: center;\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-link show-login\\\">Back to Login</button>\\n  </div>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"hasError\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":2},\"end\":{\"line\":24,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/authentication/templates/resend-verification-email.html?");

/***/ }),

/***/ "./src/js/widgets/authentication/templates/reset-password-1.html":
/*!***********************************************************************!*\
  !*** ./src/js/widgets/authentication/templates/reset-password-1.html ***!
  \***********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <div class=\\\"row\\\">\\n    <div class=\\\"col-sm-10 col-sm-offset-1 text-center\\\">\\n      <div class=\\\"alert alert-danger\\\">\\n        <p>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"errorMsg\") || (depth0 != null ? lookupProperty(depth0,\"errorMsg\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"errorMsg\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":36,\"column\":11},\"end\":{\"line\":36,\"column\":23}}}) : helper)))\n    + \"</p>\\n        <p><a class=\\\"link\\\" id=\\\"dismiss-error\\\">Dismiss</a></p>\\n      </div>\\n    </div>\\n  </div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"panel panel-default\\\">\\n  <legend class=\\\"panel-heading\\\"> Password Reset\\n  </legend>\\n  <form class=\\\"panel-body\\\">\\n    <div class=\\\"form-group has-feedback\\\">\\n      <label for=\\\"email\\\" class=\\\"control-label\\\"> Email address </label>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n      <input type=\\\"email\\\" class=\\\"form-control\\\" name=\\\"email\\\" id=\\\"email\\\" placeholder=\\\"Enter email\\\"/>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <button type=\\\"submit\\\" class=\\\"btn btn-primary-faded submit-reset-password\\\" data-form-name=\\\"reset_password\\\">Submit\\n      </button>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n    </div>\\n\\n    <div style=\\\"display: flex; justify-content: center;\\\">\\n      <strong><a class=\\\"show-login\\\">Return to login form</a></strong>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" style=\\\"margin-top: 2rem\\\">\\n      <div class=\\\"g-recaptcha\\\">\\n        <small class=\\\"recaptcha-msg\\\">This site is protected by reCAPTCHA and the Google\\n          <a href=\\\"https://policies.google.com/privacy\\\" target=\\\"_blank\\\" rel=\\\"noreferrer\\\">Privacy Policy</a> and\\n          <a href=\\\"https://policies.google.com/terms\\\" target=\\\"_blank\\\" rel=\\\"noreferrer\\\">Terms of Service</a>\\n          apply.</small>\\n      </div>\\n    </div>\\n\\n  </form>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"hasError\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":32,\"column\":2},\"end\":{\"line\":41,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/authentication/templates/reset-password-1.html?");

/***/ }),

/***/ "./src/js/widgets/authentication/templates/reset-password-2.html":
/*!***********************************************************************!*\
  !*** ./src/js/widgets/authentication/templates/reset-password-2.html ***!
  \***********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <div class=\\\"row\\\">\\n        <div class=\\\"col-sm-10 col-sm-offset-1 text-center\\\">\\n            <div class=\\\"alert alert-danger\\\">\\n                <p>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"errorMsg\") || (depth0 != null ? lookupProperty(depth0,\"errorMsg\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"errorMsg\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":30,\"column\":19},\"end\":{\"line\":30,\"column\":31}}}) : helper)))\n    + \"</p>\\n                <p><a class=\\\"link\\\" id=\\\"dismiss-error\\\">Dismiss</a></p>\\n            </div>\\n        </div>\\n    </div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"panel panel-default\\\">\\n    <legend class=\\\"panel-heading\\\"> Password Reset\\n    </legend>\\n    <form class=\\\"panel-body\\\">\\n        <div class=\\\"form-group has-feedback\\\">\\n            <label for=\\\"password1\\\" class=\\\"control-label\\\"> New password </label>\\n            <span class=\\\"help-block no-show s-help-block\\\"></span>\\n            <div class=\\\"s-user-help\\\">Passwords should be at least eight characters and include at least one number and one capital letter.</div>\\n            <input type=\\\"password\\\" class=\\\"form-control\\\" name=\\\"password1\\\" id=\\\"password1\\\" placeholder=\\\"Password\\\"/>\\n\\n        </div>\\n\\n        <div class=\\\"form-group has-feedback\\\">\\n            <label  for=\\\"password2\\\" class=\\\"control-label\\\"> Re-enter new password </label>\\n            <span class=\\\"help-block no-show s-help-block\\\"></span>\\n            <input type=\\\"password\\\" class=\\\"form-control\\\" name=\\\"password2\\\" id=\\\"password2\\\" placeholder=\\\"Re-enter password\\\"/>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n            <button type=\\\"submit\\\" class=\\\"btn btn-primary-faded submit-reset-password\\\">Submit</button>\\n            <span class=\\\"help-block no-show s-help-block\\\"></span>\\n\\n        </div>\\n    </form>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"hasError\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":26,\"column\":4},\"end\":{\"line\":35,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/authentication/templates/reset-password-2.html?");

/***/ }),

/***/ "./src/js/widgets/authentication/widget.js":
/*!*************************************************!*\
  !*** ./src/js/widgets/authentication/widget.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_mixins_form_view_functions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/mixins/form_view_functions */ \"./src/js/mixins/form_view_functions.js\");\n/* harmony import */ var js_widgets_success_view__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/widgets/success/view */ \"./src/js/widgets/success/view.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var hbs_js_widgets_authentication_templates_log_in__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! hbs!js/widgets/authentication/templates/log-in */ \"./src/js/widgets/authentication/templates/log-in.html\");\n/* harmony import */ var hbs_js_widgets_authentication_templates_log_in__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_authentication_templates_log_in__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var hbs_js_widgets_authentication_templates_register__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! hbs!js/widgets/authentication/templates/register */ \"./src/js/widgets/authentication/templates/register.html\");\n/* harmony import */ var hbs_js_widgets_authentication_templates_register__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_authentication_templates_register__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var hbs_js_widgets_authentication_templates_container__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! hbs!js/widgets/authentication/templates/container */ \"./src/js/widgets/authentication/templates/container.html\");\n/* harmony import */ var hbs_js_widgets_authentication_templates_container__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_authentication_templates_container__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var hbs_js_widgets_authentication_templates_reset_password_1__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! hbs!js/widgets/authentication/templates/reset-password-1 */ \"./src/js/widgets/authentication/templates/reset-password-1.html\");\n/* harmony import */ var hbs_js_widgets_authentication_templates_reset_password_1__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_authentication_templates_reset_password_1__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var hbs_js_widgets_authentication_templates_reset_password_2__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! hbs!js/widgets/authentication/templates/reset-password-2 */ \"./src/js/widgets/authentication/templates/reset-password-2.html\");\n/* harmony import */ var hbs_js_widgets_authentication_templates_reset_password_2__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_authentication_templates_reset_password_2__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var hbs_js_widgets_authentication_templates_resend_verification_email__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! hbs!js/widgets/authentication/templates/resend-verification-email */ \"./src/js/widgets/authentication/templates/resend-verification-email.html\");\n/* harmony import */ var hbs_js_widgets_authentication_templates_resend_verification_email__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_authentication_templates_resend_verification_email__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var js_components_user__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! js/components/user */ \"./src/js/components/user.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! analytics */ \"./src/js/components/analytics.js\");\n/* harmony import */ var backbone_validation__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! backbone-validation */ \"./src/libs/backbone-validation.js\");\n/* harmony import */ var backbone_validation__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(backbone_validation__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var backbone_stickit__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! backbone.stickit */ \"./src/libs/backbone.stickit.js\");\n/* harmony import */ var backbone_stickit__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(backbone_stickit__WEBPACK_IMPORTED_MODULE_15__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // Creating module level variable since I can't figure out best way to pass this value into a subview from the model\n// This value should be always available, and unchanging, so should be safe to set like this here\n// TODO: figure out how to make this value available to the subview without having to set it like this\n\nvar siteKey = '';\n/*\n *\n * any submit action forces the widget to rerender when it\n * gets a success or fail message from pubsub\n *\n * */\n\nvar passwordRegex = /(?=.*\\d)(?=.*[a-zA-Z]).{5,}/;\nvar FormView;\nvar FormModel;\nvar ERROR_TIMEOUT = 5000;\nFormView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  activateValidation: js_mixins_form_view_functions__WEBPACK_IMPORTED_MODULE_3__[\"default\"].activateValidation,\n  checkValidationState: js_mixins_form_view_functions__WEBPACK_IMPORTED_MODULE_3__[\"default\"].checkValidationState,\n\n  /**\n   * Shows an error message to the user\n   * and then hides it after a timeout\n   *\n   * @todo figure out why we have to force a re-render\n   * @param msg\n   */\n  showError: function showError(msg) {\n    var _this = this;\n\n    this.model({\n      hasError: true,\n      errorMsg: msg\n    });\n    this.render();\n    setTimeout(function () {\n      _this.model({\n        hasError: false,\n        errorMsg: undefined\n      });\n\n      _this.render();\n    }, ERROR_TIMEOUT);\n  },\n  triggerSubmit: function triggerSubmit(ev) {\n    var _arguments = arguments,\n        _this2 = this;\n\n    ev.preventDefault();\n    var formName = ev.currentTarget.dataset.formName;\n\n    if (!window.grecaptcha) {\n      this.showError('Sorry reCAPTCHA did not load properly. Please try refreshing the page.');\n      return;\n    }\n\n    if (typeof formName === 'string') {\n      window.grecaptcha.ready(function () {\n        return window.grecaptcha.execute(siteKey, {\n          action: \"auth/\".concat(formName)\n        }).then(function (token) {\n          _this2.model.set('g-recaptcha-response', token);\n\n          js_mixins_form_view_functions__WEBPACK_IMPORTED_MODULE_3__[\"default\"].triggerSubmit.apply(_this2, _arguments);\n        });\n      });\n    } else {\n      js_mixins_form_view_functions__WEBPACK_IMPORTED_MODULE_3__[\"default\"].triggerSubmit.apply(this, arguments);\n    }\n  },\n  dismissError: function dismissError() {\n    this.model.set(this.model.defaults());\n    this.render();\n  },\n  modelEvents: {\n    change: 'checkValidationState'\n  },\n  events: {\n    'click button[type=submit]': 'triggerSubmit',\n    'click a#dismiss-error': 'dismissError'\n  }\n});\nFormModel = Backbone.Model.extend({\n  isValidSafe: js_mixins_form_view_functions__WEBPACK_IMPORTED_MODULE_3__[\"default\"].isValidSafe,\n  reset: js_mixins_form_view_functions__WEBPACK_IMPORTED_MODULE_3__[\"default\"].reset,\n  defaults: function defaults() {\n    return {\n      hasError: false,\n      errorMsg: ''\n    };\n  }\n});\nvar RegisterModel;\nvar RegisterView;\nRegisterModel = FormModel.extend({\n  validation: {\n    given_name: {},\n    family_name: {},\n    email: {\n      required: true,\n      pattern: 'email',\n      msg: '(A valid email is required)'\n    },\n    password1: {\n      required: true,\n      pattern: passwordRegex,\n      msg: \"(Password isn't valid)\"\n    },\n    password2: {\n      required: true,\n      equalTo: 'password1',\n      msg: '(The passwords do not match)'\n    },\n    'g-recaptcha-response': {\n      required: true\n    }\n  },\n  target: 'REGISTER'\n  /* note: defaults are missing here because\n   * they cause the validation to call an error for vals\n   * that the user hasnt entered yet\n   * */\n\n});\nRegisterView = FormView.extend({\n  template: (hbs_js_widgets_authentication_templates_register__WEBPACK_IMPORTED_MODULE_7___default()),\n  className: 'register s-register',\n  bindings: {\n    'input[name=given_name]': {\n      observe: 'given_name'\n    },\n    'input[name=family_name]': {\n      observe: 'family_name'\n    },\n    'input[name=email]': {\n      observe: 'email',\n      setOptions: {\n        validate: true\n      }\n    },\n    'input[name=password1]': {\n      observe: 'password1',\n      setOptions: {\n        validate: true\n      }\n    },\n    'input[name=password2]': {\n      observe: 'password2',\n      setOptions: {\n        validate: true\n      }\n    },\n    'g-recaptcha-response': {\n      required: true\n    }\n  },\n  onRender: function onRender() {\n    this.activateValidation();\n  }\n});\nvar LogInView;\nvar LogInModel;\nLogInModel = FormModel.extend({\n  skipReset: ['email'],\n  validation: {\n    email: {\n      required: true,\n      pattern: 'email',\n      msg: '(A valid email is required)'\n    },\n    password: {\n      required: true,\n      pattern: passwordRegex,\n      msg: '(A valid password is required)'\n    }\n  },\n  target: 'USER'\n});\nLogInView = FormView.extend({\n  template: (hbs_js_widgets_authentication_templates_log_in__WEBPACK_IMPORTED_MODULE_6___default()),\n  className: 'log-in s-log-in',\n  bindings: {\n    'input[name=email]': {\n      observe: 'email',\n      setOptions: {\n        validate: true\n      }\n    },\n    'input[name=password]': {\n      observe: 'password',\n      setOptions: {\n        validate: true\n      }\n    }\n  },\n  onRender: function onRender() {\n    this.activateValidation();\n  }\n});\nvar ResetPassword1View;\nvar ResetPassword1Model;\nResetPassword1Model = FormModel.extend({\n  skipReset: ['email'],\n  validation: {\n    email: {\n      required: true,\n      pattern: 'email',\n      msg: '(A valid email is required)'\n    },\n    'g-recaptcha-response': {\n      required: true\n    }\n  },\n  target: 'RESET_PASSWORD',\n  method: 'POST'\n});\nResetPassword1View = FormView.extend({\n  template: (hbs_js_widgets_authentication_templates_reset_password_1__WEBPACK_IMPORTED_MODULE_9___default()),\n  className: 'reset-password-1 s-reset-password-1',\n  bindings: {\n    'input[name=email]': {\n      observe: 'email',\n      setOptions: {\n        validate: true\n      }\n    }\n  },\n  onRender: function onRender() {\n    this.activateValidation();\n  }\n}); // this view is only accessible after user has clicked on a link in a verification\n// email after they enter the \"forgot password form\".\n\nvar ResetPassword2View;\nvar ResetPassword2Model;\nResetPassword2Model = FormModel.extend({\n  validation: {\n    password1: {\n      required: true,\n      pattern: passwordRegex,\n      msg: \"(Password isn't valid)\"\n    },\n    password2: {\n      required: true,\n      equalTo: 'password1',\n      pattern: passwordRegex,\n      msg: '(The passwords do not match)'\n    }\n  },\n  target: 'RESET_PASSWORD',\n  method: 'PUT'\n});\nResetPassword2View = FormView.extend({\n  template: (hbs_js_widgets_authentication_templates_reset_password_2__WEBPACK_IMPORTED_MODULE_10___default()),\n  className: 'reset-password-2 s-reset-password-2',\n  bindings: {\n    'input[name=password1]': {\n      observe: 'password1',\n      setOptions: {\n        validate: true\n      }\n    },\n    'input[name=password2]': {\n      observe: 'password2',\n      setOptions: {\n        validate: true\n      }\n    }\n  },\n  onRender: function onRender() {\n    this.activateValidation();\n  }\n});\nvar ResendVerificationModel = FormModel.extend({\n  skipReset: ['email'],\n  validation: {\n    email: {\n      required: true,\n      pattern: 'email',\n      msg: '(A valid email is required)'\n    }\n  },\n  target: 'RESEND_VERIFY',\n  method: 'PUT'\n});\nvar ResendVerificationView = FormView.extend({\n  template: (hbs_js_widgets_authentication_templates_resend_verification_email__WEBPACK_IMPORTED_MODULE_11___default()),\n  className: 'resend-verification',\n  bindings: {\n    'input[name=email]': {\n      observe: 'email',\n      setOptions: {\n        validate: true\n      }\n    }\n  },\n  onRender: function onRender() {\n    this.activateValidation();\n  }\n});\nvar StateModel = Backbone.Model.extend({\n  defaults: function defaults() {\n    return {\n      subView: undefined\n    };\n  }\n});\nvar AuthenticationContainer = marionette__WEBPACK_IMPORTED_MODULE_0___default().LayoutView.extend({\n  template: (hbs_js_widgets_authentication_templates_container__WEBPACK_IMPORTED_MODULE_8___default()),\n  initialize: function initialize() {\n    this.logInModel = new LogInModel();\n    this.registerModel = new RegisterModel();\n    this.resetPassword1Model = new ResetPassword1Model();\n    this.resetPassword2Model = new ResetPassword2Model();\n    this.resendVerificationModel = new ResendVerificationModel();\n  },\n  modelEvents: {\n    'change:subView': 'renderSubView'\n  },\n  className: 's-authentication-container row s-form-widget',\n  regions: {\n    container: '.form-container'\n  },\n  triggers: {\n    'click .show-login': 'navigateToLoginForm',\n    'click .show-register': 'navigateToRegisterForm',\n    'click .show-reset-password-1': 'navigateToResetPassword1Form',\n    'click .show-resend-verification-email': 'navigateToResendVerificationForm'\n  },\n  onRender: function onRender() {\n    this.renderSubView();\n  },\n  renderSubView: function renderSubView() {\n    // figure out which view to show\n    var subView = this.model.get('subView');\n\n    if (subView === 'login') {\n      this.showLoginForm();\n    } else if (subView === 'register') {\n      this.showRegisterForm();\n    } else if (subView === 'reset-password-1') {\n      this.showResetPasswordForm1();\n    } else if (subView === 'reset-password-2') {\n      this.showResetPasswordForm2();\n    } else if (subView === 'resend-verification-email') {\n      this.showResendVerificationForm();\n    }\n  },\n  showLoginForm: function showLoginForm(error) {\n    var view = new LogInView({\n      model: this.logInModel\n    }); // show error message\n\n    if (error) {\n      view.model.set({\n        hasError: true,\n        errorMsg: error\n      });\n    }\n\n    view.on('submit-form', this.forwardSubmit, this);\n    this.container.show(view);\n  },\n  showRegisterForm: function showRegisterForm(error) {\n    var view = new RegisterView({\n      model: this.registerModel\n    }); // show error message\n\n    if (error) {\n      view.model.set({\n        hasError: true,\n        errorMsg: error\n      });\n    }\n\n    view.on('submit-form', this.forwardSubmit, this);\n    this.container.show(view);\n  },\n  showResetPasswordForm1: function showResetPasswordForm1(error) {\n    var view = new ResetPassword1View({\n      model: this.resetPassword1Model\n    }); // show error message\n\n    if (error) {\n      view.model.set({\n        hasError: true,\n        errorMsg: error\n      });\n    }\n\n    view.on('submit-form', this.forwardSubmit, this);\n    this.container.show(view);\n  },\n  showResetPasswordForm2: function showResetPasswordForm2(error) {\n    var view = new ResetPassword2View({\n      model: this.resetPassword2Model\n    }); // show error message\n\n    if (error) {\n      view.model.set({\n        hasError: true,\n        errorMsg: error\n      });\n    }\n\n    view.on('submit-form', this.forwardSubmit, this);\n    this.container.show(view);\n  },\n  showResendVerificationForm: function showResendVerificationForm(error) {\n    var view = new ResendVerificationView({\n      model: this.resendVerificationModel\n    }); // show error message\n\n    if (error) {\n      view.model.set({\n        hasError: true,\n        errorMsg: error\n      });\n    }\n\n    view.on('submit-form', this.forwardSubmit, this);\n    this.container.show(view);\n  },\n  showRegisterSuccessView: function showRegisterSuccessView() {\n    var view = new js_widgets_success_view__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n      title: 'Registration Successful'\n    });\n    this.container.show(view);\n  },\n  showResendVerificationSuccessView: function showResendVerificationSuccessView() {\n    var view = new js_widgets_success_view__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n      title: 'Verification Email Sent Successfully'\n    });\n    this.container.show(view);\n  },\n  showResetPasswordSuccessView: function showResetPasswordSuccessView() {\n    var view = new js_widgets_success_view__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n      title: 'Password Reset Successful'\n    });\n    this.container.show(view);\n  },\n  forwardSubmit: function forwardSubmit(viewModel) {\n    this.trigger('submit-form', viewModel);\n  }\n});\nvar AuthenticationWidget = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend({\n  initialize: function initialize(options) {\n    options = options || {};\n    this.stateModel = new StateModel();\n    this.view = new AuthenticationContainer({\n      controller: this,\n      model: this.stateModel\n    });\n    this.listenTo(this.view, 'submit-form', this.triggerCorrectSubmit);\n    this.listenTo(this.view, 'navigateToLoginForm', this.navigateToLoginForm);\n    this.listenTo(this.view, 'navigateToRegisterForm', this.navigateToRegisterForm);\n    this.listenTo(this.view, 'navigateToResetPassword1Form', this.navigateToResetPassword1Form);\n    this.listenTo(this.view, 'navigateToResendVerificationForm', this.navigateToResendVerificationForm);\n    this.nextNav = null;\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n    var pubsub = beehive.getService('PubSub');\n\n    _.bindAll(this, ['handleUserAnnouncement']);\n\n    pubsub.subscribe(pubsub.USER_ANNOUNCEMENT, this.handleUserAnnouncement);\n    siteKey = beehive.getObject('AppStorage').getConfigCopy().recaptchaKey;\n  },\n  navigateToLoginForm: function navigateToLoginForm() {\n    this._navigate({\n      subView: 'login'\n    });\n  },\n  navigateToRegisterForm: function navigateToRegisterForm() {\n    this._navigate({\n      subView: 'register'\n    });\n  },\n  navigateToResetPassword1Form: function navigateToResetPassword1Form() {\n    this._navigate({\n      subView: 'reset-password-1'\n    });\n  },\n  navigateToResendVerificationForm: function navigateToResendVerificationForm() {\n    this._navigate({\n      subView: 'resend-verification-email'\n    });\n  },\n  _navigate: function _navigate(opts) {\n    var pubsub = this.getPubSub();\n    pubsub.publish(pubsub.NAVIGATE, 'authentication-page', opts);\n  },\n  setSubView: function setSubView(subView) {\n    this.stateModel.set('subView', subView);\n  },\n  fireAnalytics: _.partial(analytics__WEBPACK_IMPORTED_MODULE_13__[\"default\"], 'send', 'event', 'authentication'),\n  handleUserAnnouncement: function handleUserAnnouncement(name, msg) {\n    // reset all views and view models\n    this.resetAll();\n\n    switch (name) {\n      case js_components_user__WEBPACK_IMPORTED_MODULE_12__[\"default\"].prototype.USER_SIGNED_IN:\n        // will immediately redirect\n        this.fireAnalytics('login', {\n          auth_result: 'login_success'\n        });\n        break;\n\n      case 'login_fail':\n        // will also see a relevant alert over the widget\n        this.view.showLoginForm(msg);\n        this.fireAnalytics('login', {\n          auth_result: 'login_failed',\n          auth_error: msg\n        });\n        break;\n\n      case 'register_success':\n        this.view.showRegisterSuccessView();\n        this.fireAnalytics('login', 'status', {\n          auth_result: 'register_success'\n        });\n        break;\n\n      case 'register_fail':\n        // will also see a relevant alert over the widget\n        this.view.showRegisterForm(msg);\n        this.fireAnalytics('register', {\n          auth_result: 'register_failed',\n          auth_error: msg\n        });\n        break;\n\n      case 'reset_password_1_success':\n        this.view.showResetPasswordSuccessView(msg);\n        this.fireAnalytics('reset-password', {\n          auth_result: 'reset_password_1_success'\n        });\n        break;\n\n      case 'reset_password_1_fail':\n        this.view.showResetPasswordForm1(msg);\n        this.fireAnalytics('reset-password', {\n          auth_result: 'reset_password_1_failed',\n          auth_error: msg\n        });\n        break;\n\n      case 'reset_password_2_fail':\n        this.view.showResetPasswordForm2(msg);\n        this.fireAnalytics('reset-password', {\n          auth_result: 'reset_password_2_failed',\n          auth_error: msg\n        });\n        break;\n\n      case 'resend_verification_email_success':\n        this.view.showResendVerificationSuccessView();\n        this.fireAnalytics('resend-verification', {\n          auth_result: 'resend_verification_email_success'\n        });\n        break;\n\n      case 'resend_verification_email_fail':\n        this.view.showResendVerificationForm(msg);\n        this.fireAnalytics('resend-verification', {\n          auth_result: 'resend_verification_email_fail'\n        });\n        break;\n    }\n  },\n  resetAll: function resetAll() {\n    this.view.logInModel.reset();\n    this.view.registerModel.reset();\n    this.view.resetPassword1Model.reset();\n  },\n  triggerCorrectSubmit: function triggerCorrectSubmit(model) {\n    var _this3 = this;\n\n    var session = this.getBeeHive().getObject('Session');\n\n    switch (model.target) {\n      case 'REGISTER':\n        session.register(model.toJSON());\n        break;\n\n      case 'USER':\n        session.login(model.toJSON()).done(function () {\n          if (_this3.nextNav) {\n            var ps = _this3.getPubSub();\n\n            ps.publish(ps.NAVIGATE, _this3.nextNav);\n            _this3.nextNav = null;\n          }\n        });\n        break;\n\n      case 'RESET_PASSWORD':\n        model.method === 'POST' ? session.resetPassword1(model.toJSON()) : session.resetPassword2(model.toJSON());\n        break;\n\n      case 'RESEND_VERIFY':\n        session.resendVerificationEmail(model.get('email'));\n        break;\n    }\n  },\n  setNextNavigation: function setNextNavigation(nav) {\n    this.nextNav = nav;\n  },\n  onShow: function onShow() {\n    // force a clearing of the view every time the widget is shown again\n    this.view.render();\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (AuthenticationWidget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/authentication/widget.js?");

/***/ }),

/***/ "./src/js/widgets/base/base_widget.js":
/*!********************************************!*\
  !*** ./src/js/widgets/base/base_widget.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_mixins_widget_mixin_method__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/mixins/widget_mixin_method */ \"./src/js/mixins/widget_mixin_method.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var js_mixins_widget_state_manager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/mixins/widget_state_manager */ \"./src/js/mixins/widget_state_manager.js\");\n\n\n\n\n\n\n\n\n/**\n * Default PubSub based widget; the main functionality is inside\n *\n *  dispa tchRequest()\n *    - publishes ApiRequest object into PubSub (to initiate search)\n *\n *  processResponse()\n *    - receives ApiResponse object as a direct reply for the previous\n *      request\n *\n * You will want to override 'processResponse' method and possibly\n * some of the other methods like this;\n *\n * var newWidgetClass = BaseWidget.extend({\n *   composeRequest : function(){},\n *   processRequest : function(){}\n * });\n *\n * var newInstance = new newWidgetClass();\n *\n *\n * If you need to provide your own views, do initalization etc., override\n * initialize\n *\n * * var newWidgetClass = BaseWidget.extend({\n *   initialize: function() {\n *      // do something\n *      BaseWidget.prototype.initialize.apply(this, arguments);\n *   }\n * });\n *\n *\n * Some other options include:\n *\n *  defaultQueryArguments: this is a list of parameters added to each query\n *\n */\n\nvar BaseWidget = marionette__WEBPACK_IMPORTED_MODULE_1___default().Controller.extend({\n  initialize: function initialize(options) {\n    options = options || {}; // these methods are called by PubSub as handlers so we bind them to 'this' object\n    // and they will carry their own context 'this'\n\n    _.bindAll(this, 'dispatchRequest', 'processResponse');\n\n    this._currentQuery = new js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n    this.defaultQueryArguments = this.defaultQueryArguments || {};\n\n    if (options.defaultQueryArguments) {\n      this.defaultQueryArguments = _.extend(this.defaultQueryArguments, options.defaultQueryArguments);\n    }\n\n    if (options.view) {\n      this.view = options.view;\n      this.collection = options.view.collection;\n    } // our way of listening to views/models\n\n\n    if (this.view) marionette__WEBPACK_IMPORTED_MODULE_1___default().bindEntityEvents(this, this.view, marionette__WEBPACK_IMPORTED_MODULE_1___default().getOption(this, 'viewEvents'));\n    if (this.model) marionette__WEBPACK_IMPORTED_MODULE_1___default().bindEntityEvents(this, this.model, marionette__WEBPACK_IMPORTED_MODULE_1___default().getOption(this, 'modelEvents'));\n  },\n\n  /**\n   * Called by Bumblebee application when a widget is about to be registered\n   * it receives a BeeHive object, that contais methods/attributes that a\n   * widget needs to communicate with the app\n   *\n   * This is the place where you want to subscribe to events\n   *\n   * @param beehive\n   */\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n    var pubsub = beehive.getService('PubSub'); // custom dispatchRequest function goes here\n\n    pubsub.subscribe(pubsub.INVITING_REQUEST, _.bind(this.dispatchRequest, this)); // custom handleResponse function goes here\n\n    pubsub.subscribe(pubsub.DELIVERING_RESPONSE, _.bind(this.processResponse, this));\n  },\n\n  /**\n   * You should use this method when you want to initiaze global search action\n   * (ie. send a query to the pubsub)\n   *\n   * @param apiQuery\n   */\n  dispatchNewQuery: function dispatchNewQuery(apiQuery) {\n    // remove the arguments that are useful only to this widget\n    _.each(this.defaultQueryArguments, function (v, k) {\n      apiQuery.unset(k);\n    });\n\n    var pubsub = this.getPubSub();\n    pubsub.publish(pubsub.NAVIGATE, 'search-page', {\n      q: apiQuery\n    });\n  },\n\n  /**\n   * Default callback to be called by PubSub on 'INVITING_REQUEST'\n   */\n  dispatchRequest: function dispatchRequest(apiQuery) {\n    this._dispatchRequest(apiQuery);\n  },\n  _dispatchRequest: function _dispatchRequest(apiQuery) {\n    var q = this.customizeQuery(apiQuery);\n\n    if (q) {\n      var req = this.composeRequest(q);\n\n      if (req) {\n        var pubsub = this.getPubSub();\n        pubsub.publish(pubsub.DELIVERING_REQUEST, req);\n      }\n    }\n  },\n\n  /**\n   * Default action to modify ApiQuery (called from inside dispatchRequest)\n   *\n   * @param apiQuery\n   */\n  customizeQuery: function customizeQuery(apiQuery) {\n    var q = apiQuery.clone();\n    q.unlock();\n\n    if (this.defaultQueryArguments) {\n      q = this.composeQuery(this.defaultQueryArguments, q);\n    }\n\n    return q;\n  },\n\n  /**\n   * Default callback to be called by PubSub on 'DELIVERING_RESPONSE'\n   * @param apiResponse\n   */\n  processResponse: function processResponse(apiResponse) {\n    // in your widget, you should always set the current query like this\n    var q = apiResponse.getApiQuery();\n    this.setCurrentQuery(q);\n    throw new Error('you need to customize this function');\n  },\n\n  /**\n   * This function should return a request IFF we want to get some\n   * data - it is called from inside 'dispatchRequest' event handler\n   *\n   * @param object with params to add\n   * @returns {ApiRequest}\n   */\n  composeRequest: function composeRequest(apiQuery) {\n    return new js_components_api_request__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n      target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_5__[\"default\"].SEARCH,\n      query: apiQuery\n    });\n  },\n\n  /**\n   * Will save a clone of the apiQuery into the widget (for future use and\n   * reference)\n   *\n   * @param apiQuery\n   */\n  setCurrentQuery: function setCurrentQuery(apiQuery) {\n    this._currentQuery = apiQuery;\n  },\n\n  /**\n   * Returns the current ApiQuery\n   * if a query hasn't been set, it will check if there is one in storage,\n   * if not, it will return an empty query\n   *\n   * @returns {ApiQuery|*}\n   */\n  getCurrentQuery: function getCurrentQuery() {\n    var currQuery = new js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({});\n    var beehive;\n\n    try {\n      if (this._currentQuery instanceof js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n        currQuery = this._currentQuery;\n      } else if (_.isFunction(this.getBeeHive)) {\n        beehive = this.getBeeHive();\n\n        if (beehive.hasObject('AppStorage')) {\n          var q = beehive.getObject('AppStorage').getCurrentQuery();\n\n          if (q instanceof js_components_api_query__WEBPACK_IMPORTED_MODULE_2__[\"default\"]) {\n            currQuery = q;\n          }\n        }\n      }\n    } catch (e) {\n      console.error(e.message);\n    } finally {\n      return currQuery;\n    }\n  },\n\n  /**\n   * All purpose function for making a new query. It returns an apiQuery ready for\n   * newQuery event or for insertion into  apiRequest.\n   *\n   * @param queryParams\n   * @param apiQuery\n   * @returns {*}\n   */\n  composeQuery: function composeQuery(queryParams, apiQuery) {\n    var query;\n\n    if (!apiQuery) {\n      query = this.getCurrentQuery();\n      query = query.clone();\n    } else {\n      query = apiQuery;\n    }\n\n    if (queryParams) {\n      _.each(queryParams, function (v, k) {\n        if (!query.has(k)) query.set(k, v);\n      });\n    }\n\n    return query;\n  },\n  onDestroy: function onDestroy() {\n    this.view.destroy();\n  },\n\n  /**\n   * Convention inside Backbone and Marionette is to return 'this'\n   * - since 'this' usually refers to a 'View', we'll return the\n   * view's el here\n   * doesn't render unless it has to\n   *\n   * @returns {view.el}\n   */\n  getEl: function getEl() {\n    if (this.view.el && this.view.$el.children().length) {\n      return this.view.el;\n    }\n\n    return this.view.render().el;\n  },\n\n  /*\n   *\n   * convenience function for tests, always re-renders\n   *\n   * */\n  render: function render() {\n    return this.view.render();\n  },\n\n  /**\n   * Extracts identifier from a query object\n   *\n   * @param {ApiQuery} apiQuery\n   */\n  parseIdentifierFromQuery: function parseIdentifierFromQuery(apiQuery) {\n    if (!apiQuery.hasVal('q')) {\n      throw 'no query';\n    }\n\n    var q = apiQuery.get('q')[0];\n\n    try {\n      if (/^(?:identifier|bibcode):(.*)$/.test(q)) {\n        return q.split(':')[1];\n      }\n    } catch (e) {\n      throw 'unable to parse bibcode';\n    }\n\n    throw 'query must be in the format of identifer:foo or bibcode:foo';\n  }\n}, {\n  mixin: js_mixins_widget_mixin_method__WEBPACK_IMPORTED_MODULE_4__[\"default\"]\n});\n\n_.extend(BaseWidget.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_6__[\"default\"].BeeHive, js_mixins_widget_state_manager__WEBPACK_IMPORTED_MODULE_7__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (BaseWidget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/base/base_widget.js?");

/***/ }),

/***/ "./src/js/widgets/bubble_chart/templates/container.html":
/*!**************************************************************!*\
  !*** ./src/js/widgets/bubble_chart/templates/container.html ***!
  \**************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \" \"\n    + ((stack1 = container.invokePartial(__webpack_require__(/*! ../../../wraps/widget/loading/template.html */ \"./src/js/wraps/widget/loading/template.html\"),depth0,{\"name\":\"js/wraps/widget/loading/template\",\"hash\":{\"hideCloseButton\":true,\"widgetLoadingSize\":\"medium\"},\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \" \";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \"\\n  <svg\\n    class=\\\"s-bubble-chart-svg bubble-chart-svg\\\"\\n    viewBox=\\\"0 0 1160 550\\\"\\n    preserveAspectRatio=\\\"xMinYMin meet\\\"\\n  ></svg>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div>\\n  <div class=\\\"col-xs-12 s-explore-close-container\\\">\\n    <div class=\\\"s-large-close close-widget close\\\">x</div>\\n  </div>\\n  <header class=\\\"s-network-title\\\">\\n    <h3>Results Graph</h3>\\n    <button class=\\\"btn btn-link download s-download hidden\\\">\\n      <i\\n        class=\\\"fa fa-download fa-2x\\\"\\n        aria-hidden=\\\"true\\\"\\n        title=\\\"download data in csv\\\"\\n      ></i>\\n      <span class=\\\"sr-only\\\">download data in csv</span>\\n    </button>\\n  </header>\\n</div>\\n<div class=\\\"s-bubble-label-container\\\">\\n  <div class=\\\"graph-select reads-vs-time active\\\">\\n    <img src=\\\"../../../styles/img/reads_vs_time.png\\\" alt=\\\"\\\" />\\n  </div>\\n  <div class=\\\"graph-select citations-vs-time\\\">\\n    <img src=\\\"../../styles/img/citations_vs_time.png\\\" alt=\\\"\\\" />\\n  </div>\\n  <div class=\\\"graph-select reads-vs-citations\\\">\\n    <img src=\\\"../../styles/img/reads_vs_citations.png\\\" alt=\\\"\\\" />\\n  </div>\\n</div>\\n\\n<div class=\\\"s-bubble-graph-container bubble-graph-container\\\">\\n  <div class=\\\"d3-tooltip\\\"></div>\\n  \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"loading\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":31,\"column\":2},\"end\":{\"line\":38,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</div>\\n\\n<div class=\\\"controls s-controls print-hidden\\\">\\n  <div>\\n    <h6>What is the Paper Graph?</h6>\\n    This graph allows you to view metrics for both the long-term influence\\n    (citation count) and recent popularity (90 day read count) of the top 1500\\n    papers from your search results.\\n  </div>\\n  <div>\\n    <h6>Customize Graph</h6>\\n    * Click on a journal name at right to limit papers (click again to return to\\n    the unfiltered view)<br />\\n    * Click on the y axis log/linear options <br />\\n    * Click below to swap y axis and bubble radius <br />\\n    * Click on a paper bubble to outline it for tracking purposes throughout the\\n    three graphs\\n  </div>\\n  <div>\\n    <h6>Filter Your Search</h6>\\n    Select papers by dragging from left to right around bubbles to form a box,\\n    then click submit\\n    <button class=\\\"btn btn-success submit disabled\\\">\\n      Submit <i class=\\\"icon-go\\\" aria-hidden=\\\"true\\\"></i>\\n    </button>\\n  </div>\\n\\n  <a id=\\\"download-link\\\" class=\\\"hidden\\\"></a>\\n</div>\\n\";\n},\"usePartial\":true,\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/bubble_chart/templates/container.html?");

/***/ }),

/***/ "./src/js/widgets/bubble_chart/templates/tooltip.html":
/*!************************************************************!*\
  !*** ./src/js/widgets/bubble_chart/templates/tooltip.html ***!
  \************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<h5>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":4},\"end\":{\"line\":2,\"column\":13}}}) : helper)))\n    + \"</h5>\\n(\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"bibcode\") || (depth0 != null ? lookupProperty(depth0,\"bibcode\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bibcode\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":1},\"end\":{\"line\":3,\"column\":12}}}) : helper)))\n    + \")</br>\\nCitations: <b>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"citation_count\") || (depth0 != null ? lookupProperty(depth0,\"citation_count\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"citation_count\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":14},\"end\":{\"line\":4,\"column\":32}}}) : helper)))\n    + \"</b>,\\nReads: <b>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"read_count\") || (depth0 != null ? lookupProperty(depth0,\"read_count\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"read_count\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":10},\"end\":{\"line\":5,\"column\":24}}}) : helper)))\n    + \"</b><br/>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"pull-right\\\">\\n  <span class=\\\"s-text-bold s-text-italics\\\">..and \"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"extra\") || (depth0 != null ? lookupProperty(depth0,\"extra\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"extra\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":49},\"end\":{\"line\":10,\"column\":58}}}) : helper)))\n    + \" more</span>\\n</div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"bibs\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":6,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"extra\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":0},\"end\":{\"line\":12,\"column\":7}}})) != null ? stack1 : \"\");\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/bubble_chart/templates/tooltip.html?");

/***/ }),

/***/ "./src/js/widgets/bubble_chart/widget.js":
/*!***********************************************!*\
  !*** ./src/js/widgets/bubble_chart/widget.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3 */ \"./src/libs/d3.js\");\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(d3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var hbs_js_widgets_bubble_chart_templates_container__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! hbs!js/widgets/bubble_chart/templates/container */ \"./src/js/widgets/bubble_chart/templates/container.html\");\n/* harmony import */ var hbs_js_widgets_bubble_chart_templates_container__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_bubble_chart_templates_container__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var hbs_js_widgets_bubble_chart_templates_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! hbs!js/widgets/bubble_chart/templates/tooltip */ \"./src/js/widgets/bubble_chart/templates/tooltip.html\");\n/* harmony import */ var hbs_js_widgets_bubble_chart_templates_tooltip__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_bubble_chart_templates_tooltip__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/components/api_query_updater */ \"./src/js/components/api_query_updater.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n\n\n\n\n\n\n\n\n\nvar BubbleModel = Backbone.Model.extend({\n  initialize: function initialize(options) {\n    var _this = this;\n\n    this.on('change:solrData', function () {\n      if (_.isEmpty(_this.get('solrData'))) {\n        _this.reset(false);\n      } else {\n        _this.set('loading', false);\n\n        _this.modifyData();\n      }\n    });\n  },\n  modifyData: function modifyData() {\n    var bibs;\n    var journalNames;\n\n    if (_.isEmpty(this.get('solrData'))) {\n      return;\n    } // always do this when the data is reset\n\n\n    var data = [];\n\n    _.each(this.get('solrData'), function (d, i) {\n      try {\n        // turn 00s into 01s (ok maybe this is not the ideal solution)\n        d.pubdate = d.pubdate.replace(/(\\D)00/g, function (p1, p2) {\n          return p2 + '01';\n        });\n        d.date = new Date(d.pubdate); // for use by citation radius\n\n        d.year = parseInt(d.bibcode.slice(0, 4));\n        d.citation_count = d.citation_count ? d.citation_count : 0;\n        d.read_count = d.read_count ? d.read_count : 0;\n        d.title = d.title ? d.title[0] : '';\n        d.pub = d.bibcode.slice(4, 9).replace(/\\./g, '');\n        data.push(d);\n      } catch (e) {\n        console.warn(d, \"didn't get added to bibcode list for some reason\");\n      }\n    }); // check if there are enough important journals to highlight circles\n\n\n    bibs = _.chain(data).pluck('pub').countBy(function (pub) {\n      return pub;\n    }).pairs().sortBy(function (a) {\n      return a[1];\n    }).value().reverse();\n    var totalTop = 0;\n\n    _.each(bibs.slice(0, 5), function (t) {\n      totalTop += t[1];\n    });\n\n    if (totalTop / data.length >= 0.25) {\n      journalNames = _.map(bibs, function (b) {\n        return b[0];\n      }).slice(0, 5); // show \"other\" option as long as there are other journals\n\n      if (totalTop / data.length < 1) journalNames.push('other');\n      this.set('journalNames', journalNames);\n    } else {\n      this.set('journalNames', []);\n    } // now set the data, initiates the graph drawing\n\n\n    this.set('modifiedSolrData', data);\n  },\n  reset: function reset() {\n    var silent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.set(this.defaults(), {\n      silent: silent\n    });\n  },\n  toggleTracked: function toggleTracked(bibcode) {\n    var tracked = this.get('trackingBibs');\n\n    if (_.contains(tracked, bibcode)) {\n      this.set('trackingBibs', _.without(tracked, bibcode));\n    } else {\n      tracked.push(bibcode);\n      this.set('trackingBibs', tracked);\n    }\n  },\n  defaults: function defaults() {\n    return {\n      // straight from solr\n      solrData: {},\n      // processed solrData, only happens 1x per new solrData\n      modifiedSolrData: [],\n      // for each graph, changes when user changes x and y vals\n      currentGraphData: {},\n      // a change in scale will call \"rearrangeGraph\"\n      yScale: 'log',\n      xScale: 'linear',\n      yLogPossible: true,\n      xLogPossible: false,\n      // changes in these values won't call rearrangeGraph, you\n      // have to do it manually\n      xValue: 'date',\n      yValue: 'read_count',\n      radius: 'citation_count',\n      // to show as a key to the right\n      journalNames: [],\n      // just allows the user to select a bibcode, change its appearance\n      // and track it through different graphs\n      trackingBibs: [],\n      // to filter on\n      selectedBibs: [],\n      timeRange: 'year',\n      currentPub: undefined,\n      loading: true\n    };\n  }\n});\nvar BubbleView = marionette__WEBPACK_IMPORTED_MODULE_1___default().ItemView.extend({\n  className: 'bubble-chart s-bubble-chart',\n  template: (hbs_js_widgets_bubble_chart_templates_container__WEBPACK_IMPORTED_MODULE_4___default()),\n  reset: function reset() {\n    this.scales = {};\n    this.cache = {};\n  },\n  modelEvents: {\n    'change:modifiedSolrData': 'render',\n    'change:currentPub': 'rearrangeGraph',\n    'change:yScale': 'rearrangeGraph',\n    'change:xScale': 'rearrangeGraph',\n    'change:selectedBibs': 'manageSubmitButton'\n  },\n  events: {\n    // here we toggle between the three graph types\n    'click .graph-select': function clickGraphSelect(e) {\n      var $target = $(e.currentTarget);\n      this.$('.graph-select').removeClass('active');\n\n      if ($target.hasClass('reads-vs-time')) {\n        this.model.set({\n          radius: 'citation_count',\n          xScale: 'linear',\n          xValue: 'date',\n          yValue: 'read_count',\n          yScale: 'log'\n        }, {\n          silent: true\n        });\n      } else if ($target.hasClass('citations-vs-time')) {\n        this.model.set({\n          radius: 'read_count',\n          xValue: 'date',\n          xScale: 'linear',\n          yValue: 'citation_count',\n          yScale: 'log'\n        }, {\n          silent: true\n        });\n      } else if ($target.hasClass('reads-vs-citations')) {\n        this.model.set({\n          radius: 'year',\n          yValue: 'read_count',\n          xValue: 'citation_count',\n          xScale: 'log'\n        }, {\n          silent: true\n        });\n      }\n\n      this.rearrangeGraph();\n      $target.addClass('active');\n    },\n    'click .submit': function clickSubmit() {\n      this.trigger('filterBibs', this.model.get('selectedBibs'));\n    },\n    'click .download': function clickDownload() {\n      var data = this.model.get('modifiedSolrData');\n      var output = 'data:text/csv;charset=utf-8,';\n      var keys = Object.keys(data[0]);\n      output += keys.join(',') + '\\n';\n      data.forEach(function (row) {\n        keys.forEach(function (key) {\n          output += key === 'title' ? \"\\\"\".concat(row[key].replace(/\"/g, \"'\"), \"\\\",\") : \"\\\"\".concat(row[key], \"\\\",\");\n        });\n        output = output.slice(0, -1) + '\\n';\n      });\n      var encodedUri = encodeURI(output);\n      var link = document.getElementById('download-link');\n      link.setAttribute('download', 'results.csv');\n      link.setAttribute('href', encodedUri);\n      link.click();\n    },\n    'click .close': function clickClose() {\n      this.trigger('close-widget');\n    }\n  },\n  getConfig: function getConfig() {\n    this.config = {};\n    this.config.margin = {\n      left: 80,\n      bottom: 40,\n      right: 20,\n      top: 60\n    }, this.config.height = 500 - (this.config.margin.top + this.config.margin.bottom);\n    this.config.width = 1000 - (this.config.margin.left + this.config.margin.right);\n    this.config.animationLength = marionette__WEBPACK_IMPORTED_MODULE_1___default().getOption(this, 'testing') ? 0 : 500;\n  },\n  cacheVals: function cacheVals() {\n    this.cache = {};\n    this.cache.svg = d3__WEBPACK_IMPORTED_MODULE_0___default().select(this.$('svg.bubble-chart-svg')[0]).append('g').attr('transform', 'translate(' + this.config.margin.left + ',' + this.config.margin.top + ')');\n    this.cache.realSvg = d3__WEBPACK_IMPORTED_MODULE_0___default().select(this.$('svg.bubble-chart-svg')[0]);\n    this.cache.tooltip = d3__WEBPACK_IMPORTED_MODULE_0___default().select(this.$('.d3-tooltip')[0]);\n  },\n  // this function is run every time the graph is rendered or changes\n  setScales: function setScales() {\n    this.scales = {};\n    var data = this.model.get('currentGraphData');\n    var that = this;\n    var dateRange;\n    var yExtent;\n    var xExtent;\n    var newDateRange = []; // journal scale\n\n    if (this.model.get('journalNames').length) {\n      this.scales.journalScale = d3__WEBPACK_IMPORTED_MODULE_0___default().scale.ordinal().domain(this.model.get('journalNames')).range(['hsla(282, 80%, 52%, 1)', 'hsla(1, 80%, 51%, 1)', 'hsla(152, 80%, 40%, 1)', 'hsla(193, 80%, 48%, 1)', 'hsla(220, 80%, 56%, 1)', 'hsla(0, 0%, 20%, 1)']);\n    } // x scale\n\n\n    if (that.model.get('xValue') === 'date') {\n      dateRange = d3__WEBPACK_IMPORTED_MODULE_0___default().extent(data, function (d) {\n        return d.date;\n      }); // adding some padding to the date ranges so they are more attractive\n      // there is probably an easier way to do this but how???\n\n      if (dateRange[1].getFullYear() - dateRange[0].getFullYear() > 2) {\n        this.model.set('timeRange', 'year');\n        var newDate = new Date(dateRange[0]);\n        newDate.setMonth(newDate.getMonth() - 12);\n        newDateRange.push(newDate);\n        newDate = new Date(dateRange[1]);\n        newDate.setMonth(newDate.getMonth() + 12);\n        newDateRange.push(newDate);\n      } else {\n        this.model.set('timeRange', 'month');\n        var newDate = new Date(dateRange[0]);\n        newDate.setMonth(newDate.getMonth() - 1);\n        newDateRange.push(newDate);\n        newDate = new Date(dateRange[1]);\n        newDate.setMonth(newDate.getMonth() + 1);\n        newDateRange.push(newDate);\n      }\n\n      this.scales.xScale = d3__WEBPACK_IMPORTED_MODULE_0___default().time.scale().domain(newDateRange).range([0, that.config.width]);\n    } else if (that.model.get('xValue') == 'citation_count') {\n      xExtent = d3__WEBPACK_IMPORTED_MODULE_0___default().extent(data, function (d) {\n        return d[that.model.get('xValue')];\n      });\n\n      if (that.model.get('xScale') === 'log') {\n        this.scales.xScale = d3__WEBPACK_IMPORTED_MODULE_0___default().scale.log().domain(xExtent).range([0, that.config.width]);\n      } else {\n        this.scales.xScale = d3__WEBPACK_IMPORTED_MODULE_0___default().scale.linear().domain(xExtent).range([0, that.config.width]);\n      }\n    }\n\n    yExtent = d3__WEBPACK_IMPORTED_MODULE_0___default().extent(data, function (d) {\n      return d[that.model.get('yValue')];\n    }); // y scale\n\n    if (this.model.get('yScale') === 'log') {\n      this.scales.yScale = d3__WEBPACK_IMPORTED_MODULE_0___default().scale.log().domain(yExtent).range([that.config.height, 0]);\n    } else {\n      this.scales.yScale = d3__WEBPACK_IMPORTED_MODULE_0___default().scale.linear().domain(yExtent).range([that.config.height, 0]);\n    } // radius scale\n\n\n    if (that.model.get('radius') == 'year') {\n      this.scales.radiusScale = d3__WEBPACK_IMPORTED_MODULE_0___default().scale.linear().domain(d3__WEBPACK_IMPORTED_MODULE_0___default().extent(data, function (d) {\n        return d[that.model.get('radius')];\n      })).range([2, 14]);\n    } else {\n      this.scales.radiusScale = d3__WEBPACK_IMPORTED_MODULE_0___default().scale.linear().domain(d3__WEBPACK_IMPORTED_MODULE_0___default().extent(data, function (d) {\n        return d[that.model.get('radius')];\n      })).range([4, 26]);\n    }\n  },\n  finalProcess: function finalProcess() {\n    var that = this;\n    var data = this.model.get('modifiedSolrData');\n    var yExtent;\n    var xExtent; // do last minute scale adjustments if necessary\n\n    yExtent = d3__WEBPACK_IMPORTED_MODULE_0___default().sum(_.pluck(data, that.model.get('yValue')));\n    xExtent = d3__WEBPACK_IMPORTED_MODULE_0___default().sum(_.pluck(data, that.model.get('xValue')));\n\n    if (!yExtent) {\n      this.model.set('yScale', 'linear', {\n        silent: true\n      });\n      this.model.set('yLogPossible', false);\n    } else {\n      this.model.set('yLogPossible', true);\n    }\n\n    if (!xExtent) {\n      this.model.set('xScale', 'linear', {\n        silent: true\n      });\n      this.model.set('xLogPossible', false);\n    } else {\n      this.model.set('xLogPossible', true);\n    } // make sure that any log scales only get data > 0\n\n\n    data = _.chain(data).filter(function (d) {\n      if (that.model.get('yScale') === 'linear') {\n        return true;\n      } // if it's a log scale, make sure all y vals are at least 1\n\n\n      if (d[that.model.get('yValue')]) {\n        return true;\n      }\n    }).filter(function (d) {\n      if (that.model.get('xScale') === 'linear') {\n        return true;\n      } // if it's a log scale, make sure all y vals are at least 1\n\n\n      if (d[that.model.get('xValue')]) {\n        return true;\n      }\n    }) // sorting is important for mouseover interactions,\n    // you don't want the circles hidden behind larger ones\n    .sortBy(function (d) {\n      return -d[that.model.get('radius')];\n    }).value();\n    this.model.set('currentGraphData', data);\n    this.setScales();\n  },\n  resetSelection: function resetSelection() {\n    this.model.set('selectedBibs', []);\n    this.cache.svg.selectAll('.paper-circle.selected').classed('selected', false);\n    this.cache.svg.select('rect.selection').remove();\n  },\n  rearrangeGraph: function rearrangeGraph() {\n    this.finalProcess();\n    this.resetSelection();\n    var svg = this.cache.svg;\n    var realSvg = this.cache.realSvg;\n    var data;\n    var yAxis;\n    var circles;\n    var journalNames = this.model.get('journalNames');\n    var pubName;\n    var xTickFormat;\n    var that = this;\n    realSvg.select('rect.selection').remove();\n    data = this.model.get('currentGraphData'); // finally, limiting to only certain publication if necessary\n\n    pubName = that.model.get('currentPub');\n\n    if (pubName) {\n      data = _.filter(data, function (d) {\n        // we want to show all gray circles\n        if (pubName === 'other') {\n          return !_.contains(that.model.get('journalNames'), d.pub);\n        }\n\n        return d.pub === pubName;\n      });\n    }\n\n    yAxis = d3__WEBPACK_IMPORTED_MODULE_0___default().svg.axis().scale(this.scales.yScale).orient('left').ticks(10).tickFormat(d3__WEBPACK_IMPORTED_MODULE_0___default().format('s')); // X Axis\n\n    if (this.model.get('xValue') === 'date' && this.model.get('timeRange') == 'year') {\n      xTickFormat = d3__WEBPACK_IMPORTED_MODULE_0___default().time.format('%Y');\n    } else if (this.model.get('xValue') === 'date' && this.model.get('timeRange') == 'month') {\n      // the time range is 2 years or less\n      xTickFormat = d3__WEBPACK_IMPORTED_MODULE_0___default().time.format('%b-%Y');\n    } else {\n      // it's not a time scale\n      xTickFormat = d3__WEBPACK_IMPORTED_MODULE_0___default().format('');\n    }\n\n    xAxis = d3__WEBPACK_IMPORTED_MODULE_0___default().svg.axis().scale(this.scales.xScale).orient('bottom').tickFormat(xTickFormat);\n    svg.select('.y-axis').transition().duration(that.config.animationLength).call(yAxis);\n    svg.select('.x-axis').transition().duration(that.config.animationLength).call(xAxis);\n    this.renderLabels(realSvg.select('.y-label'), realSvg.select('.x-label'));\n    circles = svg.selectAll('.paper-circle').data(data, function (d) {\n      return d.bibcode;\n    }); // exit selection\n\n    circles.exit().remove(); // update selection\n\n    circles.transition().duration(that.config.animationLength).attr('r', function (d) {\n      return that.scales.radiusScale(d[that.model.get('radius')]) + 'px';\n    }).attr('cy', function (d) {\n      return that.scales.yScale(d[that.model.get('yValue')]);\n    }).attr('cx', function (d) {\n      return that.scales.xScale(d[that.model.get('xValue')]);\n    }); // enter selection\n\n    circles.enter().append('circle').classed('paper-circle', true).classed('tracked', function (d) {\n      // should the bubble get a nice tracking outline?\n      if (_.contains(that.model.get('trackingBibs'), d.bibcode)) {\n        return true;\n      }\n\n      return false;\n    }).attr('cx', function (d) {\n      return that.scales.xScale(d[that.model.get('xValue')]);\n    }).style('fill', function (d) {\n      if (journalNames && _.contains(journalNames, d.pub)) {\n        return that.scales.journalScale(d.pub);\n      }\n    }).attr('cy', function (d) {\n      return that.scales.yScale(d[that.model.get('yValue')]);\n    }).attr('r', function (d) {\n      return that.scales.radiusScale(d[that.model.get('radius')]) + 'px';\n    }); // sort\n\n    circles.order();\n  },\n  onRender: function onRender() {\n    if (!_.isEmpty(this.model.get('modifiedSolrData'))) {\n      this.renderGraph();\n      this.$('.download').removeClass('hidden');\n    } else {\n      this.model.set('loading', true);\n    }\n  },\n  // where yLabel and xLabel are d3 selections\n  renderLabels: function renderLabels(yLabel, xLabel) {\n    var that = this; // a function to attach log/linear options\n\n    function appendLogOption(labelGroup, scaleName) {\n      labelGroup.append('circle').classed('scale-choice', true).classed('log', true).classed('selected', function () {\n        if (that.model.get(scaleName) === 'log') {\n          return true;\n        }\n      }).attr('r', '6px').attr('cx', 200).attr('cy', -10);\n      labelGroup.append('text').attr('x', 210).attr('y', -5).text('log').classed('log', true);\n      labelGroup.append('circle').classed('scale-choice', true).classed('linear', true).classed('selected', function () {\n        if (that.model.get(scaleName) === 'linear') {\n          return true;\n        }\n      }).attr('r', '6px').attr('cx', 250).attr('cy', -10);\n      labelGroup.append('text').attr('x', 260).attr('y', -5).text('linear');\n    }\n\n    yLabel.selectAll('*').remove();\n    yLabel.append('text').text(function () {\n      if (that.model.get('yValue') === 'citation_count') {\n        return 'Citation Count';\n      }\n\n      if (that.model.get('yValue') === 'read_count') {\n        return '90 Day Read Count';\n      }\n    }).classed('axis-title', true);\n    yLabel.call(appendLogOption, 'yScale');\n    xLabel.selectAll('*').remove();\n    xLabel.append('text').text(function () {\n      if (that.model.get('xValue') === 'citation_count') {\n        return 'Citation Count';\n      }\n\n      if (that.model.get('xValue') === 'date') {\n        return 'Date';\n      }\n    }).classed('axis-title', true); // no log option if x scale is date\n\n    if (that.model.get('xValue') !== 'date') {\n      xLabel.call(appendLogOption, 'xScale');\n    }\n\n    this.attachLogLinearEventListeners(); // finally, hide log options if they are  impossible\n\n    if (!this.model.get('yLogPossible')) {\n      yLabel.selectAll('.scale-choice').classed('hidden', true);\n      yLabel.selectAll('text.log').classed('hidden', true);\n    }\n\n    if (!this.model.get('xLogPossible')) {\n      xLabel.selectAll('.scale-choice').classed('hidden', true);\n      xLabel.selectAll('text.log').classed('hidden', true);\n    }\n  },\n  // so that the fake radio buttons work\n  attachLogLinearEventListeners: function attachLogLinearEventListeners() {\n    var realSvg = this.cache.realSvg;\n    var that = this;\n    var config = [{\n      container: '.y-label',\n      scale: 'yScale'\n    }, {\n      container: '.x-label',\n      scale: 'xScale'\n    }];\n\n    _.each(config, function (c) {\n      realSvg.selectAll(c.container + ' .scale-choice').on('click', function (e) {\n        d3__WEBPACK_IMPORTED_MODULE_0___default().selectAll(c.container + ' .scale-choice').classed('selected', false);\n        var d3this = d3__WEBPACK_IMPORTED_MODULE_0___default().select(this);\n\n        if (d3this.classed('linear')) {\n          that.model.set(c.scale, 'linear');\n          d3this.classed('selected', true);\n        } else {\n          that.model.set(c.scale, 'log');\n          d3this.classed('selected', true);\n        }\n      }, this);\n    });\n  },\n  renderGraph: function renderGraph() {\n    this.getConfig();\n    this.cacheVals();\n    this.finalProcess();\n    var svg = this.cache.svg;\n    var realSvg = this.cache.realSvg;\n    var data;\n    var that = this;\n    var journalNames = that.model.get('journalNames');\n    var isMousePressed = false;\n    var xLabel;\n    var xAxis;\n    var yLabel;\n    var yAxis;\n    data = this.model.get('currentGraphData'); // attaching axes\n\n    if (this.model.get('timeRange') == 'year') {\n      xAxis = d3__WEBPACK_IMPORTED_MODULE_0___default().svg.axis().scale(this.scales.xScale).orient('bottom').tickFormat(d3__WEBPACK_IMPORTED_MODULE_0___default().time.format('%Y'));\n    } else {\n      // the time range is 2 years or less\n      xAxis = d3__WEBPACK_IMPORTED_MODULE_0___default().svg.axis().scale(this.scales.xScale).orient('bottom').tickFormat(d3__WEBPACK_IMPORTED_MODULE_0___default().time.format('%b-%Y'));\n    }\n\n    yAxis = d3__WEBPACK_IMPORTED_MODULE_0___default().svg.axis().scale(this.scales.yScale).orient('left').tickFormat(d3__WEBPACK_IMPORTED_MODULE_0___default().format('s'));\n    realSvg.attr('aria-label', 'bubble chart');\n    svg.append('g').attr('class', 'x-axis').attr('transform', 'translate(0,' + that.config.height + ')').call(xAxis);\n    svg.append('g').attr('class', 'y-axis').call(yAxis); // This is the part where we attach labels and their options\n\n    yLabel = realSvg.append('g').attr('transform', 'translate(35, 400) rotate(-90)').classed('y-label', true);\n    xLabel = realSvg.append('g').attr('transform', 'translate(' + that.config.width / 2 + ',' + function () {\n      return that.config.height + that.config.margin.top + that.config.margin.bottom + 10;\n    }() + ')').classed('x-label', true); // this function adds the labels and also attaches the event listeners\n\n    this.renderLabels(yLabel, xLabel);\n    svg.selectAll('.paper-circle').data(data).enter().append('circle').classed('paper-circle', true).attr('r', function (d) {\n      return that.scales.radiusScale(d.citation_count) + 'px';\n    }).attr('cx', function (d) {\n      return that.scales.xScale(d.date);\n    }).attr('cy', function (d) {\n      return that.scales.yScale(d.read_count);\n    }).style('fill', function (d) {\n      if (journalNames && _.contains(journalNames, d.pub)) {\n        return that.scales.journalScale(d.pub);\n      }\n    }); // journal name key\n\n    var key = realSvg.append('g').classed('journal-name-key', true).attr('transform', 'translate(' + function () {\n      return that.config.width + that.config.margin.right + that.config.margin.left;\n    }() + ',' + function () {\n      return that.config.height / 2 - that.config.margin.top;\n    }() + ')');\n    key.selectAll('rect').data(journalNames).enter().append('rect').attr('width', 13).attr('height', 13).attr('y', function (d, i) {\n      return i * 22;\n    }).attr('fill', function (d) {\n      if (d === 'other') {\n        return 'hsla(0, 0%, 20%, 1)';\n      }\n\n      return that.scales.journalScale(d);\n    });\n    key.selectAll('text').data(journalNames).enter().append('text').attr('x', 15).attr('y', function (d, i) {\n      return i * 22 + 10;\n    }).text(function (d) {\n      return d;\n    }).on('click', isolateCirclesByPub);\n\n    function isolateCirclesByPub(pubName) {\n      var d3this = d3__WEBPACK_IMPORTED_MODULE_0___default().select(this);\n\n      if (d3this.classed('journal-selected') == true) {\n        d3this.classed('journal-selected', false);\n        that.model.set('currentPub', undefined);\n      } else {\n        realSvg.selectAll('.journal-selected').classed('journal-selected', false);\n        d3this.classed('journal-selected', true);\n        that.model.set('currentPub', pubName);\n      }\n    } // adding the \"trackingBibs\" bubble select functionality\n    // a delegated event\n\n\n    realSvg.on('click.tracking', function (d, i) {\n      if (!d3__WEBPACK_IMPORTED_MODULE_0___default().select((d3__WEBPACK_IMPORTED_MODULE_0___default().event).target).classed('paper-circle')) {\n        return;\n      }\n\n      var bibcode = (d3__WEBPACK_IMPORTED_MODULE_0___default().event).target.__data__.bibcode;\n      that.model.toggleTracked(bibcode);\n\n      if (_.contains(that.model.get('trackingBibs'), bibcode)) {\n        d3__WEBPACK_IMPORTED_MODULE_0___default().select((d3__WEBPACK_IMPORTED_MODULE_0___default().event).target).classed('tracked', true);\n      } else {\n        d3__WEBPACK_IMPORTED_MODULE_0___default().select((d3__WEBPACK_IMPORTED_MODULE_0___default().event).target).classed('tracked', false);\n      }\n    }); // adding delegated tooltip events\n\n    realSvg.on('mouseover.tooltip', function (e) {\n      if (d3__WEBPACK_IMPORTED_MODULE_0___default().select((d3__WEBPACK_IMPORTED_MODULE_0___default().event).target).classed('paper-circle') && !isMousePressed) {\n        var yVal = that.model.get('yValue');\n        var xVal = that.model.get('xValue');\n        var radius = that.model.get('radius');\n        var xOffset = d3__WEBPACK_IMPORTED_MODULE_0___default().mouse(this.parentElement)[0];\n        var yOffset = d3__WEBPACK_IMPORTED_MODULE_0___default().mouse(this.parentElement)[1];\n        var toReturn = {};\n        var allData;\n        var height;\n        var outerD = (d3__WEBPACK_IMPORTED_MODULE_0___default().event).target.__data__;\n        var xPadding;\n        var xPosition;\n        xPosition = d3__WEBPACK_IMPORTED_MODULE_0___default().mouse(this.parentElement)[0] - that.config.margin.left > 500 ? 'right' : 'left';\n        allData = d3__WEBPACK_IMPORTED_MODULE_0___default().selectAll('.paper-circle').filter(function (d) {\n          if (d[yVal] == outerD[yVal] && d[xVal] == outerD[xVal]) {\n            return true;\n          }\n        }).sort(function (a, b) {\n          return b[radius] - a[radius];\n        }).data(); // show only first 3\n\n        if (allData.length > 3) {\n          toReturn.extra = allData.length - 3;\n          allData = allData.slice(0, 3);\n        }\n\n        toReturn.bibs = allData;\n        that.cache.tooltip.html(hbs_js_widgets_bubble_chart_templates_tooltip__WEBPACK_IMPORTED_MODULE_5___default()(toReturn));\n        that.cache.tooltip.style({\n          visibility: 'hidden',\n          display: 'block'\n        });\n        height = d3__WEBPACK_IMPORTED_MODULE_0___default().select('.d3-tooltip')[0][0].clientHeight;\n        xPadding = d3__WEBPACK_IMPORTED_MODULE_0___default().max([parseInt(d3__WEBPACK_IMPORTED_MODULE_0___default().select((d3__WEBPACK_IMPORTED_MODULE_0___default().event).target).attr('r')) * 2.5, 10]);\n\n        if (xPosition === 'left') {\n          that.cache.tooltip.style('left', xOffset + xPadding + 'px').style('top', yOffset - height / 2 + 'px').style('visibility', 'visible');\n        } else {\n          // tooltip is 240px, so shift it that far to the left\n          that.cache.tooltip.style('left', xOffset - xPadding - 240 + 'px').style('top', yOffset - height / 2 + 'px').style('visibility', 'visible');\n        }\n      }\n    });\n    realSvg.on('mousemove.tooltip', function (e) {\n      if (!d3__WEBPACK_IMPORTED_MODULE_0___default().event.target.classList.contains('paper-circle')) {\n        that.cache.tooltip.style({\n          display: 'none'\n        });\n      }\n    }); // taking care of selection box\n\n    realSvg.on('mousedown.select', function () {\n      // prevent this from hijacking other events on objects other than the graph\n      if ((d3__WEBPACK_IMPORTED_MODULE_0___default().event).target !== (d3__WEBPACK_IMPORTED_MODULE_0___default().event).currentTarget) {\n        return;\n      }\n\n      isMousePressed = true;\n      svg.selectAll('.paper-circle.selected').classed('selected', false);\n      realSvg.select('rect.selection').remove();\n      var p = d3__WEBPACK_IMPORTED_MODULE_0___default().mouse(this);\n      realSvg.append('rect').attr({\n        rx: 6,\n        ry: 6,\n        class: 'selection',\n        x: p[0],\n        y: p[1],\n        width: 0,\n        height: 0\n      });\n    }).on('mousemove.select', function () {\n      if (!isMousePressed) {\n        return;\n      }\n\n      var s = realSvg.select('rect.selection');\n\n      if (!s.empty()) {\n        var p = d3__WEBPACK_IMPORTED_MODULE_0___default().mouse(this);\n        var d = {\n          x: parseInt(s.attr('x'), 10),\n          y: parseInt(s.attr('y'), 10),\n          width: parseInt(s.attr('width'), 10),\n          height: parseInt(s.attr('height'), 10)\n        };\n        var move = {\n          x: p[0] - d.x,\n          y: p[1] - d.y\n        };\n        d.width = move.x;\n        d.height = move.y;\n\n        if (move.x < 0 || move.y < 0) {\n          // it's going backwards, ignore it\n          return;\n        } // code that allows you to reverse direction of the rect,\n        // commented for now since it doesn't work perfectly\n        //            if( move.x < 1 || (move.x*2<d.width)) {\n        //              d.x = p[0];\n        //              d.width -= move.x;\n        //            } else {\n        //              d.width = move.x;\n        //            }\n        //\n        //            if( move.y < 1 || (move.y*2<d.height)) {\n        //              d.y = p[1];\n        //              d.height -= move.y;\n        //            } else {\n        //              d.height = move.y;\n        //            }\n\n\n        s.attr(d);\n        realSvg.selectAll('.paper-circle').each(function (paperD, i) {\n          var d3this = d3__WEBPACK_IMPORTED_MODULE_0___default().select(this);\n          var cx = parseInt(d3this.attr('cx'));\n          var cy = parseInt(d3this.attr('cy'));\n\n          if (cx + that.config.margin.left >= d.x && cx + that.config.margin.left <= d.x + d.width && cy + that.config.margin.top >= d.y && cy + that.config.margin.top <= d.y + d.height) {\n            d3this.classed('selected', true);\n          } else {\n            d3this.classed('selected', false);\n          }\n        });\n      }\n    }).on('mouseup.select', function () {\n      isMousePressed = false;\n      var bibs = [];\n      svg.selectAll('.paper-circle.selected').each(function (d) {\n        if (this.style.display !== 'none') {\n          bibs.push(d.bibcode);\n        }\n      });\n      that.model.set('selectedBibs', bibs);\n    });\n  },\n  manageSubmitButton: function manageSubmitButton() {\n    if (this.model.get('selectedBibs').length === 0) {\n      this.$('.submit').addClass('disabled');\n    } else {\n      this.$('.submit').removeClass('disabled');\n    }\n  }\n});\nvar BubbleChart = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend({\n  initialize: function initialize(options) {\n    var _this2 = this;\n\n    options = options || {};\n    this.model = new BubbleModel(); // testing reduces animations to 0\n\n    this.view = new BubbleView({\n      model: this.model,\n      testing: options.testing\n    });\n    this.listenTo(this.view, 'filterBibs', this.onFilterBibs);\n    this.listenTo(this.view, 'close-widget', function () {\n      _this2.resetModel(true);\n\n      _this2.broadcastClose();\n    });\n    this.widgetName = 'bubble_chart';\n    this.queryUpdater = new js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_7__[\"default\"](this.widgetName);\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n\n    _.bindAll(this, 'setCurrentQuery', 'processResponse');\n\n    var pubsub = this.getPubSub();\n    pubsub.subscribe(pubsub.INVITING_REQUEST, this.setCurrentQuery);\n    pubsub.subscribe(pubsub.DELIVERING_RESPONSE, this.processResponse); // on initialization, store the current query\n\n    if (this.getBeeHive().getObject('AppStorage')) {\n      this.setCurrentQuery(this.getBeeHive().getObject('AppStorage').getCurrentQuery());\n    }\n  },\n  resetModel: function resetModel() {\n    var silent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    this.model.reset(silent);\n  },\n  // for now, called to show vis for library\n  renderWidgetForListOfBibcodes: function renderWidgetForListOfBibcodes(bibcodes) {\n    this.resetModel();\n    var query = new js_components_api_query__WEBPACK_IMPORTED_MODULE_8__[\"default\"]();\n    query.unlock();\n    query.set('q', 'bibcode:(' + bibcodes.join(' OR ') + ')');\n    query.set('rows', js_components_api_targets__WEBPACK_IMPORTED_MODULE_6__[\"default\"]._limits.BubbleChart.default);\n    query.set('fl', 'title,bibcode,citation_count,read_count,pubdate');\n    var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n      target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_6__[\"default\"].SEARCH,\n      query: query\n    });\n    this.getPubSub().publish(this.getPubSub().DELIVERING_REQUEST, request);\n  },\n  // fetch data\n  renderWidgetForCurrentQuery: function renderWidgetForCurrentQuery() {\n    this.resetModel();\n    var query = this.getCurrentQuery().clone();\n    query.unlock();\n    query.set('rows', js_components_api_targets__WEBPACK_IMPORTED_MODULE_6__[\"default\"]._limits.BubbleChart.default);\n    query.set('fl', 'title,bibcode,citation_count,read_count,pubdate');\n    query.unset('hl');\n    query.unset('hl.fl');\n    var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n      target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_6__[\"default\"].SEARCH,\n      query: query\n    });\n    this.getPubSub().publish(this.getPubSub().DELIVERING_REQUEST, request);\n  },\n  processResponse: function processResponse(apiResponse) {\n    this.model.reset();\n    this.view.reset();\n    this.model.set('solrData', apiResponse.get('response.docs'));\n  },\n  onFilterBibs: function onFilterBibs() {\n    var bibs = this.model.get('selectedBibs');\n    var newQuery = this.getCurrentQuery().clone();\n\n    if (!bibs.length) {\n      return;\n    }\n\n    var qu = this.queryUpdater;\n    var newQ = 'bibcode:(' + bibs.map(function (x) {\n      return qu.quoteIfNecessary(x);\n    }).join(' OR ') + ')';\n    newQuery.unlock();\n\n    this._updateFq(newQuery, newQ);\n\n    var ps = this.getPubSub();\n    ps.publish(ps.NAVIGATE, 'search-page', {\n      q: newQuery\n    });\n  },\n  _updateFq: function _updateFq(q, value) {\n    var filterName = 'fq_' + this.widgetName; // uncomment if we need adding to the existing conditions\n\n    q.unset(filterName);\n    this.queryUpdater.updateQuery(q, filterName, 'limit', value);\n    var fq = '{!type=aqp v=$' + filterName + '}';\n    var fqs = q.get('fq');\n\n    if (!fqs) {\n      q.set('fq', [fq]);\n    } else {\n      var i = _.indexOf(fqs, fq);\n\n      if (i == -1) {\n        fqs.push(fq);\n      }\n\n      q.set('fq', fqs);\n    }\n  },\n  broadcastClose: function broadcastClose() {\n    this.getPubSub().publish(this.getPubSub().NAVIGATE, 'results-page');\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (BubbleChart);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/bubble_chart/widget.js?");

/***/ }),

/***/ "./src/js/widgets/classic_form/form.html":
/*!***********************************************!*\
  !*** ./src/js/widgets/classic_form/form.html ***!
  \***********************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<form action=\\\"#classic-form\\\">\\n  <div class=\\\"pull-right\\\">\\n    <button\\n      style=\\\"position: relative;top: -13px;\\\"\\n      class=\\\"btn btn-primary\\\"\\n      type=\\\"submit\\\"\\n    >\\n      <i class=\\\"fa fa-search\\\" aria-hidden=\\\"true\\\"></i> Search\\n    </button>\\n  </div>\\n\\n  <div data-field=\\\"database\\\">\\n    <b>Limit query to: </b>&nbsp;<label class=\\\"custom-checkbox\\\">\\n      <input type=\\\"checkbox\\\" checked=\\\"true\\\" name=\\\"astronomy\\\" />\\n      Astronomy </label\\n    >&nbsp;&nbsp;\\n    <label class=\\\"custom-checkbox\\\"> <input type=\\\"checkbox\\\" name=\\\"physics\\\" /> Physics </label\\n    >&nbsp;&nbsp;\\n    <label class=\\\"custom-checkbox\\\"> <input type=\\\"checkbox\\\" name=\\\"general\\\" /> General </label>\\n  </div>\\n  <div class=\\\"clearfix\\\">\\n    <div class=\\\"col-sm-6\\\" data-field=\\\"author\\\" data-textInput=\\\"true\\\">\\n      <div class=\\\"classic-form__logic-group logic-group\\\">\\n        <label class=\\\"custom-radio\\\">\\n          <input type=\\\"radio\\\" name=\\\"author-logic\\\" value=\\\"AND\\\" checked=\\\"true\\\" />\\n          and\\n        </label>\\n        <label class=\\\"custom-radio\\\">\\n          <input type=\\\"radio\\\" name=\\\"author-logic\\\" value=\\\"OR\\\" /> or\\n        </label>\\n      </div>\\n      <div>\\n        <label class=\\\"classic-author-label\\\" for=\\\"classic-author\\\">Author</label>\\n        <textarea\\n          id=\\\"classic-author\\\"\\n          name=\\\"author-names\\\"\\n          cols=\\\"30\\\"\\n          rows=\\\"2\\\"\\n          placeholder=\\\"(Last, First M) one per line\\\"\\n          aria-label=\\\"author names\\\"\\n        ></textarea>\\n      </div>\\n    </div>\\n    <div class=\\\"col-sm-6\\\" data-field=\\\"object\\\" data-textInput=\\\"true\\\">\\n      <div class=\\\"pull-right-sm\\\">\\n        <div class=\\\"classic-form__logic-group logic-group\\\">\\n          <label class=\\\"custom-radio\\\">\\n            <input\\n              type=\\\"radio\\\"\\n              name=\\\"object-logic\\\"\\n              value=\\\"AND\\\"\\n              checked=\\\"true\\\"\\n            />\\n            and\\n          </label>\\n          <label class=\\\"custom-radio\\\">\\n            <input type=\\\"radio\\\" name=\\\"object-logic\\\" value=\\\"OR\\\" /> or\\n          </label>\\n        </div>\\n        <div>\\n          <label class=\\\"classic-object-label\\\" for=\\\"classic-object\\\"\\n            >Object</label\\n          >\\n          <textarea\\n            id=\\\"classic-object\\\"\\n            name=\\\"object-names\\\"\\n            cols=\\\"30\\\"\\n            rows=\\\"2\\\"\\n            placeholder=\\\"SIMBAD object search (one per line)\\\"\\n            aria-label=\\\"SIMBAD object search\\\"\\n          ></textarea>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n  <div data-field=\\\"date\\\">\\n    <div>\\n      <b>Publication date</b> between <br />\\n      <input\\n        class=\\\"form-control  date-control\\\"\\n        maxlength=\\\"2\\\"\\n        placeholder=\\\"MM\\\"\\n        type=\\\"text\\\"\\n        value=\\\"\\\"\\n        name=\\\"month_from\\\"\\n        style=\\\"margin-top:6px\\\"\\n        aria-label=\\\"start publication month\\\"\\n      />/\\n      <input\\n        class=\\\"form-control  date-control\\\"\\n        maxlength=\\\"4\\\"\\n        placeholder=\\\"YYYY\\\"\\n        type=\\\"text\\\"\\n        value=\\\"\\\"\\n        name=\\\"year_from\\\"\\n        aria-label=\\\"start publication year\\\"\\n      />and\\n      <input\\n        class=\\\"form-control  date-control\\\"\\n        maxlength=\\\"2\\\"\\n        placeholder=\\\"MM\\\"\\n        type=\\\"text\\\"\\n        value=\\\"\\\"\\n        name=\\\"month_to\\\"\\n        aria-label=\\\"end publication month\\\"\\n      />/\\n      <input\\n        class=\\\"form-control  date-control\\\"\\n        maxlength=\\\"4\\\"\\n        placeholder=\\\"YYYY\\\"\\n        type=\\\"text\\\"\\n        value=\\\"\\\"\\n        name=\\\"year_to\\\"\\n        aria-label=\\\"end publication year\\\"\\n      />\\n    </div>\\n  </div>\\n  <div data-field=\\\"title\\\" data-textInput=\\\"true\\\">\\n    <div class=\\\"classic-form__logic-group logic-group pull-right\\\">\\n      <label class=\\\"custom-radio\\\">\\n        <input type=\\\"radio\\\" name=\\\"title-logic\\\" value=\\\"AND\\\" checked=\\\"true\\\" /> and\\n      </label>\\n      <label class=\\\"custom-radio\\\"> <input type=\\\"radio\\\" name=\\\"title-logic\\\" value=\\\"OR\\\" /> or </label>\\n      <label class=\\\"custom-radio\\\">\\n        <input type=\\\"radio\\\" name=\\\"title-logic\\\" value=\\\"BOOLEAN\\\" /> boolean\\n      </label>\\n    </div>\\n    <div>\\n      <label for=\\\"classic_title_input\\\"> Title</label>\\n      <input\\n        id=\\\"classic_title_input\\\"\\n        class=\\\"form-control\\\"\\n        name=\\\"title\\\"\\n        type=\\\"text\\\"\\n        aria-label=\\\"title\\\"\\n      />\\n    </div>\\n  </div>\\n  <div data-field=\\\"abs\\\" data-textInput=\\\"true\\\">\\n    <div class=\\\"classic-form__logic-group logic-group pull-right\\\">\\n      <label class=\\\"custom-radio\\\">\\n        <input type=\\\"radio\\\" name=\\\"abstract-logic\\\" value=\\\"AND\\\" checked=\\\"true\\\" />\\n        and\\n      </label>\\n      <label class=\\\"custom-radio\\\">\\n        <input type=\\\"radio\\\" name=\\\"abstract-logic\\\" value=\\\"OR\\\" /> or\\n      </label>\\n      <label class=\\\"custom-radio\\\">\\n        <input type=\\\"radio\\\" name=\\\"abstract-logic\\\" value=\\\"BOOLEAN\\\" /> boolean\\n      </label>\\n    </div>\\n    <div>\\n      <label for=\\\"classic_abstract_input\\\"> Abstract/Keywords</label>\\n      <input\\n        id=\\\"clasic_abstract_input\\\"\\n        class=\\\"form-control\\\"\\n        name=\\\"abs\\\"\\n        type=\\\"text\\\"\\n        aria-label=\\\"abstract and keywords\\\"\\n      />\\n    </div>\\n  </div>\\n  <div data-field=\\\"property\\\">\\n    <label class=\\\"custom-checkbox\\\">\\n      <input type=\\\"checkbox\\\" name=\\\"refereed\\\" />&nbsp;Refereed only&nbsp;\\n    </label>\\n    &nbsp;&nbsp;&nbsp;\\n    <label class=\\\"custom-checkbox\\\">\\n      <input type=\\\"checkbox\\\" name=\\\"article\\\" />&nbsp;Articles only&nbsp;\\n    </label>\\n  </div>\\n  <div data-field=\\\"bibstem\\\" data-textInput=\\\"true\\\">\\n    <div class=\\\"logic-group\\\">\\n      <label class=\\\"custom-checkbox\\\">\\n        <input type=\\\"checkbox\\\" class=\\\"hidden\\\" value=\\\"OR\\\" checked=\\\"true\\\" />\\n      </label>\\n    </div>\\n    <label for=\\\"classic-bibstem\\\">Publication(s)</label>\\n    <p class=\\\"help-block small\\\">Press Return Key To Add Publication</p>\\n    <input\\n      id=\\\"classic-bibstem\\\"\\n      type=\\\"text\\\"\\n      class=\\\"form-control\\\"\\n      name=\\\"bibstem\\\"\\n      placeholder=\\\"Comma-separated bibstems of journal titles\\\"\\n      autocomplete=\\\"off\\\"\\n      aria-label=\\\"bibstems\\\"\\n    />\\n  </div>\\n\\n  <div data-field=\\\"sort\\\" class=\\\"clearfix\\\">\\n    <div class=\\\"col-sm-6\\\">\\n      <label for=\\\"sort-container\\\">Sort</label>\\n      <div id=\\\"sort-container\\\"></div>\\n    </div>\\n  </div>\\n  <div class=\\\"pull-right\\\">\\n    <button class=\\\"btn btn-default\\\" type=\\\"reset\\\">\\n      <i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i> Clear\\n    </button>\\n    <button class=\\\"btn btn-primary\\\" type=\\\"submit\\\">\\n      <i class=\\\"fa fa-search\\\" aria-hidden=\\\"true\\\"></i> Search\\n    </button>\\n  </div>\\n</form>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/classic_form/form.html?");

/***/ }),

/***/ "./src/js/widgets/classic_form/widget.js":
/*!***********************************************!*\
  !*** ./src/js/widgets/classic_form/widget.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_query_updater */ \"./src/js/components/api_query_updater.js\");\n/* harmony import */ var hbs_js_widgets_classic_form_form__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! hbs!js/widgets/classic_form/form */ \"./src/js/widgets/classic_form/form.html\");\n/* harmony import */ var hbs_js_widgets_classic_form_form__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_classic_form_form__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var js_widgets_paper_search_form_topterms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/widgets/paper_search_form/topterms */ \"./src/js/widgets/paper_search_form/topterms.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! analytics */ \"./src/js/components/analytics.js\");\n/* harmony import */ var js_widgets_sort_widget_jsx__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/widgets/sort/widget.jsx */ \"./src/js/widgets/sort/widget.jsx.js\");\n/* harmony import */ var js_widgets_sort_redux_modules_sort_app__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/widgets/sort/redux/modules/sort-app */ \"./src/js/widgets/sort/redux/modules/sort-app.js\");\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n\n\n\n\n\n\n\n // for autocomplete\n\nfunction split(val) {\n  return val.split(/,\\s*/);\n}\n\nvar BOOLEAN = {\n  AND: ' ',\n  OR: ' OR ',\n  BOOLEAN: ' '\n};\nvar FormModel = Backbone.Model.extend({\n  initialize: function initialize() {\n    this.listenTo(this, 'change', _.bind(this.serialize, this));\n    this.updater = new js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_2__[\"default\"](' ');\n    this.serialize();\n  },\n  defaults: {\n    'author-logic': 'AND',\n    'object-logic': 'AND',\n    'title-logic': 'AND',\n    'abstract-logic': 'AND',\n    'author-names': [],\n    'object-names': [],\n    collections: {\n      astronomy: true,\n      physics: false,\n      general: false\n    },\n    property: {\n      refereed: false,\n      article: false\n    },\n    pubdate: {\n      month_from: '01',\n      year_from: '0000',\n      month_to: '12',\n      year_to: '9999'\n    },\n    title: '',\n    abs: '',\n    bibstem: '',\n    query: null,\n    sort: 'date desc'\n  },\n  _makeFqStr: function _makeFqStr(data, fullSet) {\n    var keys = _.keys(data);\n\n    var trues = _(data).pick(_.identity).keys().value();\n\n    if (trues.length > 1) {\n      if (fullSet && keys.length === trues.length) {\n        return '(' + trues.join(' AND ') + ')';\n      }\n\n      return '(' + trues.join(' OR ') + ')';\n    }\n\n    return trues[0];\n  },\n  _movePrefix: function _movePrefix(lines) {\n    var updater = this.updater;\n    return _.map(lines, function (l) {\n      var prefix = '';\n\n      if (/^[=\\-+]/.test(l)) {\n        prefix = l.substr(0, 1);\n        l = l.substr(1);\n      }\n\n      return prefix + updater.quoteIfNecessary(l);\n    });\n  },\n\n  /**\n   * Parse the incoming author lines and convert into a string to add to the query\n   *\n   * @param {string[]} text\n   * @param {BOOLEAN} logic\n   * @returns {string} the author query string\n   */\n  handleAuthorInput: function handleAuthorInput(text, logic) {\n    if (text.length === 0) return '';\n    var authors = [];\n    var firstAuthors = [];\n    var doRestrictAuthors = false;\n    var result = '';\n    text.forEach(function (line) {\n      var name = line;\n      var prefix;\n      var suffix;\n\n      if (/^[\\^=\\-+]/.test(name) && name.length > 1) {\n        prefix = name.substring(0, 1);\n        name = name.substring(1);\n      }\n\n      if (/[$]$/.test(name) && name.length > 1) {\n        suffix = name.substring(name.length - 1);\n        name = name.substring(0, name.length - 1);\n      }\n\n      if (suffix === '$') {\n        doRestrictAuthors = true;\n      }\n\n      if (prefix === '^' && name.length > 0) {\n        firstAuthors.push(\"\\\"\".concat(name, \"\\\"\"));\n        return;\n      }\n\n      if (prefix && name.length > 0) {\n        authors.push(\"\".concat(prefix, \"\\\"\").concat(name, \"\\\"\"));\n      } else if (name.length > 0) {\n        authors.push(\"\\\"\".concat(name, \"\\\"\"));\n      }\n    }); // if we have authors, add them to the result\n\n    if (authors.length > 0) {\n      result = \"author:(\".concat(authors.join(logic), \")\");\n    }\n\n    if (firstAuthors.length > 0) {\n      result = \"\".concat(result.length > 0 ? \"\".concat(result, \" \") : '', \"first_author:(\").concat(firstAuthors.join(logic), \")\");\n    }\n\n    if (doRestrictAuthors) {\n      result = \"\".concat(result.length > 0 ? \"\".concat(result, \" \") : '', \"author_count:1\");\n    }\n\n    return result;\n  },\n  serialize: _.debounce(function () {\n    var updater = this.updater;\n    var data = this.toJSON();\n    var query = {\n      q: [],\n      fq: [],\n      sort: data.sort\n    }; // collections\n\n    var str = this._makeFqStr(data.collections);\n\n    if (str) {\n      query.__fq_database = ['AND', str];\n      query.fq.push('{!type=aqp v=$fq_database}');\n      query.fq_database = 'database: ' + str;\n    } // refereed/article\n\n\n    var str = this._makeFqStr(data.property, true);\n\n    if (str) {\n      query.__fq_property = ['AND', str];\n      query.fq.push('{!type=aqp v=$fq_property}');\n      query.fq_property = 'property: ' + str;\n    } // pubdate\n\n\n    var pd = data.pubdate;\n    var date = ['[', pd.year_from, '-', pd.month_from, ' TO ', pd.year_to, '-', pd.month_to, ']'].join('');\n\n    if (!_.isEqual(pd, this.defaults.pubdate)) {\n      query.q.push('pubdate:' + date);\n    } // handle author names\n\n\n    query.q.push(this.handleAuthorInput(data['author-names'], BOOLEAN[data['author-logic']])); // objects\n\n    var objectLogic = BOOLEAN[data['object-logic']];\n\n    var objects = this._movePrefix(data['object-names']);\n\n    var result = 'object:(' + objects.join(objectLogic) + ')';\n\n    if (objects.length) {\n      query.q.push(result);\n    } // title\n\n\n    var titleLogic = BOOLEAN[data['title-logic']];\n    var titles = data.title.split(/\\s+/);\n\n    if (titles.length > 0 && titles[0] !== '') {\n      query.q.push('title:(' + titles.join(titleLogic) + ')');\n    } // abs\n\n\n    var absLogic = BOOLEAN[data['abstract-logic']];\n    var abs = data.abs.split(/\\s+/);\n    var result = 'abs:(' + abs.join(absLogic) + ')';\n\n    if (abs.length && abs[0] !== '') {\n      query.q.push(result);\n    } // bibstem\n\n\n    var groups = _.reduce(data.bibstem.match(/[^,^\\s]+/g), function (acc, p) {\n      /^\\-/.test(p) ? acc.neg.push(updater.quoteIfNecessary(p.replace(/^\\-/, ''))) : acc.pos.push(updater.quoteIfNecessary(p));\n      return acc;\n    }, {\n      neg: [],\n      pos: []\n    });\n\n    if (groups.neg.length) {\n      query.q.push('-bibstem:(' + groups.neg.join(' OR ') + ')');\n    }\n\n    if (groups.pos.length) {\n      query.q.push('bibstem:(' + groups.pos.join(' OR ') + ')');\n    } // do not allow query to be empty\n\n\n    if (_.isEmpty(query.q)) {\n      query.q.push('*');\n    } // make sure that each item in query is an array and is not empty\n\n\n    this.set('query', _.reduce(query, function (acc, val, key) {\n      if (_.isEmpty(val)) {\n        return acc;\n      }\n\n      acc[key] = _.isArray(val) ? val : [val];\n      return acc;\n    }, {}));\n  }, 50)\n});\nvar FormView = Marionette.ItemView.extend({\n  initialize: function initialize() {\n    var _this = this;\n\n    this.sortWidget = new js_widgets_sort_widget_jsx__WEBPACK_IMPORTED_MODULE_6__[\"default\"]();\n    this.sortWidget.onSortChange = _.bind(this.onSortChange, this);\n    this.model.on('change:sort', function () {\n      var _this$model$get$split = _this.model.get('sort').split(' '),\n          _this$model$get$split2 = _slicedToArray(_this$model$get$split, 2),\n          sortStr = _this$model$get$split2[0],\n          dir = _this$model$get$split2[1];\n\n      var _this$sortWidget$stor = _this.sortWidget.store.getState(),\n          sort = _this$sortWidget$stor.sort,\n          direction = _this$sortWidget$stor.direction;\n\n      if (sortStr !== sort.id || dir !== direction) {\n        _this.sortWidget.store.dispatch(js_widgets_sort_redux_modules_sort_app__WEBPACK_IMPORTED_MODULE_7__[\"default\"].setQuery(null));\n\n        _this.sortWidget.store.dispatch(js_widgets_sort_redux_modules_sort_app__WEBPACK_IMPORTED_MODULE_7__[\"default\"].setSort(sortStr, true));\n\n        _this.sortWidget.store.dispatch(js_widgets_sort_redux_modules_sort_app__WEBPACK_IMPORTED_MODULE_7__[\"default\"].setDirection(dir, true));\n      }\n    });\n  },\n  template: (hbs_js_widgets_classic_form_form__WEBPACK_IMPORTED_MODULE_3___default()),\n  className: 'classic-form',\n  events: {\n    'submit form': 'submitForm',\n    'reset form': 'onReset',\n    'change input[name$=\"-logic\"]': 'updateLogic',\n    'input textarea': 'textareaUpdate',\n    'change div[data-field=\"database\"] input': 'updateCollection',\n    'change div[data-field=\"property\"] input': 'updateProperty',\n    'input input[name=\"title\"],input[name=\"abs\"],input[name=\"bibstem\"]': 'inputUpdate',\n    'input input[name^=\"month\"],input[name^=\"year\"]': 'dateUpdate'\n  },\n\n  /**\n   * update the view with the new collections data\n   * @param {{ astronomy: boolean, physics: boolean, general: boolean }} data\n   */\n  onChangeToCollections: function onChangeToCollections(data) {\n    var _this2 = this;\n\n    Object.keys(data).forEach(function (key) {\n      var $el = $(\"div[data-field=database] input[name=\\\"\".concat(key, \"\\\"]\"), _this2.$el);\n\n      if ($el.length > 0) {\n        $el.prop('checked', data[key]);\n      }\n    });\n  },\n\n  /**\n   *\n   * @param {{ refereed: boolean, article: boolean }} data\n   */\n  onChangeToProperty: function onChangeToProperty(data) {\n    var _this3 = this;\n\n    Object.keys(data).forEach(function (key) {\n      var $el = $(\"div[data-field=property] input[name=\\\"\".concat(key, \"\\\"]\"), _this3.$el);\n\n      if ($el.length > 0) {\n        $el.prop('checked', data[key]);\n      }\n    });\n  },\n  updateLogic: function updateLogic(e) {\n    var $el = this.$(e.currentTarget);\n    this.model.set($el.attr('name'), $el.val().trim());\n  },\n  onSortChange: function onSortChange() {\n    var _this$sortWidget$stor2 = this.sortWidget.store.getState(),\n        sort = _this$sortWidget$stor2.sort,\n        dir = _this$sortWidget$stor2.direction;\n\n    var newSort = sort.id + ' ' + dir;\n    this.model.set('sort', newSort);\n  },\n  textareaUpdate: function textareaUpdate(e) {\n    var $el = this.$(e.currentTarget);\n\n    var vals = _.filter($el.val().split(/[\\n;]\\s*/), function (v) {\n      return !_.isEmpty(v);\n    });\n\n    vals = vals.map(Function.prototype.call, String.prototype.trim);\n    this.model.set($el.attr('name'), vals);\n  },\n  updateCollection: function updateCollection(e) {\n    var $el = this.$(e.currentTarget);\n    var data = {};\n    data[$el.attr('name')] = $el.prop('checked');\n    this.model.set('collections', _.extend({}, this.model.get('collections'), data));\n  },\n  updateProperty: function updateProperty(e) {\n    var $el = this.$(e.currentTarget);\n    var data = {};\n    data[$el.attr('name')] = $el.prop('checked');\n    this.model.set('property', _.extend({}, this.model.get('property'), data));\n  },\n  inputUpdate: function inputUpdate(e) {\n    var $el = this.$(e.currentTarget);\n    this.model.set($el.attr('name'), $el.val().trim());\n  },\n  dateUpdate: function dateUpdate(e) {\n    var $el = this.$(e.currentTarget);\n    var name = $el.attr('name');\n    var val = $el.val().trim();\n    var data = {};\n    val = val === '' ? this.model.defaults.pubdate[name] : val;\n    data[name] = val;\n    this.model.set('pubdate', _.extend({}, this.model.get('pubdate'), data));\n  },\n  submitForm: function submitForm(e) {\n    e.preventDefault();\n    this.trigger('submit', this.model.get('query'));\n    this.$('button[type=submit]').each(function () {\n      var $el = $(this);\n      var currHtml = $el.html();\n      $el.html('<i class=\"icon-loading\" aria-hidden=\"true\"/>  Loading...');\n      setTimeout(function () {\n        $el.html(currHtml);\n      }, 3000);\n    });\n    return false;\n  },\n  onReset: function onReset() {\n    this.model.set(this.model.defaults);\n    this.render();\n  },\n  onRender: function onRender() {\n    var self = this;\n    this.$('#sort-container').html(this.sortWidget.render().el);\n\n    var getLastTerm = function getLastTerm(term) {\n      var t = _.last(term.split(/(,\\s|;\\s|[,;])/)); // ignore any leading `-`\n\n\n      return t.replace(/^\\-/, '');\n    };\n\n    var $bibInput = this.$('input[name=bibstem]');\n\n    if ($bibInput.data('ui-autocomplete')) {\n      return;\n    }\n\n    $bibInput.autocomplete({\n      minLength: 1,\n      autoFocus: true,\n      source: function source(request, response) {\n        var matches = $.map(js_widgets_paper_search_form_topterms__WEBPACK_IMPORTED_MODULE_4__[\"default\"], function (item) {\n          if (_.isString(request.term)) {\n            var term = getLastTerm(request.term).toUpperCase();\n            var bibstem = item.value.toUpperCase();\n            var label = item.label.toUpperCase();\n\n            if (bibstem.indexOf(term) === 0 || label.indexOf(term) === 0 || label.replace(/^THE\\s/, '').indexOf(term) === 0) {\n              return item;\n            }\n          }\n        });\n        return response(matches);\n      },\n      focus: function focus() {\n        // prevent value inserted on focus\n        return false;\n      },\n      select: function select(event, ui) {\n        var terms = split(this.value); // remove the current input\n\n        var t = terms.pop(); // add the selected item\n\n        terms.push((t.startsWith('-') ? '-' : '') + ui.item.value); // add placeholder to get the comma-and-space at the end\n\n        terms.push('');\n        this.value = terms.join(', ');\n        self.model.set('bibstem', this.value);\n        event.preventDefault(); // necessary to stop hash change from #classic-form to #\n\n        return false;\n      }\n    }).data('ui-autocomplete')._renderItem = function (ul, item) {\n      var term = getLastTerm(this.term).toUpperCase().trim();\n      var re = new RegExp('(' + term + ')', 'i');\n      var label = item.label;\n\n      if (term.length > 0) {\n        label = label.replace(re, '<span class=\"ui-state-highlight\">$1</span>');\n      }\n\n      var $li = $('<li/>').appendTo(ul);\n      $('<a/>').attr('href', 'javascript:void(0)').html(label).appendTo($li).on('click', function (e) {\n        e.preventDefault();\n      });\n      return $li;\n    };\n  }\n});\nvar FormWidget = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  initialize: function initialize(options) {\n    options = options || {};\n    this.model = new FormModel();\n    this.view = new FormView({\n      model: this.model\n    });\n    this.listenTo(this.view, 'submit', this.submitForm);\n  },\n  activate: function activate(beehive) {\n    var _this4 = this;\n\n    this.setBeeHive(beehive);\n    this.view.sortWidget.activate(beehive);\n    var ps = this.getPubSub();\n    var self = this;\n    ps.subscribe(ps.CUSTOM_EVENT, function (ev) {\n      if (ev === 'start-new-search') {\n        self.onNewSearch();\n      }\n    });\n    ps.subscribe(ps.USER_ANNOUNCEMENT, function (ev, data) {\n      if (ev === 'user_info_change' && data.defaultDatabase) {\n        // check first to make sure that collections is set to the default\n        if (JSON.stringify(_this4.model.get('collections')) === JSON.stringify(_this4.model.defaults.collections)) {\n          var dbs = _this4.getDbSelectionFromUserData();\n\n          _this4.model.set('collections', dbs || _this4.model.defaults.collections);\n\n          _this4.view.triggerMethod('changeToCollections', dbs || _this4.model.defaults.collections);\n        }\n      }\n    });\n  },\n\n  /**\n   *\n   * This will take in some url params which correspond to entries in the form and apply the changes\n   *\n   * @param {ApiQuery} query\n   */\n  applyQueryParams: function applyQueryParams(query) {\n    var _this5 = this;\n\n    // if query passed, unpack and set form entries\n    if (query) {\n      var params = query.toJSON(); // triggers a change to the \"collections\" form value\n\n      var processCollection = function processCollection(value) {\n        if (value) {\n          var process = function process(entry) {\n            if (entry.match(/^(a|astronomy)$/i)) {\n              return {\n                astronomy: true\n              };\n            }\n\n            if (entry.match(/^(p|physics)$/i)) {\n              return {\n                physics: true\n              };\n            }\n\n            if (entry.match(/^(g|general)$/i)) {\n              return {\n                general: true\n              };\n            }\n          };\n\n          var defaultValue = {\n            astronomy: false,\n            physics: false,\n            general: false\n          };\n          var newValue = {};\n\n          if (value.includes(',')) {\n            var entries = value.split(',').splice(0, 3);\n            newValue = entries.reduce(function (acc, entry) {\n              return _objectSpread({}, acc, process(entry));\n            }, defaultValue);\n          } else {\n            newValue = _objectSpread({}, defaultValue, process(value));\n          }\n\n          _this5.model.set('collections', newValue);\n\n          _this5.view.triggerMethod('changeToCollections', newValue);\n        }\n      }; // triggers a change to the \"property\" form value\n\n\n      var processProperty = function processProperty(value) {\n        if (value) {\n          var process = function process(entry) {\n            if (entry.match(/^(r|refereed)$/i)) {\n              return {\n                refereed: true\n              };\n            }\n\n            if (entry.match(/^(a|article)$/i)) {\n              return {\n                article: true\n              };\n            }\n          };\n\n          var defaultValue = {\n            refereed: false,\n            article: false\n          };\n          var newValue = {};\n\n          if (value.includes(',')) {\n            var entries = value.split(',').splice(0, 3);\n            newValue = entries.reduce(function (acc, entry) {\n              return _objectSpread({}, acc, process(entry));\n            }, defaultValue);\n          } else {\n            newValue = _objectSpread({}, defaultValue, process(value));\n          }\n\n          _this5.model.set('property', newValue);\n\n          _this5.view.triggerMethod('changeToProperty', newValue);\n        }\n      }; // we accept 2 params, collection (c) and property(p)\n\n\n      var keys = Object.keys(params);\n      keys.forEach(function (k) {\n        if (k.match(/^(c|collection)$/i)) {\n          processCollection(params[k][0]);\n        } else if (k.match(/^(p|property)$/i)) {\n          processProperty(params[k][0]);\n        }\n      });\n    }\n  },\n  onNewSearch: function onNewSearch() {\n    this.model.set(this.model.defaults);\n    this.view.triggerMethod('reset');\n  },\n\n  /**\n   * quick loop that waits for the element to be actually visible before\n   * setting the focus\n   * @param {string} selector\n   */\n  setFocus: function setFocus(selector) {\n    var $_ = _.bind(this.view.$, this.view);\n\n    (function check(c) {\n      var $el = $_(selector);\n      if ($el.is(':visible') || c <= 0) return $el.focus();\n      setTimeout(check, 100, --c);\n    })(10);\n  },\n  onShow: function onShow() {\n    // clear the loading button\n    this.view.$('button[type=submit]').each(function () {\n      $(this).html('<i class=\"fa fa-search\" aria-hidden=\"true\"></i> Search');\n    }); // set focus to author field\n\n    this.setFocus('#classic-author'); // check to make sure collections is set to the default first\n\n    if (JSON.stringify(this.model.get('collections')) === JSON.stringify(this.model.defaults.collections)) {\n      var dbs = this.getDbSelectionFromUserData();\n      this.model.set('collections', dbs || this.model.defaults.collections);\n      this.view.triggerMethod('changeToCollections', dbs || this.model.defaults.collections);\n    }\n  },\n  getDbSelectionFromUserData: function getDbSelectionFromUserData() {\n    try {\n      var userData = this.getBeeHive().getObject('User').getUserData();\n      var dbs = {};\n\n      if (userData && 'defaultDatabase' in userData) {\n        userData.defaultDatabase.forEach(function (db) {\n          // Skip the 'ALL' database, and only take true entries\n          if (db.name !== 'All' && db.value) {\n            dbs[db.name.toLowerCase()] = db.value;\n          }\n        });\n      } // only return something if at least one is true\n\n\n      return Object.keys(dbs).length > 0 ? dbs : null;\n    } catch (e) {\n      return null;\n    }\n  },\n  submitForm: function submitForm(queryDict) {\n    var newQuery = _.assign({}, queryDict, {\n      q: queryDict.q.join(' ')\n    });\n\n    newQuery = new js_components_api_query__WEBPACK_IMPORTED_MODULE_1__[\"default\"](newQuery);\n    var ps = this.getPubSub();\n    var options = {\n      q: newQuery,\n      context: {\n        referrer: 'ClassicSearchForm'\n      }\n    };\n    ps.publish(ps.NAVIGATE, 'search-page', options);\n    (0,analytics__WEBPACK_IMPORTED_MODULE_5__[\"default\"])('send', 'event', 'interaction', 'classic-form-submit', JSON.stringify(queryDict));\n  },\n  // notify application to keep me around in memory indefinitely\n  // this is so the form and anything the user has entered into it can stay around\n  dontKillMe: true\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (FormWidget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/classic_form/widget.js?");

/***/ }),

/***/ "./src/js/widgets/config.js":
/*!**********************************!*\
  !*** ./src/js/widgets/config.js ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  export: {\n    formats: [{\n      value: 'bibtex',\n      label: 'BibTeX',\n      help: 'BibTeX format',\n      ext: 'bib'\n    }, {\n      value: 'ads',\n      label: 'ADS',\n      help: 'ADS format',\n      ext: 'txt'\n    }, {\n      value: 'bibtexabs',\n      label: 'BibTeX ABS',\n      help: 'BibTeX with abstracts',\n      ext: 'bib'\n    }, {\n      value: 'endnote',\n      label: 'EndNote',\n      help: 'EndNote format',\n      ext: 'enw'\n    }, {\n      value: 'procite',\n      label: 'ProCite',\n      help: 'ProCite format',\n      ext: 'txt'\n    }, {\n      value: 'ris',\n      label: 'RIS',\n      help: 'Research Information Systems (RIS) format',\n      ext: 'txt'\n    }, {\n      value: 'refworks',\n      label: 'RefWorks',\n      help: 'RefWorks format',\n      ext: 'txt'\n    }, {\n      value: 'rss',\n      label: 'RSS',\n      help: 'RSS format',\n      ext: 'rss'\n    }, {\n      value: 'medlars',\n      label: 'MEDLARS',\n      help: 'Medical Literature Analysis and Retrieval System (MEDLARS) format',\n      ext: 'txt'\n    }, {\n      value: 'dcxml',\n      label: 'DC-XML',\n      help: 'Dublin Core XML format',\n      ext: 'xml'\n    }, {\n      value: 'jatsxml',\n      label: 'JATSXML',\n      help: 'JATS Journal Publishing XML',\n      ext: 'xml'\n    }, {\n      value: 'refxml',\n      label: 'REF-XML',\n      help: 'ADS link data in XML format',\n      ext: 'xml'\n    }, {\n      value: 'refabsxml',\n      label: 'REFABS-XML',\n      help: 'ADS records in XML format',\n      ext: 'xml'\n    }, {\n      value: 'aastex',\n      label: 'AASTeX',\n      help: 'LaTeX format for AAS journals',\n      ext: 'txt'\n    }, {\n      value: 'ieee',\n      label: 'IEEE',\n      help: 'IEEE format',\n      ext: 'txt'\n    }, {\n      value: 'icarus',\n      label: 'Icarus',\n      help: 'LaTeX format for use in Icarus',\n      ext: 'txt'\n    }, {\n      value: 'mnras',\n      label: 'MNRAS',\n      help: 'LaTeX format for use in MNRAS',\n      ext: 'txt'\n    }, {\n      value: 'soph',\n      label: 'Solar Physics',\n      help: 'LaTeX format for use in Solar Physics',\n      ext: 'txt'\n    }, {\n      value: 'votable',\n      label: 'VOTable',\n      help: 'VOTable XML format',\n      ext: 'xml'\n    }, {\n      value: 'custom',\n      label: 'Custom Format',\n      help: 'Enter Your Own Custom Format',\n      ext: 'txt'\n    }]\n  }\n});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/config.js?");

/***/ }),

/***/ "./src/js/widgets/dropdown-menu/templates/dropdown-item.html":
/*!*******************************************************************!*\
  !*** ./src/js/widgets/dropdown-menu/templates/dropdown-item.html ***!
  \*******************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li role=\\\"presentation\\\" class=\\\"dropdown-header no-hover-style\\\">\\n  \"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"section\") || (depth0 != null ? lookupProperty(depth0,\"section\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(alias1,{\"name\":\"section\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":2},\"end\":{\"line\":4,\"column\":13}}}) : helper)))\n    + \"\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"icon\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":2},\"end\":{\"line\":7,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</li>\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <a href=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"icon\") : depth0)) != null ? lookupProperty(stack1,\"href\") : stack1), depth0))\n    + \"\\\" class=\\\"pull-right dropdown-helper-icon\\\" target=\\\"_blank\\\" rel=\\\"noreferrer noopener\\\" title=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"icon\") : depth0)) != null ? lookupProperty(stack1,\"description\") : stack1), depth0))\n    + \"\\\"><i class=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"icon\") : depth0)) != null ? lookupProperty(stack1,\"class\") : stack1), depth0))\n    + \"\\\"></i></a>\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"divider\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.program(7, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":2},\"end\":{\"line\":16,\"column\":9}}})) != null ? stack1 : \"\");\n},\"5\":function(container,depth0,helpers,partials,data) {\n    return \"  <li role=\\\"presentation\\\" class=\\\"divider\\\"></li>\\n\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <li role=\\\"presentation\\\">\\n    <a role=\\\"menuitem\\\" tabindex=\\\"-1\\\" href=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"href\") : depth0), depth0))\n    + \"\\\">\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"description\") : depth0), depth0))\n    + \"</a>\\n  </li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"section\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(4, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":0},\"end\":{\"line\":17,\"column\":7}}})) != null ? stack1 : \"\");\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/dropdown-menu/templates/dropdown-item.html?");

/***/ }),

/***/ "./src/js/widgets/dropdown-menu/templates/dropdown.html":
/*!**************************************************************!*\
  !*** ./src/js/widgets/dropdown-menu/templates/dropdown.html ***!
  \**************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"pull-right\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"selectedPapers\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":12},\"end\":{\"line\":12,\"column\":19}}})) != null ? stack1 : \"\");\n},\"4\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                <div class=\\\"s-divider-bottom\\\">\\n                    <label><input class=\\\"papers\\\" type=\\\"radio\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"onlySelected\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":62},\"end\":{\"line\":9,\"column\":99}}})) != null ? stack1 : \"\")\n    + \" name=\\\"papers-\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"dropdownTitle\") || (depth0 != null ? lookupProperty(depth0,\"dropdownTitle\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"dropdownTitle\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":113},\"end\":{\"line\":9,\"column\":130}}}) : helper)))\n    + \"\\\" value=\\\"selected\\\"/> selected papers</label>\\n                    <label><input class=\\\"papers\\\" type=\\\"radio\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"onlySelected\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":62},\"end\":{\"line\":10,\"column\":106}}})) != null ? stack1 : \"\")\n    + \" name=\\\"papers-\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"dropdownTitle\") || (depth0 != null ? lookupProperty(depth0,\"dropdownTitle\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"dropdownTitle\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":120},\"end\":{\"line\":10,\"column\":137}}}) : helper)))\n    + \"\\\" value=\\\"all\\\"/> all papers</label>\\n                </div>\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    return \" checked \";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<!-- Single button -->\\n    <button type=\\\"button\\\" class=\\\"btn \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"btnType\") || (depth0 != null ? lookupProperty(depth0,\"btnType\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"btnType\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":37},\"end\":{\"line\":2,\"column\":48}}}) : helper)))\n    + \" dropdown-toggle\\\" data-toggle=\\\"dropdown\\\" aria-expanded=\\\"false\\\">\\n       <i class=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"iconClass\") || (depth0 != null ? lookupProperty(depth0,\"iconClass\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"iconClass\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":17},\"end\":{\"line\":3,\"column\":30}}}) : helper)))\n    + \"\\\"></i> <h2>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"dropdownTitle\") || (depth0 != null ? lookupProperty(depth0,\"dropdownTitle\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"dropdownTitle\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":41},\"end\":{\"line\":3,\"column\":58}}}) : helper)))\n    + \"</h2> <span class=\\\"caret\\\"></span>\\n    </button>\\n    <div class=\\\"dropdown-menu \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"pullRight\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":30},\"end\":{\"line\":5,\"column\":64}}})) != null ? stack1 : \"\")\n    + \"\\\" role=\\\"menu\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"selectedOption\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":8},\"end\":{\"line\":13,\"column\":15}}})) != null ? stack1 : \"\")\n    + \"        <ul class=\\\"link-container\\\">\\n        </ul>\\n    </div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/dropdown-menu/templates/dropdown.html?");

/***/ }),

/***/ "./src/js/widgets/dropdown-menu/widget.js":
/*!************************************************!*\
  !*** ./src/js/widgets/dropdown-menu/widget.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var hbs_js_widgets_dropdown_menu_templates_dropdown__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hbs!js/widgets/dropdown-menu/templates/dropdown */ \"./src/js/widgets/dropdown-menu/templates/dropdown.html\");\n/* harmony import */ var hbs_js_widgets_dropdown_menu_templates_dropdown__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_dropdown_menu_templates_dropdown__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var hbs_js_widgets_dropdown_menu_templates_dropdown_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! hbs!js/widgets/dropdown-menu/templates/dropdown-item */ \"./src/js/widgets/dropdown-menu/templates/dropdown-item.html\");\n/* harmony import */ var hbs_js_widgets_dropdown_menu_templates_dropdown_item__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_dropdown_menu_templates_dropdown_item__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n/*\n *\n * To use this widget to generate a dropdown list,\n * you should pass a configuration object to the\n * widget called links, in the form\n *  links : [{href : '' , description : '' , navEvent: ''}]\n *\n * */\n\nvar DropdownModel = Backbone.Model.extend({\n  defaults: function defaults() {\n    return {\n      selected: false,\n      href: undefined,\n      description: undefined,\n      navEvent: undefined,\n      pubsubEvent: undefined,\n      section: undefined,\n      hideIfNoItemsSelected: false\n    };\n  }\n});\nvar DropdownCollection = Backbone.Collection.extend({\n  initialize: function initialize(models, options) {\n    this.on('change:selected', this.removeOtherSelected);\n  },\n  model: DropdownModel,\n  // only allow 1 selected model at a time\n  removeOtherSelected: function removeOtherSelected(selectedModel, val) {\n    if (val === false) {\n      return;\n    }\n\n    this.each(function (m) {\n      if (m !== selectedModel) {\n        m.set('selected', false);\n      }\n    });\n  }\n});\nvar DropdownItemView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  events: {\n    click: 'setSelected'\n  },\n  setSelected: function setSelected(e) {\n    this.model.set('selected', true);\n    return false;\n  },\n  template: (hbs_js_widgets_dropdown_menu_templates_dropdown_item__WEBPACK_IMPORTED_MODULE_3___default()),\n  onRender: function onRender() {\n    // force the element to unwrap, so we can control the root element\n    this.setElement(this.el.innerHTML);\n  }\n});\nvar ContainerModel = Backbone.Model.extend({\n  defaults: function defaults() {\n    return {\n      // should we show the option to export only selected?\n      selectedOption: false,\n      // are there currently selected papers?\n      selectedPapers: false,\n      // should we only export selected? this is changed by the radio\n      // by default it is true if the above two vals are true\n      onlySelected: true\n    };\n  }\n});\nvar DropdownView = marionette__WEBPACK_IMPORTED_MODULE_0___default().CompositeView.extend({\n  initialize: function initialize(options) {\n    options = options || {};\n  },\n  modelEvents: {\n    'change:selectedOption': 'render',\n    'change:selectedPapers': 'render'\n  },\n  collectionEvents: {\n    'change:selected': function changeSelected() {\n      this.$el.removeClass('open');\n    }\n  },\n  className: 'btn-group dropdown-widget s-dropdown-widget',\n  childView: DropdownItemView,\n  childViewContainer: '.link-container',\n  template: (hbs_js_widgets_dropdown_menu_templates_dropdown__WEBPACK_IMPORTED_MODULE_2___default()),\n  serializeData: function serializeData() {\n    var data = this.model.toJSON(); // what color should the button be?\n\n    data.btnType = marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'btnType') || 'btn-default';\n    data.dropdownTitle = marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'dropdownTitle');\n    data.iconClass = marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'iconClass'); // whether to right align the dropdown\n\n    data.pullRight = marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'rightAlign');\n    return data;\n  },\n  events: {\n    'change input.papers': function changeInputPapers(e) {\n      var $t = $(e.target);\n      $t.attr('value') == 'all' ? this.model.set('onlySelected', false) : this.model.set('onlySelected', true);\n    },\n    'click .dropdown-menu label': function clickDropdownMenuLabel(e) {\n      e.stopPropagation && e.stopPropagation();\n    }\n  },\n  onRender: function onRender() {\n    this.$('.dropdown-helper-icon').off().click(function (e) {\n      window.open(e.currentTarget.href, '_blank');\n    });\n  }\n});\nvar DropdownWidget = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend({\n  initialize: function initialize(options) {\n    var _this = this;\n\n    this.options = _.defaults(options, {\n      updateLinks: _.noop\n    });\n\n    if (!this.options.links) {\n      throw new Error('Dropdown menu will be empty!');\n    } // selectedOption: do we want the option to switch from showing all papers vs showing selected papers?\n\n\n    this.model = new ContainerModel({\n      selectedOption: this.options.selectedOption\n    });\n    this.collection = new DropdownCollection(this.options.links);\n    this.view = new DropdownView(_.extend({\n      collection: this.collection,\n      model: this.model\n    }, this.options));\n    this.listenTo(this.collection, 'change:selected', function (model, value) {\n      if (model.has('navEvent')) {\n        _this.emitNavigateEvent(model, value);\n      } else if (model.has('pubsubEvent')) {\n        var onlySelected = _this.getOnlySelected(); // if the item has pubsubEvent, call the event\n\n\n        _this.getPubSub().publish(_this.getPubSub().CUSTOM_EVENT, model.get('pubsubEvent'), {\n          onlySelected: onlySelected\n        });\n      }\n\n      model.set('selected', false);\n    });\n  },\n  activate: function activate(beehive) {\n    _.bindAll(this);\n\n    this.setBeeHive(beehive);\n    var pubsub = this.getPubSub();\n    pubsub.subscribe(pubsub.STORAGE_PAPER_UPDATE, this.onStoragePaperChange);\n    pubsub.subscribe(pubsub.USER_ANNOUNCEMENT, this.updateFromUserData);\n    this.updateFromUserData();\n  },\n  getUserData: function getUserData() {\n    try {\n      var beehive = _.isFunction(this.getBeeHive) && this.getBeeHive();\n      var user = _.isFunction(beehive.getObject) && beehive.getObject('User');\n\n      if (_.isPlainObject(user)) {\n        return _.isFunction(user.getUserData) && user.getUserData('USER_DATA');\n      }\n\n      return {};\n    } catch (e) {\n      return {};\n    }\n  },\n  updateFromUserData: function updateFromUserData() {\n    var userData = this.getUserData();\n    var links = this.options.updateLinks(userData, this.options.links) || this.options.links;\n    this.options.links = links;\n    this.collection.reset(this.options.links);\n  },\n  onStoragePaperChange: function onStoragePaperChange(numSelected) {\n    this.model.set('selectedPapers', !!numSelected);\n  },\n  getOnlySelected: function getOnlySelected() {\n    return this.model.get('selectedOption') && this.model.get('selectedPapers') && this.model.get('onlySelected');\n  },\n  emitNavigateEvent: function emitNavigateEvent(model, value) {\n    var onlySelected = this.getOnlySelected();\n\n    if (value) {\n      var args = _.extend({\n        onlySelected: onlySelected\n      }, model.get('params'));\n\n      this.getPubSub().publish(this.getPubSub().NAVIGATE, model.get('navEvent'), args);\n    }\n\n    model.set('selected', false);\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (DropdownWidget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/dropdown-menu/widget.js?");

/***/ }),

/***/ "./src/js/widgets/facet/actions.js":
/*!*****************************************!*\
  !*** ./src/js/widgets/facet/actions.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }\n/* harmony export */ });\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n // http://redux.js.org/docs/basics/Actions.html\n\nvar actions = {};\n\nactions.data_requested = function (id) {\n  return {\n    type: 'DATA_REQUESTED',\n    id: id\n  };\n};\n/*\n * resets visible variable to 5\n * */\n\n\nactions.reset_visible = function (id) {\n  return {\n    type: 'RESET_VISIBLE',\n    id: id\n  };\n};\n\nactions.increase_visible = function (id) {\n  return function (dispatch, getState) {\n    var num = 5; // check to see if more need to be requested\n\n    var numLoadedRecords = id ? getState().facets[id].children.length : getState().children.length;\n    var numVisible = id ? getState().facets[id].state.visible : getState().state.visible; // want to make sure there is always an extra cycle available to\n    // minimize impression of loading\n\n    if (numLoadedRecords - (numVisible + num) <= num) {\n      dispatch(this.fetch_data(id));\n    }\n\n    dispatch({\n      type: 'INCREASE_VISIBLE',\n      id: id,\n      num: num\n    }); // was the parent selected while the children already exist?\n    // if so the newly visible facets need to be\n    // selected too given our ~smart hierarchical facet handling~\n\n    if (getState().state.selected.indexOf(id) > -1) {\n      dispatch(actions.select_facet(id));\n    }\n  }.bind(this);\n};\n\nactions.data_received = function (data, id) {\n  return {\n    type: 'DATA_RECEIVED',\n    data: data,\n    id: id\n  };\n};\n\nactions.toggle_facet = function (id, open) {\n  return function (dispatch, getState) {\n    var currentOpen = id ? getState().facets[id].state.open : getState().state.open; // if open was not supplied, just toggle the facet\n\n    open = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isBoolean(open) ? open : !currentOpen;\n    var hasData = id ? getState().facets[id].children.length : getState().children.length; // fetch the data now\n\n    if (open && !hasData) dispatch(this.fetch_data(id));\n    dispatch({\n      type: 'FACET_TOGGLED',\n      open: open,\n      id: id\n    });\n  }.bind(this);\n};\n\nactions.fetch_data = function (id, offset) {\n  // must be overridden by widget\n  throw new Error('this was supposed to be overridden!');\n};\n\nactions.select_facet = function (id) {\n  return {\n    type: 'FACET_SELECTED',\n    id: id\n  };\n};\n\nactions.unselect_facet = function (id) {\n  return {\n    type: 'FACET_UNSELECTED',\n    id: id\n  };\n};\n\nactions.submit_filter = function (logicOption) {\n  // must be overridden by widget\n  throw new Error('this was supposed to be overridden!');\n};\n\nactions.reset_state = function () {\n  return {\n    type: 'RESET_STATE'\n  };\n};\n\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__() {\n  return Object.create(actions);\n}\n;\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/facet/actions.js?");

/***/ }),

/***/ "./src/js/widgets/facet/create_store.js":
/*!**********************************************!*\
  !*** ./src/js/widgets/facet/create_store.js ***!
  \**********************************************/
/***/ (function() {

eval("throw new Error(\"Module build failed (from ./node_modules/babel-loader/lib/index.js):\\nSyntaxError: /home/tim/code/bbb/src/js/widgets/facet/create_store.js: Only one default export allowed per module. (18:2)\\n\\n\\u001b[0m \\u001b[90m 16 |\\u001b[39m     )\\u001b[33m;\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m 17 |\\u001b[39m   }\\u001b[33m;\\u001b[39m\\u001b[0m\\n\\u001b[0m\\u001b[31m\\u001b[1m>\\u001b[22m\\u001b[39m\\u001b[90m 18 |\\u001b[39m   \\u001b[36mexport\\u001b[39m \\u001b[36mdefault\\u001b[39m createStore\\u001b[33m;\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m    |\\u001b[39m   \\u001b[31m\\u001b[1m^\\u001b[22m\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m 19 |\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m 20 |\\u001b[39m\\u001b[0m\\n    at Parser._raise (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:798:17)\\n    at Parser.raiseWithData (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:791:17)\\n    at Parser.raise (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:752:17)\\n    at Parser.checkDuplicateExports (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:14170:12)\\n    at Parser.checkExport (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:14094:14)\\n    at Parser.parseExport (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:13921:12)\\n    at Parser.parseStatementContent (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:12902:27)\\n    at Parser.parseStatement (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:12796:17)\\n    at Parser.parseBlockOrModuleBlockBody (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:13385:25)\\n    at Parser.parseBlockBody (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:13376:10)\");\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/facet/create_store.js?");

/***/ }),

/***/ "./src/js/widgets/facet/facet-container.jsx.js":
/*!*****************************************************!*\
  !*** ./src/js/widgets/facet/facet-container.jsx.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./src/libs/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-redux */ \"./src/libs/react-redux.js\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ \"./src/libs/prop-types.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var js_widgets_facet_toggle_list_jsx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/widgets/facet/toggle_list.jsx */ \"./src/js/widgets/facet/toggle_list.jsx.js\");\n/* harmony import */ var js_widgets_facet_facet_dropdown_jsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/widgets/facet/facet-dropdown.jsx */ \"./src/js/widgets/facet/facet-dropdown.jsx.js\");\n/* harmony import */ var js_widgets_facet_reducers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/widgets/facet/reducers */ \"./src/js/widgets/facet/reducers.js\");\n\n\n\n\n\n\n\nvar ContainerComponent = function ContainerComponent(_ref) {\n  var activeFacets = _ref.activeFacets,\n      state = _ref.reduxState,\n      resetVisibleFacets = _ref.resetVisibleFacets,\n      selectFacet = _ref.selectFacet,\n      showMoreFacets = _ref.showMoreFacets,\n      submitFilter = _ref.submitFilter,\n      toggleFacet = _ref.toggleFacet,\n      unselectFacet = _ref.unselectFacet;\n  var header = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    role: \"button\",\n    tabIndex: \"0\",\n    onClick: function onClick() {\n      return toggleFacet(undefined);\n    },\n    onKeyPress: function onKeyPress(e) {\n      if (e.which === 13) {\n        toggleFacet(undefined);\n      }\n    },\n    style: {\n      display: 'inline-block'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"h3\", {\n    className: \"facet__header\"\n  }, state.config.facetTitle));\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"facet__container\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(js_widgets_facet_toggle_list_jsx__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n    reduxState: state,\n    currentLevel: 1,\n    showMoreFacets: showMoreFacets,\n    resetVisibleFacets: resetVisibleFacets,\n    toggleFacet: toggleFacet,\n    selectFacet: selectFacet,\n    unselectFacet: unselectFacet\n  }, header, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(js_widgets_facet_facet_dropdown_jsx__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n    activeFacets: activeFacets,\n    onSubmitFilter: submitFilter\n  })));\n};\n\nContainerComponent.defaultProps = {};\nContainerComponent.propTypes = {\n  activeFacets: prop_types__WEBPACK_IMPORTED_MODULE_2___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_2___default().object)).isRequired,\n  reduxState: prop_types__WEBPACK_IMPORTED_MODULE_2___default().shape({\n    config: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().object),\n    state: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().object),\n    pagination: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().object),\n    children: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().array),\n    facets: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().object)\n  }).isRequired,\n  showMoreFacets: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().func).isRequired,\n  resetVisibleFacets: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().func).isRequired,\n  toggleFacet: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().func).isRequired,\n  selectFacet: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().func).isRequired,\n  unselectFacet: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().func).isRequired,\n  submitFilter: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().func).isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    reduxState: state,\n    activeFacets: (0,js_widgets_facet_reducers__WEBPACK_IMPORTED_MODULE_5__.getActiveFacets)(state, state.state.selected)\n  };\n}; // ownProps contains the widget's actions object which has\n// overridden certain methods to be unique to the widget\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, ownProps) {\n  return {\n    selectFacet: function selectFacet(id) {\n      dispatch(ownProps.actions.select_facet(id));\n    },\n    unselectFacet: function unselectFacet(id) {\n      dispatch(ownProps.actions.unselect_facet(id));\n    },\n    toggleFacet: function toggleFacet(id, open) {\n      dispatch(ownProps.actions.toggle_facet(id, open));\n    },\n    showMoreFacets: function showMoreFacets(id) {\n      dispatch(ownProps.actions.increase_visible(id));\n    },\n    resetVisibleFacets: function resetVisibleFacets(id) {\n      dispatch(ownProps.actions.reset_visible(id));\n    },\n    submitFilter: function submitFilter(logicOption) {\n      dispatch(ownProps.actions.submit_filter(logicOption));\n    }\n  };\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ((0,react_redux__WEBPACK_IMPORTED_MODULE_1__.connect)(mapStateToProps, mapDispatchToProps)(ContainerComponent));\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/facet/facet-container.jsx.js?");

/***/ }),

/***/ "./src/js/widgets/facet/facet-dropdown.jsx.js":
/*!****************************************************!*\
  !*** ./src/js/widgets/facet/facet-dropdown.jsx.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./src/libs/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ \"./src/libs/prop-types.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-redux */ \"./src/libs/react-redux.js\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nvar Dropdown = function Dropdown(_ref) {\n  var activeFacets = _ref.activeFacets,\n      onSubmitFilter = _ref.onSubmitFilter;\n\n  var _useSelector = (0,react_redux__WEBPACK_IMPORTED_MODULE_2__.useSelector)(function (state) {\n    return {\n      logicOptions: state.config.logicOptions,\n      facetTitle: state.config.facetTitle\n    };\n  }),\n      logicOptions = _useSelector.logicOptions,\n      facetTitle = _useSelector.facetTitle; // no dropdown if no selected facets!\n\n\n  if (activeFacets.length === 0) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      style: {\n        display: 'none'\n      }\n    });\n  }\n\n  if (activeFacets.length > 25) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: \"facet__dropdown\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, \"select no more than 25 facets at a time\"));\n  }\n\n  var arr = logicOptions[activeFacets.length === 1 ? 'single' : 'multiple'];\n\n  if (arr[0] === 'invalid choice') {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: \"facet__dropdown\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, \"invalid choice!\"));\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"facet__dropdown\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"facet__dropdown__title\",\n    style: {\n      display: 'flex',\n      flexDirection: 'column'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, facetTitle), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"b\", null, activeFacets.length), \" selected\")), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"btn-group-vertical\",\n    style: {\n      display: 'flex',\n      justifyContent: 'center',\n      flexDirection: 'column'\n    }\n  }, arr.map(function (val) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n      key: val,\n      className: \"btn btn-default\",\n      type: \"button\",\n      onClick: function onClick() {\n        return onSubmitFilter(val);\n      }\n    }, val);\n  })));\n};\n\nDropdown.defaultProps = {\n  activeFacets: [],\n  onSubmitFilter: function onSubmitFilter() {}\n};\nDropdown.propTypes = {\n  activeFacets: prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf((prop_types__WEBPACK_IMPORTED_MODULE_1___default().string)),\n  onSubmitFilter: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().func)\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (Dropdown);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/facet/facet-dropdown.jsx.js?");

/***/ }),

/***/ "./src/js/widgets/facet/factory.js":
/*!*****************************************!*\
  !*** ./src/js/widgets/facet/factory.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_widgets_facet_widget__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/widgets/facet/widget */ \"./src/js/widgets/facet/widget.js\");\n/* harmony import */ var js_widgets_facet_graph_facet_widget__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/widgets/facet/graph-facet/widget */ \"./src/js/widgets/facet/graph-facet/widget.js\");\n\n\nvar FacetFactory = {\n  makeBasicCheckboxFacet: function makeBasicCheckboxFacet(options) {\n    var defaultOptions = {\n      facetTitle: options.facetTitle,\n      displayNum: 5,\n      maxDisplayNum: 100,\n      facetField: options.facetField,\n      openByDefault: false,\n      showOptions: true,\n      hierMaxLevels: 1\n    };\n    return new js_widgets_facet_widget__WEBPACK_IMPORTED_MODULE_0__[\"default\"](_.extend(defaultOptions, options));\n  },\n  makeHierarchicalCheckboxFacet: function makeHierarchicalCheckboxFacet(options) {\n    options.hierMaxLevels = 2;\n    options.defaultQueryArguments = options.defaultQueryArguments || {};\n    options.defaultQueryArguments['facet.prefix'] = '0/';\n    return this.makeBasicCheckboxFacet.apply(this, arguments);\n  },\n  makeGraphFacet: function makeGraphFacet(options) {\n    options = _.extend({\n      openByDefault: true\n    }, options);\n    return new js_widgets_facet_graph_facet_widget__WEBPACK_IMPORTED_MODULE_1__[\"default\"](options);\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (FacetFactory);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/facet/factory.js?");

/***/ }),

/***/ "./src/js/widgets/facet/graph-facet/widget.js":
/*!****************************************************!*\
  !*** ./src/js/widgets/facet/graph-facet/widget.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils */ \"./src/js/utils.js\");\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_query_updater */ \"./src/js/components/api_query_updater.js\");\n\n\n\n\nvar BaseFacetWidget = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend({\n  initialize: function initialize(options) {\n    options = options || {};\n    this.processResponse = options.processResponse;\n    this.model = new Backbone.Model();\n    this.view = new options.graphView(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(options.graphViewOptions, {\n      model: this.model\n    }));\n    this.isActive = false;\n    this.isDone = false;\n    this.listenTo(this.view, 'all', this.onAllInternalEvents);\n    this.facetField = options.facetField;\n    this.queryUpdater = new js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_3__[\"default\"](this.facetField);\n    js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_2__[\"default\"].prototype.initialize.apply(this, arguments);\n    this.listenTo(this.view, 'facet-applied', this.handleConditionApplied);\n    this.on('active', this.onActive);\n    this.on('hidden', this.onHidden);\n    this.dispatchRequest = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debounce(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.dispatchRequest, this), 300);\n  },\n  activate: function activate(beehive) {\n    var self = this;\n    this.setBeeHive(beehive);\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bindAll(this, 'dispatchRequest', 'processResponse', 'onInvitingRequest'); // custom dispatchRequest function goes here\n\n\n    var pubsub = this.getPubSub();\n    pubsub.subscribe(pubsub.INVITING_REQUEST, this.onInvitingRequest);\n    pubsub.subscribe(pubsub.DELIVERING_RESPONSE, this.processResponse);\n    this.activateWidget();\n    this.attachGeneralHandler(this.onFeedback);\n  },\n  onInvitingRequest: function onInvitingRequest(apiQuery) {\n    if (this._sortChanged.call(this, apiQuery)) {\n      return;\n    }\n\n    this.isDone = false;\n    this.setCurrentQuery(apiQuery);\n    this.dispatchRequest(apiQuery);\n    this.updateState(this.STATES.LOADING);\n  },\n  _sortChanged: function _sortChanged(apiQuery) {\n    try {\n      var diff = utils__WEBPACK_IMPORTED_MODULE_1__[\"default\"].difference(apiQuery.toJSON(), this.getCurrentQuery().toJSON());\n    } catch (e) {// continue\n    } // make sure only 1 key on object, and that key is \"sort\"\n\n\n    return diff && diff.sort && underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(diff).length === 1;\n  },\n  dispatchRequest: function dispatchRequest(apiQuery) {\n    if (this.isActive && !this.isDone && apiQuery.has('q')) {\n      // reset the graph\n      this.model.unset('graphData');\n      this.model.unset('statsCount');\n      var q = this.customizeQuery(apiQuery);\n      var req = this.composeRequest(q);\n      var pubsub = this.getPubSub();\n      pubsub.publish(pubsub.DELIVERING_REQUEST, req);\n      this.isDone = true;\n    }\n  },\n  removeAnyOldConditions: function removeAnyOldConditions(query, fieldName) {\n    var q = query.clone();\n    var oldField = q.get('__' + this.facetField + '_' + fieldName); // check for field on current query\n\n    if (oldField && oldField.length > 0) {\n      // grab the last value and check to make sure it is actually in the query string\n      var oldVal = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].last(oldField);\n\n      if (q.get(fieldName)[0].indexOf(oldVal) > -1) {\n        this.queryUpdater.updateQuery(q, fieldName, 'remove', oldVal);\n      }\n    }\n\n    return q;\n  },\n  handleConditionApplied: function handleConditionApplied(val) {\n    var fieldName = 'q';\n    var q = this.getCurrentQuery();\n    q.set('q', /^\\(.*\\)/.test(q.get('q')[0]) ? q.get('q')[0] : '(' + q.get('q')[0] + ')');\n    val = this.facetField + ':' + val;\n    q = q.clone();\n    q = this.removeAnyOldConditions(q, fieldName);\n    this.queryUpdater.updateQuery(q, fieldName, 'limit', val); // q.set('q', q.get('q')[0].replace(/^\\((.*)\\)$/, '$1'));\n\n    this.dispatchNewQuery(q);\n  },\n  onActive: function onActive() {\n    if (!this.isActive && this.isDone && this.model.get('error')) {\n      this.isDone = false;\n      this.model.set('error', false);\n    }\n\n    this.isActive = true;\n    this.dispatchRequest(this.getCurrentQuery());\n  },\n  onHidden: function onHidden() {\n    this.isActive = false;\n  },\n  onFeedback: function onFeedback() {\n    this.model.set('error', true);\n    this.updateState(this.STATES.ERRORED);\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (BaseFacetWidget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/facet/graph-facet/widget.js?");

/***/ }),

/***/ "./src/js/widgets/facet/reducers.js":
/*!******************************************!*\
  !*** ./src/js/widgets/facet/reducers.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n\n\nfunction reducer(state, action) {\n  if (!state) state = reducer.getDefaultState();\n\n  switch (action.type) {\n    case 'DATA_REQUESTED':\n      return reducer.dataRequested(state, action.id);\n\n    case 'DATA_RECEIVED':\n      return reducer.dataReceived(state, action.data, action.id);\n\n    case 'INCREASE_VISIBLE':\n      return reducer.increaseVisible(state, action.num, action.id);\n\n    case 'RESET_VISIBLE':\n      return reducer.resetVisible(state, action.id);\n\n    case 'FACET_SELECTED':\n      return reducer.facetSelected(state, action.id);\n\n    case 'FACET_UNSELECTED':\n      return reducer.facetUnselected(state, action.id);\n\n    case 'FACET_TOGGLED':\n      return reducer.facetToggled(state, action.open, action.id);\n\n    case 'SUBMIT_FILTER':\n      return reducer.submitFilter(state, action.logicOption);\n\n    case 'RESET_STATE':\n      return reducer.getDefaultState(state);\n\n    default:\n      return state;\n  }\n} // utility function called by react components and facet widget\n\n\nreducer.getActiveFacets = function (state, selected) {\n  // if it's a hierarchical facet, remove the children\n  return selected.map(function (s) {\n    if (selected.indexOf(getParentName(s)) > -1) return false;\n    return s;\n  }).filter(function (s) {\n    if (s) return s;\n  });\n};\n\nreducer.facetSelected = function (state, id) {\n  var visibleChildren = state.facets[id].state.visible; // if it's a hierarchical facet, select all the CURRENTLY VISIBLE children (might not be loaded yet)\n\n  var selected = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].unique(state.state.selected.concat(state.facets[id].children.slice(0, visibleChildren).concat([id]))); // or, if all the visible children are selected, but parent is not, select the parent\n  // first see if you can find a parent\n\n\n  var parentId = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].filter(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pairs(state.facets), function (item) {\n    return item[1].children.indexOf(id) > -1;\n  }); // if you can, check if all its visible children are selected, and if they are, add it to the\n  // selected array\n\n\n  if (parentId.length) {\n    parentId = parentId[0][0];\n    var parent = state.facets[parentId];\n    var mustBeSelected = parent.children.slice(0, parent.state.visible);\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].intersection(selected, mustBeSelected).length === mustBeSelected.length) {\n      selected = selected.concat([parentId]);\n    }\n  }\n\n  return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state, {\n    state: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state.state, {\n      selected: selected\n    })\n  });\n};\n\nfunction getParentName(id) {\n  var parts = id.split('/');\n\n  if (parts.length > 2) {\n    var parent = parts[parts.length - 2];\n    parent = parseInt(id[0]) - 1 + '/' + parent;\n    return parent;\n  }\n}\n\nreducer.facetUnselected = function (state, id) {\n  var selected = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].without(state.state.selected, id);\n\n  var parent = getParentName(id); // parent can't be selected if not all children are selected\n\n  if (parent) {\n    selected = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].without(selected, parent);\n  } // unselect all the children\n\n\n  selected = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].without.apply(undefined, [selected].concat(state.facets[id].children));\n  return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state, {\n    state: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state.state, {\n      selected: selected\n    })\n  });\n}; // utility function for immutable updating\n\n\nfunction updateKey(state, id, newData, key) {\n  key = key || 'state';\n\n  if (!id) {\n    var newState = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state);\n\n    newState[key] = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state[key], newData);\n    return newState;\n  }\n\n  var facet = {};\n  facet[id] = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state.facets[id]);\n  facet[id][key] = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state.facets[id][key], newData);\n  return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state, {\n    facets: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state.facets, facet)\n  });\n}\n\nreducer.resetVisible = function (state, id) {\n  return updateKey(state, id, {\n    visible: 5\n  });\n};\n\nreducer.increaseVisible = function (state, num, id) {\n  var data = id ? {\n    visible: state.facets[id].state.visible + num\n  } : {\n    visible: state.state.visible + num\n  };\n  return updateKey(state, id, data);\n};\n\nreducer.facetToggled = function (state, open, id) {\n  return updateKey(state, id, {\n    open: open\n  });\n}; // set loading state\n\n\nreducer.dataRequested = function (state, id) {\n  if (!id) {\n    var paginationData = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state.pagination, {\n      state: 'loading'\n    });\n  } else {\n    var paginationData = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state.facets[id].pagination, {\n      state: 'loading'\n    });\n  }\n\n  return updateKey(state, id, paginationData, 'pagination');\n}; // for dataReceived reducer\n\n\nreducer.processData = function (data, preprocessors) {\n  preprocessors = preprocessors || [];\n  if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isFunction(preprocessors)) preprocessors = [preprocessors];\n  var data = data.map(function (d, i) {\n    if (i % 2 === 0) {\n      return {\n        name: d.split('/')[d.split('/').length - 1],\n        value: d,\n        count: data[i + 1],\n        pagination: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cloneDeep(reducer.defaultState.pagination)),\n        children: [],\n        state: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].cloneDeep(reducer.defaultState.state))\n      };\n    }\n  }).filter(function (d) {\n    if (d) return d;\n  }); // now reduce the result with the preprocessors (if they exist)\n\n  return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compose.apply(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"], preprocessors)(data);\n};\n\nreducer.dataReceived = function (state, data, id) {\n  var facets = data.facet_counts.facet_fields[Object.keys(data.facet_counts.facet_fields)[0]];\n  var finished = facets.length / 2 != parseInt(data.responseHeader.params['facet.limit']);\n  facets = reducer.processData(facets, state.config.preprocessors); // for children array\n\n  var dataIds = facets.map(function (d) {\n    return d.value;\n  }); // turn data into object to merge into the facets key in state\n\n  facets = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].object(dataIds, facets);\n\n  if (!id) {\n    return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state, {\n      pagination: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state.pagination, {\n        state: 'success',\n        finished: finished\n      }),\n      facets: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state.facets, facets),\n      children: state.children.concat(dataIds)\n    });\n  }\n\n  var facet = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state.facets[id], {\n    children: state.facets[id].children.concat(dataIds),\n    pagination: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state.facets[id].pagination, {\n      state: 'success',\n      finished: finished\n    })\n  });\n\n  var newFacetObj = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state.facets, facets);\n\n  newFacetObj[id] = facet;\n\n  if (state.state.selected.indexOf(id) > -1) {\n    // show that these facets are selected\n    var newSelected = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].uniq(state.state.selected.concat(dataIds.slice(0, state.facets[id].state.visible)));\n  } else {\n    var newSelected = state.state.selected;\n  }\n\n  return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state, {\n    facets: newFacetObj,\n    state: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, state.state, {\n      selected: newSelected\n    })\n  });\n};\n\nreducer.submitFilter = function (logicOption) {\n  throw new Error('this should be overridden by the widget');\n};\n\nreducer.defaultState = {\n  config: {\n    preprocessors: [],\n    hierMaxLevels: 1,\n    facetField: undefined,\n    openByDefault: false\n  },\n  state: {\n    open: false,\n    visible: 5,\n    selected: []\n  },\n  pagination: {\n    state: undefined,\n    finished: false\n  },\n  children: [],\n  facets: {}\n};\n\nreducer.getDefaultState = function (state) {\n  // reset the state, but keep the config\n  return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, this.defaultState, {\n    config: state.config\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (reducer);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/facet/reducers.js?");

/***/ }),

/***/ "./src/js/widgets/facet/toggle_list.jsx.js":
/*!*************************************************!*\
  !*** ./src/js/widgets/facet/toggle_list.jsx.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./src/libs/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3 */ \"./src/libs/d3.js\");\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(d3__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ \"./src/libs/prop-types.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-redux */ \"./src/libs/react-redux.js\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_3__);\nvar _this = undefined;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\nvar format = function format(count) {\n  return d3__WEBPACK_IMPORTED_MODULE_1___default().format('s')(count).replace(/\\.\\d{2,}/, function (m) {\n    return m.slice(0, 2);\n  }).replace('.0', '');\n};\n\nvar FacetCheckbox = function FacetCheckbox(_ref) {\n  var state = _ref.reduxState,\n      toggleFacet = _ref.toggleFacet,\n      unselectFacet = _ref.unselectFacet,\n      value = _ref.value,\n      currentLevel = _ref.currentLevel,\n      showMoreFacets = _ref.showMoreFacets,\n      resetVisibleFacets = _ref.resetVisibleFacets,\n      selectFacet = _ref.selectFacet,\n      hierarchical = _ref.hierarchical,\n      isChecked = _ref.isChecked,\n      name = _ref.name,\n      count = _ref.count,\n      id = _ref.id,\n      index = _ref.index;\n  var config = (0,react_redux__WEBPACK_IMPORTED_MODULE_3__.useSelector)(function (state) {\n    return state.config;\n  });\n\n  var updateFacetSelect = function updateFacetSelect(e) {\n    if (e.target.checked) {\n      // toggle open author hierarchical facets here, so users can see what the hierarchy means\n      selectFacet(id);\n\n      if (config.hierMaxLevels === 2 && typeof toggleFacet === 'function') {\n        toggleFacet(id, true);\n      }\n    } else {\n      unselectFacet(id);\n    }\n  };\n\n  var label = \"facet-label__title_\".concat(config.facetField, \"_\").concat(hierarchical ? '' : 'child', \"_\").concat(index);\n  var checkbox = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"label\", {\n    className: \"facet-label custom-checkbox\",\n    htmlFor: \"\".concat(label, \"__checkbox\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"input\", {\n    type: \"checkbox\",\n    id: \"\".concat(label, \"__checkbox\"),\n    onChange: updateFacetSelect,\n    checked: isChecked,\n    \"aria-describedby\": label\n  }), \"\\xA0\", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n    className: \"facet-label__title\",\n    id: label\n  }, name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n    className: \"facet-label__amount\",\n    title: count\n  }, format(count))));\n\n  if (hierarchical) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(ToggleList, {\n      id: value,\n      reduxState: state,\n      currentLevel: currentLevel + 1,\n      showMoreFacets: showMoreFacets,\n      resetVisibleFacets: resetVisibleFacets,\n      toggleFacet: toggleFacet,\n      selectFacet: selectFacet,\n      unselectFacet: unselectFacet\n    }, checkbox);\n  }\n\n  return checkbox;\n};\n\nFacetCheckbox.propTypes = {\n  isChecked: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool).isRequired,\n  name: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().string).isRequired,\n  count: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().number).isRequired,\n  reduxState: prop_types__WEBPACK_IMPORTED_MODULE_2___default().shape({\n    config: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().object),\n    state: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().object),\n    pagination: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().object),\n    children: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().array),\n    facets: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().object)\n  }).isRequired,\n  currentLevel: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().number),\n  showMoreFacets: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().func),\n  resetVisibleFacets: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().func),\n  toggleFacet: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().func),\n  selectFacet: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().func),\n  unselectFacet: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().func),\n  id: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().string),\n  index: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().number)\n};\n\nvar ToggleList = function ToggleList(_ref2) {\n  var state = _ref2.reduxState,\n      currentLevel = _ref2.currentLevel,\n      children = _ref2.children,\n      selectFacet = _ref2.selectFacet,\n      unselectFacet = _ref2.unselectFacet,\n      showMoreFacets = _ref2.showMoreFacets,\n      resetVisibleFacets = _ref2.resetVisibleFacets,\n      toggleFacet = _ref2.toggleFacet,\n      id = _ref2.id;\n  var data = currentLevel === 1 ? state : state.facets[id];\n  var open = data.state.open;\n  var visible = data.state.visible;\n  var finished = data.pagination.finished || false;\n\n  var facets = _.values(_.pick(state.facets, data.children));\n\n  var stateMessage = '';\n\n  if (data.pagination.state === 'loading') {\n    stateMessage = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", null, \"loading...\");\n  } else if (data.pagination.state === 'failure') {\n    stateMessage = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"i\", {\n      className: \"icon-danger\",\n      \"aria-hidden\": \"true\"\n    }), \"request failed\");\n  } else if (data.pagination.state === 'success' && !facets.length) {\n    stateMessage = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", null, \"no data retrieved\");\n  }\n\n  var list = null;\n\n  if (!facets.length) {\n    list = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"li\", null);\n  } else {\n    list = facets.slice(0, visible).map(function (c, i) {\n      var checkboxProps = {\n        isChecked: state.state.selected.indexOf(c.value) > -1,\n        name: c.name,\n        count: c.count,\n        hierarchical: state.config.hierMaxLevels > currentLevel,\n        value: c.value,\n        id: c.value,\n        selectFacet: selectFacet,\n        unselectFacet: unselectFacet,\n        label: i\n      }; // if it's hierarchical, pass down some more data so that the checkbox can instantiate its own toggleList\n\n      if (checkboxProps.hierarchical) {\n        checkboxProps = _objectSpread({}, checkboxProps, {\n          showMoreFacets: showMoreFacets,\n          resetVisibleFacets: resetVisibleFacets,\n          reduxState: state,\n          currentLevel: currentLevel,\n          toggleFacet: toggleFacet\n        });\n      }\n\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"li\", {\n        key: c.value\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(FacetCheckbox, _extends({}, checkboxProps, {\n        index: i\n      })));\n    }, _this);\n  }\n\n  var showMore = !finished || facets.length > visible;\n  var moreButtonClasses = showMore ? 'btn btn-default btn-xs facet__pagination-button' : ' hidden';\n  var lessButtonClasses = visible > 5 ? 'btn btn-default btn-xs facet__pagination-button' : 'hidden';\n  var facetList; // level will be either 1 or 2\n\n  var parentClass = currentLevel > 1 ? 'facet__list-container facet__list-container--child' : 'facet__list-container';\n\n  if (open) {\n    facetList = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: parentClass\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"ul\", {\n      className: \"facet__list\"\n    }, list), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: \"facet__state-message\"\n    }, stateMessage), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n      className: \"facet__pagination-container\"\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n      type: \"button\",\n      className: lessButtonClasses,\n      onClick: function onClick() {\n        return resetVisibleFacets(id);\n      }\n    }, \"less\"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n      type: \"button\",\n      className: moreButtonClasses,\n      onClick: function onClick() {\n        return showMoreFacets(id);\n      }\n    }, \"more\")));\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"facet__toggle\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"i\", {\n    role: \"button\",\n    \"aria-label\": \"facet toggle\",\n    \"aria-hidden\": \"true\",\n    tabIndex: \"0\",\n    className: open ? 'facet__icon facet__icon--open' : 'facet__icon facet__icon--closed',\n    onClick: function onClick() {\n      return toggleFacet(id, !open);\n    },\n    onKeyPress: function onKeyPress(e) {\n      if (e.which === 13) {\n        toggleFacet(id, !open);\n      }\n    }\n  }), ' ', children), facetList);\n};\n\nToggleList.defaultProps = {\n  children: []\n};\nToggleList.propTypes = {\n  reduxState: prop_types__WEBPACK_IMPORTED_MODULE_2___default().shape({\n    config: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().object),\n    state: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().object),\n    pagination: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().object),\n    children: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().array),\n    facets: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().object)\n  }).isRequired,\n  children: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().children),\n  currentLevel: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().number).isRequired,\n  showMoreFacets: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().func).isRequired,\n  resetVisibleFacets: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().func).isRequired,\n  toggleFacet: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().func).isRequired,\n  selectFacet: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().func).isRequired,\n  unselectFacet: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().func).isRequired,\n  id: (prop_types__WEBPACK_IMPORTED_MODULE_2___default().string).isRequired\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (ToggleList);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/facet/toggle_list.jsx.js?");

/***/ }),

/***/ "./src/js/widgets/facet/widget.js":
/*!****************************************!*\
  !*** ./src/js/widgets/facet/widget.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_query_updater */ \"./src/js/components/api_query_updater.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! analytics */ \"./src/js/components/analytics.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ \"./src/libs/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-dom */ \"./src/libs/react-dom.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-redux */ \"./src/libs/react-redux.js\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var js_widgets_facet_facet_container_jsx__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js/widgets/facet/facet-container.jsx */ \"./src/js/widgets/facet/facet-container.jsx.js\");\n/* harmony import */ var js_widgets_facet_actions__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! js/widgets/facet/actions */ \"./src/js/widgets/facet/actions.js\");\n/* harmony import */ var js_widgets_facet_reducers__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! js/widgets/facet/reducers */ \"./src/js/widgets/facet/reducers.js\");\n/* harmony import */ var js_widgets_facet_create_store__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! js/widgets/facet/create_store */ \"./src/js/widgets/facet/create_store.js\");\n/* harmony import */ var js_widgets_facet_create_store__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(js_widgets_facet_create_store__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! utils */ \"./src/js/utils.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar FacetContainerView = backbone__WEBPACK_IMPORTED_MODULE_0___default().View.extend({\n  render: function render(store, actions) {\n    react_dom__WEBPACK_IMPORTED_MODULE_7___default().render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default().createElement((react_redux__WEBPACK_IMPORTED_MODULE_8___default().Provider), {\n      store: store\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default().createElement(js_widgets_facet_facet_container_jsx__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n      actions: actions\n    })), this.el);\n    return this;\n  },\n  destroy: function destroy() {\n    react_dom__WEBPACK_IMPORTED_MODULE_7___default().unmountComponentAtNode(this.el);\n  }\n});\nvar BaseFacetWidget = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_3__[\"default\"].extend({\n  initialize: function initialize(options) {\n    options = options || {};\n\n    var config = _.pick(options, ['facetTitle', 'facetField', 'preprocessors', 'hierMaxLevels', 'logicOptions', 'openByDefault']); // will be used by dispatchRequest\n\n\n    this.defaultQueryArguments = _.extend({}, this.defaultQueryArguments, options.defaultQueryArguments, {\n      'facet.field': options.facetField\n    });\n    this.store = js_widgets_facet_create_store__WEBPACK_IMPORTED_MODULE_12___default()(config);\n    this.actions = (0,js_widgets_facet_actions__WEBPACK_IMPORTED_MODULE_10__[\"default\"])();\n    this.queryUpdater = new js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_4__[\"default\"](config.facetField); // a hack so the this.actions object has a reference to _dispatchRequest\n\n    this.actions.fetch_data = function (id) {\n      return this._dispatchRequest.bind(this, id);\n    }.bind(this);\n\n    this.actions.submit_filter = function (logicOption) {\n      return this.submitFilter.bind(this, logicOption);\n    }.bind(this);\n\n    this.view = new FacetContainerView();\n    this.view.render = _.partial(this.view.render, this.store, this.actions);\n\n    if (!options.debug) {\n      this._dispatchRequest = _.debounce(_.bind(this._dispatchRequest, this), 300);\n    }\n  },\n  // facetField is added in initialize function\n  defaultQueryArguments: {\n    facet: 'true',\n    'facet.mincount': '1',\n    'facet.limit': 20,\n    fl: 'id'\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n\n    _.bindAll(this, 'dispatchRequest', 'processResponse');\n\n    this.getPubSub().subscribe(this.getPubSub().INVITING_REQUEST, this.dispatchRequest);\n    this.activateWidget();\n    this.attachGeneralHandler(this.onApiFeedback);\n\n    if (window.store) {\n      window.store.push(this.store);\n    } else {\n      window.store = [this.store];\n    }\n  },\n  onApiFeedback: function onApiFeedback() {\n    var dispatch = this.store.dispatch;\n    setTimeout(function () {\n      dispatch({\n        type: 'FACET_TOGGLED',\n        open: false\n      });\n    }, 300);\n    this.updateState(this.STATES.ERRORED);\n  },\n\n  /*\n      request is only dispatched automatically if the facet is open by default!\n     */\n  dispatchRequest: function dispatchRequest(apiQuery) {\n    if (this._sortChanged(apiQuery)) {\n      return;\n    }\n\n    this.setCurrentQuery(apiQuery);\n    this.store.dispatch(this.actions.reset_state());\n\n    if (this.store.getState().config.openByDefault) {\n      // this will also call _dispatchRequest since there is no data\n      this.store.dispatch(this.actions.toggle_facet(undefined, true));\n    }\n  },\n  _sortChanged: function _sortChanged(apiQuery) {\n    try {\n      // get the difference between the queries\n      var diff = utils__WEBPACK_IMPORTED_MODULE_13__[\"default\"].difference(apiQuery.toJSON(), this.getCurrentQuery().toJSON());\n    } catch (e) {// continue\n    } // make sure only 1 key on object, and that key is \"sort\"\n\n\n    return diff && diff.sort && _.keys(diff).length === 1;\n  },\n  _dispatchRequest: function _dispatchRequest(id) {\n    var pubsub = this.getPubSub();\n    var that = this;\n    var currentQuery = this.getCurrentQuery();\n    this.store.dispatch(this.actions.data_requested(id));\n    pubsub.subscribeOnce(pubsub.DELIVERING_RESPONSE, function (apiResponse) {\n      that.store.dispatch(that.actions.data_received(apiResponse.toJSON(), id));\n      that.updateState(that.STATES.IDLE);\n    });\n    var q = this.customizeQuery(currentQuery);\n    var children = id ? this.store.getState().facets[id].children : this.store.getState().children;\n    var offset = children.length || 0;\n    q.set('facet.offset', offset); // we don't need actual records so set rows to 1\n\n    q.set('rows', 1); // set prefix from 0/ to 1/\n\n    if (id) {\n      // append '/' so that we properly match the prefix\n      var childPrefix = id.replace('0/', '1/') + '/';\n      q.set('facet.prefix', childPrefix);\n    }\n\n    var req = this.composeRequest(q);\n    pubsub.publish(pubsub.DELIVERING_REQUEST, req);\n    this.updateState(this.STATES.LOADING);\n  },\n  submitFilter: function submitFilter(operator) {\n    if (['and', 'or', 'limit to', 'expand', 'exclude'].indexOf(operator) === -1) {\n      throw new Error(\"we don't recognize this operator you're trying to filter on\");\n    }\n\n    var q = this.getCurrentQuery().clone();\n    q.unlock();\n    var facetField = this.store.getState().config.facetField; // not sure why this is necessary, otherwise queryupdater will return a too-long name\n\n    var fieldName = 'fq_' + facetField.replace('_facet_hier', '');\n    var conditions = js_widgets_facet_reducers__WEBPACK_IMPORTED_MODULE_11__[\"default\"].getActiveFacets(this.store.getState(), this.store.getState().state.selected).map(function (c) {\n      return facetField + ':\"' + c + '\"';\n    });\n\n    if (operator == 'and' || operator == 'limit to') {\n      this.queryUpdater.updateQuery(q, fieldName, 'limit', conditions, {\n        prefix: 'filter_'\n      });\n    } else if (operator == 'or') {\n      this.queryUpdater.updateQuery(q, fieldName, 'expand', conditions, {\n        prefix: 'filter_'\n      });\n    } else if (operator == 'exclude' || operator == 'not') {\n      if (q.get(fieldName)) {\n        this.queryUpdater.updateQuery(q, fieldName, 'exclude', conditions, {\n          prefix: 'filter_'\n        });\n      } else {\n        conditions.unshift('*:*');\n        this.queryUpdater.updateQuery(q, fieldName, 'exclude', conditions, {\n          prefix: 'filter_'\n        });\n      }\n    } // go through each filter and if it's length is larger than 3, prepend with \"__\"\n    // to make sure it gets cleaned during the next cycle.\n\n\n    _.forEach(q.toJSON(), function (v, k) {\n      if (/^filter_/.test(k)) {\n        if (v.length > 3) {\n          q.unset(k);\n          q.set('__' + k, v);\n        }\n      }\n    });\n\n    var fq = '{!type=aqp v=$' + fieldName + '}';\n    var fqs = q.get('fq') || [];\n    fqs.push(fq);\n    q.set('fq', _.unique(fqs));\n    q.unset('facet.prefix');\n    q.unset('facet');\n    q.unset('start');\n    q.unset('rows');\n    this.dispatchNewQuery(q);\n    (0,analytics__WEBPACK_IMPORTED_MODULE_5__[\"default\"])('send', 'event', 'interaction', 'facet-applied', JSON.stringify({\n      name: facetField,\n      logic: operator,\n      conditions: conditions\n    }));\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (BaseFacetWidget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/facet/widget.js?");

/***/ }),

/***/ "./src/js/widgets/filter_visualizer/templates/item-view.html":
/*!*******************************************************************!*\
  !*** ./src/js/widgets/filter_visualizer/templates/item-view.html ***!
  \*******************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"type\") : depth0),\"category\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.program(4, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":24},\"end\":{\"line\":16,\"column\":12}}})) != null ? stack1 : \"\")\n    + \" \";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n\\n<h5>\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"display\") : depth0), depth0))\n    + \"</h5>\\n\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n<span class=\\\"filter-\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"type\") : depth0), depth0))\n    + \"\\\">\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"display\") : depth0), depth0))\n    + \"</span>\\n<button\\n  class=\\\"btn btn-xs filter-\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"type\") : depth0), depth0))\n    + \"-remove\\\"\\n  value=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"value\") : depth0), depth0))\n    + \"\\\"\\n  title=\\\"remove this filter\\\"\\n>\\n  <i class=\\\"fa fa-remove\\\" aria-hidden=\\\"true\\\"></i>\\n</button>\\n\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"elements\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":16,\"column\":22}}})) != null ? stack1 : \"\")\n    + \"\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/filter_visualizer/templates/item-view.html?");

/***/ }),

/***/ "./src/js/widgets/filter_visualizer/templates/widget-view.html":
/*!*********************************************************************!*\
  !*** ./src/js/widgets/filter_visualizer/templates/widget-view.html ***!
  \*********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div id=\\\"filter-visualizer\\\">\\n\\n</div>\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/filter_visualizer/templates/widget-view.html?");

/***/ }),

/***/ "./src/js/widgets/filter_visualizer/widget.js":
/*!****************************************************!*\
  !*** ./src/js/widgets/filter_visualizer/widget.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_pubsub_events__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/pubsub_events */ \"./src/js/components/pubsub_events.js\");\n/* harmony import */ var hbs_js_widgets_filter_visualizer_templates_widget_view__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! hbs!js/widgets/filter_visualizer/templates/widget-view */ \"./src/js/widgets/filter_visualizer/templates/widget-view.html\");\n/* harmony import */ var hbs_js_widgets_filter_visualizer_templates_widget_view__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_filter_visualizer_templates_widget_view__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var hbs_js_widgets_filter_visualizer_templates_item_view__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! hbs!js/widgets/filter_visualizer/templates/item-view */ \"./src/js/widgets/filter_visualizer/templates/item-view.html\");\n/* harmony import */ var hbs_js_widgets_filter_visualizer_templates_item_view__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_filter_visualizer_templates_item_view__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/**\n *\n * This is a widget which analyzes the current query and displays the\n * filter components in a visual form\n *\n *\n * And allows to remove items from the query individually\n *\n * TODO: it needs to react on browser-back/forward\n */\n\n\n\n\n\n\n\n\n\n // Model\n\nvar KeyValue = backbone__WEBPACK_IMPORTED_MODULE_2___default().Model.extend({}); // Collection of data\n\nvar KeyValueCollection = backbone__WEBPACK_IMPORTED_MODULE_2___default().Collection.extend({\n  model: KeyValue\n});\nvar ItemView = marionette__WEBPACK_IMPORTED_MODULE_3___default().ItemView.extend({\n  tagName: 'span',\n  className: 'filter-topic-group',\n  template: (hbs_js_widgets_filter_visualizer_templates_item_view__WEBPACK_IMPORTED_MODULE_7___default()),\n  events: {\n    'click button': 'onClick'\n  },\n  onClick: function onClick(ev) {\n    var $t = jquery__WEBPACK_IMPORTED_MODULE_1___default()(ev.target);\n    this.trigger('filter-event', $t.attr('value') ? $t.attr('value') : $t.parent().attr('value'));\n    return false;\n  }\n});\nvar WidgetView = marionette__WEBPACK_IMPORTED_MODULE_3___default().CompositeView.extend({\n  template: (hbs_js_widgets_filter_visualizer_templates_widget_view__WEBPACK_IMPORTED_MODULE_6___default()),\n  childView: ItemView,\n  childViewContainer: '#filter-visualizer',\n  events: {}\n});\nvar WidgetController = marionette__WEBPACK_IMPORTED_MODULE_3___default().Controller.extend({\n  activate: function activate(beehive) {\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bindAll(this, 'processFeedback', 'onFilterEvent');\n\n    this.setBeeHive(beehive);\n    pubsub = beehive.getService('PubSub');\n    pubsub.subscribe(pubsub.FEEDBACK, this.processFeedback);\n  },\n  initialize: function initialize(options) {\n    options = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].defaults(options, {\n      withoutOperators: true,\n      maxNumberOfTokens: 5,\n      maxQueryLen: 100\n    }); // simplified version by default\n\n    this.collection = new KeyValueCollection({});\n    this.view = new WidgetView({\n      collection: this.collection\n    });\n    this.listenTo(this.view, 'childview:filter-event', this.onFilterEvent);\n    this.knownFilters = {\n      fq_aff: 'Institutions',\n      fq_author: 'Author',\n      fq_database: 'Collection',\n      fq_property: 'Property',\n      fq_facets180: 'Status',\n      fq_keyword_facet: 'Keywords',\n      fq_bibstem_facet: 'Publication',\n      fq_bibgroup_facet: 'BibGroup',\n      fq_data_facet: 'Data',\n      fq_vizier_facet: 'Vizier',\n      fq_simbad_object_facet_hier: 'Object',\n      fq_ned_object_facet_hier: 'Object',\n      fq_grant: 'Grant',\n      fq_visualization_author: 'Author Network',\n      fq_visualization_paper: 'Paper Network',\n      fq_wordcloud: 'Concept Cloud',\n      fq_bubble_chart: 'Results Graph',\n      fq_doctype: 'Pubtype'\n    };\n    this.currentQuery = null;\n    this.withoutOperators = options.withoutOperators;\n    this.maxNumberOfTokens = options.maxNumberOfTokens;\n    this.maxQueryLen = options.maxQueryLen;\n  },\n  render: function render() {\n    this.view.render();\n    return this.view.el;\n  },\n  processFeedback: function processFeedback(feedback) {\n    switch (feedback.code) {\n      case js_components_api_feedback__WEBPACK_IMPORTED_MODULE_8__[\"default\"].CODES.SEARCH_CYCLE_STARTED:\n        this.processQuery({\n          numFound: feedback.numFound,\n          q: feedback.query.clone()\n        });\n        break;\n    }\n  },\n\n  /**\n   * Object oriented interface; the main method for\n   * displaying the filters\n   */\n  processQuery: function processQuery(data) {\n    var q = data.q;\n    numFound = data.numFound;\n    var filters = this.extractFilters(q);\n\n    this._saveInfo(q, filters);\n\n    var guiModels = this.prepareGUIData(filters); // this.view.model.set({\n    //  numFound: numFound,\n    //  filters: filters,\n    //  query: q\n    // });\n\n    this.collection.reset(guiModels);\n  },\n  _saveInfo: function _saveInfo(q, filters) {\n    this.currentQuery = q;\n    this.currentFilters = {};\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(filters, function (v) {\n      this.currentFilters[v.filter_name] = v;\n    }, this);\n  },\n\n  /**\n   * Extracts everything we know from the query filters.\n   * This logic *has to be extended* when we add new facets\n   * and filters; it is not generic and it likely fails in\n   * some usecases...ehi,..\n   *\n   * @param apiQuery\n   *\n   * @return array of objects, each containing information\n   *    about the filter, i.e.\n   *    [{\n   *       category: 'AUTHOR',\n   *       filter_name: 'fq_author',\n   *       filter_query: \"(author_facet_hier:\\\"0/Wang, J\\\")\",\n   *       filter_key: '__author_facet_hier_fq_author',\n   *       filter_value: [\"AND\",\"author_facet_hier:\\\"0/Wang, J\\\"\"]\n   *     }]\n   */\n  extractFilters: function extractFilters(apiQuery) {\n    var data = apiQuery.toJSON();\n    var filters = [];\n\n    if (!data.fq && !apiQuery.get('__qid')) {\n      return filters; // nothing to do\n    }\n\n    var fq = data.fq; // O(n^2) - but ok, it's short list\n\n    var keys = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(data);\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(keys, function (k) {\n      if (k.indexOf('fq_') == 0) {\n        // is this filter in the list of accepted values?\n        if (!this.knownFilters[k]) {\n          return;\n        }\n\n        var oneFilter = {\n          category: this.knownFilters[k],\n          filter_name: k,\n          filter_query: data[k][0]\n        };\n\n        if (data[k].length > 1) {\n          console.warn('Breach of an api contract, filter contains too many values', k, data[k]);\n          return;\n        } // now we have to identify the remaining parts\n\n\n        var filteredKeys = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].filter(keys, function (x) {\n          if (x.indexOf(k) > -1 && x !== k) return true;\n        });\n\n        if (filteredKeys.length == 1) {\n          oneFilter.filter_key = filteredKeys[0];\n          oneFilter.filter_value = data[filteredKeys[0]];\n        } else {\n          console.warn('no fq metadata available, so presumably query is being loaded from url (if not, there is a problem!) ');\n        }\n\n        filters.push(oneFilter);\n      }\n    }, this); // finally sort them by preference/ remove unknown\n\n\n    filters = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sortBy(filters, function (x) {\n      var ix = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].indexOf(self.knownFilters, x.category);\n\n      if (ix > -1) return ix;\n      return 1000; // everything else will be together (at the end)\n    });\n    return filters;\n  },\n\n  /**\n   * Extracts the data from the filters suitable to pass to the GUI\n   *\n   * @param filters - array of filter objects, ie.\n   *   [\n   *    {\n   *     \"category\": \"Author\",\n   *     \"filter_name\": \"fq_author\",\n   *     \"filter_query\": \"(author_facet_hier:\\\"0/Wang, J\\\")\",\n   *     \"filter_key\": \"__author_facet_hier_fq_author\",\n   *     \"filter_value\": [\n   *      \"AND\",\n   *      \"author_facet_hier:\\\"0/Wang, J\\\"\"\n   *     ]\n   *    }\n   *    ]\n   *\n   * @return - array or arrays with gui data elements, ie.\n   *\n   *  [\n   *    {elements: [\n   *      {type: 'category', display: 'Author', value: 'fq_author|category|Author'},\n   *      {type: 'operand', display: 'Wang, J', value: 'fq_author|operand|author_facet_hier:\"0/Wang, J\"'},\n   *      {type: 'control', display: 'x', value: 'fq_author|control|x'}\n   *    ]}\n   *  ]\n   *\n   * */\n  prepareGUIData: function prepareGUIData(filters) {\n    if (this.withoutOperators) return this._prepareGUIDataWithoutOperators(filters);\n    var guiData = [];\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(filters, function (filter) {\n      var oneFilter = [];\n      oneFilter.push({\n        type: 'category',\n        display: filter.category,\n        value: filter.filter_name + '|category|' + filter.category\n      }); // if there are too many elements, just show one value 'x custom values'\n\n      if (filter.filter_value.length - 1 > this.maxNumberOfTokens || filter.filter_value.join(' ').length > this.maxQueryLen) {\n        oneFilter.push({\n          type: 'control',\n          display: filter.filter_value.length - 1 + ' custom values',\n          value: filter.filter_name + '|control|x'\n        });\n        guiData.push({\n          elements: oneFilter\n        });\n        return;\n      }\n\n      var i = 0;\n      var operator = filter.filter_value[0];\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(filter.filter_value.slice(1), function (operand) {\n        if (++i > 1) {\n          oneFilter.push({\n            type: 'operator',\n            display: operator,\n            value: filter.filter_name + '|operator|' + operator\n          });\n        }\n\n        oneFilter.push({\n          type: 'operand',\n          display: this.beautifyOperand(filter.filter_name, operand),\n          value: filter.filter_name + '|operand|' + operand\n        });\n      }, this);\n\n      oneFilter.push({\n        type: 'control',\n        display: '',\n        value: filter.filter_name + '|control|x'\n      });\n      guiData.push({\n        elements: oneFilter\n      }); // deep nested because of !hbs\n    }, this);\n\n    return guiData;\n  },\n  _prepareGUIDataWithoutOperators: function _prepareGUIDataWithoutOperators(filters) {\n    var guiData = [];\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(filters, function (filter) {\n      var oneFilter = [];\n      oneFilter.push({\n        type: 'category',\n        display: filter.category,\n        value: filter.filter_name + '|category|' + filter.category\n      }); // if there are too many elements (or we're missing data bc we loaded from url), just show one value 'x custom values'\n\n      if (!filter.filter_value || filter.filter_value.length - 1 > this.maxNumberOfTokens || filter.filter_value.join(' ').length > this.maxQueryLen) {\n        oneFilter.push({\n          type: 'operand',\n          display: 'custom filter',\n          value: filter.filter_name + '|control|x'\n        });\n        guiData.push({\n          elements: oneFilter\n        });\n        return;\n      }\n\n      var i = 0;\n      var operator = filter.filter_value[0];\n      var indicator = '';\n\n      if (operator == 'NOT') {\n        indicator = '-';\n      } else if (operator == 'AND') {\n        indicator = '+';\n      }\n\n      underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(filter.filter_value.slice(1), function (operand) {\n        var element = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(oneFilter);\n\n        var ind = i++ == 0 && operator == 'NOT' ? '' : indicator; // if NOT, the first element is without prefix\n\n        element.push({\n          type: 'operand',\n          display: ind + this.beautifyOperand(filter.filter_name, operand),\n          value: filter.filter_name + '|operand|' + operand\n        });\n        guiData.push({\n          elements: element\n        }); // deep nested because of !hbs\n      }, this);\n    }, this);\n\n    return guiData;\n  },\n\n  /**\n   * Returns a simplified version of a query - suitable for display to users\n   * In general, this will remove the fields and just keep the value (without\n   * quotes and backslashes)\n   *\n   * @param filter_name - string identifying the filter\n   *\n   * @param queryString - raw query (string)\n   *\n   * @return string\n   */\n  beautifyOperand: function beautifyOperand(filter_name, queryString) {\n    var s = queryString; // first remove brackets, if any\n\n    while (s.indexOf('(') == 0 && s.indexOf(')') == s.length - 1) {\n      s = s.substr(1, s.length - 2);\n    } // remove 0/ and 0/fghfgh1/ for hierarchical facets\n\n\n    s = s.replace(/0\\/|1\\/[^/]+\\//, ''); // replace fields\n\n    switch (filter_name) {\n      case 'fq_author':\n        s = s.replace(/author_facet_hier:/g, '');\n        s = s.replace(/\\d+\\//g, ''); // remove hier markers\n\n        break;\n\n      case 'fq_aff':\n        s = s.replace(/aff_facet_hier:/g, '');\n        s = s.replace(/\\d+\\//g, '');\n        break;\n\n      case 'fq_database':\n        s = s.replace(/database:/g, '');\n        break;\n\n      case 'fq_facets180':\n        s = s.replace(/property:/g, '');\n        break;\n\n      case 'fq_keyword_facet':\n        s = s.replace(/keyword_facet:/g, '');\n        s = s.replace(/\\\\/g, '');\n        break;\n\n      case 'fq_bibstem_facet':\n        s = s.replace(/bibstem_facet:/g, '');\n        break;\n\n      case 'fq_bibgroup_facet':\n        s = s.replace(/bibgroup_facet:/g, '');\n        break;\n\n      case 'fq_data_facet':\n        s = s.replace(/data_facet:/g, '');\n        break;\n\n      case 'fq_vizier_facet':\n        s = s.replace(/vizier_facet:/g, '');\n        break;\n\n      case 'fq_grant':\n        s = s.replace(/grant:/g, '');\n        break;\n\n      case 'fq_simbad_object_facet_hier':\n        s = s.replace(/simbad_object_facet_hier:0\\\\\\//g, '');\n        break;\n\n      case 'fq_ned_object_facet_hier':\n        s = s.replace(/ned_object_facet_hier:0\\\\\\//g, '');\n        break;\n\n      case 'fq_doctype':\n        s = s.replace(/doctype:/g, '');\n        break;\n    } // replace quotes, if any\n\n\n    s = s.replace(/\\\\?\"/g, ''); // *:* to all\n\n    s = s.replace(/\\*:\\*/, 'any');\n    return s;\n  },\n\n  /**\n   * Builds a new ApiQuery based on the command we receive from the GUI\n   */\n  createModifiedQuery: function createModifiedQuery(value) {\n    var parts = value.split('|');\n    var c = {};\n    c.name = parts[0];\n    c.part = parts[1];\n    c.value = parts[2];\n    var q = this.currentQuery.toJSON();\n\n    if (!q.fq && !q.fq[c.name]) {\n      console.error('The current query has no filter: ' + c.name);\n      return;\n    }\n\n    switch (c.part) {\n      case 'operand':\n        // remove one item from the filter\n        if (q[this.currentFilters[c.name].filter_key].length > 2) {\n          // if we remove one, there must be >=1 left\n          var aux = q[this.currentFilters[c.name].filter_key];\n\n          if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].indexOf(aux, c.value) == -1) {\n            console.error('Cannot find/remove the value: ' + c.value, aux);\n            throw Error('Error in modifying the query');\n          }\n\n          aux = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].reject(aux, function (x) {\n            return x == c.value;\n          }); // now build a new query\n\n          var newQuery;\n\n          if (aux.length > 2) {\n            var op = ' ' + aux[0] + ' ';\n            newQuery = '(' + aux.slice(1).join(op) + ')';\n          } else {\n            newQuery = aux[1];\n          }\n\n          q[c.name] = newQuery;\n          q[this.currentFilters[c.name].filter_key] = aux;\n          break;\n        }\n\n      // else we delete the whole filter\n\n      case 'control':\n        // remove the whole filter\n        delete q[c.name]; // delete the filter\n\n        delete q[this.currentFilters[c.name].filter_key]; // auxiliary structure\n\n        q.fq = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].filter(q.fq, function (val) {\n          // and remove its mentions from 'fq'\n          if (val.indexOf('v=$' + c.name) == -1) {\n            // TODO: deal with partial matches\n            return true;\n          }\n        });\n        break;\n    }\n\n    if (q.fq && q.fq.length == 0) delete q.fq;\n    return new js_components_api_query__WEBPACK_IMPORTED_MODULE_4__[\"default\"](q);\n  },\n  onLoad: function onLoad(apiQuery) {\n    if (this.collection) {\n      this.collection.reset(this.getData(apiQuery));\n    } else {\n      this.initialize(apiQuery);\n    }\n  },\n\n  /**\n   * Listening to all events\n   * in this widget's views; and manipulating the models\n   * that back views\n   */\n  onFilterEvent: function onFilterEvent(node, value) {\n    var newQuery = this.createModifiedQuery(value);\n    var ps = this.getBeeHive().getService('PubSub');\n\n    if (ps) {\n      ps.publish(ps.NAVIGATE, 'search-page', {\n        q: newQuery\n      });\n    }\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(WidgetController.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_9__[\"default\"].BeeHive);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (WidgetController);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/filter_visualizer/widget.js?");

/***/ }),

/***/ "./src/js/widgets/library_import/templates/authentication-form-partial.html":
/*!**********************************************************************************!*\
  !*** ./src/js/widgets/library_import/templates/authentication-form-partial.html ***!
  \**********************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        <div class=\\\"form-group\\\">\\n            <label for=\\\"classic-mirror-list\\\">Choose an ADS Classic Mirror Site</label>\\n            <select name=\\\"classic_mirror\\\" class=\\\"form-control\\\" id=\\\"classic-mirror-list\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"mirrors\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":16},\"end\":{\"line\":18,\"column\":25}}})) != null ? stack1 : \"\")\n    + \"            </select>\\n        </div>\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    return \"                <option>\"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + \"</option>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n<form class=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"endpoint\") || (depth0 != null ? lookupProperty(depth0,\"endpoint\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"endpoint\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":13},\"end\":{\"line\":2,\"column\":25}}}) : helper)))\n    + \"-form basic-form-style\\\">\\n    <div class=\\\"form-group\\\">\\n        <label for=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"endpoint\") || (depth0 != null ? lookupProperty(depth0,\"endpoint\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"endpoint\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":20},\"end\":{\"line\":4,\"column\":32}}}) : helper)))\n    + \"-username\\\">Email address</label>\\n        <input name=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"endpoint\") || (depth0 != null ? lookupProperty(depth0,\"endpoint\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"endpoint\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":21},\"end\":{\"line\":5,\"column\":33}}}) : helper)))\n    + \"_email\\\" type=\\\"email\\\" class=\\\"form-control\\\" id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"endpoint\") || (depth0 != null ? lookupProperty(depth0,\"endpoint\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"endpoint\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":79},\"end\":{\"line\":5,\"column\":91}}}) : helper)))\n    + \"-username\\\" placeholder=\\\"Email\\\">\\n    </div>\\n    <div class=\\\"form-group\\\">\\n        <label for=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"endpoint\") || (depth0 != null ? lookupProperty(depth0,\"endpoint\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"endpoint\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":20},\"end\":{\"line\":8,\"column\":32}}}) : helper)))\n    + \"-password\\\">Password</label>\\n        <input name=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"endpoint\") || (depth0 != null ? lookupProperty(depth0,\"endpoint\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"endpoint\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":21},\"end\":{\"line\":9,\"column\":33}}}) : helper)))\n    + \"_password\\\" type=\\\"password\\\" class=\\\"form-control\\\" id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"endpoint\") || (depth0 != null ? lookupProperty(depth0,\"endpoint\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"endpoint\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":85},\"end\":{\"line\":9,\"column\":97}}}) : helper)))\n    + \"-password\\\" placeholder=\\\"Password\\\">\\n    </div>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"endpoint\") : depth0),\"classic\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":4},\"end\":{\"line\":21,\"column\":16}}})) != null ? stack1 : \"\")\n    + \"\\n    <button type=\\\"submit\\\" class=\\\"btn btn-primary-faded submit-credentials pull-right\\\">Submit</button>\\n</form>\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/library_import/templates/authentication-form-partial.html?");

/***/ }),

/***/ "./src/js/widgets/library_import/templates/import-view-classic.html":
/*!**************************************************************************!*\
  !*** ./src/js/widgets/library_import/templates/import-view-classic.html ***!
  \**************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \" \"\n    + ((stack1 = container.invokePartial(__webpack_require__(/*! ./authentication-form-partial.html */ \"./src/js/widgets/library_import/templates/authentication-form-partial.html\"),depth0,{\"name\":\"js/widgets/library_import/templates/authentication-form-partial\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \" \";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n\\n<div>\\n  You are currently authenticated as <b>\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"classic_email\") : depth0), depth0))\n    + \"</b> with mirror site\\n  <b>\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"classic_mirror\") : depth0), depth0))\n    + \"</b>.\\n</div>\\n\\n<div>\\n  <button class=\\\"btn btn-primary-faded import-all-libraries\\\">\\n    <i class=\\\"fa fa-arrow-circle-down\\\" aria-hidden=\\\"true\\\"></i> Import all\\n    Classic libraries\\n  </button>\\n</div>\\n\\n<hr />\\n\\n<button\\n  class=\\\"btn btn-default collapsed\\\"\\n  data-toggle=\\\"collapse\\\"\\n  data-target=\\\"#classic-form-container\\\"\\n>\\n  <i class=\\\"toggle-icon\\\"></i>\\n  Sign into a new Classic account\\n</button>\\n<div class=\\\"collapse\\\" id=\\\"classic-form-container\\\">\\n\"\n    + ((stack1 = container.invokePartial(__webpack_require__(/*! ./authentication-form-partial.html */ \"./src/js/widgets/library_import/templates/authentication-form-partial.html\"),depth0,{\"name\":\"js/widgets/library_import/templates/authentication-form-partial\",\"data\":data,\"indent\":\"  \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <div class=\\\"alert alert-danger alert-dismissable\\\" role=\\\"alert\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\">\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\n    </button>\\n    \"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"errorMessage\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"\\n  </div>\\n  \";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n  <div class=\\\"alert alert-success alert-dismissable\\\" role=\\\"alert\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\">\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\n    </button>\\n\\n    \"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"successMessage\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"\\n  </div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"classic_email\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":30,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"\\n<div class=\\\"status\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"errorMessage\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":33,\"column\":2},\"end\":{\"line\":40,\"column\":9}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"successMessage\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":40,\"column\":10},\"end\":{\"line\":48,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</div>\\n\";\n},\"usePartial\":true,\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/library_import/templates/import-view-classic.html?");

/***/ }),

/***/ "./src/js/widgets/library_import/templates/import-view-labs.html":
/*!***********************************************************************!*\
  !*** ./src/js/widgets/library_import/templates/import-view-labs.html ***!
  \***********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \" \"\n    + ((stack1 = container.invokePartial(__webpack_require__(/*! ./authentication-form-partial.html */ \"./src/js/widgets/library_import/templates/authentication-form-partial.html\"),depth0,{\"name\":\"js/widgets/library_import/templates/authentication-form-partial\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \" \";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n\\n<div>You are currently authenticated as <b>\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"twopointoh_email\") : depth0), depth0))\n    + \"</b>.</div>\\n<div>\\n  <button class=\\\"btn btn-primary-faded import-all-libraries\\\">\\n    <i class=\\\"fa fa-arrow-circle-down\\\" aria-hidden=\\\"true\\\"></i> Import all ADS\\n    2.0 libraries to this system\\n  </button>\\n</div>\\n\\n<div>\\n  <h4>Download ADS 2.0 Libraries</h4>\\n  <hr />\\n  <button class=\\\"btn btn-default bibtex-import\\\" data-target=\\\"zotero\\\">\\n    <i class=\\\"fa fa-download\\\" aria-hidden=\\\"true\\\"></i> to Zotero-style BibTeX\\n  </button>\\n  &nbsp;\\n  <button class=\\\"btn btn-default bibtex-import\\\" data-target=\\\"mendeley\\\">\\n    <i class=\\\"fa fa-download\\\" aria-hidden=\\\"true\\\"></i> to Mendeley-style BibTeX\\n  </button>\\n</div>\\n<hr />\\n<br />\\n\\n<button\\n  class=\\\"btn btn-default collapsed\\\"\\n  data-toggle=\\\"collapse\\\"\\n  data-target=\\\"#ads2-form-container\\\"\\n>\\n  <i class=\\\"toggle-icon\\\"></i>\\n  Sign into a new ADS 2.0 account\\n</button>\\n<div class=\\\"collapse\\\" id=\\\"ads2-form-container\\\">\\n\"\n    + ((stack1 = container.invokePartial(__webpack_require__(/*! ./authentication-form-partial.html */ \"./src/js/widgets/library_import/templates/authentication-form-partial.html\"),depth0,{\"name\":\"js/widgets/library_import/templates/authentication-form-partial\",\"data\":data,\"indent\":\"  \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <div class=\\\"alert alert-danger alert-dismissible\\\" role=\\\"alert\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\">\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\n    </button>\\n    \"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"errorMessage\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"\\n  </div>\\n  \";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n  <div class=\\\"alert alert-success alert-dismissible\\\" role=\\\"alert\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\">\\n      <span aria-hidden=\\\"true\\\">&times;</span>\\n    </button>\\n    \"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"successMessage\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"\\n  </div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"twopointoh_email\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":38,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"\\n<div class=\\\"status\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"errorMessage\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":41,\"column\":2},\"end\":{\"line\":48,\"column\":9}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"successMessage\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":48,\"column\":10},\"end\":{\"line\":55,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</div>\\n\";\n},\"usePartial\":true,\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/library_import/templates/import-view-labs.html?");

/***/ }),

/***/ "./src/js/widgets/library_import/templates/success-template.html":
/*!***********************************************************************!*\
  !*** ./src/js/widgets/library_import/templates/success-template.html ***!
  \***********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div>\\n    The following libraries were successfully imported for the first time:\\n    <ul>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"created\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":8},\"end\":{\"line\":8,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"    </ul>\\n\\n</div>\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        <li><a href=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"link\") : depth0), depth0))\n    + \"\\\">\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"name\") : depth0), depth0))\n    + \"</a></li>\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <div>\\n\\n        The following libraries were updated or merged:\\n        <ul>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"updated\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":12},\"end\":{\"line\":22,\"column\":21}}})) != null ? stack1 : \"\")\n    + \"        </ul>\\n    </div>\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <li><a href=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"link\") : depth0), depth0))\n    + \"\\\">\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"name\") : depth0), depth0))\n    + \"</a></li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<h4>Success!</h4>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"created\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":0},\"end\":{\"line\":12,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"updated\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":0},\"end\":{\"line\":25,\"column\":7}}})) != null ? stack1 : \"\");\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/library_import/templates/success-template.html?");

/***/ }),

/***/ "./src/js/widgets/library_import/templates/tab-container.html":
/*!********************************************************************!*\
  !*** ./src/js/widgets/library_import/templates/tab-container.html ***!
  \********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"s-form-container\\\">\\n    <div class=\\\"panel panel-default\\\">\\n        <div class=\\\"panel-heading\\\">\\n            <h3>Import Libraries from Older ADS Accounts</h3>\\n        </div>\\n\\n        <div class=\\\"panel-body\\\">\\n            <!-- Nav tabs -->\\n            <ul class=\\\"nav nav-tabs\\\" role=\\\"tablist\\\">\\n                <li role=\\\"presentation\\\" class=\\\"active\\\"><a href=\\\"#classic-import-tab\\\" aria-controls=\\\"classic-import-tab\\\" role=\\\"tab\\\" data-toggle=\\\"tab\\\"><h4>Import from ADS Classic</h4></a></li>\\n            </ul>\\n\\n            <!-- Tab panes -->\\n            <div class=\\\"tab-content\\\">\\n                <div role=\\\"tabpanel\\\" class=\\\"tab-pane active\\\" id=\\\"classic-import-tab\\\">\\n\\n                </div>\\n            </div>\\n\\n        </div>\\n    </div>\\n\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/library_import/templates/tab-container.html?");

/***/ }),

/***/ "./src/js/widgets/library_import/widget.js":
/*!*************************************************!*\
  !*** ./src/js/widgets/library_import/widget.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var hbs_js_widgets_library_import_templates_tab_container__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! hbs!js/widgets/library_import/templates/tab-container */ \"./src/js/widgets/library_import/templates/tab-container.html\");\n/* harmony import */ var hbs_js_widgets_library_import_templates_tab_container__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_library_import_templates_tab_container__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var hbs_js_widgets_library_import_templates_import_view_labs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! hbs!js/widgets/library_import/templates/import-view-labs */ \"./src/js/widgets/library_import/templates/import-view-labs.html\");\n/* harmony import */ var hbs_js_widgets_library_import_templates_import_view_labs__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_library_import_templates_import_view_labs__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var hbs_js_widgets_library_import_templates_import_view_classic__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! hbs!js/widgets/library_import/templates/import-view-classic */ \"./src/js/widgets/library_import/templates/import-view-classic.html\");\n/* harmony import */ var hbs_js_widgets_library_import_templates_import_view_classic__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_library_import_templates_import_view_classic__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var hbs_js_widgets_library_import_templates_success_template__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! hbs!js/widgets/library_import/templates/success-template */ \"./src/js/widgets/library_import/templates/success-template.html\");\n/* harmony import */ var hbs_js_widgets_library_import_templates_success_template__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_library_import_templates_success_template__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! bootstrap */ \"./src/libs/bootstrap/bootstrap.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\n/* config vars */\n\nvar CLASSIC = 'classic'; // this is used in the template for the name param -- is sent to server\n// 'twopointoh' is the name used on the server\n\nvar ADS2 = 'twopointoh';\nvar ImportModel = Backbone.Model.extend({\n  defaults: function defaults() {\n    return {};\n  }\n});\nvar ImportView = Marionette.ItemView.extend({\n  initialize: function initialize(options) {\n    if (options.endpoint !== CLASSIC && options.endpoint !== ADS2) {\n      throw new Error(\"we don't recognize that endpoint: \" + options.endpoint);\n    }\n\n    this.model = new ImportModel({\n      endpoint: options.endpoint\n    });\n    this.template = options.endpoint === CLASSIC ? (hbs_js_widgets_library_import_templates_import_view_classic__WEBPACK_IMPORTED_MODULE_5___default()) : (hbs_js_widgets_library_import_templates_import_view_labs__WEBPACK_IMPORTED_MODULE_4___default());\n  },\n  className: 'library-import-form',\n  events: {\n    'click button.submit-credentials': 'authenticate',\n    'click button.bibtex-import': 'importBibtex'\n  },\n  triggers: {\n    'click button.import-all-libraries': 'library-import'\n  },\n  modelEvents: {\n    change: 'render'\n  },\n  importBibtex: function importBibtex(e) {\n    this.trigger('bibtex-import', {\n      target: $(e.target).data('target')\n    });\n  },\n  authenticate: function authenticate(e) {\n    var data = this.$('form').serializeArray();\n    var toReturn = {};\n    data.forEach(function (obj) {\n      toReturn[obj.name] = obj.value;\n    });\n    this.trigger('submit-credentials', toReturn);\n    return false;\n  }\n});\nvar ContainerView = Marionette.LayoutView.extend({\n  initialize: function initialize(options) {\n    this.classicView = new ImportView({\n      endpoint: CLASSIC\n    });\n  },\n  regions: {\n    classic: '#' + CLASSIC + '-import-tab'\n  },\n  template: (hbs_js_widgets_library_import_templates_tab_container__WEBPACK_IMPORTED_MODULE_3___default()),\n  onRender: function onRender() {\n    this.classic.show(this.classicView);\n  }\n});\nvar ImportWidget = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  initialize: function initialize(options) {\n    var options = options || {};\n    this.view = new ContainerView();\n    var that = this;\n    /*\n     * subscribe to 1) credential submit events\n     * */\n\n    function submitCredentials(endpoint, view, data) {\n      this.getBeeHive().getService('Api').request(new js_components_api_request__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n        target: endpoint,\n        options: {\n          type: 'POST',\n          data: data,\n          done: function done(data) {\n            view.model.set(data, {\n              silent: true\n            });\n            view.model.trigger('change');\n          },\n          fail: function fail(data) {\n            view.model.set({\n              successMessage: '',\n              errorMessage: data.responseJSON.error\n            }, {\n              silent: true\n            });\n            view.model.trigger('change'); // doing it this way (silent then trigger change)\n            // so that user can close the alert and a new version of the\n            // same alert can later still be shown if necessary\n          }\n        }\n      }));\n    }\n\n    submitCredentials = submitCredentials.bind(this);\n    this.view.classicView.on('submit-credentials', function (data) {\n      submitCredentials(js_components_api_targets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].LIBRARY_IMPORT_CLASSIC_AUTH, that.view.classicView, data);\n    });\n    /*\n     * subscribe to library import events\n     * this goes through the library controller as the controller\n     * has to update its internal store of library metadata on successful import\n     * */\n\n    function importLibraries(endpoint, view) {\n      var working = '<i class=\"fa fa-lg fa-spinner fa-pulse\" aria-hidden=\"true\"></i> Working...';\n      view.$('button.import-all-libraries').addClass('disabled').html(working);\n      this.getBeeHive().getObject('LibraryController').importLibraries(endpoint).done(function (data) {\n        var successData = {};\n        successData.updated = data.filter(function (d) {\n          return d.action === 'updated';\n        }).map(function (d) {\n          return {\n            name: d.name,\n            link: '#user/libraries/' + d.library_id\n          };\n        });\n        successData.created = data.filter(function (d) {\n          return d.action === 'created';\n        }).map(function (d) {\n          return {\n            name: d.name,\n            link: '#user/libraries/' + d.library_id\n          };\n        });\n        view.model.set({\n          successMessage: hbs_js_widgets_library_import_templates_success_template__WEBPACK_IMPORTED_MODULE_6___default()(successData),\n          errorMessage: ''\n        }, {\n          silent: true\n        });\n        view.model.trigger('change'); // doing it this way so that user can close the alert and a new version of the\n        // same alert can still be shown if necessary\n      }).fail(function () {\n        view.model.set({\n          successMessage: '',\n          errorMessage: 'There was a problem and libraries were not imported.'\n        }, {\n          silent: true\n        });\n        view.model.trigger('change');\n      });\n    }\n\n    importLibraries = importLibraries.bind(this);\n    this.view.classicView.on('library-import', function () {\n      importLibraries(CLASSIC, that.view.classicView);\n    });\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n\n    _.bindAll(this);\n\n    var that = this;\n    var pubsub = this.getPubSub(); // need to load list of classic mirror sites\n\n    that.getBeeHive().getService('Api').request(new js_components_api_request__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n      target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].LIBRARY_IMPORT_CLASSIC_MIRRORS,\n      options: {\n        done: function done(data) {\n          // set the most used mirror as the default\n          if (data.indexOf('adsabs.harvard.edu') > -1) {\n            data = _.without(data, 'adsabs.harvard.edu');\n            data.unshift('adsabs.harvard.edu');\n          }\n\n          that.view.classicView.model.set({\n            mirrors: data\n          });\n        },\n        fail: function fail() {\n          console.error(\"couldn't load classic mirrors\");\n        }\n      }\n    })); // need to check if already authenticated\n\n    that.getBeeHive().getService('Api').request(new js_components_api_request__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n      target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_2__[\"default\"].LIBRARY_IMPORT_CREDENTIALS,\n      options: {\n        done: function done(data) {\n          /*  returns data in the form\n           * {\"classic_email\": \"fake@fakitifake.com\", \"classic_mirror\": \"mirror\", \"twopointoh_email\": \"fakeads2@gmail.com\"}\n           */\n          that.view.classicView.model.set(data);\n        },\n        fail: function fail(response, status) {\n          // if user hasnt registered yet\n          if (response && response.responseJSON && response.responseJSON.error === 'This user has not set up an ADS Classic account') {\n            return;\n          }\n\n          console.error(response);\n        }\n      }\n    }));\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (ImportWidget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/library_import/widget.js?");

/***/ }),

/***/ "./src/js/widgets/list_of_things/item_view.js":
/*!****************************************************!*\
  !*** ./src/js/widgets/list_of_things/item_view.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var hbs_js_widgets_list_of_things_templates_item_template__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! hbs!js/widgets/list_of_things/templates/item-template */ \"./src/js/widgets/list_of_things/templates/item-template.html\");\n/* harmony import */ var hbs_js_widgets_list_of_things_templates_item_template__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_list_of_things_templates_item_template__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! analytics */ \"./src/js/components/analytics.js\");\n/* harmony import */ var mathjax__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! mathjax */ \"./node_modules/mathjax/unpacked/MathJax.js\");\n/* harmony import */ var mathjax__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(mathjax__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\nvar ItemView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  tagName: 'li',\n  template: (hbs_js_widgets_list_of_things_templates_item_template__WEBPACK_IMPORTED_MODULE_5___default()),\n  constructor: function constructor(options) {\n    var self = this;\n\n    if (options) {\n      _.defaults(options, _.pick(this, ['model', 'collectionEvents', 'modelEvents']));\n    }\n\n    _.bindAll(this, 'resetToggle');\n\n    return marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.prototype.constructor.apply(this, arguments);\n  },\n  render: function render() {\n    if (this.model.get('visible')) {\n      return marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.prototype.render.apply(this, arguments);\n    }\n\n    if (this.$el) {\n      // it was already rendered, so remove it\n      this.$el.empty();\n    }\n\n    return this;\n  },\n  onRender: function onRender() {\n    var _this = this;\n\n    // this is necessary on every render after the initial one, since the\n    // containe rview also calls mathjax initially\n    if ((mathjax__WEBPACK_IMPORTED_MODULE_7___default())) mathjax__WEBPACK_IMPORTED_MODULE_7___default().Hub.Queue(['Typeset', (mathjax__WEBPACK_IMPORTED_MODULE_7___default().Hub), this.el]);\n    $('>', this.$el).on('keyup', function (e) {\n      if (e.which === 13) {\n        $('a.abs-redirect-link', _this.$el).mousedown().mouseup().click();\n      }\n    });\n  },\n  events: {\n    'change input[name=identifier]': 'toggleSelect',\n    'focus .letter-icon': 'showLinks',\n    'mouseenter .letter-icon': 'showLinks',\n    'mouseleave .letter-icon': 'hideLinks',\n    'focusout .letter-icon': 'hideLinks',\n    'click .letter-icon>ul': 'hideLinks',\n    'click .show-all-authors': 'showAllAuthors',\n    'click .show-less-authors': 'showLessAuthors',\n    // only relevant to results view for the moment\n    'click .show-full-abstract': 'showFullAbstract',\n    'click .hide-full-abstract': 'hideFullAbstract',\n    'click .orcid-action': 'orcidAction',\n    'click .abs-redirect-link': 'onAbsLinkClick',\n    'click .citations-redirect-link': 'onCitationsLinkClick'\n  },\n  modelEvents: {\n    'change:visible': 'render',\n    'change:showAbstract': 'render',\n    'change:showHighlights': 'render',\n    'change:orcid': 'render',\n    'change:chosen': 'render'\n  },\n  collectionEvents: {\n    add: 'render',\n    'change:visible': 'render'\n  },\n  emitAnalyticsEvent: function emitAnalyticsEvent(e) {\n    (0,analytics__WEBPACK_IMPORTED_MODULE_6__[\"default\"])('send', 'event', 'interaction', 'letter-link-followed', $(e.target).text());\n  },\n  onAbsLinkClick: function onAbsLinkClick(e) {\n    var bibcode = this.model.get('bibcode');\n    (0,analytics__WEBPACK_IMPORTED_MODULE_6__[\"default\"])('send', 'event', 'interaction', 'abstract-link-followed', {\n      target: 'abstract',\n      bibcode: bibcode\n    });\n  },\n  onCitationsLinkClick: function onCitationsLinkClick(e) {\n    var bibcode = this.model.get('bibcode');\n    (0,analytics__WEBPACK_IMPORTED_MODULE_6__[\"default\"])('send', 'event', 'interaction', 'citations-link-followed', {\n      target: 'citations',\n      bibcode: bibcode\n    });\n  },\n  showAllAuthors: function showAllAuthors(e) {\n    this.$('.s-results-authors.less-authors').addClass('hidden');\n    this.$('.s-results-authors.all-authors').removeClass('hidden');\n    return false;\n  },\n  showLessAuthors: function showLessAuthors(e) {\n    this.$('.s-results-authors.less-authors').removeClass('hidden');\n    this.$('.s-results-authors.all-authors').addClass('hidden');\n    return false;\n  },\n  showFullAbstract: function showFullAbstract() {\n    this.$('.short-abstract').addClass('hidden');\n    this.$('.full-abstract').removeClass('hidden');\n    return false;\n  },\n  hideFullAbstract: function hideFullAbstract() {\n    this.$('.short-abstract').removeClass('hidden');\n    this.$('.full-abstract').addClass('hidden');\n    return false;\n  },\n  toggleSelect: function toggleSelect() {\n    var isChosen = !this.model.get('chosen');\n    this.trigger('toggleSelect', {\n      selected: isChosen,\n      data: this.model.attributes\n    });\n    this.model.set('chosen', isChosen);\n  },\n  resetToggle: function resetToggle() {\n    this.setToggleTo(false);\n  },\n  setToggleTo: function setToggleTo(to) {\n    var $checkbox = $('input[name=identifier]');\n\n    if (to) {\n      this.$el.addClass('chosen');\n      this.model.set('chosen', true);\n      $checkbox.prop('checked', true);\n    } else {\n      this.$el.removeClass('chosen');\n      this.model.set('chosen', false);\n      $checkbox.prop('checked', false);\n    }\n  },\n\n  /*\n   * adding this to make the dropdown\n   * accessible, and so people can click to sticky\n   * open the quick links\n   * */\n  removeActiveQuickLinkState: function removeActiveQuickLinkState($node) {\n    $node.find('i').removeClass('s-icon-draw-attention');\n    $node.find('.link-details').addClass('hidden');\n    $node.find('ul').attr('aria-expanded', false);\n  },\n  addActiveQuickLinkState: function addActiveQuickLinkState($node) {\n    $node.find('i').addClass('s-icon-draw-attention');\n    $node.find('.link-details').removeClass('hidden');\n    $node.find('ul').attr('aria-expanded', true);\n  },\n  deactivateOtherQuickLinks: function deactivateOtherQuickLinks($c) {\n    var $hasList = this.$('.letter-icon').filter(function () {\n      if ($(this).find('i').hasClass('s-icon-draw-attention')) {\n        return true;\n      }\n    }).eq(0); // there should be max 1 other icon that is active\n\n    if ($hasList.length && $hasList[0] !== $c[0]) {\n      this.removeActiveQuickLinkState($hasList);\n    }\n  },\n  showLinks: function showLinks(e) {\n    var $c = $(e.currentTarget);\n\n    if (!$c.find('.active-link').length) {\n      return;\n    }\n\n    this.deactivateOtherQuickLinks($c);\n    this.addActiveQuickLinkState($c);\n  },\n  hideLinks: function hideLinks(e) {\n    var $c = $(e.currentTarget);\n\n    if ($c.is('ul')) {\n      this.removeActiveQuickLinkState($c.parent());\n    } else {\n      this.removeActiveQuickLinkState($c);\n    }\n  },\n  orcidAction: function orcidAction(e) {\n    if (!e) return false;\n    var $target = $(e.currentTarget);\n    var msg = {\n      action: $target.data('action') ? $target.data('action') : $target.text().trim(),\n      model: this.model,\n      view: this,\n      target: $target\n    };\n    this.trigger('OrcidAction', msg);\n    return false;\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (ItemView);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/list_of_things/item_view.js?");

/***/ }),

/***/ "./src/js/widgets/list_of_things/model.js":
/*!************************************************!*\
  !*** ./src/js/widgets/list_of_things/model.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var bowser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bowser */ \"./src/libs/bowser.js\");\n/* harmony import */ var bowser__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bowser__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var js_mixins_add_stable_index_to_collection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/mixins/add_stable_index_to_collection */ \"./src/js/mixins/add_stable_index_to_collection.js\");\n\n\n\n\nvar ItemModel = backbone__WEBPACK_IMPORTED_MODULE_0___default().Model.extend({\n  defaults: function defaults() {\n    return {\n      abstract: undefined,\n      title: undefined,\n      authorAff: undefined,\n      pub: undefined,\n      pubdate: undefined,\n      keywords: undefined,\n      bibcode: undefined,\n      pub_raw: undefined,\n      doi: undefined,\n      details: undefined,\n      links_data: undefined,\n      resultsIndex: undefined,\n      visible: false,\n      publisher: undefined,\n      actionsVisible: true,\n      showCheckbox: true,\n      isMobileOrTablet: false\n    };\n  },\n  idAttribute: 'resultsIndex'\n});\nvar ListOfThingsCollection = backbone__WEBPACK_IMPORTED_MODULE_0___default().Collection.extend({\n  initialize: function initialize(models, options) {\n    this.numVisible = 0;\n    this.currentStartIndex = 0;\n    this.currentEndIndex = 0;\n    this.lastIndex = -1;\n    this.lastMissingTrigger = null;\n\n    if (options && options.paginationModel) {\n      this.paginationModel = options.paginationModel;\n      this.listenTo(this.paginationModel, 'change:page', this._onPaginationChange);\n      this.listenTo(this.paginationModel, 'change:perPage', this._onPaginationChange);\n    }\n  },\n  model: ItemModel,\n  numFound: undefined,\n  comparator: 'resultsIndex',\n  _updateStartAndEndIndex: function _updateStartAndEndIndex() {\n    var pageNum = this.paginationModel.get('page');\n    var perPage = this.paginationModel.get('perPage');\n    var numFound = this.paginationModel.get('numFound'); // used as a metric to see if we need to fetch new data or if data at these indexes\n    // already exist\n\n    this.currentStartIndex = this.getPageStart(pageNum, perPage);\n    this.currentEndIndex = this.getPageEnd(pageNum, perPage, numFound);\n  },\n  _onPaginationChange: function _onPaginationChange() {\n    this._updateStartAndEndIndex(); // propagate the signal to the controller\n\n\n    this.trigger('pagination:change');\n  },\n\n  /*\n   * need to reset lastMissingTrigger\n   * or else subsequent pagination attempts\n   * will never fetch beyond 25 records\n   * */\n  reset: function reset() {\n    this.lastMissingTrigger = null;\n    this.lastIndex = -1;\n    backbone__WEBPACK_IMPORTED_MODULE_0___default().Collection.prototype.reset.apply(this, arguments);\n  },\n  getStartIndex: function getStartIndex() {\n    return this.currentStartIndex;\n  },\n  getEndIndex: function getEndIndex() {\n    return this.paginationModel.get('perPage');\n  },\n  _incrementLastIndex: function _incrementLastIndex() {\n    this.lastIndex += 1;\n    return this.lastIndex;\n  },\n  _prepareModel: function _prepareModel(attrs, options) {\n    if (attrs.resultsIndex === undefined) {\n      attrs.resultsIndex = this._incrementLastIndex();\n    }\n\n    if (attrs.title || attrs.bibcode || attrs.identifier) {\n      attrs.emptyPlaceholder = false;\n    }\n\n    return backbone__WEBPACK_IMPORTED_MODULE_0___default().Collection.prototype._prepareModel.call(this, attrs, options);\n  },\n  getVisibleModels: function getVisibleModels() {\n    return underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].filter(this.models, function (x) {\n      return x.attributes.visible;\n    });\n  },\n\n  /**\n   * Zero-based method; goes through models in the collection; discovers those\n   * that are missing (in the given range) and marks the range as 'visible'\n   * It returns number of visible documents (and internally triggers 'show:missing'\n   * event)\n   *\n   * @param start\n   * @param end\n   * @param options\n   * @returns {number}\n   */\n  updateIndexes: function updateIndexes(start, end, options) {\n    options = options || {};\n    var start = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isNumber(start) ? start : this.currentStartIndex;\n    var end = underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isNumber(end) ? end : this.currentEndIndex + 1;\n    var visible = 0;\n    var currStart = null;\n    var currEnd = 0;\n    var gaps = [];\n    var lastIdx = null;\n    var rIdx;\n    var platform = bowser__WEBPACK_IMPORTED_MODULE_2___default().parse(window.navigator.userAgent).platform.type;\n    var isMobileOrTablet = platform === 'mobile' || platform === 'tablet';\n    this.each(function (model) {\n      rIdx = model.attributes.resultsIndex;\n\n      if (lastIdx !== null && rIdx != lastIdx + 1) {\n        underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].each(underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].range(lastIdx + 1, rIdx), function (c) {\n          gaps.push(c);\n        });\n      }\n\n      lastIdx = rIdx;\n\n      if (rIdx >= start && rIdx <= end) {\n        model.set('visible', true);\n        if (currStart === null) currStart = rIdx;\n        visible += 1;\n        currEnd = rIdx;\n      } else {\n        model.set('visible', false);\n      }\n\n      model.set('isMobileOrTablet', isMobileOrTablet);\n    });\n\n    if (visible !== end - start + 1) {\n      underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].each(underscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].range((lastIdx || start + gaps.length) + 1, end + 1), function (c) {\n        if (!this.get(c)) gaps.push(c);\n      }, this);\n    }\n\n    if (gaps.length) {\n      // we have discoverd all gaps, but we want to report only those that span the start..end range\n      var startIdx = 0;\n      var endIdx = gaps.length;\n\n      for (var i = 0; i < gaps.length; i++) {\n        if (gaps[i] > end) {\n          endIdx = i;\n          break;\n        }\n\n        if (gaps[i] < start) {\n          startIdx = i + 1;\n        }\n      }\n\n      gaps = gaps.slice(startIdx, endIdx);\n      gaps = this._compressGaps(gaps); // to prevent multiple recursive requests\n\n      if (JSON.stringify(gaps) != this.lastMissingTrigger) {\n        this.lastMissingTrigger = JSON.stringify(gaps);\n\n        if (!options.silent) {\n          this.trigger('show:missing', gaps);\n        }\n      }\n    }\n\n    this.numVisible = visible;\n    this.currentStartIndex = currStart || 0;\n    this.currentEndIndex = currEnd;\n    return visible;\n  },\n  _compressGaps: function _compressGaps(gaps) {\n    var leftBound = gaps[0];\n    var rightBound = leftBound;\n    var s = gaps.length;\n    var toSend = [];\n\n    for (var i = 0; i < s; i++) {\n      var j = i + 1;\n\n      while (j < s && gaps[j] == leftBound + (j - i)) {\n        rightBound = gaps[j];\n        j += 1;\n      }\n\n      toSend.push({\n        start: leftBound,\n        end: rightBound\n      });\n      i = j - 1;\n      if (j < s) leftBound = rightBound = gaps[j];\n    }\n\n    return toSend;\n  },\n\n  /**\n   * zero-based method to mark range of documents in the colleaction 'visible'\n   *\n   * @param start\n   * @param end\n   * @returns {*}\n   */\n  showRange: function showRange(start, end, options) {\n    options = options || {};\n    if (start < 0) throw new Error('Start cannot be negative');\n    if (end < start) throw new Error('End cannot be smaller than start');\n    return this.updateIndexes(start, end, options);\n  },\n  getNumVisible: function getNumVisible() {\n    return this.numVisible;\n  },\n  showMore: function showMore(howMany) {\n    if (howMany === null) {\n      // set all of them visible\n      return this.updateIndexes(0, this.model.length);\n    }\n\n    var visible = this.getNumVisible();\n    return this.updateIndexes(this.currentStartIndex, this.currentEndIndex == 0 ? howMany - 1 : this.currentEndIndex + howMany) - visible;\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend(ListOfThingsCollection.prototype, js_mixins_add_stable_index_to_collection__WEBPACK_IMPORTED_MODULE_3__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ListOfThingsCollection);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/list_of_things/model.js?");

/***/ }),

/***/ "./src/js/widgets/list_of_things/paginated_view.js":
/*!*********************************************************!*\
  !*** ./src/js/widgets/list_of_things/paginated_view.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var hbs_js_widgets_list_of_things_templates_item_template__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! hbs!js/widgets/list_of_things/templates/item-template */ \"./src/js/widgets/list_of_things/templates/item-template.html\");\n/* harmony import */ var hbs_js_widgets_list_of_things_templates_item_template__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_list_of_things_templates_item_template__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var hbs_js_widgets_list_of_things_templates_results_container_template__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! hbs!js/widgets/list_of_things/templates/results-container-template */ \"./src/js/widgets/list_of_things/templates/results-container-template.html\");\n/* harmony import */ var hbs_js_widgets_list_of_things_templates_results_container_template__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_list_of_things_templates_results_container_template__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var js_mixins_link_generator_mixin__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/mixins/link_generator_mixin */ \"./src/js/mixins/link_generator_mixin.js\");\n/* harmony import */ var js_mixins_add_stable_index_to_collection__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js/mixins/add_stable_index_to_collection */ \"./src/js/mixins/add_stable_index_to_collection.js\");\n/* harmony import */ var hbs_js_widgets_list_of_things_templates_empty_view_template__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! hbs!js/widgets/list_of_things/templates/empty-view-template */ \"./src/js/widgets/list_of_things/templates/empty-view-template.html\");\n/* harmony import */ var hbs_js_widgets_list_of_things_templates_empty_view_template__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_list_of_things_templates_empty_view_template__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var hbs_js_widgets_list_of_things_templates_error_view_template__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! hbs!js/widgets/list_of_things/templates/error-view-template */ \"./src/js/widgets/list_of_things/templates/error-view-template.html\");\n/* harmony import */ var hbs_js_widgets_list_of_things_templates_error_view_template__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_list_of_things_templates_error_view_template__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var hbs_js_widgets_list_of_things_templates_initial_view_template__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! hbs!js/widgets/list_of_things/templates/initial-view-template */ \"./src/js/widgets/list_of_things/templates/initial-view-template.html\");\n/* harmony import */ var hbs_js_widgets_list_of_things_templates_initial_view_template__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_list_of_things_templates_initial_view_template__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var js_widgets_list_of_things_item_view__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! js/widgets/list_of_things/item_view */ \"./src/js/widgets/list_of_things/item_view.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! analytics */ \"./src/js/components/analytics.js\");\n/* harmony import */ var mathjax__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! mathjax */ \"./node_modules/mathjax/unpacked/MathJax.js\");\n/* harmony import */ var mathjax__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(mathjax__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var hbs_js_wraps_widget_loading_template__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! hbs!js/wraps/widget/loading/template */ \"./src/js/wraps/widget/loading/template.html\");\n/* harmony import */ var hbs_js_wraps_widget_loading_template__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_widget_loading_template__WEBPACK_IMPORTED_MODULE_16__);\n/**\n * Paginated view - it displays controls under the list of items.\n *\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * A simple model that holds attributes of the\n * paginated view. Changes in this model are\n * propagated to the view\n */\n\nvar MainViewModel = backbone__WEBPACK_IMPORTED_MODULE_2___default().Model.extend({\n  defaults: function defaults() {\n    return {\n      mainResults: false,\n      title: undefined,\n      // assuming there will always be abstracts\n      showAbstract: 'closed',\n      // often they won't exist\n      showHighlights: false,\n      showSidebars: true,\n      pagination: true,\n      start: 0,\n      highlightsLoaded: false\n    };\n  }\n});\n\nvar getSuggestedQuery = function getSuggestedQuery(_query) {\n  var query = _query.clone();\n\n  var q = query.get('q'); // if the whole query is uppercase, lower it\n\n  if (q[0] === q[0].toUpperCase()) {\n    query.set('q', q[0].toLowerCase());\n    query.unset('fl');\n    return {\n      url: '#search/' + query.url(),\n      query: query.get('q')\n    };\n  }\n};\n\nvar EmptyView = marionette__WEBPACK_IMPORTED_MODULE_1___default().ItemView.extend({\n  template: function template(data) {\n    if (data.query) {\n      return hbs_js_widgets_list_of_things_templates_empty_view_template__WEBPACK_IMPORTED_MODULE_10___default()(data);\n    }\n\n    if (data.error) {\n      return hbs_js_widgets_list_of_things_templates_error_view_template__WEBPACK_IMPORTED_MODULE_11___default()(data);\n    }\n\n    return hbs_js_wraps_widget_loading_template__WEBPACK_IMPORTED_MODULE_16___default()(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend(data, {\n      widgetLoadingSize: 'big',\n      hideCloseButton: true\n    }));\n  }\n});\n/**\n * This is the main view of the list of things. A composite\n * view that holds collection of items.\n */\n\nvar ListOfThingsView = marionette__WEBPACK_IMPORTED_MODULE_1___default().CompositeView.extend({\n  childView: js_widgets_list_of_things_item_view__WEBPACK_IMPORTED_MODULE_13__[\"default\"],\n  emptyView: EmptyView,\n  initialize: function initialize(options) {\n    this.model = new MainViewModel();\n  },\n  serializeData: function serializeData() {\n    var data = this.model.toJSON(); // if it's an abstract page list with an 'export to results page'\n    // option, provide the properly escaped url\n\n    if (data.queryOperator) {\n      data.queryURL = '#search/q=' + data.queryOperator + '(';\n      data.queryURL += encodeURIComponent('bibcode:' + data.bibcode) + ')';\n      if (data.removeSelf) data.queryURL += encodeURIComponent(' -bibcode:' + data.bibcode);\n      if (data.sortOrder) data.queryURL += '&sort=' + encodeURIComponent(data.sortOrder);\n    }\n\n    return data;\n  },\n  onRender: function onRender() {\n    if ((mathjax__WEBPACK_IMPORTED_MODULE_15___default())) {\n      mathjax__WEBPACK_IMPORTED_MODULE_15___default().Hub.Queue(['Typeset', (mathjax__WEBPACK_IMPORTED_MODULE_15___default().Hub), this.el]);\n    }\n  },\n  className: 'list-of-things',\n  alreadyRendered: false,\n  emptyViewOptions: function emptyViewOptions(model) {\n    var query = this.model.get('query');\n    var isTugboat = this.model.get('isTugboat');\n    var error = this.model.get('error');\n    this.model.unset('error', {\n      silent: true\n    });\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(query)) {\n      model.set({\n        query: query[0],\n        showTugboatMessage: isTugboat,\n        suggestedQuery: getSuggestedQuery(this.model.get('currentQuery'))\n      });\n    } else if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].has('query', query)) {\n      model.set({\n        query: query.query[0],\n        showTugboatMessage: isTugboat,\n        suggestedQuery: getSuggestedQuery(this.model.get('currentQuery'))\n      });\n    } else if (error) {\n      model.set('error', error);\n    }\n\n    return {\n      model: model\n    };\n  },\n  childViewContainer: '.results-list',\n  events: {\n    'click .show-highlights': 'toggleHighlights',\n    'click .show-abstract': 'toggleAbstract',\n    'click .toggle-sidebars': 'toggleShowSidebars',\n    'click #go-to-bottom': 'goToBottom',\n    'click #backToTopBtn': 'goToTop',\n    'click a.page-control': 'changePageWithButton',\n    'keyup input.page-control': 'tabOrEnterChangePageWithInput',\n    'change #per-page-select': 'changePerPage'\n  },\n  toggleHighlights: function toggleHighlights(e) {\n    var state = this.model.get('showHighlights');\n    state = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isBoolean(state) && state ? 'closed' : state === 'open' ? 'closed' : 'open';\n    this.model.set('showHighlights', state);\n\n    if (!this.model.get('highlightsLoaded')) {\n      this.model.set('highlightsLoaded', true);\n      this.trigger('toggle-highlights', state === 'open');\n    }\n\n    (0,analytics__WEBPACK_IMPORTED_MODULE_14__[\"default\"])('send', 'event', 'interaction', \"search_result_meta_toggled\", {\n      search_result_meta_name: 'highlights',\n      search_result_meta_state: state === 'open' ? 'open' : 'closed'\n    });\n  },\n  toggleAbstract: function toggleAbstract() {\n    var value = this.model.get('showAbstract');\n    this.model.set('showAbstract', value === 'open' ? 'closed' : 'open');\n    (0,analytics__WEBPACK_IMPORTED_MODULE_14__[\"default\"])('send', 'event', 'interaction', \"search_result_meta_toggled\", {\n      search_result_meta_name: 'abstracts',\n      search_result_meta_state: value === 'open' ? 'open' : 'closed'\n    });\n  },\n  toggleShowSidebars: function toggleShowSidebars() {\n    var val = !this.model.get('showSidebars');\n    this.model.set('showSidebars', val);\n    (0,analytics__WEBPACK_IMPORTED_MODULE_14__[\"default\"])('send', 'event', 'interaction', \"search_result_meta_toggled\", {\n      search_result_meta_name: 'sidebars',\n      search_result_meta_state: val ? 'open' : 'closed'\n    });\n  },\n  goToBottom: function goToBottom() {\n    $(document.documentElement).animate({\n      scrollTop: this.$el.outerHeight()\n    }, 'fast');\n  },\n  goToTop: function goToTop() {\n    $(document.documentElement).animate({\n      scrollTop: 0\n    }, 'fast');\n  },\n  modelEvents: {\n    change: 'render',\n    'change:showHighlights': 'toggleChildrenHighlights',\n    'change:showAbstract': 'toggleChildrenAbstracts'\n  },\n  collectionEvents: {\n    reset: 'onResetCollection'\n  },\n  template: (hbs_js_widgets_list_of_things_templates_results_container_template__WEBPACK_IMPORTED_MODULE_7___default()),\n  onResetCollection: function onResetCollection() {\n    this.model.set('highlightsLoaded', false);\n    this.model.trigger('change:showAbstract');\n  },\n\n  /**\n   * Displays the are inside of every item-view\n   * with details (this place is normally hidden\n   * by default)\n   */\n  toggleChildrenHighlights: function toggleChildrenHighlights() {\n    var show = this.model.get('showHighlights');\n    this.collection.invoke('set', 'showHighlights', show === 'open');\n  },\n  toggleChildrenAbstracts: function toggleChildrenAbstracts() {\n    var show = this.model.get('showAbstract');\n    this.collection.invoke('set', 'showAbstract', show === 'open');\n  },\n  changePageWithButton: function changePageWithButton(e) {\n    var $target = $(e.currentTarget);\n    if ($target.parent().hasClass('disabled')) return;\n    var transform = $target.hasClass('next-page') ? 1 : -1;\n    var pageVal = this.model.get('page') + transform;\n    this.trigger('pagination:select', pageVal);\n\n    if (this.resultsWidget) {\n      (0,analytics__WEBPACK_IMPORTED_MODULE_14__[\"default\"])('send', 'event', 'interaction', 'results-list-pagination', pageVal);\n    }\n\n    return false;\n  },\n  tabOrEnterChangePageWithInput: function tabOrEnterChangePageWithInput(e) {\n    // subtract one since pages are 0 indexed\n    var pageVal = parseInt($(e.target).val() - 1); // enter or tab\n\n    if (e.keyCode == 13 || e.keyCode == 9) {\n      this.trigger('pagination:select', pageVal);\n    }\n\n    if (this.resultsWidget) {\n      (0,analytics__WEBPACK_IMPORTED_MODULE_14__[\"default\"])('send', 'event', 'interaction', 'results-list-pagination', pageVal);\n    }\n  },\n  changePerPage: function changePerPage(e) {\n    var val = parseInt(e.currentTarget ? e.currentTarget.value : 25);\n    val !== this.model.get('perPage') && this.trigger('pagination:changePerPage', val);\n    return false;\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (ListOfThingsView);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/list_of_things/paginated_view.js?");

/***/ }),

/***/ "./src/js/widgets/list_of_things/templates/empty-view-template.html":
/*!**************************************************************************!*\
  !*** ./src/js/widgets/list_of_things/templates/empty-view-template.html ***!
  \**************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"  <div>\\n    Using the ADS classic query translator? view the\\n    <a\\n      href=\\\"/help/faq/#classic-search-translator\\\"\\n      rel=\\\"noreferrer noopener\\\"\\n      target=\\\"_blank\\\"\\n      >docs</a\\n    >.\\n  </div>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <ul>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"suggestedQuery\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":4},\"end\":{\"line\":20,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"    <li>Try broadening your search</li>\\n    <li>Disable any filters that may be applied</li>\\n    <li><a href=\\\"#\\\">Check out some examples</a></li>\\n    <li>\\n      <a\\n        href=\\\"/help/search/search-syntax\\\"\\n        target=\\\"_blank\\\"\\n        rel=\\\"noreferrer noopener\\\"\\n        >Read our help pages</a\\n      >\\n    </li>\\n  </ul>\\n  <span>\\n    Not seeing something that should be here? Let us know!\\n    <button\\n      class=\\\"btn btn-primary-faded results-feedback-button\\\"\\n      data-toggle=\\\"modal\\\"\\n      data-target=\\\"#feedback-modal\\\"\\n      data-feedback-view=\\\"general\\\"\\n    >\\n      <i class=\\\"fa fa-comment\\\" aria-hidden=\\\"true\\\"></i>\\n      Leave Feedback\\n    </button>\\n  </span>\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <li>\\n      Try an alternate query:\\n      <a href=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"suggestedQuery\") : depth0)) != null ? lookupProperty(stack1,\"url\") : stack1), depth0))\n    + \"\\\">\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"suggestedQuery\") : depth0)) != null ? lookupProperty(stack1,\"query\") : stack1), depth0))\n    + \"</a>\\n    </li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"s-empty-view-msg\\\">\\n  <div class=\\\"h4\\\">Sorry no results were found for <code>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"query\") || (depth0 != null ? lookupProperty(depth0,\"query\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(alias1,{\"name\":\"query\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":56},\"end\":{\"line\":2,\"column\":65}}}) : helper)))\n    + \"</code></div>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"showTugboatMessage\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":2},\"end\":{\"line\":45,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/list_of_things/templates/empty-view-template.html?");

/***/ }),

/***/ "./src/js/widgets/list_of_things/templates/error-view-template.html":
/*!**************************************************************************!*\
  !*** ./src/js/widgets/list_of_things/templates/error-view-template.html ***!
  \**************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"container-fluid\\\">\\n  <div class=\\\"row text-center\\\">\\n    <span class=\\\"fa-stack fa-lg text-danger\\\">\\n      <i class=\\\"fa fa-stack-2x fa-circle-o\\\" aria-hidden=\\\"true\\\"></i>\\n      <i class=\\\"fa fa-stack-1x fa-exclamation\\\" aria-hidden=\\\"true\\\"></i>\\n    </span>\\n  </div>\\n  <div class=\\\"row text-center\\\">\\n    <div class=\\\"h4\\\">\\n      Something Went Wrong\\n    </div>\\n    <div class=\\\"h4\\\">\\n      Please Retry Your Search\\n    </div>\\n  </div>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/list_of_things/templates/error-view-template.html?");

/***/ }),

/***/ "./src/js/widgets/list_of_things/templates/initial-view-template.html":
/*!****************************************************************************!*\
  !*** ./src/js/widgets/list_of_things/templates/initial-view-template.html ***!
  \****************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"Requesting data...\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/list_of_things/templates/initial-view-template.html?");

/***/ }),

/***/ "./src/js/widgets/list_of_things/templates/item-template.html":
/*!********************************************************************!*\
  !*** ./src/js/widgets/list_of_things/templates/item-template.html ***!
  \********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \" chosen \";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <label class=\\\"custom-checkbox\\\">\\n                <input type=\\\"checkbox\\\" value=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"identifier\") || (depth0 != null ? lookupProperty(depth0,\"identifier\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"identifier\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":45},\"end\":{\"line\":8,\"column\":59}}}) : helper)))\n    + \" name=\\\"identifier\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"chosen\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":78},\"end\":{\"line\":8,\"column\":108}}})) != null ? stack1 : \"\")\n    + \" aria-label=\\\"select item \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"indexToShow\") || (depth0 != null ? lookupProperty(depth0,\"indexToShow\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"indexToShow\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":133},\"end\":{\"line\":8,\"column\":148}}}) : helper)))\n    + \"\\\">\\n            </label>\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    return \" checked \";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"normCiteSort\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.program(9, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":26,\"column\":14},\"end\":{\"line\":30,\"column\":21}}})) != null ? stack1 : \"\");\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"              <a href=\\\"#abs/\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"encodedIdentifier\") || (depth0 != null ? lookupProperty(depth0,\"encodedIdentifier\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"encodedIdentifier\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":27,\"column\":28},\"end\":{\"line\":27,\"column\":49}}}) : helper)))\n    + \"/citations\\\" title=\\\"citation count\\\" class=\\\"citations-redirect-link\\\" aria-label=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"citationCountNorm\") || (depth0 != null ? lookupProperty(depth0,\"citationCountNorm\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"citationCountNorm\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":27,\"column\":128},\"end\":{\"line\":27,\"column\":149}}}) : helper)))\n    + \" normalized citations\\\">cited (n): \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"citationCountNorm\") || (depth0 != null ? lookupProperty(depth0,\"citationCountNorm\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"citationCountNorm\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":27,\"column\":183},\"end\":{\"line\":27,\"column\":204}}}) : helper)))\n    + \"</a>\\n\";\n},\"9\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"              <a href=\\\"#abs/\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"encodedIdentifier\") || (depth0 != null ? lookupProperty(depth0,\"encodedIdentifier\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"encodedIdentifier\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":29,\"column\":28},\"end\":{\"line\":29,\"column\":49}}}) : helper)))\n    + \"/citations\\\" title=\\\"citation count\\\" class=\\\"citations-redirect-link\\\" aria-label=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"citation_count\") || (depth0 != null ? lookupProperty(depth0,\"citation_count\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"citation_count\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":29,\"column\":128},\"end\":{\"line\":29,\"column\":146}}}) : helper)))\n    + \" citations\\\">cited: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"citation_count\") || (depth0 != null ? lookupProperty(depth0,\"citation_count\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"citation_count\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":29,\"column\":165},\"end\":{\"line\":29,\"column\":183}}}) : helper)))\n    + \"</a>\\n\";\n},\"11\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"normCiteSort\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(12, data, 0),\"inverse\":container.program(14, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":38,\"column\":14},\"end\":{\"line\":42,\"column\":21}}})) != null ? stack1 : \"\");\n},\"12\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"              <a href=\\\"#abs/\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"encodedIdentifier\") || (depth0 != null ? lookupProperty(depth0,\"encodedIdentifier\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"encodedIdentifier\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":39,\"column\":28},\"end\":{\"line\":39,\"column\":49}}}) : helper)))\n    + \"/citations\\\" title=\\\"citation count\\\" class=\\\"citations-redirect-link\\\" aria-label=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"citationCountNorm\") || (depth0 != null ? lookupProperty(depth0,\"citationCountNorm\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"citationCountNorm\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":39,\"column\":128},\"end\":{\"line\":39,\"column\":149}}}) : helper)))\n    + \" normalized citations\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"citationCountNorm\") || (depth0 != null ? lookupProperty(depth0,\"citationCountNorm\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"citationCountNorm\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":39,\"column\":172},\"end\":{\"line\":39,\"column\":193}}}) : helper)))\n    + \"</a>\\n\";\n},\"14\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"              <a href=\\\"#abs/\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"encodedIdentifier\") || (depth0 != null ? lookupProperty(depth0,\"encodedIdentifier\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"encodedIdentifier\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":41,\"column\":28},\"end\":{\"line\":41,\"column\":49}}}) : helper)))\n    + \"/citations\\\" title=\\\"citation count\\\" class=\\\"citations-redirect-link\\\" aria-label=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"citation_count\") || (depth0 != null ? lookupProperty(depth0,\"citation_count\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"citation_count\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":41,\"column\":128},\"end\":{\"line\":41,\"column\":146}}}) : helper)))\n    + \" citations\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"citation_count\") || (depth0 != null ? lookupProperty(depth0,\"citation_count\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"citation_count\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":41,\"column\":158},\"end\":{\"line\":41,\"column\":176}}}) : helper)))\n    + \"</a>\\n\";\n},\"16\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n                <div class=\\\"letter-icon s-letter-icon\\\">\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"links\") : depth0)) != null ? lookupProperty(stack1,\"text\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(17, data, 0, blockParams, depths),\"inverse\":container.program(23, data, 0, blockParams, depths),\"data\":data,\"loc\":{\"start\":{\"line\":56,\"column\":20},\"end\":{\"line\":81,\"column\":27}}})) != null ? stack1 : \"\")\n    + \"\\n            </div>\\n\\n            <div class=\\\"letter-icon s-letter-icon\\\">\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"links\") : depth0)) != null ? lookupProperty(stack1,\"list\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(25, data, 0, blockParams, depths),\"inverse\":container.program(28, data, 0, blockParams, depths),\"data\":data,\"loc\":{\"start\":{\"line\":87,\"column\":16},\"end\":{\"line\":110,\"column\":23}}})) != null ? stack1 : \"\")\n    + \"\\n            </div>\\n            <div class=\\\"letter-icon s-letter-icon\\\">\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"links\") : depth0)) != null ? lookupProperty(stack1,\"data\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(30, data, 0, blockParams, depths),\"inverse\":container.program(33, data, 0, blockParams, depths),\"data\":data,\"loc\":{\"start\":{\"line\":115,\"column\":16},\"end\":{\"line\":138,\"column\":23}}})) != null ? stack1 : \"\")\n    + \"\\n            </div>\\n\";\n},\"17\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                        <a class=\\\"btn-link active-link s-active-link\\\" aria-disabled=\\\"false\\\">\\n                            <i class=\\\"s-text-icon\\\" aria-hidden=\\\"true\\\"></i>\\n                            <span class=\\\"sr-only\\\">quick access to full text links</span>\\n                        </a>\\n                        <ul class=\\\"hidden list-unstyled link-details s-link-details\\\" role=\\\"menu\\\">\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"links\") : depth0)) != null ? lookupProperty(stack1,\"text\") : stack1),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(18, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":63,\"column\":28},\"end\":{\"line\":70,\"column\":37}}})) != null ? stack1 : \"\")\n    + \"                        </ul>\\n\\n\";\n},\"18\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.lambda, alias3=container.escapeExpression, alias4=container.hooks.helperMissing, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                            <li>\\n                              <a \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"openAccess\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(19, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":65,\"column\":33},\"end\":{\"line\":65,\"column\":85}}})) != null ? stack1 : \"\")\n    + \" href=\\\"\"\n    + alias3(alias2((depth0 != null ? lookupProperty(depth0,\"url\") : depth0), depth0))\n    + \"\\\" data-ftl=\\\"\"\n    + alias3(alias2((depth0 != null ? lookupProperty(depth0,\"name\") : depth0), depth0))\n    + \"\\\"\\n                                target=\\\"_blank\\\" rel=\\\"noreferrer noopener\\\" aria-label=\\\"open access link\\\">\\n                              \"\n    + alias3(alias2((depth0 != null ? lookupProperty(depth0,\"name\") : depth0), depth0))\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(lookupProperty(helpers,\"and\")||(depth0 && lookupProperty(depth0,\"and\"))||alias4).call(alias1,(depths[1] != null ? lookupProperty(depths[1],\"publisher\") : depths[1]),(lookupProperty(helpers,\"startsWith\")||(depth0 && lookupProperty(depth0,\"startsWith\"))||alias4).call(alias1,(depth0 != null ? lookupProperty(depth0,\"rawType\") : depth0),\"PUB_\",{\"name\":\"startsWith\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":67,\"column\":67},\"end\":{\"line\":67,\"column\":99}}}),{\"name\":\"and\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":67,\"column\":49},\"end\":{\"line\":67,\"column\":100}}}),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(21, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":67,\"column\":43},\"end\":{\"line\":67,\"column\":129}}})) != null ? stack1 : \"\")\n    + \"\\n                              </a>\\n                            </li>\\n\";\n},\"19\":function(container,depth0,helpers,partials,data) {\n    return \" class=\\\"s-open-access\\\"\";\n},\"21\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"&nbsp;\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"type\") : depth0), depth0));\n},\"23\":function(container,depth0,helpers,partials,data) {\n    return \"\\n                    <div title=\\\"full text links (none)\\\">\\n                        <a href=\\\"javascript:void(0)\\\" class=\\\"btn-link disabled\\\" aria-disabled=\\\"true\\\" aria-label=\\\"full text links\\\">\\n                            <i class=\\\"s-text-icon\\\" aria-hidden=\\\"true\\\"></i>\\n                        </a>\\n                    </div>\\n\\n\";\n},\"25\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n                <a class=\\\"btn-link active-link s-active-link\\\" aria-disabled=\\\"false\\\">\\n                    <i class=\\\"s-list-icon\\\" aria-hidden=\\\"true\\\"></i>\\n                    <span class=\\\"sr-only\\\">quick links to lists of references, citations and more</span>\\n                </a>\\n\\n                <ul class=\\\"hidden list-unstyled list-unstyled link-details s-link-details\\\" role=\\\"menu\\\">\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"links\") : depth0)) != null ? lookupProperty(stack1,\"list\") : stack1),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(26, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":96,\"column\":20},\"end\":{\"line\":98,\"column\":29}}})) != null ? stack1 : \"\")\n    + \"                </ul>\\n\\n\";\n},\"26\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                    <li><a href=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"url\") : depth0), depth0))\n    + \"\\\" data-quicklink=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"name\") : depth0), depth0))\n    + \"\\\">\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"name\") : depth0), depth0))\n    + \"</a></li>\\n\";\n},\"28\":function(container,depth0,helpers,partials,data) {\n    return \"                <div title=\\\"references, citations (none)\\\">\\n                    <a href=\\\"javascript:void(0)\\\" class=\\\"btn-link disabled\\\" aria-disabled=\\\"true\\\" data-quick-link=\\\"references\\\">\\n                        <i class=\\\"s-list-icon\\\" aria-hidden=\\\"true\\\"></i>\\n                        <span class=\\\"sr-only\\\">quick links to lists of references, citations etc</span>\\n                    </a>\\n                </div>\\n\\n\\n\";\n},\"30\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n                <a class=\\\"btn-link active-link s-active-link\\\" aria-disabled=\\\"false\\\">\\n                    <i class=\\\"s-data-icon\\\" aria-hidden=\\\"true\\\"></i>\\n                    <span class=\\\"sr-only\\\">quick links to data associated with this article</span>\\n                </a>\\n\\n                <ul class=\\\"hidden list-unstyled link-details s-link-details\\\" role=\\\"menu\\\">\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"links\") : depth0)) != null ? lookupProperty(stack1,\"data\") : stack1),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(31, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":124,\"column\":20},\"end\":{\"line\":127,\"column\":29}}})) != null ? stack1 : \"\")\n    + \"                </ul>\\n\\n\";\n},\"31\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                    <li><a \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"openAccess\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(19, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":125,\"column\":27},\"end\":{\"line\":125,\"column\":79}}})) != null ? stack1 : \"\")\n    + \" href=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"url\") : depth0), depth0))\n    + \"\\\" data-datalink=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"name\") : depth0), depth0))\n    + \"\\\" target=\\\"_blank\\\" rel=\\\"noreferrer noopener\\\"\\n                        >\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"name\") : depth0), depth0))\n    + \"</a></li>\\n\";\n},\"33\":function(container,depth0,helpers,partials,data) {\n    return \"                    <div title=\\\"data products (none)\\\">\\n                        <a href=\\\"javascript:void(0)\\\" class=\\\"btn-link disabled\\\" aria-disabled=\\\"true\\\">\\n                            <i class=\\\"s-data-icon\\\" aria-hidden=\\\"true\\\"></i>\\n                            <span class=\\\"sr-only\\\">quick links to data associated with this article</span>\\n                        </a>\\n                    </div>\\n\\n\";\n},\"35\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"encodedIdentifier\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(36, data, 0),\"inverse\":container.program(38, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":150,\"column\":12},\"end\":{\"line\":156,\"column\":19}}})) != null ? stack1 : \"\");\n},\"36\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                <a href=\\\"#abs/\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"encodedIdentifier\") || (depth0 != null ? lookupProperty(depth0,\"encodedIdentifier\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"encodedIdentifier\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":151,\"column\":30},\"end\":{\"line\":151,\"column\":51}}}) : helper)))\n    + \"/abstract\\\" data-item-index=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"indexToShow\") || (depth0 != null ? lookupProperty(depth0,\"indexToShow\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"indexToShow\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":151,\"column\":79},\"end\":{\"line\":151,\"column\":94}}}) : helper)))\n    + \"\\\" class=\\\"abs-redirect-link\\\">\\n                    <h3 class=\\\"s-results-title\\\">\"\n    + ((stack1 = ((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":152,\"column\":48},\"end\":{\"line\":152,\"column\":59}}}) : helper))) != null ? stack1 : \"\")\n    + \"</h3>\\n                </a>\\n\";\n},\"38\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                <h3 class=\\\"s-results-title\\\">\"\n    + ((stack1 = ((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":155,\"column\":44},\"end\":{\"line\":155,\"column\":55}}}) : helper))) != null ? stack1 : \"\")\n    + \"</h3>\\n\";\n},\"40\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <a href=\\\"#abs/\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"encodedIdentifier\") || (depth0 != null ? lookupProperty(depth0,\"encodedIdentifier\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"encodedIdentifier\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":158,\"column\":26},\"end\":{\"line\":158,\"column\":47}}}) : helper)))\n    + \"/abstract\\\" data-item-index=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"indexToShow\") || (depth0 != null ? lookupProperty(depth0,\"indexToShow\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"indexToShow\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":158,\"column\":75},\"end\":{\"line\":158,\"column\":90}}}) : helper)))\n    + \"\\\" class=\\\"abs-redirect-link\\\">\\n                <h3 class=\\\"s-results-title\\\">\"\n    + ((stack1 = ((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":159,\"column\":44},\"end\":{\"line\":159,\"column\":55}}}) : helper))) != null ? stack1 : \"\")\n    + \"</h3>\\n            </a>\\n\";\n},\"42\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"authorFormatted\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(43, data, 0),\"inverse\":container.program(48, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":169,\"column\":12},\"end\":{\"line\":196,\"column\":19}}})) != null ? stack1 : \"\");\n},\"43\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <ul class=\\\"list-inline just-authors s-results-authors less-authors\\\" aria-label=\\\"authors\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"authorFormatted\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(44, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":171,\"column\":16},\"end\":{\"line\":173,\"column\":25}}})) != null ? stack1 : \"\")\n    + \"\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"extraAuthors\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(46, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":175,\"column\":16},\"end\":{\"line\":181,\"column\":23}}})) != null ? stack1 : \"\")\n    + \"            </ul>\\n\\n            <ul class=\\\"list-inline just-authors s-results-authors all-authors hidden\\\" aria-label=\\\"authors\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"allAuthorFormatted\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(44, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":185,\"column\":16},\"end\":{\"line\":187,\"column\":25}}})) != null ? stack1 : \"\")\n    + \"                <li>\\n                    <a href=\\\"javascript:void(0)\\\" class=\\\"show-less-authors\\\">\\n                        <em>show less</em>\\n                    </a>\\n                </li>\\n            </ul>\\n\";\n},\"44\":function(container,depth0,helpers,partials,data) {\n    return \"                    <li class=\\\"article-author\\\">\"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + \"</li>\\n\";\n},\"46\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                <li>\\n                    <a href=\\\"javascript:void(0)\\\" class=\\\"show-all-authors\\\">\\n                        <em>and \"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"extraAuthors\") || (depth0 != null ? lookupProperty(depth0,\"extraAuthors\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"extraAuthors\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":178,\"column\":32},\"end\":{\"line\":178,\"column\":48}}}) : helper)))\n    + \" more</em>\\n                    </a>\\n                </li>\\n\";\n},\"48\":function(container,depth0,helpers,partials,data) {\n    return \"                <span class=\\\"text-faded\\\">no author information available</span>\\n\";\n},\"50\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"row\\\">\\n    <div class=\\\"col-sm-10 col-sm-offset-1\\\">\\n        <div class=\\\"s-results-orcid-container\\\">\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"orcid\") : depth0)) != null ? lookupProperty(stack1,\"pending\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(51, data, 0),\"inverse\":container.program(53, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":209,\"column\":12},\"end\":{\"line\":268,\"column\":19}}})) != null ? stack1 : \"\")\n    + \" <!--orcid.pending-->\\n    </div>\\n\\n</div>\\n\";\n},\"51\":function(container,depth0,helpers,partials,data) {\n    return \"            <button class=\\\"btn btn-default btn-sm s-orcid-loading\\\" aria-disabled=\\\"true\\\">\\n                <i class=\\\"fa fa-lg fa-spinner fa-pulse\\\" aria-hidden=\\\"true\\\"></i> Working...\\n            </button>\\n\";\n},\"53\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <!-- if provenance, it has been added by us or someone else-->\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"orcid\") : depth0)) != null ? lookupProperty(stack1,\"provenance\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(54, data, 0),\"inverse\":container.program(68, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":215,\"column\":12},\"end\":{\"line\":267,\"column\":19}}})) != null ? stack1 : \"\")\n    + \"<!--orcid.provenance -->\\n            \";\n},\"54\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n            <div class=\\\"\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"orcid\") : depth0)) != null ? lookupProperty(stack1,\"error\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(55, data, 0),\"inverse\":container.program(57, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":217,\"column\":24},\"end\":{\"line\":217,\"column\":83}}})) != null ? stack1 : \"\")\n    + \" s-orcid-alert s-orcid-provenance-\"\n    + container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? lookupProperty(depth0,\"orcid\") : depth0)) != null ? lookupProperty(stack1,\"provenance\") : stack1), depth0))\n    + \"\\\" role=\\\"alert\\\">\\n                <div class=\\\"btn-group\\\">\\n                    <button type=\\\"button\\\" class=\\\"btn btn-default btn-sm dropdown-toggle\\\" data-toggle=\\\"dropdown\\\"\\n                            aria-expanded=\\\"false\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"orcid\") : depth0)) != null ? lookupProperty(stack1,\"error\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(59, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":220,\"column\":50},\"end\":{\"line\":220,\"column\":99}}})) != null ? stack1 : \"\")\n    + \">\\n                        <img src=\\\"../../styles/img/orcid-active.svg\\\" alt=\\\"orcid logo active\\\" class=\\\"s-orcid-img\\\"/> Actions <span class=\\\"caret\\\"></span>\\n                    </button>\\n                    <ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"orcid\") : depth0)) != null ? lookupProperty(stack1,\"actions\") : stack1),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(61, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":224,\"column\":24},\"end\":{\"line\":238,\"column\":37}}})) != null ? stack1 : \"\")\n    + \"                        </li>\\n                    </ul>\\n                </div>\\n\\n                \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"source_name\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(66, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":243,\"column\":16},\"end\":{\"line\":243,\"column\":95}}})) != null ? stack1 : \"\")\n    + \"\\n                <span class=\\\"text-success s-orcid-success pull-right\\\"> <i class=\\\"icon-success\\\" aria-hidden=\\\"true\\\"></i>&nbsp;In ORCID&nbsp;</span>\\n\\n            </div>\\n\\n\\n\\n            \";\n},\"55\":function(container,depth0,helpers,partials,data) {\n    return \"alert-danger\";\n},\"57\":function(container,depth0,helpers,partials,data) {\n    return \"alert-success\";\n},\"59\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"title=\\\"\"\n    + container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? lookupProperty(depth0,\"orcid\") : depth0)) != null ? lookupProperty(stack1,\"error\") : stack1), depth0))\n    + \"\\\"\";\n},\"61\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, alias3=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                        <li>\\n\\n                            <a class=\\\"orcid-action \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"action\") : depth0), depth0))\n    + \"\\\" data-action=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"action\") : depth0), depth0))\n    + \"\\\"\\n                               title=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"caption\") : depth0), depth0))\n    + \"\\\">\\n                                <i class=\\\"\\n\"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"action\") : depth0),\"orcid-update\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(62, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":230,\"column\":28},\"end\":{\"line\":232,\"column\":40}}})) != null ? stack1 : \"\")\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"action\") : depth0),\"orcid-delete\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(64, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":233,\"column\":28},\"end\":{\"line\":235,\"column\":40}}})) != null ? stack1 : \"\")\n    + \"                            \\\" aria-hidden=\\\"true\\\"></i>\\n                                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"title\") : depth0), depth0))\n    + \"</a>\\n\";\n},\"62\":function(container,depth0,helpers,partials,data) {\n    return \"                            icon-reload-c\\n\";\n},\"64\":function(container,depth0,helpers,partials,data) {\n    return \"                            icon-clear-c\\n\";\n},\"66\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<span class=\\\"s-orcid-source\\\">(\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"source_name\") || (depth0 != null ? lookupProperty(depth0,\"source_name\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"source_name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":243,\"column\":65},\"end\":{\"line\":243,\"column\":80}}}) : helper)))\n    + \")</span>\";\n},\"68\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<!-- add this paper to ORCID-->\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"bibcode\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(69, data, 0),\"inverse\":container.program(74, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":252,\"column\":12},\"end\":{\"line\":264,\"column\":19}}})) != null ? stack1 : \"\")\n    + \"\\n\\n            \";\n},\"69\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.lambda, alias3=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <button class=\\\"btn \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"orcid\") : depth0)) != null ? lookupProperty(stack1,\"error\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(70, data, 0),\"inverse\":container.program(72, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":253,\"column\":31},\"end\":{\"line\":253,\"column\":86}}})) != null ? stack1 : \"\")\n    + \" btn-sm orcid-action \"\n    + alias3(alias2(((stack1 = ((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"orcid\") : depth0)) != null ? lookupProperty(stack1,\"actions\") : stack1)) != null ? lookupProperty(stack1,\"add\") : stack1)) != null ? lookupProperty(stack1,\"action\") : stack1), depth0))\n    + \"\\\"  data-action=\\\"\"\n    + alias3(alias2(((stack1 = ((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"orcid\") : depth0)) != null ? lookupProperty(stack1,\"actions\") : stack1)) != null ? lookupProperty(stack1,\"add\") : stack1)) != null ? lookupProperty(stack1,\"action\") : stack1), depth0))\n    + \"\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"orcid\") : depth0)) != null ? lookupProperty(stack1,\"error\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(59, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":253,\"column\":181},\"end\":{\"line\":253,\"column\":230}}})) != null ? stack1 : \"\")\n    + \">\\n               <img src=\\\"../../styles/img/orcid-inactive.svg\\\" alt=\\\"orcid logo inactive\\\" class=\\\"s-orcid-img\\\" title=\\\"\"\n    + alias3(alias2(((stack1 = ((stack1 = ((stack1 = (depth0 != null ? lookupProperty(depth0,\"orcid\") : depth0)) != null ? lookupProperty(stack1,\"actions\") : stack1)) != null ? lookupProperty(stack1,\"add\") : stack1)) != null ? lookupProperty(stack1,\"caption\") : stack1), depth0))\n    + \"\\\"/>\\n                Claim in ORCID\\n            </button>\\n\";\n},\"70\":function(container,depth0,helpers,partials,data) {\n    return \"btn-danger\";\n},\"72\":function(container,depth0,helpers,partials,data) {\n    return \"btn-default\";\n},\"74\":function(container,depth0,helpers,partials,data) {\n    return \"            <div class=\\\"panel panel-default\\\" style=\\\"box-shadow: none\\\">\\n                <div class=\\\"panel-body\\\">\\n                    <img src=\\\"../../styles/img/orcid-inactive.svg\\\" alt=\\\"orcid logo inactive\\\" class=\\\"s-orcid-img\\\" title=\\\"\\\"/>\\n                    Record not known to ADS\\n                </div>\\n            </div>\\n\";\n},\"76\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n        <div class=\\\"col-xs-10 col-xs-offset-1 s-more-info\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(lookupProperty(helpers,\"isdefined\")||(depth0 && lookupProperty(depth0,\"isdefined\"))||container.hooks.helperMissing).call(alias1,(depth0 != null ? lookupProperty(depth0,\"highlights\") : depth0),{\"name\":\"isdefined\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":278,\"column\":14},\"end\":{\"line\":278,\"column\":36}}}),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(77, data, 0),\"inverse\":container.program(83, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":278,\"column\":8},\"end\":{\"line\":292,\"column\":15}}})) != null ? stack1 : \"\")\n    + \"        </div>\\n\";\n},\"77\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"highlights\") : depth0)) != null ? lookupProperty(stack1,\"length\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(78, data, 0),\"inverse\":container.program(81, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":279,\"column\":12},\"end\":{\"line\":289,\"column\":19}}})) != null ? stack1 : \"\");\n},\"78\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <h4 class=\\\"sr-only\\\">Search Highlights</h4>\\n            <ul aria-label=\\\"search snippets\\\" class=\\\"s-search-snippets\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"highlights\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(79, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":282,\"column\":16},\"end\":{\"line\":284,\"column\":25}}})) != null ? stack1 : \"\")\n    + \"            </ul>\\n\\n\";\n},\"79\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"                <li>\"\n    + ((stack1 = container.lambda(depth0, depth0)) != null ? stack1 : \"\")\n    + \"</li>\\n\";\n},\"81\":function(container,depth0,helpers,partials,data) {\n    return \"                <span class=\\\"text-muted\\\">No highlights</span>\\n\";\n},\"83\":function(container,depth0,helpers,partials,data) {\n    return \"            <span class=\\\"text-muted\\\"><i class=\\\"fa fa-spinner fa-pulse\\\" aria-hidden=\\\"true\\\"></i> Loading Highlights...</span>\\n\";\n},\"85\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        <div class=\\\"col-xs-9 col-xs-offset-1 s-more-info\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"abstract\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(86, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":300,\"column\":16},\"end\":{\"line\":316,\"column\":23}}})) != null ? stack1 : \"\")\n    + \"        </div>\\n\";\n},\"86\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                    <h4 aria-label=\\\"read full abstract below\\\"><a href=\\\"#abs/\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"identifier\") || (depth0 != null ? lookupProperty(depth0,\"identifier\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(alias1,{\"name\":\"identifier\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":301,\"column\":76},\"end\":{\"line\":301,\"column\":90}}}) : helper)))\n    + \"\\\">Abstract</a></h4>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"shortAbstract\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(87, data, 0),\"inverse\":container.program(89, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":302,\"column\":20},\"end\":{\"line\":315,\"column\":27}}})) != null ? stack1 : \"\");\n},\"87\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n                    <div class=\\\"short-abstract\\\" aria-label=\\\"a truncated version of the abstract\\\">\\n                        \"\n    + ((stack1 = ((helper = (helper = lookupProperty(helpers,\"shortAbstract\") || (depth0 != null ? lookupProperty(depth0,\"shortAbstract\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"shortAbstract\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":305,\"column\":24},\"end\":{\"line\":305,\"column\":43}}}) : helper))) != null ? stack1 : \"\")\n    + \"\\n                        &nbsp; <button class=\\\"btn btn-xs btn-default show-full-abstract\\\">more</button>\\n                    </div>\\n                    <div class=\\\"full-abstract hidden\\\">\\n                        \"\n    + ((stack1 = ((helper = (helper = lookupProperty(helpers,\"abstract\") || (depth0 != null ? lookupProperty(depth0,\"abstract\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"abstract\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":309,\"column\":24},\"end\":{\"line\":309,\"column\":38}}}) : helper))) != null ? stack1 : \"\")\n    + \"\\n                        &nbsp; <button class=\\\"btn btn-xs btn-default hide-full-abstract\\\">less</button>\\n                    </div>\\n\";\n},\"89\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                        <!--the abstract is short enough to be shown all at once-->\\n                        \"\n    + ((stack1 = ((helper = (helper = lookupProperty(helpers,\"abstract\") || (depth0 != null ? lookupProperty(depth0,\"abstract\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"abstract\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":314,\"column\":24},\"end\":{\"line\":314,\"column\":38}}}) : helper))) != null ? stack1 : \"\")\n    + \"\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div tabindex=\\\"-1\\\" class=\\\"col-sm-12 \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"chosen\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":36},\"end\":{\"line\":1,\"column\":65}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n<div class=\\\"row s-top-row\\\">\\n    <div class=\\\"col-xs-1 s-checkbox-col s-top-row-col\\\">\\n        <label>\\n            <span class=\\\"hidden-xs\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"indexToShow\") || (depth0 != null ? lookupProperty(depth0,\"indexToShow\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"indexToShow\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":36},\"end\":{\"line\":5,\"column\":51}}}) : helper)))\n    + \"</span>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"showCheckbox\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":12},\"end\":{\"line\":10,\"column\":19}}})) != null ? stack1 : \"\")\n    + \"        </label>\\n    </div>\\n\\n    <div class=\\\"col-xs-4 col-sm-3 s-top-row-col identifier s-identifier\\\">\\n        <a href=\\\"#abs/\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"encodedIdentifier\") || (depth0 != null ? lookupProperty(depth0,\"encodedIdentifier\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"encodedIdentifier\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":22},\"end\":{\"line\":15,\"column\":43}}}) : helper)))\n    + \"/abstract\\\" data-item-index=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"indexToShow\") || (depth0 != null ? lookupProperty(depth0,\"indexToShow\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"indexToShow\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":71},\"end\":{\"line\":15,\"column\":86}}}) : helper)))\n    + \"\\\" aria-label=\\\"bibcode\\\" class=\\\"abs-redirect-link\\\">\\n            \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"identifier\") || (depth0 != null ? lookupProperty(depth0,\"identifier\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"identifier\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":12},\"end\":{\"line\":16,\"column\":26}}}) : helper)))\n    + \"\\n        </a>\\n    </div>\\n    <div class=\\\"hidden-xs col-xs-1 col-md-1 col-md-offset-0 s-top-row-col print-visible-inline-1\\\" aria-label=\\\"date published\\\">\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"formattedDate\") || (depth0 != null ? lookupProperty(depth0,\"formattedDate\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"formattedDate\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":8},\"end\":{\"line\":20,\"column\":25}}}) : helper)))\n    + \"\\n    </div>\\n\\n    <div class=\\\"hidden-xs print-visible-block-1\\\">\\n      <div class=\\\"col-xs-3 col-sm-5 col-md-3 s-top-row-col\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"citation_count\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(6, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":25,\"column\":10},\"end\":{\"line\":31,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"      </div>\\n    </div>\\n\\n    <div class=\\\"hidden-sm hidden-md hidden-lg print-hidden\\\">\\n      <div class=\\\"col-xs-2 col-sm-5 col-md-3 s-top-row-col text-right\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"citation_count\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(11, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":37,\"column\":10},\"end\":{\"line\":43,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"      </div>\\n    </div>\\n\\n\\n\\n    <div class=\\\"col-xs-5 col-sm-4 pull-right\\\">\\n        <div class=\\\"s-results-links\\\">\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"links\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(16, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":52,\"column\":12},\"end\":{\"line\":141,\"column\":19}}})) != null ? stack1 : \"\")\n    + \"      </div>\\n    </div>\\n\\n</div>\\n<div class=\\\"row\\\">\\n\\n    <div class=\\\"col-xs-10 col-xs-offset-1\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"isOrcidWidget\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(35, data, 0, blockParams, depths),\"inverse\":container.program(40, data, 0, blockParams, depths),\"data\":data,\"loc\":{\"start\":{\"line\":149,\"column\":8},\"end\":{\"line\":161,\"column\":15}}})) != null ? stack1 : \"\")\n    + \"    </div>\\n</div>\\n\\n<div class=\\\"row\\\">\\n    <div class=\\\"col-xs-10 col-xs-offset-1\\\">\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"isOrcidWidget\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(42, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":168,\"column\":8},\"end\":{\"line\":197,\"column\":19}}})) != null ? stack1 : \"\")\n    + \"\\n\\n    </div>\\n\\n</div>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"orcid\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(50, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":204,\"column\":1},\"end\":{\"line\":272,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"\\n    <div class=\\\"row highlight-row\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"showHighlights\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(76, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":275,\"column\":4},\"end\":{\"line\":294,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"    </div>\\n\\n    <div class=\\\"row abstract-row\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"showAbstract\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(85, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":298,\"column\":8},\"end\":{\"line\":318,\"column\":12}}})) != null ? stack1 : \"\")\n    + \"    </div>\\n</div>\\n\";\n},\"useData\":true,\"useDepths\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/list_of_things/templates/item-template.html?");

/***/ }),

/***/ "./src/js/widgets/list_of_things/templates/pagination-partial.html":
/*!*************************************************************************!*\
  !*** ./src/js/widgets/list_of_things/templates/pagination-partial.html ***!
  \*************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"            <i class=\\\"icon-loading\\\" aria-hidden=\\\"true\\\"></i>&nbsp;Loading more papers...\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"unless\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"error\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":0},\"end\":{\"line\":43,\"column\":11}}})) != null ? stack1 : \"\");\n},\"4\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"row\\\" style=\\\"margin: 0; position: relative\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"pageData\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":4},\"end\":{\"line\":40,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"    <button class=\\\"btn btn-link\\\" id=\\\"backToTopBtn\\\">Top <i class=\\\"fa fa-caret-up\\\" aria-hidden=\\\"true\\\"></i></button>\\n</div>\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.lambda, alias3=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <div class=\\\"col-sm-12 pagination-controls s-pagination-controls\\\">\\n        <div class=\\\"col-xs-5 per-page-container\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"pageData\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(6, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":14,\"column\":12},\"end\":{\"line\":27,\"column\":19}}})) != null ? stack1 : \"\")\n    + \"        </div>\\n        <div class=\\\"col-xs-7 pagination-container\\\">\\n            <nav aria-label=\\\"pagination controls\\\">\\n                <ul class=\\\"pager\\\">\\n                    <li class=\\\"\"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"pageData\") : depth0)) != null ? lookupProperty(stack1,\"previousPossible\") : stack1),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":32,\"column\":31},\"end\":{\"line\":32,\"column\":89}}})) != null ? stack1 : \"\")\n    + \"\\\"><a href=\\\"javascript:void(0)\\\" class=\\\"page-control previous-page\\\"><i class=\\\"fa fa-chevron-circle-left\\\" aria-hidden=\\\"true\\\"></i> prev</a></li>\\n                    <li><input type=\\\"text\\\" value=\\\"\"\n    + alias3(alias2(((stack1 = (depth0 != null ? lookupProperty(depth0,\"pageData\") : depth0)) != null ? lookupProperty(stack1,\"currentPage\") : stack1), depth0))\n    + \"\\\" class=\\\"form-control page-control\\\" style=\\\"display:inline-block;width:60px\\\" aria-label=\\\"set the current page\\\" aria-hidden=\\\"true\\\"> of \"\n    + alias3(alias2(((stack1 = (depth0 != null ? lookupProperty(depth0,\"pageData\") : depth0)) != null ? lookupProperty(stack1,\"totalPages\") : stack1), depth0))\n    + \"</li>\\n                    <li class=\\\"\"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"pageData\") : depth0)) != null ? lookupProperty(stack1,\"nextPossible\") : stack1),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":34,\"column\":31},\"end\":{\"line\":34,\"column\":85}}})) != null ? stack1 : \"\")\n    + \"\\\"><a href=\\\"javascript:void(0)\\\" class=\\\"page-control next-page\\\">next <i class=\\\"fa fa-chevron-circle-right\\\" aria-hidden=\\\"true\\\"></i></a></li>\\n                </ul>\\n            </nav>\\n\\n        </div>\\n    </div>\\n\";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <div class=\\\"form-group\\\">\\n              <label for=\\\"per-page-select\\\" class=\\\"col-xs-6 control-label\\\" style=\\\"line-height: 32px; text-align: right;\\\">Per Page</label>\\n              <div class=\\\"col-xs-6 col-sm-5\\\">\\n                <select name=\\\"per-page-select\\\" id=\\\"per-page-select\\\" class=\\\"form-control\\\">\\n                  <option value=\\\"25\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"pageData\") : depth0)) != null ? lookupProperty(stack1,\"perPage\") : stack1),25,{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":37},\"end\":{\"line\":19,\"column\":89}}})) != null ? stack1 : \"\")\n    + \">25</option>\\n                  <option value=\\\"50\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"pageData\") : depth0)) != null ? lookupProperty(stack1,\"perPage\") : stack1),50,{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":37},\"end\":{\"line\":20,\"column\":89}}})) != null ? stack1 : \"\")\n    + \">50</option>\\n                  <option value=\\\"100\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"pageData\") : depth0)) != null ? lookupProperty(stack1,\"perPage\") : stack1),100,{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":38},\"end\":{\"line\":21,\"column\":91}}})) != null ? stack1 : \"\")\n    + \">100</option>\\n                  <option value=\\\"200\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"pageData\") : depth0)) != null ? lookupProperty(stack1,\"perPage\") : stack1),200,{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":22,\"column\":38},\"end\":{\"line\":22,\"column\":91}}})) != null ? stack1 : \"\")\n    + \">200</option>\\n                  <option value=\\\"500\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"pageData\") : depth0)) != null ? lookupProperty(stack1,\"perPage\") : stack1),500,{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":23,\"column\":38},\"end\":{\"line\":23,\"column\":91}}})) != null ? stack1 : \"\")\n    + \">500</option>\\n                </select>\\n              </div>\\n            </div>\\n\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    return \"selected\";\n},\"9\":function(container,depth0,helpers,partials,data) {\n    return \" disabled \";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"row\\\">\\n    <div class=\\\"col-sm-12 page-loading\\\" style=\\\"text-align:center\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"loading\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":12},\"end\":{\"line\":5,\"column\":19}}})) != null ? stack1 : \"\")\n    + \"    </div>\\n</div>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"query\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":0},\"end\":{\"line\":44,\"column\":11}}})) != null ? stack1 : \"\");\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/list_of_things/templates/pagination-partial.html?");

/***/ }),

/***/ "./src/js/widgets/list_of_things/templates/results-container-template.html":
/*!*********************************************************************************!*\
  !*** ./src/js/widgets/list_of_things/templates/results-container-template.html ***!
  \*********************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <div>\\n      <h4 class=\\\"s-list-description\\\">\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"description\") : depth0), depth0))\n    + \"</h4>\\n    </div>\\n    \";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n    <div>\\n      <h2 class=\\\"s-article-title\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"title\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</h2>\\n    </div>\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"citation_discrepancy\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(6, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":43},\"end\":{\"line\":31,\"column\":11}}})) != null ? stack1 : \"\")\n    + \" \";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n    <div>\\n      <i class=\\\"fa fa-exclamation-triangle\\\" aria-hidden=\\\"true\\\"></i>\\n      This list is missing <b>\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"citation_discrepancy\") : depth0), depth0))\n    + \"</b> records, which could\\n      not be matched to papers in ADS.\\n    </div>\\n    <br />\\n    \";\n},\"8\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n    <div class=\\\"s-operator print-hidden\\\">\\n      <a href=\\\"\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"queryURL\") : depth0), depth0))\n    + \"\\\" class=\\\"btn btn-sm btn-inverse btn-primary-faded\\\"\\n        ><i class=\\\"fa fa-search\\\" aria-hidden=\\\"true\\\"></i> view this list in a\\n        search results page</a\\n      >\\n    </div>\\n\";\n},\"10\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \" \"\n    + ((stack1 = container.invokePartial(__webpack_require__(/*! ./pagination-partial.html */ \"./src/js/widgets/list_of_things/templates/pagination-partial.html\"),depth0,{\"name\":\"js/widgets/list_of_things/templates/pagination-partial\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \" \";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"s-list-controls\\\">\\n  <div class=\\\"s-results-border-bottom\\\">\\n    <div class=\\\"col-sm-1\\\"></div>\\n\\n    <div class=\\\"col-sm-6\\\"></div>\\n\\n    <div class=\\\"col-sm-4 sort-container\\\"></div>\\n\\n    <div class=\\\"col-sm-1\\\"></div>\\n  </div>\\n\\n  <div class=\\\"s-list-title\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"description\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":4},\"end\":{\"line\":17,\"column\":11}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"title\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":12},\"end\":{\"line\":21,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"\\n    <!--citation widget should show info if [citations] and citation_count don't match-->\\n    \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"queryOperator\") : depth0),\"citations\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":4},\"end\":{\"line\":31,\"column\":24}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"queryOperator\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(8, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":31,\"column\":25},\"end\":{\"line\":38,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"  </div>\\n\\n  <ul\\n    class=\\\"results-list  s-results-list list-unstyled s-display-block\\\"\\n    aria-label=\\\"list of results\\\"\\n  ></ul>\\n\\n  \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"pagination\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(10, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":46,\"column\":2},\"end\":{\"line\":47,\"column\":66}}})) != null ? stack1 : \"\")\n    + \"\\n</div>\\n\";\n},\"usePartial\":true,\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/list_of_things/templates/results-container-template.html?");

/***/ }),

/***/ "./src/js/widgets/list_of_things/widget.js":
/*!*************************************************!*\
  !*** ./src/js/widgets/list_of_things/widget.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! utils */ \"./src/js/utils.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var hbs_js_widgets_list_of_things_templates_item_template__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! hbs!js/widgets/list_of_things/templates/item-template */ \"./src/js/widgets/list_of_things/templates/item-template.html\");\n/* harmony import */ var hbs_js_widgets_list_of_things_templates_item_template__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_list_of_things_templates_item_template__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var hbs_js_widgets_list_of_things_templates_results_container_template__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! hbs!js/widgets/list_of_things/templates/results-container-template */ \"./src/js/widgets/list_of_things/templates/results-container-template.html\");\n/* harmony import */ var hbs_js_widgets_list_of_things_templates_results_container_template__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_list_of_things_templates_results_container_template__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var js_mixins_add_stable_index_to_collection__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js/mixins/add_stable_index_to_collection */ \"./src/js/mixins/add_stable_index_to_collection.js\");\n/* harmony import */ var js_widgets_list_of_things_model__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! js/widgets/list_of_things/model */ \"./src/js/widgets/list_of_things/model.js\");\n/* harmony import */ var js_widgets_list_of_things_paginated_view__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! js/widgets/list_of_things/paginated_view */ \"./src/js/widgets/list_of_things/paginated_view.js\");\n/**\n * This widget can paginate through a list of results. It can easily be inherited\n * by results widget ,table of contents widget, etc. It either listens to INVITING_REQUEST\n * in the case of the results widget, or the loadBibcode method (currently all other widgets).\n *\n * This widget consists of the following components:\n *\n * 1. a pagination view (you can choose from expanding view or paginated view [default])\n * 2. an associated pagination model (all pagination info is kept here and only here)\n * 3. a list view that listens to the visible records and renders them\n * 4. an item view for each record rendered repeatedly by the list view\n * 5. a controller that handles requesting and recieving data from pubsub and initializing everything\n *\n */\n\n\n\n\n\n\n\n\n\n\n\n\nvar ListOfThingsWidget = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_6__[\"default\"].extend({\n  initialize: function initialize(options) {\n    var _this = this;\n\n    options = options || {};\n\n    _.defaults(options, _.pick(this, ['view', 'collection', 'pagination', 'model', 'description', 'childView'])); // widget.reset will restore these default pagination settings\n    // for now, it doesn't make sense to pass them as options\n    // since localStorage perPage will override it anyway\n    // this functions as model.defaults while allowing the inheriting\n    // widgets to provide their own models with their own defaults\n\n\n    this.pagination = {\n      pagination: true,\n      // default per page : 25\n      perPage: 25,\n      numFound: undefined,\n      currentQuery: undefined,\n      start: 0,\n      pageData: undefined,\n      focusedIndex: -1\n    };\n    options.collection = options.collection || new js_widgets_list_of_things_model__WEBPACK_IMPORTED_MODULE_10__[\"default\"]();\n\n    if (!options.view) {\n      // operator instructs view to show a link that has citations:(bibcode) or something similar\n      options.view = new js_widgets_list_of_things_paginated_view__WEBPACK_IMPORTED_MODULE_11__[\"default\"]({\n        collection: options.collection,\n        model: options.model,\n        childView: options.childView\n      });\n    }\n\n    options.view.model.set(this.pagination, {\n      silent: true\n    });\n    options.view.model.set({\n      // for the template button that opens search in search results page\n      sortOrder: options.sortOrder,\n      removeSelf: options.removeSelf,\n      queryOperator: options.queryOperator,\n      description: options.description\n    }, {\n      silent: true\n    });\n\n    _.extend(this, {\n      model: options.view.model,\n      view: options.view\n    }); // this is the hidden collection (just to hold data)\n\n\n    this.hiddenCollection = new js_widgets_list_of_things_model__WEBPACK_IMPORTED_MODULE_10__[\"default\"](); // XXX:rca - start using modelEvents, instead of all....\n\n    this.listenTo(this.hiddenCollection, 'all', this.onAllInternalEvents);\n    this.listenTo(this.view, 'all', this.onAllInternalEvents);\n    this.on('all', this.onAllInternalEvents);\n    this.model.on('change:page', function () {\n      _this.model.set('focusedIndex', -1, {\n        silent: true\n      });\n    });\n    this.changePage = _.debounce(this.changePage.bind(this), 500);\n    js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_6__[\"default\"].prototype.initialize.call(this, options);\n  },\n  // this must be extended by inheriting widgets to listen to display events\n  activate: function activate(beehive) {\n    var _this2 = this;\n\n    this.setBeeHive(beehive);\n\n    _.bindAll(this, ['updatePaginationPreferences']);\n\n    var ps = this.getPubSub();\n\n    if (this.getBeeHive().getObject('User') && this.getBeeHive().getObject('User').getLocalStorage) {\n      var perPage = this.getBeeHive().getObject('User').getLocalStorage().perPage;\n\n      if (perPage) {\n        // set the pagination perPage value to whatever is in local storage,\n        // otherwise it will be the default val from the initialize function\n        this.pagination.perPage = perPage;\n        this.model.set(this.pagination);\n      }\n    }\n\n    ps.subscribe(ps.INVITING_REQUEST, function () {\n      _this2.updateState(_this2.STATES.LOADING);\n    });\n    this.activateWidget();\n    this.attachGeneralHandler(this.onApiFeedback);\n    ps.subscribe(ps.USER_ANNOUNCEMENT, this.updatePaginationPreferences);\n    ps.subscribe(ps.CUSTOM_EVENT, function (event) {\n      if (event === 'hotkey/next') {\n        _this2.changePage(1);\n      } else if (event === 'hotkey/prev') {\n        _this2.changePage(-1);\n      } else if (event === 'hotkey/item-next') {\n        _this2.changeItemFocus(1);\n      } else if (event === 'hotkey/item-prev') {\n        _this2.changeItemFocus(-1);\n      } else if (event === 'hotkey/item-select') {\n        _this2.selectItem();\n      }\n    });\n  },\n  selectItem: function selectItem() {\n    var idx = this.model.get('focusedIndex');\n\n    if (idx >= 0) {\n      var view = this.view.children.findByIndex(idx);\n\n      if (view && view.toggleSelect) {\n        view.toggleSelect();\n      }\n    }\n  },\n  changeItemFocus: function changeItemFocus(change) {\n    var len = this.view.children.length;\n    var focusedIndex = this.model.get('focusedIndex');\n\n    if (focusedIndex <= 0 && change === -1) {\n      focusedIndex = len - 1;\n    } else if (focusedIndex === len - 1 && change === 1) {\n      focusedIndex = 0;\n    } else {\n      focusedIndex += change;\n    }\n\n    this.model.set('focusedIndex', focusedIndex, {\n      silent: true\n    });\n    var view = this.view.children.findByIndex(focusedIndex);\n\n    if (view && view.el) {\n      $('>', view.el).focus();\n    }\n  },\n  changePage: function changePage(change) {\n    this.updatePagination({\n      page: (this.model.get('page') || 0) + change\n    });\n  },\n  onApiFeedback: function onApiFeedback(feedback) {\n    if (feedback.error) {\n      this.view.model.set('error', feedback.error);\n      this.updateState(this.STATES.ERRORED);\n    }\n  },\n  updatePaginationPreferences: function updatePaginationPreferences(event, data) {\n    if (event == 'user_info_change' && data.perPage && data.perPage !== this.pagination.perPage) {\n      // update per-page value\n      this.updatePagination({\n        perPage: data.perPage\n      });\n    }\n  },\n\n  /**\n   * Get the current query from either our own apiResponse or from\n   * the application local storage\n   *\n   * @param {ApiResponse} apiResponse - the response from the api\n   * @returns {string} - the query string\n   * @private\n   */\n  _getCurrentQueryString: function _getCurrentQueryString(apiResponse) {\n    var q = '';\n    var res = apiResponse || this.getBeeHive().getObject('AppStorage').getCurrentQuery(); // check for simbids\n\n    if (!_.isUndefined(res)) {\n      q = res.getApiQuery().get('q'); // if there is a simbid, look to see if there is a translated string\n\n      if (_.isEmpty(q) || q[0].indexOf('simbid') > -1) {\n        try {\n          q = [res.get('responseHeader.params.__original_query')];\n        } catch (err) {\n          // No original query present in responseHeader, this may be a biblib and not a solr request\n          q = '';\n        }\n      }\n    }\n\n    return q;\n  },\n  processResponse: function processResponse(apiResponse) {\n    var docs = this.extractDocs(apiResponse);\n    var numFound = apiResponse.has('response.numFound') ? apiResponse.get('response.numFound') : this.hiddenCollection.length;\n    var start = apiResponse.has('response.start') ? apiResponse.get('response.start') : this.model.get('start');\n    var pagination = this.getPaginationInfo(apiResponse, docs);\n    docs = this.processDocs(apiResponse, docs, pagination);\n    var self = this;\n\n    if (docs && docs.length) {\n      // make sure the new docs close highlights if they aren't there\n      var dummyElement = $('<textarea/>');\n\n      var newDocs = _.map(docs, function (d) {\n        if (d.highlights) {\n          d.highlights = d.highlights.map(function (h) {\n            return dummyElement.html(h).text();\n          }); // get the decoded html text\n        }\n\n        return _.extend(d, {\n          showHighlights: typeof d.highlights !== 'undefined',\n          showCheckbox: !!self.model.get('showCheckboxes')\n        });\n      });\n\n      this.hiddenCollection.add(newDocs, {\n        merge: true\n      }); // finally, if there aren't any highlights, close the button\n\n      var hasHighlights = this.hiddenCollection.filter(function (m) {\n        return m.get('highlights');\n      });\n\n      if (hasHighlights.length === 0) {\n        this.view.model.set('showHighlights', 'closed');\n      }\n\n      if (pagination.showRange) {\n        // we must update the model before updating collection because the showRange\n        // can automatically start fetching documents\n        this.model.set(pagination);\n        this.hiddenCollection.showRange(pagination.showRange[0], pagination.showRange[1]);\n      }\n\n      this.view.collection.reset(this.hiddenCollection.getVisibleModels());\n      this.view.model.set('query', false);\n    } else {\n      var params = apiResponse.get('responseHeader.params');\n      this.view.model.set({\n        isTugboat: !!params.__tb,\n        query: this._getCurrentQueryString(apiResponse),\n        currentQuery: apiResponse.getApiQuery()\n      });\n    } // XXX:rca - hack, to be solved later\n\n\n    this.trigger('page-manager-event', 'widget-ready', {\n      numFound: numFound\n    });\n    var allLoaded = this.model.has('perPage') && this.model.get('perPage') === this.collection.length;\n    var isLastPage = this.model.has('pageData') && this.model.get('pageData').nextPossible === false;\n    var noItems = this.view.collection.length === 0; // finally, loading view (from pagination template) can be removed or added\n\n    if (noItems || allLoaded || isLastPage && numFound <= start + docs.length) {\n      this.model.set('loading', false);\n      this.updateState(this.STATES.IDLE);\n    } else {\n      this.model.set('loading', true);\n    }\n  },\n  extractDocs: function extractDocs(apiResponse) {\n    var docs = apiResponse.get('response.docs');\n    docs = _.map(docs, function (d) {\n      d.all_ids = d.identifier;\n\n      if (d.bibcode) {\n        d.original_identifier = d.identifier;\n        d.identifier = d.bibcode ? d.bibcode : d.identifier;\n      }\n\n      return d;\n    });\n    return docs;\n  },\n  getPaginationInfo: function getPaginationInfo(apiResponse, docs) {\n    var q = apiResponse.getApiQuery(); // this information is important for calculation of pages\n\n    var numFound = apiResponse.get('response.numFound') || 0;\n    var perPage = this.model.get('perPage') || (q.has('rows') ? q.get('rows')[0] : 10);\n    var start = this.model.get('start') || 0; // compute the page number of this request\n\n    var page = js_mixins_add_stable_index_to_collection__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getPageVal(start, perPage); // compute which documents should be made visible\n\n    var showRange = [page * perPage, (page + 1) * perPage - 1]; // means that we were fetching the missing documents (to fill gaps in the collection)\n\n    var fillingGaps = q.has('__fetch_missing');\n\n    if (fillingGaps) {\n      return {\n        start: start,\n        showRange: showRange\n      };\n    }\n\n    var pageData = this._getPaginationData(page, perPage, numFound);\n\n    return {\n      numFound: numFound,\n      perPage: perPage,\n      start: start,\n      page: page,\n      showRange: showRange,\n      pageData: pageData,\n      currentQuery: q\n    };\n  },\n\n  /*\n   * data for the page numbers template at the bottom\n   * */\n  _getPaginationData: function _getPaginationData(page, perPage, numFound) {\n    // page is zero indexed\n    return {\n      // copying this here for convenience\n      perPage: perPage,\n      totalPages: Math.ceil(numFound / perPage),\n      currentPage: page + 1,\n      previousPossible: page > 0,\n      nextPossible: (page + 1) * perPage < numFound\n    };\n  },\n  processDocs: function processDocs(apiResponse, docs, paginationInfo) {\n    if (!apiResponse.has('response')) return [];\n    var params = apiResponse.get('response');\n    var start = params.start || paginationInfo.start || 0;\n    docs = js_mixins_add_stable_index_to_collection__WEBPACK_IMPORTED_MODULE_9__[\"default\"].addPaginationToDocs(docs, start);\n    return docs;\n  },\n  defaultQueryArguments: {\n    fl: 'id',\n    start: 0\n  },\n\n  /*\n   * right now only perPage value can be updated by list of things\n   * */\n  updateLocalStorage: function updateLocalStorage(options) {\n    // if someone has selected perPage, save it in to localStorage\n    if (options.hasOwnProperty('perPage') && _.contains([25, 50, 100, 200, 500], options.perPage)) {\n      this.getBeeHive().getObject('User').setLocalStorage({\n        perPage: options.perPage\n      });\n      console.log(\"set user's page preferences in localStorage: \" + options.perPage);\n    } // updatePagination will be called after localStorage triggers an event\n\n  },\n  updatePagination: function updatePagination(options) {\n    // update the current model based on the data passed in\n    var opts = _.defaults({}, options, {\n      silentIndexUpdate: false,\n      updateHash: true\n    });\n\n    var currentPageData = this.model.get('pageData');\n    var start = this.model.get('start');\n    var update = {};\n    var currentQuery = this.model.get('currentQuery') || new js_components_api_query__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\n    var pageParam = currentQuery.get('p_'); // add numFound\n\n    if (_.isNumber(opts.numFound)) {\n      update.numFound = opts.numFound;\n    } // add perPage\n\n\n    if (_.isNumber(opts.perPage)) {\n      update.perPage = opts.perPage; // update the pagination object\n\n      this.pagination.perPage = opts.perPage;\n    } // if page isn't specified, check the location hash\n\n\n    if (_.isArray(pageParam) && _.isUndefined(opts.page)) {\n      try {\n        opts.page = parseInt(pageParam[0]);\n      } catch (e) {// do nothing\n      }\n    } // check to make sure this page update is valid, and add to update\n\n\n    if (_.isNumber(opts.page)) {\n      var max = currentPageData && currentPageData.totalPages - 1 || 1;\n      var min = 0; // check if page is within our set boundaries\n\n      if (opts.page > max) {\n        update.page = max;\n      } else if (opts.page < min) {\n        update.page = min;\n      } else {\n        update.page = opts.page;\n      }\n    } else {\n      // otherwise compute the page using the start and perPage value\n      if (_.isEmpty(this.collection.models) && _.isNumber(start) && _.isNumber(opts.perPage)) {\n        update.page = js_mixins_add_stable_index_to_collection__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getPageVal(start, opts.perPage);\n      } else if (_.isNumber(start) && _.isNumber(opts.perPage)) {\n        var resIdx = this.collection.models[0].get('resultsIndex');\n        update.page = js_mixins_add_stable_index_to_collection__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getPageVal(resIdx, opts.perPage);\n      }\n    }\n\n    var page = _.isNumber(update.page) ? update.page : this.model.get('page');\n    var perPage = _.isNumber(update.perPage) ? update.perPage : this.model.get('perPage');\n    var numFound = _.isNumber(update.numFound) ? update.numFound : this.model.get('numFound'); // once the hash is updated, this is called again, return here so we don't recompute, and only on results page\n\n    var frag = (backbone__WEBPACK_IMPORTED_MODULE_1___default().history) && (backbone__WEBPACK_IMPORTED_MODULE_1___default().history).getFragment && backbone__WEBPACK_IMPORTED_MODULE_1___default().history.getFragment();\n\n    if ('' + page !== (_.isArray(pageParam) && pageParam[0]) && opts.updateHash && /search/.test(frag) && utils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].qs('p_', frag) !== '' + page) {\n      (backbone__WEBPACK_IMPORTED_MODULE_1___default().history) && (backbone__WEBPACK_IMPORTED_MODULE_1___default().history).navigate && backbone__WEBPACK_IMPORTED_MODULE_1___default().history.navigate(utils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateHash('p_', page, frag));\n    } // compute the new start and pageData values\n\n\n    update.start = this.getPageStart(page, perPage, numFound);\n    update.pageData = this._getPaginationData(page, perPage, numFound);\n    update.showRange = [page * perPage, page * perPage + perPage - 1]; // start updating\n\n    this.model.set(update);\n    this.view.render();\n    this.hiddenCollection.showRange(update.showRange[0], update.showRange[1], {\n      silent: !!opts.silentIndexUpdate\n    });\n    this.collection.reset(this.hiddenCollection.getVisibleModels()); // finally, scroll back to the top\n\n    $(document.documentElement).scrollTop(0);\n  },\n  onAllInternalEvents: function onAllInternalEvents(ev, arg1, arg2) {\n    // for testing, allow widget to not have been activated\n    try {\n      var pubsub = this.getPubSub();\n    } catch (e) {}\n\n    if (ev === 'pagination:changePerPage') {\n      this.updateLocalStorage({\n        perPage: arg1\n      });\n      this.updatePagination({\n        page: 0,\n        perPage: arg1\n      });\n      this.view.model.set('showHighlights', 'closed');\n    } else if (ev === 'pagination:select') {\n      this.view.model.set('showHighlights', 'closed');\n      return this.updatePagination({\n        page: arg1\n      });\n    } else if (ev === 'show:missing') {\n      _.each(arg1, function (gap) {\n        var numFound = this.model.get('numFound');\n        var start = gap.start;\n        var perPage = this.model.get('perPage');\n        var currStart = this.model.get('start');\n        if (!numFound || start >= numFound || start !== currStart && currStart > 0) return; // ignore this\n\n        var q = this.model.get('currentQuery').clone();\n        q.unset('hl');\n        q.unset('hl.fl');\n        q.unset('hl.maxAnalyzedChars');\n        q.unset('hl.requireFieldMatch');\n        q.unset('hl.usePhraseHighlighter');\n        q.set('__fetch_missing', 'true');\n        q.set('start', start);\n        q.set('rows', perPage - start <= 0 ? perPage : perPage - start);\n        var req = this.composeRequest(q); // allows widgets to override if necessary\n\n        this.executeRequest(req);\n      }, this);\n    } else if (ev == 'childview:toggleSelect') {\n      pubsub.publish(pubsub.PAPER_SELECTION, arg2.data.identifier);\n    } else if (ev === 'toggle-highlights') {\n      this.loadHighlights();\n    }\n  },\n\n  /**\n   * create and run the highlights fetch request\n   * @param {Object} options\n   * @param {number} options.start\n   * @param {number} options.rows\n   */\n  fetchHighlights: function fetchHighlights(_ref) {\n    var start = _ref.start,\n        rows = _ref.rows;\n    var q = this.model.get('currentQuery').clone();\n    q.set({\n      hl: 'true',\n      'hl.fl': 'title,abstract,body,ack,*',\n      'hl.maxAnalyzedChars': '150000',\n      'hl.requireFieldMatch': 'true',\n      'hl.usePhraseHighlighter': 'true',\n      start: start,\n      rows: rows\n    });\n    var req = this.composeRequest(q);\n    this.executeRequest(req);\n  },\n  loadHighlights: function loadHighlights() {\n    var _this$hiddenCollectio = this.hiddenCollection,\n        currentEndIndex = _this$hiddenCollectio.currentEndIndex,\n        start = _this$hiddenCollectio.currentStartIndex;\n    var totalToGet = currentEndIndex - start + 1; // for larger sets, always grab the first 25 as a separate request\n\n    if (totalToGet > 25) {\n      this.fetchHighlights({\n        start: start,\n        rows: 25\n      });\n      this.fetchHighlights({\n        start: start + 25,\n        rows: totalToGet - 25\n      });\n    } else {\n      this.fetchHighlights({\n        start: start,\n        rows: totalToGet\n      });\n    }\n  },\n  executeRequest: function executeRequest(req) {\n    this.getPubSub().publish(this.getPubSub().EXECUTE_REQUEST, req);\n  },\n  reset: function reset() {\n    this.collection.reset();\n    this.hiddenCollection.reset(); // reset the model, favoring values in this.pagination\n\n    this.model.set(_.defaults({\n      currentQuery: this.getCurrentQuery(),\n      query: false\n    }, this.pagination, this.model.defaults()));\n  }\n});\n\n_.extend(ListOfThingsWidget.prototype, js_mixins_add_stable_index_to_collection__WEBPACK_IMPORTED_MODULE_9__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ListOfThingsWidget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/list_of_things/widget.js?");

/***/ }),

/***/ "./src/js/widgets/navbar/template/feedback.html":
/*!******************************************************!*\
  !*** ./src/js/widgets/navbar/template/feedback.html ***!
  \******************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"modal fade\\\" id=\\\"feedback-modal\\\">\\n  <div class=\\\"modal-dialog\\\">\\n    <div class=\\\"modal-content\\\">\\n      <div class=\\\"modal-header\\\">\\n        <button\\n          type=\\\"button\\\"\\n          class=\\\"close\\\"\\n          data-dismiss=\\\"modal\\\"\\n          aria-label=\\\"Close\\\"\\n        >\\n          <span aria-hidden=\\\"true\\\">&times;</span>\\n        </button>\\n        <p class=\\\"modal-title\\\">\\n          <span class=\\\"btn-group\\\" id=\\\"feedback-back-btn\\\" style=\\\"display: none\\\">\\n            <button class=\\\"btn btn-sm btn-default\\\">\\n              <i class=\\\"fa fa-chevron-left\\\" aria-hidden=\\\"true\\\"></i> Back\\n            </button>\\n          </span>\\n          <span id=\\\"feedback-modal-title\\\">How may we help you?</span>\\n        </p>\\n      </div>\\n      <div class=\\\"modal-body\\\">\\n        <div class=\\\"list-group\\\" id=\\\"feedback-select-group\\\">\\n          <a\\n            href=\\\"/feedback/correctabstract\\\"\\n            id=\\\"feedback_submit_abstract_link\\\"\\n            class=\\\"list-group-item\\\"\\n          >\\n            <h4>Missing/Incorrect Record</h4>\\n            <p>Submit a missing record or correct an existing record.</p>\\n          </a>\\n          <a\\n            href=\\\"/feedback/missingreferences\\\"\\n            class=\\\"list-group-item\\\"\\n          >\\n            <h4>Missing References</h4>\\n            <p>Submit missing references to an existing ADS record.</p>\\n          </a>\\n          <a\\n            href=\\\"/feedback/associatedarticles\\\"\\n            class=\\\"list-group-item\\\"\\n          >\\n            <h4>Associated Articles</h4>\\n            <p>\\n              Submit associated articles to an existing record (e.g. arXiv /\\n              published paper).\\n            </p>\\n          </a>\\n          <a\\n            href=\\\"javascript:void(0);\\\"\\n            class=\\\"list-group-item\\\"\\n            id=\\\"open-general-feedback\\\"\\n          >\\n            <h4>General Feedback</h4>\\n            <p>Send your comments and suggestions for improvements.</p>\\n          </a>\\n        </div>\\n        <form\\n          id=\\\"feedback-general-form\\\"\\n          class=\\\"feedback-form\\\"\\n          style=\\\"display: none\\\"\\n        >\\n          <input type=\\\"hidden\\\" name=\\\"_subject\\\" value=\\\"Bumblebee Feedback\\\"/>\\n          <input type=\\\"hidden\\\" name=\\\"feedback-type\\\" value=\\\"feedback\\\"/>\\n\\n          <input type=\\\"text\\\" name=\\\"_gotcha\\\" style=\\\"display:none\\\"/>\\n\\n          <div class=\\\"form-group half-width\\\">\\n            <label>\\n              Name\\n              <input\\n                class=\\\"form-control\\\"\\n                type=\\\"text\\\"\\n                name=\\\"name\\\"\\n                required\\n                autofocus\\n              />\\n            </label>\\n          </div>\\n          <div class=\\\"form-group half-width\\\">\\n            <label>\\n              Email\\n              <input\\n                class=\\\"form-control\\\"\\n                type=\\\"email\\\"\\n                name=\\\"_replyto\\\"\\n                required\\n              />\\n            </label>\\n          </div>\\n\\n          <div class=\\\"form-group\\\">\\n            <label\\n            >Feedback <br/>\\n              <textarea\\n                rows=\\\"8\\\"\\n                cols=\\\"50\\\"\\n                name=\\\"comments\\\"\\n                required\\n                style=\\\"min-width: 500px; min-height: 180px\\\"\\n              />\\n            </label>\\n          </div>\\n          <div class=\\\"form-group\\\">\\n            <button class=\\\"btn btn-success\\\" type=\\\"submit\\\" value=\\\"Send\\\">\\n              Submit\\n            </button>\\n          </div>\\n\\n          <div class=\\\"form-group\\\">\\n            <p class=\\\"alert alert-info text-center\\\">\\n              You can also reach us at\\n              <span class=\\\"s-text-bold\\\">adshelp [at] cfa.harvard.edu</span>\\n            </p>\\n          </div>\\n          <input type=\\\"hidden\\\" name=\\\"origin\\\" value=\\\"bbb_feedback\\\">\\n          <div class=\\\"form-group\\\">\\n            <div class=\\\"g-recaptcha\\\">\\n              <small class=\\\"recaptcha-msg\\\">This site is protected by reCAPTCHA and the Google\\n                <a href=\\\"https://policies.google.com/privacy\\\" target=\\\"_blank\\\" rel=\\\"noreferrer\\\">Privacy Policy</a> and\\n                <a href=\\\"https://policies.google.com/terms\\\" target=\\\"_blank\\\" rel=\\\"noreferrer\\\">Terms of Service</a> apply.</small>\\n            </div>\\n          </div>\\n        </form>\\n      </div>\\n      <div class=\\\"modal-footer\\\">\\n        <button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\">\\n          Close without submitting\\n        </button>\\n      </div>\\n    </div>\\n    <!-- /.modal-content -->\\n  </div>\\n  <!-- /.modal-dialog -->\\n</div>\\n<!-- /.modal -->\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/navbar/template/feedback.html?");

/***/ }),

/***/ "./src/js/widgets/navbar/template/navbar.html":
/*!****************************************************!*\
  !*** ./src/js/widgets/navbar/template/navbar.html ***!
  \****************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"            <a class=\\\"navbar-brand s-navbar-brand\\\" href=\\\"#\\\">\\n                <img class=\\\"s-ads-icon\\\" src=\\\"/styles/img/transparent_logo.svg\\\" alt=\\\"Astrophysics Data System Home Page\\\"/>\\n                <h1 style=\\\"font-weight: bold;\\\">ads</h1>\\n            </a>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \"            <div class=\\\"s-hourly-warning\\\">\\n                <a class=\\\"navbar-brand s-navbar-brand\\\" href=\\\"#\\\"><i class=\\\"icon-danger fa-2x\\\" aria-hidden=\\\"true\\\"></i> ADS TEST</a>\\n                <span> Nothing you do here will be saved!  <a href=\\\"/\\\">I want the real ADS <i class=\\\"fa fa-arrow-right\\\" aria-hidden=\\\"true\\\"></i></a>\\n                </span>\\n            </div>\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"orcidModeOn\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(6, data, 0),\"inverse\":container.program(12, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":50,\"column\":20},\"end\":{\"line\":131,\"column\":27}}})) != null ? stack1 : \"\")\n    + \"                <!--end \\\"if/else orcidModeOn\\\"-->\\n\\n\";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n                <li class=\\\"dropdown orcid-dropdown s-orcid-dropdown\\\">\\n                    <button class=\\\"btn btn-link dropdown-toggle\\\" data-toggle=\\\"dropdown\\\" aria-expanded=\\\"false\\\">\\n                        <span class=\\\"s-orcid-title\\\">\\n                         <img src=\\\"../../styles/img/orcid-active.svg\\\" alt=\\\"orcid symbol\\\"/>\\n                            ORCID\\n                            <span class=\\\"caret\\\"></span></button>\\n                    <ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\">\\n                        <li class=\\\"no-hover-style\\\">\\n                            \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"orcidFirstName\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":60,\"column\":28},\"end\":{\"line\":60,\"column\":178}}})) != null ? stack1 : \"\")\n    + \"\\n                            <div class=\\\"s-orcid-mode-label\\\" style=\\\"font-weight: bold;\\\">ORCID Mode</div>\\n                            <div class=\\\"s-orcid-label-container\\\">\\n                                off\\n                                <div class=\\\"switch\\\">\\n                                    <input id=\\\"cmn-toggle-1\\\" class=\\\"cmn-toggle cmn-toggle-round orcid-mode\\\" type=\\\"checkbox\\\" checked=\\\"checked\\\">\\n                                    <label for=\\\"cmn-toggle-1\\\"></label>\\n                                </div>\\n                                on\\n                            </div>\\n                        </li>\\n\\n                        <li class=\\\"divider\\\"></li>\\n                        <li>\\n                            <a class=\\\"orcid-link\\\" href=\\\"#user/orcid\\\" >View my ORCID papers in ADS </a>\\n                        </li>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"orcidURI\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(10, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":76,\"column\":24},\"end\":{\"line\":80,\"column\":31}}})) != null ? stack1 : \"\")\n    + \"                        <li>\\n                            <a href=\\\"#orcid-instructions\\\"> <i class=\\\"fa fa-info-circle\\\" aria-hidden=\\\"true\\\"></i> Learn how to make ORCID claims using ADS</a>\\n                        </li>\\n                        <li class=\\\"divider\\\"></li>\\n                        <li>\\n                            <a href=\\\"javascript:void(0)\\\" class=\\\"orcid-logout\\\" >Log out from ORCID in ADS</a>\\n                        <li>\\n\\n                    </ul>\\n                </li>\\n\\n\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" <h4> Signed in to ORCID as <br/> <strong>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"orcidFirstName\") || (depth0 != null ? lookupProperty(depth0,\"orcidFirstName\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(alias1,{\"name\":\"orcidFirstName\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":60,\"column\":92},\"end\":{\"line\":60,\"column\":110}}}) : helper)))\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"orcidLastName\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(8, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":60,\"column\":111},\"end\":{\"line\":60,\"column\":156}}})) != null ? stack1 : \"\")\n    + \"</strong></h4> \";\n},\"8\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"orcidLastName\") || (depth0 != null ? lookupProperty(depth0,\"orcidLastName\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"orcidLastName\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":60,\"column\":132},\"end\":{\"line\":60,\"column\":149}}}) : helper)));\n},\"10\":function(container,depth0,helpers,partials,data) {\n    return \"                        <li>\\n                            <a href=\\\"https://orcid.org/my-orcid\\\" target=\\\"_blank\\\" rel=\\\"noreferrer noopener\\\" >View my ORCID profile on orcid.org </a>\\n                        </li>\\n\";\n},\"12\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n                <li class=\\\"dropdown orcid-dropdown s-orcid-dropdown\\\">\\n                    <button class=\\\"btn btn-link dropdown-toggle\\\" data-toggle=\\\"dropdown\\\" aria-expanded=\\\"false\\\">\\n                        <span class=\\\"s-orcid-title\\\"> <img src=\\\"../../styles/img/orcid-inactive.svg\\\"\\n                                                          alt=\\\"orcid symbol\\\"/> ORCID  <span class=\\\"caret\\\"></span></button>\\n                    <ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\">\\n                        <li class=\\\"no-hover-style\\\">\\n                            \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"orcidFirstName\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":100,\"column\":28},\"end\":{\"line\":100,\"column\":178}}})) != null ? stack1 : \"\")\n    + \"\\n                            <div class=\\\"s-orcid-mode-label\\\" style=\\\"font-weight: bold;\\\">ORCID Mode</div>\\n                            <div class=\\\"s-orcid-label-container\\\">\\n                                off\\n                                <div class=\\\"switch clearfix\\\">\\n                                    <input id=\\\"cmn-toggle-1\\\" class=\\\"cmn-toggle cmn-toggle-round orcid-mode\\\" type=\\\"checkbox\\\">\\n                                    <label for=\\\"cmn-toggle-1\\\"></label>\\n                                </div>\\n                                on\\n                            </div>\\n                        </li>\\n                        <li style=\\\"clear:both\\\" class=\\\"no-hover-style\\\">You have turned off the ORCID view for the ADS search results page, but are still logged in.</li>\\n                        <li class=\\\"divider\\\"></li>\\n                        <li>\\n                            <a class=\\\"orcid-link\\\" href=\\\"#user/orcid\\\" > View my ORCID papers in ADS</a>\\n                        </li>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"orcidURI\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(10, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":116,\"column\":24},\"end\":{\"line\":120,\"column\":31}}})) != null ? stack1 : \"\")\n    + \"                        <li>\\n                            <a href=\\\"#orcid-instructions\\\"> <i class=\\\"fa fa-info-circle\\\" aria-hidden=\\\"true\\\"></i> Learn how to claim ORCID papers</a>\\n                        </li>\\n                        <li class=\\\"divider\\\"></li>\\n                        <li>\\n                            <a class=\\\"orcid-logout\\\" >Log out from ORCID</a>\\n                        </li>\\n                    </ul>\\n                </li>\\n\\n\";\n},\"14\":function(container,depth0,helpers,partials,data) {\n    return \"\\n                <li class=\\\"dropdown orcid-dropdown s-orcid-dropdown\\\">\\n                    <button class=\\\"btn dropdown-toggle btn-link\\\" data-toggle=\\\"dropdown\\\" aria-expanded=\\\"false\\\">\\n                        <span class=\\\"s-orcid-title\\\"> <img src=\\\"../../styles/img/orcid-inactive.svg\\\"\\n                                                          alt=\\\"orcid symbol\\\"/>  ORCID  <span class=\\\"caret\\\"></span></button>\\n                    <ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\">\\n                      <li class=\\\"no-hover-style\\\">\\n                        <a href=\\\"javascript:void(0);\\\" class=\\\"orcid-sign-in\\\">Sign in to ORCID to claim papers in the ADS.</a>\\n                      </li>\\n                    </ul>\\n                </li>\\n\\n                <!--end \\\"if/else orcidLoggedIn\\\"-->\\n\\n\";\n},\"16\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n                <!-- Single button -->\\n                <li class=\\\"dropdown account-dropdown\\\">\\n                    <button type=\\\"button\\\" class=\\\"btn btn-link dropdown-toggle\\\" data-toggle=\\\"dropdown\\\" aria-expanded=\\\"false\\\">\\n                     <i class=\\\"fa fa-user\\\" aria-hidden=\\\"true\\\"></i> Account <span class=\\\"caret\\\"></span>\\n                    </button>\\n                    <ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\">\\n                        <li class=\\\"no-hover-style\\\" style=\\\"padding:15px 10px;\\\">You are signed in as <br/> <span class=\\\"s-text-bold\\\">\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"currentUser\") || (depth0 != null ? lookupProperty(depth0,\"currentUser\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"currentUser\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":174,\"column\":131},\"end\":{\"line\":174,\"column\":146}}}) : helper)))\n    + \"</span></li>\\n                        <li><a href=\\\"#user/libraries\\\"> <i class=\\\"fa fa-book\\\" aria-hidden=\\\"true\\\"></i> ADS Libraries</a></li>\\n                        <li><a href=\\\"#user/settings\\\"> <i class=\\\"fa fa-cog\\\" aria-hidden=\\\"true\\\"></i> Settings</a></li>\\n                        <li class=\\\"divider\\\"></li>\\n                        <li><a href=\\\"javascript:void(0)\\\" class=\\\"logout\\\">Log Out</a></li>\\n                    </ul>\\n                </li>\\n\\n\";\n},\"18\":function(container,depth0,helpers,partials,data) {\n    return \"                <li class=\\\"register\\\"><a href=\\\"#user/account/register\\\">Sign Up</a></li>\\n                <li class=\\\"login\\\"><a href=\\\"#user/account/login\\\">Log In</a></li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<nav class=\\\"navbar fluid navbar-inverse\\\" aria-label=\\\"main navigation\\\">\\n        <!-- Brand and toggle get grouped for better mobile display -->\\n        <div class=\\\"navbar-header\\\">\\n            <button type=\\\"button\\\" class=\\\"navbar-toggle\\\" data-toggle=\\\"collapse\\\"\\n                    data-target=\\\"#bs-example-navbar-collapse-1\\\">\\n                <span class=\\\"sr-only\\\">Toggle navigation</span>\\n                <span class=\\\"icon-bar\\\" aria-hidden=\\\"true\\\"></span>\\n                <span class=\\\"icon-bar\\\" aria-hidden=\\\"true\\\"></span>\\n                <span class=\\\"icon-bar\\\" aria-hidden=\\\"true\\\"></span>\\n            </button>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"hourly\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":12},\"end\":{\"line\":22,\"column\":23}}})) != null ? stack1 : \"\")\n    + \"        </div>\\n\\n        <!-- Collect the nav links, forms, and other content for toggling -->\\n        <div class=\\\"collapse navbar-collapse\\\" id=\\\"bs-example-navbar-collapse-1\\\">\\n\\n            <ul class=\\\"nav navbar-nav navbar-right\\\">\\n\\n                <li class=\\\"dropdown\\\">\\n                  <button type=\\\"button\\\" class=\\\"btn btn-link dropdown-toggle feedback-button\\\" data-toggle=\\\"dropdown\\\" aria-expanded=\\\"false\\\">\\n                    <i class=\\\"fa fa-comment feedback-icon\\\" aria-hidden=\\\"true\\\"></i> Feedback <span class=\\\"caret\\\"></span>\\n                  </button>\\n                  <ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\">\\n                    <li>\\n                      <a href=\\\"javascript:void(0);\\\" data-target=\\\"#feedback-modal\\\" data-toggle=\\\"modal\\\" data-feedback-view=\\\"list\\\">\\n                        <i class=\\\"fa fa-pencil\\\" aria-hidden=\\\"true\\\"></i> Submit Updates\\n                      </a>\\n                    </li>\\n                    <li>\\n                      <a href=\\\"javascript:void(0);\\\" data-target=\\\"#feedback-modal\\\" data-toggle=\\\"modal\\\" data-feedback-view=\\\"general\\\">\\n                        <i class=\\\"fa fa-envelope\\\" aria-hidden=\\\"true\\\"></i> General Feedback\\n                      </a>\\n                    </li>\\n                  </ul>\\n                </li>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"orcidLoggedIn\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.program(14, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":48,\"column\":16},\"end\":{\"line\":149,\"column\":23}}})) != null ? stack1 : \"\")\n    + \"\\n                <li class=\\\"dropdown\\\">\\n                    <button type=\\\"button\\\" class=\\\"btn btn-link dropdown-toggle\\\" data-toggle=\\\"dropdown\\\" aria-expanded=\\\"false\\\">\\n                      <i class=\\\"fa fa-question-circle about-page-icon\\\" aria-hidden=\\\"true\\\"></i> About <span class=\\\"caret\\\"></span>\\n                    </button>\\n                    <ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\">\\n                        <li> <a href=\\\"/about/\\\" target=\\\"_blank\\\" rel=\\\"noreferrer noopener\\\"> <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i> About ADS </a></li>\\n                        <li> <a href=\\\"/help/whats_new/\\\" target=\\\"_blank\\\" rel=\\\"noreferrer noopener\\\"> <i class=\\\"fa fa-bullhorn\\\" aria-hidden=\\\"true\\\"></i> What's New </a></li>\\n                        <li> <a href=\\\"/blog/\\\" target=\\\"_blank\\\" rel=\\\"noreferrer noopener\\\"> <i class=\\\"fa fa-newspaper-o\\\" aria-hidden=\\\"true\\\"></i> ADS Blog </a></li>\\n                        <li> <a href=\\\"/help/\\\" target=\\\"_blank\\\" rel=\\\"noreferrer noopener\\\"> <i class=\\\"fa fa-info-circle\\\" aria-hidden=\\\"true\\\"></i> ADS Help Pages </a></li>\\n\t\t\t\t\t\t            <li> <a href=\\\"/help/legacy/\\\" target=\\\"_blank\\\" rel=\\\"noreferrer noopener\\\"> <i class=\\\"fa fa-archive\\\" aria-hidden=\\\"true\\\"></i> ADS Legacy Services </a></li>\\n                        <li> <a href=\\\"/about/careers/\\\" target=\\\"_blank\\\" rel=\\\"noreferrer noopener\\\"> <i class=\\\"fa fa-group\\\" aria-hidden=\\\"true\\\"></i> Careers@ADS </a></li>\\n                    </ul>\\n                </li>\\n\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"currentUser\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(16, data, 0),\"inverse\":container.program(18, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":166,\"column\":16},\"end\":{\"line\":185,\"column\":23}}})) != null ? stack1 : \"\")\n    + \"\\n            </ul>\\n\\n        </div>\\n        <!-- /.navbar-collapse -->\\n    </div>\\n</nav>\\n<!-- /.container-fluid -->\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/navbar/template/navbar.html?");

/***/ }),

/***/ "./src/js/widgets/navbar/widget.js":
/*!*****************************************!*\
  !*** ./src/js/widgets/navbar/widget.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var hbs_js_widgets_navbar_template_navbar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! hbs!js/widgets/navbar/template/navbar */ \"./src/js/widgets/navbar/template/navbar.html\");\n/* harmony import */ var hbs_js_widgets_navbar_template_navbar__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_navbar_template_navbar__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var hbs_js_widgets_navbar_template_feedback__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! hbs!js/widgets/navbar/template/feedback */ \"./src/js/widgets/navbar/template/feedback.html\");\n/* harmony import */ var hbs_js_widgets_navbar_template_feedback__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_navbar_template_feedback__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/api_query_updater */ \"./src/js/components/api_query_updater.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! utils */ \"./src/js/utils.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! bootstrap */ \"./src/libs/bootstrap/bootstrap.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_10__);\n\n\n\n\n\n\n\n\n\n\n\nvar NavView;\nvar NavModel;\nvar NavWidget;\nNavModel = Backbone.Model.extend({\n  defaults: function defaults() {\n    return {\n      orcidModeOn: false,\n      orcidLoggedIn: false,\n      currentUser: undefined,\n      orcidFirstName: undefined,\n      orcidLastName: undefined,\n      // should it show hourly banner?\n      hourly: false,\n      timeout: 600000 // 10 minutes\n\n    };\n  }\n});\nNavView = marionette__WEBPACK_IMPORTED_MODULE_1___default().ItemView.extend({\n  initialize: function initialize() {\n    if (!window.__BUMBLEBEE_TESTING_MODE__) {\n      this.onRender = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debounce(this.onRender, 500);\n    }\n  },\n  template: (hbs_js_widgets_navbar_template_navbar__WEBPACK_IMPORTED_MODULE_3___default()),\n  modelEvents: {\n    change: 'render'\n  },\n  events: {\n    'click .orcid-dropdown ul': 'stopPropagation',\n    'click a.orcid-sign-in': 'orcidSignIn',\n    'change .orcid-mode': 'changeOrcidMode',\n    // to avoid stopPropagation as in triggers hash\n    'click .orcid-link': function clickOrcidLink() {\n      this.trigger('navigate-to-orcid-link');\n    },\n    'click .orcid-logout': function clickOrcidLogout(e) {\n      this.trigger('logout-only-orcid');\n      return false;\n    },\n    'click .logout': function clickLogout(e) {\n      this.trigger('logout');\n      return false;\n    },\n    'click .login': function clickLogin() {\n      this.trigger('navigate-login');\n    },\n    'click .register': function clickRegister() {\n      this.trigger('navigate-register');\n    },\n    'click button.search-author-name': function clickButtonSearchAuthorName(e) {\n      this.trigger('search-author');\n    }\n  },\n  stopPropagation: function stopPropagation(e) {\n    if (e.target.tagName.toLowerCase() == 'button' || e.target.tagName.toLowerCase() == 'a' || e.target.tagName.toLowerCase() == 'code') {\n      return true;\n    }\n\n    e && e.stopPropagation && e.stopPropagation();\n  },\n  orcidSignIn: function orcidSignIn() {\n    this.model.set('orcidModeOn', true); // need to explicitly trigger to widget that this has changed\n    // otherwise it will be ignored, since it can also be changed\n    // from outside\n\n    this.trigger('user-change-orcid-mode');\n  },\n  changeOrcidMode: function changeOrcidMode(ev) {\n    var checked = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isBoolean(ev) ? ev : ev && ev.currentTarget && ev.currentTarget.checked;\n    this.model.set('orcidModeOn', checked);\n    this.trigger('user-change-orcid-mode');\n    this.render();\n  },\n  _hiddenTmpl: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].template('<input type=\"hidden\" name=\"<%= name %>\" value=\"<%= value %>\" />'),\n  // appends a hidden input to the general form\n  appendToForm: function appendToForm(name, value) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isUndefined(value)) {\n      return;\n    }\n\n    var $form = $('#feedback-general-form', '#feedback-modal');\n    var $el = $(\"input[type=hidden][name=\\\"\".concat(name, \"\\\"]\"), $form); // check if the element exists\n\n    if ($el.length > 0) {\n      // update the value\n      $el.attr('value', value);\n    } else {\n      // no element exists, create a new one\n      $form.append(this._hiddenTmpl({\n        name: name,\n        value: value\n      }));\n    }\n  },\n  onRender: function onRender() {\n    var _this = this;\n\n    // only append a single time\n    if ($('#feedback-modal').length === 0) {\n      $('body').append(hbs_js_widgets_navbar_template_feedback__WEBPACK_IMPORTED_MODULE_4___default()());\n    }\n\n    var $modal = $('#feedback-modal');\n    var $modalTitle = $('#feedback-modal-title', $modal);\n    var $optionList = $('#feedback-select-group', $modal);\n    var $generalForm = $('#feedback-general-form', $modal);\n    var $feedbackBackBtn = $('#feedback-back-btn', $modal);\n    var $submitAbstractLink = $('a#feedback_submit_abstract_link', $optionList);\n\n    var showListView = function showListView() {\n      $optionList.show();\n      $generalForm.hide();\n      $feedbackBackBtn.hide();\n      $modalTitle.text('How may we help you today?');\n    };\n\n    var hideListView = function hideListView() {\n      $optionList.hide();\n      $generalForm.show();\n      $modalTitle.text('General Feedback');\n      $feedbackBackBtn.show();\n      $feedbackBackBtn.off().click(function () {\n        return showListView();\n      });\n      $modal.one('shown.bs.modal', function () {\n        $('input[name=name]', $generalForm).focus();\n      });\n    };\n\n    $modal.on('hidden.bs.modal', function () {\n      $('input, textarea', $modal).val('');\n      var $fg = $('button[type=submit]', $modal).closest('.form-group');\n      $fg.html('<button class=\"btn btn-success\" type=\"submit\" value=\"Send\">Submit</button>');\n      showListView();\n    }); // run just before showing the modal\n\n    $modal.on('show.bs.modal', function (e) {\n      // grab view if available\n      var view = $(e.relatedTarget).data('feedbackView');\n\n      if (view === 'general') {\n        hideListView();\n      }\n    }); // just after it has been shown\n\n    $modal.on('shown.bs.modal', function () {\n      $generalForm.off().submit(function (e) {\n        e.preventDefault();\n\n        _this.trigger('feedback-form-submit', $(e.target), $modal);\n\n        return false;\n      });\n      $('#open-general-feedback').off().click(function () {\n        hideListView();\n        $('input[name=name]', $generalForm).focus();\n        return false;\n      });\n\n      if (_this.model.has('currentUser')) {\n        var user = _this.model.get('currentUser');\n\n        $('input[name=_replyto]', $generalForm).val(user);\n\n        _this.appendToForm('currentuser', user);\n      } else {\n        _this.appendToForm('currentuser', 'anonymous');\n      }\n\n      if (_this.model.has('browser')) {\n        var _this$model$get = _this.model.get('browser'),\n            browser = _this$model$get.browser,\n            platform = _this$model$get.platform,\n            engine = _this$model$get.engine,\n            os = _this$model$get.os;\n\n        _this.appendToForm('browser.name', browser.name);\n\n        _this.appendToForm('browser.version', browser.version);\n\n        _this.appendToForm('engine', engine.name);\n\n        _this.appendToForm('platform', platform.type);\n\n        _this.appendToForm('os', os.name);\n      }\n\n      if (_this.model.has('page')) {\n        _this.appendToForm('current_page', _this.model.get('page'));\n      }\n\n      _this.appendToForm('url', window.location.href);\n\n      if (_this.model.has('currentQuery')) {\n        _this.appendToForm('current_query', _this.model.get('currentQuery'));\n      }\n\n      if (_this.model.get('page') === 'ShowAbstract' && _this.model.has('bibcode')) {\n        // update the submit abstract url with the current bibcode, only if we are on an abstract page\n        $submitAbstractLink.attr('href', function (i, url) {\n          if (url.indexOf('?') > -1) {\n            return url;\n          }\n\n          return url += '?bibcode=' + _this.model.get('bibcode');\n        });\n      } else {\n        // otherwise, clear the query string off the url\n        $submitAbstractLink.attr('href', function (i, url) {\n          return url.replace(/\\?.*$/, '');\n        });\n      }\n    });\n    setTimeout(function () {\n      $('a', '.account-dropdown').click(function () {\n        $('.dropdown-toggle', '.account-dropdown').dropdown('toggle');\n      });\n    }, 300);\n  }\n});\nNavWidget = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend({\n  initialize: function initialize(options) {\n    var _this2 = this;\n\n    options = options || {};\n    this.model = new NavModel();\n    this.view = new NavView({\n      model: this.model\n    });\n    js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_2__[\"default\"].prototype.initialize.apply(this, arguments);\n    this.qUpdater = new js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_5__[\"default\"]('NavBar'); // get the current browser information\n\n    utils__WEBPACK_IMPORTED_MODULE_9__[\"default\"].getBrowserInfo().then(function (data) {\n      _this2.model.set('browser', data);\n    }).fail(function () {\n      _this2.model.set('browser', null);\n    });\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bindAll(this, ['handleUserAnnouncement', 'getOrcidUserInfo', 'storeLatestPage', 'onCustomEvent', 'onStartSearch']);\n\n    var pubsub = this.getPubSub();\n    pubsub.subscribe(pubsub.USER_ANNOUNCEMENT, this.handleUserAnnouncement);\n    pubsub.subscribe(pubsub.APP_STARTED, this.getOrcidUserInfo);\n    pubsub.subscribe(pubsub.NAVIGATE, this.storeLatestPage);\n    pubsub.subscribe(pubsub.CUSTOM_EVENT, this.onCustomEvent);\n    pubsub.subscribe(pubsub.START_SEARCH, this.onStartSearch);\n    this.setInitialVals();\n\n    if (!this.model.get('timer')) {\n      this.resetOrcidTimer();\n    }\n  },\n  onStartSearch: function onStartSearch(apiQuery) {\n    this.model.set('currentQuery', apiQuery.url());\n  },\n  onCustomEvent: function onCustomEvent(ev, data) {\n    if (ev === 'orcid-action') {\n      this.resetOrcidTimer();\n    } else if (ev === 'latest-abstract-data') {\n      this.onNewAbstractData(data);\n    }\n  },\n  storeLatestPage: function storeLatestPage(page) {\n    // to know whether to orcid redirect\n    this._latestPage = page;\n    this.model.set('page', page);\n  },\n  onNewAbstractData: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debounce(function (data) {\n    this.model.set('bibcode', data.bibcode);\n  }, 500),\n  resetOrcidTimer: function resetOrcidTimer() {\n    var timer = this.model.get('timer');\n    var timeout = this.model.get('timeout');\n\n    if (timer) {\n      clearTimeout(timer);\n    } // only start the timer if orcid mode is actually on\n\n\n    if (this.model.get('orcidModeOn')) {\n      timer = setTimeout(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.toggleOrcidMode, this, false), timeout);\n      this.model.set('timer', timer);\n    }\n  },\n  viewEvents: {\n    // dealing with authentication/user\n    'navigate-login': function navigateLogin() {\n      this._navigate('authentication-page', {\n        subView: 'login'\n      });\n    },\n    'navigate-register': function navigateRegister() {\n      this._navigate('authentication-page', {\n        subView: 'register'\n      });\n    },\n    'navigate-settings': function navigateSettings() {\n      this._navigate('UserPreferences');\n    },\n    logout: function logout() {\n      // log the user out of both the session and orcid\n      this.getBeeHive().getObject('Session').logout(); // log out of ORCID too\n\n      this.orcidLogout();\n    },\n    'feedback-form-submit': 'submitForm',\n    // dealing with orcid\n    'navigate-to-orcid-link': 'navigateToOrcidLink',\n    'user-change-orcid-mode': 'toggleOrcidMode',\n    'logout-only-orcid': 'orcidLogout',\n    'search-author': 'searchAuthor'\n  },\n  submitForm: function submitForm($form, $modal) {\n    var _this3 = this;\n\n    var submit = function submit() {\n      var data = $form.serialize(); // record the user agent string\n\n      data += '&user-agent-string=' + encodeURIComponent(navigator.userAgent);\n\n      function beforeSend() {\n        $form.find('button[type=submit]').html('<i class=\"icon-loading\" aria-hidden=\"true\"></i> Sending form...');\n      }\n\n      function done(data) {\n        $form.find('button[type=submit]').html('<i class=\"icon-success\" aria-hidden=\"true\"></i> Message sent!');\n        setTimeout(function () {\n          $modal.modal('hide');\n        }, 500);\n      }\n\n      function fail(err) {\n        $form.find('button[type=submit]').addClass('btn-danger').html('<i class=\"icon-danger\" aria-hidden=\"true\"></i> There was an error!');\n      }\n\n      var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n        target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_8__[\"default\"].FEEDBACK,\n        options: {\n          method: 'POST',\n          data: data,\n          dataType: 'json',\n          done: done,\n          fail: fail,\n          beforeSend: beforeSend\n        }\n      });\n\n      _this3.getBeeHive().getService('Api').request(request);\n    };\n\n    var siteKey = this.getBeeHive().getObject('AppStorage').getConfigCopy().recaptchaKey;\n    window.grecaptcha.ready(function () {\n      window.grecaptcha.execute(siteKey, {\n        action: 'feedback/general'\n      }).then(function (token) {\n        console.log('called', token);\n        var input = document.createElement('input');\n        input.type = 'hidden';\n        input.name = 'g-recaptcha-response';\n        input.value = token;\n        $form.append(input);\n        console.log('form', $form.html());\n        submit();\n      });\n    });\n  },\n  navigateToOrcidLink: function navigateToOrcidLink() {\n    this._navigate('orcid-page');\n  },\n  _navigate: function _navigate(page, opts) {\n    var pubsub = this.getPubSub();\n    pubsub.publish(pubsub.NAVIGATE, page, opts);\n  },\n  // to set the correct initial values for signed in statuses\n  setInitialVals: function setInitialVals() {\n    var user = this.getBeeHive().getObject('User');\n    var orcidApi = this.getBeeHive().getService('OrcidApi');\n    var hasAccess = orcidApi.hasAccess();\n    this.model.set({\n      orcidModeOn: user.isOrcidModeOn() && hasAccess,\n      orcidLoggedIn: hasAccess\n    });\n    this.model.set('currentUser', user.getUserName());\n  },\n  getOrcidUserInfo: function getOrcidUserInfo() {\n    var orcidApi = this.getBeeHive().getService('OrcidApi'); // get the orcid username if applicable\n\n    if (this.model.get('orcidLoggedIn')) {\n      // set the orcid username into the model\n      var that = this;\n      orcidApi.getUserBio().done(function (bio) {\n        var firstName = bio.getFirstName();\n        var lastName = bio.getLastName();\n        that.model.set('orcidFirstName', firstName);\n        that.model.set('orcidLastName', lastName);\n        that.model.set('orcidQueryName', lastName + ', ' + firstName); // this will always be available\n\n        that.model.set('orcidURI', bio.getOrcid());\n      });\n    } // also set in the \"hourly\" flag\n\n\n    var hourly = this.getBeeHive().getObject('AppStorage').getConfigCopy().hourly;\n    this.model.set('hourly', hourly);\n  },\n  handleUserAnnouncement: function handleUserAnnouncement(msg, data) {\n    var orcidApi = this.getBeeHive().getService('OrcidApi');\n    var user = this.getBeeHive().getObject('User');\n\n    if (msg == user.USER_SIGNED_IN) {\n      this.model.set('currentUser', data);\n    } else if (msg == user.USER_SIGNED_OUT) {\n      this.model.set('currentUser', undefined);\n    } else if (msg == user.USER_INFO_CHANGE && underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].has(data, 'isOrcidModeOn')) {\n      // every time this changes, we check for api access status\n      this.model.set({\n        orcidModeOn: data.isOrcidModeOn,\n        orcidLoggedIn: orcidApi.hasAccess()\n      });\n\n      if (this.model.get('orcidLoggedIn')) {\n        this.getOrcidUserInfo();\n      }\n    }\n  },\n  // we don't want to respond to changes from pubsub or user object with this,\n  // only changes that the user has initiated using the navbar widget,\n  // otherwise things will be toggled incorrectly\n  toggleOrcidMode: function toggleOrcidMode(val) {\n    var user = this.getBeeHive().getObject('User');\n    var orcidApi = this.getBeeHive().getService('OrcidApi');\n    var newVal = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isBoolean(val) ? val : this.model.get('orcidModeOn');\n    this.resetOrcidTimer();\n\n    if (newVal) {\n      // sign into orcid api if not signed in already\n      if (!orcidApi.hasAccess()) {\n        return orcidApi.signIn();\n      }\n    }\n\n    user.setOrcidMode(newVal);\n    this.model.set('orcidModeOn', newVal);\n  },\n  searchAuthor: function searchAuthor() {\n    var pubsub = this.getPubSub();\n    pubsub.publish(pubsub.START_SEARCH, new js_components_api_query__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\n      q: 'author:' + this.qUpdater.quote(this.model.get('orcidQueryName'))\n    }));\n  },\n  signOut: function signOut() {\n    var user = this.getBeeHive().getObject('User');\n    var orcidApi = this.getBeeHive().getService('OrcidApi');\n    if (orcidApi) orcidApi.signOut();\n    user.setOrcidMode(false);\n  },\n  orcidLogout: function orcidLogout() {\n    var pubsub = this.getPubSub();\n    this.getBeeHive().getService('OrcidApi').signOut(); // ned to set this explicitly since there is no event from the beehive\n\n    this.model.set('orcidLoggedIn', false);\n    this.getBeeHive().getObject('User').setOrcidMode(false); // finally, redirect if currently on orcid page\n\n    if (this._latestPage === 'orcid-page') {\n      pubsub.publish(pubsub.NAVIGATE, 'index-page');\n    }\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (NavWidget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/navbar/widget.js?");

/***/ }),

/***/ "./src/js/widgets/network_vis/network_widget.js":
/*!******************************************************!*\
  !*** ./src/js/widgets/network_vis/network_widget.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! d3 */ \"./src/libs/d3.js\");\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(d3__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var js_mixins_user_change_rows__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/mixins/user_change_rows */ \"./src/js/mixins/user_change_rows.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/components/api_query_updater */ \"./src/js/components/api_query_updater.js\");\n/* harmony import */ var hbs_js_widgets_network_vis_templates_author_details_template__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! hbs!js/widgets/network_vis/templates/author-details-template */ \"./src/js/widgets/network_vis/templates/author-details-template.html\");\n/* harmony import */ var hbs_js_widgets_network_vis_templates_author_details_template__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_network_vis_templates_author_details_template__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var hbs_js_widgets_network_vis_templates_container_template__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! hbs!js/widgets/network_vis/templates/container-template */ \"./src/js/widgets/network_vis/templates/container-template.html\");\n/* harmony import */ var hbs_js_widgets_network_vis_templates_container_template__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_network_vis_templates_container_template__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var hbs_js_widgets_network_vis_templates_filter_container_template__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! hbs!js/widgets/network_vis/templates/filter-container-template */ \"./src/js/widgets/network_vis/templates/filter-container-template.html\");\n/* harmony import */ var hbs_js_widgets_network_vis_templates_filter_container_template__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_network_vis_templates_filter_container_template__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var hbs_js_widgets_network_vis_templates_graph_container_template__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! hbs!js/widgets/network_vis/templates/graph-container-template */ \"./src/js/widgets/network_vis/templates/graph-container-template.html\");\n/* harmony import */ var hbs_js_widgets_network_vis_templates_graph_container_template__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_network_vis_templates_graph_container_template__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var hbs_js_widgets_network_vis_templates_group_details_template__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! hbs!js/widgets/network_vis/templates/group-details-template */ \"./src/js/widgets/network_vis/templates/group-details-template.html\");\n/* harmony import */ var hbs_js_widgets_network_vis_templates_group_details_template__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_network_vis_templates_group_details_template__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var hbs_js_widgets_network_vis_templates_not_enough_data_template__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! hbs!js/widgets/network_vis/templates/not-enough-data-template */ \"./src/js/widgets/network_vis/templates/not-enough-data-template.html\");\n/* harmony import */ var hbs_js_widgets_network_vis_templates_not_enough_data_template__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_network_vis_templates_not_enough_data_template__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var hbs_js_widgets_network_vis_templates_network_metadata__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! hbs!js/widgets/network_vis/templates/network_metadata */ \"./src/js/widgets/network_vis/templates/network_metadata.html\");\n/* harmony import */ var hbs_js_widgets_network_vis_templates_network_metadata__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_network_vis_templates_network_metadata__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var hbs_js_widgets_network_vis_templates_loading_template__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! hbs!js/widgets/network_vis/templates/loading-template */ \"./src/js/widgets/network_vis/templates/loading-template.html\");\n/* harmony import */ var hbs_js_widgets_network_vis_templates_loading_template__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_network_vis_templates_loading_template__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var hbs_js_widgets_network_vis_templates_default_details_template__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! hbs!js/widgets/network_vis/templates/default-details-template */ \"./src/js/widgets/network_vis/templates/default-details-template.html\");\n/* harmony import */ var hbs_js_widgets_network_vis_templates_default_details_template__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_network_vis_templates_default_details_template__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! bootstrap */ \"./src/libs/bootstrap/bootstrap.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_17__);\nvar _Marionette$ItemView$;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction isInt(value) {\n  return !isNaN(value) && function (x) {\n    return (x | 0) === x;\n  }(parseFloat(value));\n}\n\nvar FilterModel = Backbone.Model.extend({\n  defaults: {\n    name: undefined\n  },\n  idAttribute: 'name'\n});\nvar FilterCollection = Backbone.Collection.extend({\n  model: FilterModel\n});\nvar FilterView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  initialize: function initialize(options) {\n    this.listenTo(this.collection, 'add', this.render);\n    this.listenTo(this.collection, 'remove', this.render);\n    this.listenTo(this.collection, 'reset', this.render);\n  },\n  serializeData: function serializeData() {\n    var that = this;\n    var data = {};\n    data.limit = this.collection.pluck('name');\n\n    _.each(data.limit, function (d, i) {\n      if (isInt(d) && that.options.networkType == 'author') {\n        data.limit[i] = 'at least one member of Group ' + d;\n      } else if (isInt(d) && that.options.networkType == 'paper') {\n        data.limit[i] = 'Group ' + d;\n      }\n    });\n\n    return data;\n  },\n  template: (hbs_js_widgets_network_vis_templates_filter_container_template__WEBPACK_IMPORTED_MODULE_10___default()),\n  childViewContainer: '.dropdown-menu',\n  events: {\n    'click .apply-filter': 'initiateFilter',\n    'click .clear-filter': 'clearFilter'\n  },\n  initiateFilter: function initiateFilter() {\n    this.trigger('filter:initiated');\n  },\n  clearFilter: function clearFilter() {\n    this.collection.reset();\n  }\n}); // this will render a tiny tiny little graph\n\nvar DefaultDetailsView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  template: (hbs_js_widgets_network_vis_templates_default_details_template__WEBPACK_IMPORTED_MODULE_16___default()),\n  serializeData: function serializeData() {\n    return {\n      currentQuery: marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'query'),\n      networkType: marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'networkType'),\n      cachedQuery: marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'cachedQuery')\n    };\n  },\n  getData: function getData() {\n    if (marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'networkType') == 'author') {\n      var data = [];\n\n      _.each(marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'graphData').root.children, function (el, index) {\n        var name = index;\n\n        if (index > 6) {\n          return;\n        }\n\n        var allPapers = []; // get all papers\n\n        _.each(el.children, function (author, index) {\n          Array.prototype.push.apply(allPapers, author.papers);\n        }); // unique the list\n\n\n        allPapers = _.uniq(allPapers); // fill in years with 0 papers\n\n        var years = _.map(allPapers, function (bibcode) {\n          return parseInt(bibcode.slice(0, 4));\n        }); // extract the years\n\n\n        allPapers = _.countBy(allPapers, function (bibcode) {\n          return bibcode.slice(0, 4);\n        });\n\n        var yearRange = _.range.apply(undefined, d3__WEBPACK_IMPORTED_MODULE_1___default().extent(years));\n\n        var skeleton = {};\n\n        _.each(yearRange, function (y) {\n          skeleton[y] = 0;\n        });\n\n        allPapers = _.extend(skeleton, allPapers);\n        allPapers = _.map(allPapers, function (v, k) {\n          return {\n            year: parseInt(k),\n            amount: v\n          };\n        });\n        data.push({\n          name: name,\n          values: allPapers\n        });\n      });\n    } else if (marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'networkType') == 'paper') {\n      var summaryGraph = marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'graphData').summaryGraph;\n      var fullGraph = marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'graphData').fullGraph;\n      var data = [];\n      var nameDict = {};\n      /* id is how you tie an entry in the summary graph with an entry in the full graph,\n       * otherwise it is not used, it is assigned by louvain community detector in python script\n       * */\n\n      var ids = _.pluck(summaryGraph.nodes, 'id');\n\n      var names = _.pluck(summaryGraph.nodes, 'node_name');\n\n      _.each(ids, function (id, index) {\n        var filteredNodes = [];\n\n        _.each(fullGraph.nodes, function (n, i) {\n          if (n.group === id) {\n            filteredNodes.push(n.node_name);\n          }\n        });\n\n        nameDict[names[index]] = filteredNodes;\n      });\n\n      _.each(nameDict, function (v, k) {\n        if (k > 6) {\n          return;\n        } // unique the list\n\n\n        allPapers = _.uniq(v); // fill in years with 0 papers\n\n        var years = _.map(allPapers, function (bibcode) {\n          return parseInt(bibcode.slice(0, 4));\n        }); // extract the years\n\n\n        allPapers = _.countBy(allPapers, function (bibcode) {\n          return bibcode.slice(0, 4);\n        });\n\n        var yearRange = _.range.apply(undefined, d3__WEBPACK_IMPORTED_MODULE_1___default().extent(years));\n\n        var skeleton = {};\n\n        _.each(yearRange, function (y) {\n          skeleton[y] = 0;\n        });\n\n        var allPapers = _.extend(skeleton, allPapers);\n\n        allPapers = _.map(allPapers, function (v, k) {\n          return {\n            year: parseInt(k),\n            amount: v\n          };\n        }); // to make it the same as the author network: key is the index of the group based on size\n\n        data.push({\n          name: parseInt(k) - 1,\n          values: allPapers\n        });\n      });\n    }\n\n    return data;\n  },\n  onRender: function onRender() {\n    var data = this.getData();\n    var oneYear = true; // if data is only from a single year, tell the user that and return\n\n    _.each(data, function (d) {\n      if (d.values.length !== 1) {\n        oneYear = false;\n      }\n    });\n\n    if (oneYear) {\n      var singleYear = data[0].values[0].year;\n      this.$('.time-series-container').html('Not enough data to show a graph: All papers are from the year ' + singleYear);\n      return;\n    }\n\n    var allX = [];\n    var allY = [];\n\n    _.each(data, function (group) {\n      _.each(group.values, function (entry) {\n        allX.push(entry.year);\n        allY.push(entry.amount);\n      });\n    });\n\n    allX = _.uniq(allX);\n    var margin = {\n      top: 20,\n      right: 80,\n      bottom: 30,\n      left: 50\n    };\n    var width = 960 - margin.left - margin.right;\n    var height = 500 - margin.top - margin.bottom;\n    var x = d3__WEBPACK_IMPORTED_MODULE_1___default().scale.linear().range([0, width]);\n    var y = d3__WEBPACK_IMPORTED_MODULE_1___default().scale.linear().range([height, 0]);\n    var xAxis = d3__WEBPACK_IMPORTED_MODULE_1___default().svg.axis().scale(x).orient('bottom') // specify explicitly, otherwise can get repeats for some weird reason\n    .tickFormat(d3__WEBPACK_IMPORTED_MODULE_1___default().format('0f')).ticks(5);\n\n    if (allX.length <= 10) {\n      xAxis.tickValues(allX);\n    }\n\n    var yAxis = d3__WEBPACK_IMPORTED_MODULE_1___default().svg.axis().scale(y).tickFormat(d3__WEBPACK_IMPORTED_MODULE_1___default().format('d')).orient('left');\n    var line = d3__WEBPACK_IMPORTED_MODULE_1___default().svg.line().interpolate('bundle').x(function (d) {\n      return x(d.year);\n    }).y(function (d) {\n      return y(d.amount);\n    });\n    var svg = d3__WEBPACK_IMPORTED_MODULE_1___default().select(this.$('svg')[0]).attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom) // for svg copying by svg crowbar\n    .attr('style', 'font-family:helvetica,arial,san-serif').attr('id', 'network-viz-time-series').append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n    var color = d3__WEBPACK_IMPORTED_MODULE_1___default().scale.ordinal().domain([0, 1, 2, 3, 4, 5, 6]).range(['hsla(282, 80%, 52%, 1)', 'hsla(1, 80%, 51%, 1)', 'hsla(42, 97%, 48%, 1)', 'hsla(152, 80%, 40%, 1)', 'hsla(193, 80%, 48%, 1)', 'hsla(220, 80%, 56%, 1)', 'hsla(250, 69%, 47%, 1)']);\n    x.domain(d3__WEBPACK_IMPORTED_MODULE_1___default().extent(allX));\n    y.domain([0, _.max(allY)]);\n    svg.attr('aria-label', 'author network graph').append('g').attr('class', 'axis').attr('transform', 'translate(0,' + height + ')').call(xAxis);\n    svg.append('g').attr('class', 'axis').call(yAxis);\n    var groups = svg.selectAll('.group').data(data).enter().append('g').attr('class', 'group');\n    groups.append('path').attr('class', 'line').attr('d', function (d) {\n      return line(d.values);\n    }).style('stroke', function (d) {\n      return color(d.name);\n    });\n    groups.append('text').datum(function (d) {\n      return {\n        name: d.name,\n        value: d.values[d.values.length - 1]\n      };\n    }).attr('transform', function (d) {\n      return 'translate(' + x(d.value.year) + ',' + y(d.value.amount) + ')';\n    }).attr('x', 3).attr('dy', '.35em').text(function (d) {\n      return d.name + 1;\n    });\n\n    var oneYear = _.filter(data, function (d) {\n      if (d.values.length == 1) {\n        return true;\n      }\n    }); // hack to show groups with only one year (otherwise line has width 0)\n\n\n    svg.selectAll('.one-year').data(oneYear).enter().append('circle').classed('one-year', true).attr('r', 5).attr('cx', function (d) {\n      return x(d.values[0].year);\n    }).attr('cy', function (d) {\n      return y(d.values[0].amount);\n    }).attr('fill', function (d) {\n      return color(d.name);\n    });\n  }\n});\nvar ContainerView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend((_Marionette$ItemView$ = {\n  template: (hbs_js_widgets_network_vis_templates_container_template__WEBPACK_IMPORTED_MODULE_9___default()),\n  className: function className() {\n    var n = marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'networkType');\n    return 'network-widget s-network-widget ' + n;\n  },\n  serializeData: function serializeData(data) {\n    var n = marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'networkType');\n    n = n[0].toUpperCase() + n.slice(1);\n    return {\n      networkType: n,\n      helpText: marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'helpText')\n    };\n  },\n  ui: {\n    filterContainer: '.network-filter-container',\n    graphContainer: '.graph-container',\n    detailsContainerSelected: '.details-container #selected-item',\n    detailsContainerHome: '.details-container #home'\n  },\n  events: {\n    'click .load-author-network': 'forwardNewQueryRequest',\n    'click button.limit': 'addItem',\n    'click .submit-rows': 'changeRows',\n    'click .close': 'triggerClose',\n    'click .download': 'triggerDownload',\n    'click .filter-remove': function clickFilterRemove(e) {\n      if (marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'networkType') == 'paper') {\n        var name = this.graphModel.get('selectedEntity').__data__.data.node_name;\n\n        marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'filterCollection').remove({\n          id: name\n        }); // re-render detail sub view\n\n        this.graphView.showSelectedEntity(this.graphModel.get('selectedEntity'));\n      } else {\n        var name = this.graphModel.get('selectedEntity').__data__.name;\n\n        marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'filterCollection').remove({\n          id: name\n        }); // re-render detail sub view\n\n        this.showDetailView(this.graphModel.get('selectedEntity'));\n      }\n    },\n    'click .filter-add': function clickFilterAdd(e) {\n      if (marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'networkType') == 'paper') {\n        var name = this.graphModel.get('selectedEntity').__data__.data.node_name;\n\n        marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'filterCollection').add({\n          name: name\n        }); // re-render detail sub view\n\n        this.graphView.showSelectedEntity(this.graphModel.get('selectedEntity'));\n      } else {\n        var papers = [];\n\n        var data = this.graphModel.get('selectedEntity').__data__;\n\n        if (data.papers) {\n          // author\n          papers = data.papers;\n        } else {\n          // group\n          _.each(data.children, function (d) {\n            [].push.apply(papers, d.papers);\n          });\n        }\n\n        marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'filterCollection').add({\n          name: data.name,\n          papers: papers\n        }); // re-render detail sub view\n\n        this.showDetailView(this.graphModel.get('selectedEntity'));\n      }\n    }\n  },\n  modelEvents: {\n    change: 'render'\n  },\n  triggerClose: function triggerClose() {\n    this.$('.network-filter-container').empty();\n    this.$('.network-container').html((hbs_js_widgets_network_vis_templates_loading_template__WEBPACK_IMPORTED_MODULE_15___default()));\n    this.trigger('close');\n  },\n  triggerDownload: function triggerDownload() {\n    this.trigger('download');\n  },\n  // user has requested author network for current author\n  forwardNewQueryRequest: function forwardNewQueryRequest(e) {\n    // show loading template\n    this.ui.graphContainer.html(hbs_js_widgets_network_vis_templates_loading_template__WEBPACK_IMPORTED_MODULE_15___default()());\n    this.trigger('new-network-requested', $(e.target).data('query'));\n  },\n  changeRows: function changeRows(e) {\n    var num = parseInt(this.$('.network-rows').val());\n\n    if (_.isNumber(num)) {\n      var newVal = _.min([this.model.get('max'), num]);\n\n      if (this.model.get('userVal') === newVal) {\n        return false;\n      }\n\n      this.$('.network-container').html((hbs_js_widgets_network_vis_templates_loading_template__WEBPACK_IMPORTED_MODULE_15___default()));\n      this.model.set('userVal', newVal);\n    }\n\n    return false;\n  }\n}, _defineProperty(_Marionette$ItemView$, \"modelEvents\", {\n  'change:graphData': 'render',\n  'change:max': 'renderMetadata',\n  'change:current': 'renderMetadata'\n}), _defineProperty(_Marionette$ItemView$, \"onRender\", function onRender() {\n  this.$('.title').html(this.model.get('title')); // append sub views\n\n  var graphViewToUse; // do nothing if there is no data\n\n  var cachedQ;\n\n  try {\n    cachedQ = this.model.get('cachedQuery').get('q')[0];\n  } catch (e) {// ignore, there will be no cached query\n  } // show loading view\n\n\n  if (this.model.get('loading')) {\n    this.$('.network-metadata').html('');\n    this.$('.network-container').html(hbs_js_widgets_network_vis_templates_loading_template__WEBPACK_IMPORTED_MODULE_15___default()());\n    return;\n  }\n\n  if (!this.model.get('graphData') || _.isEmpty(this.model.get('graphData'))) {\n    this.$('.network-metadata').html('');\n    this.$('.network-container').html(hbs_js_widgets_network_vis_templates_not_enough_data_template__WEBPACK_IMPORTED_MODULE_13___default()({\n      cachedQuery: cachedQ\n    }));\n    return;\n  } // it's a paper network with no summary info\n\n\n  if (!this.model.get('graphData').summaryGraph && !this.model.get('graphData').root) {\n    // maybe later show something if we just have the fullGraph\n    this.$('.network-metadata').html('');\n    this.$('.network-container').html(hbs_js_widgets_network_vis_templates_not_enough_data_template__WEBPACK_IMPORTED_MODULE_13___default()({\n      cachedQuery: cachedQ\n    }));\n    return;\n  } // all the data the graph view will need\n\n\n  this.graphModel = new GraphModel({\n    graphData: this.model.get('graphData')\n  });\n  this.filterView = new FilterView({\n    collection: marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'filterCollection'),\n    networkType: marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'networkType')\n  });\n  this.listenTo(this.filterView, 'filter:initiated', function () {\n    // forward to controller\n    this.trigger('filter:initiated');\n  }); // can pass another view in if inheriting\n\n  graphViewToUse = this.options.graphView ? this.options.graphView : GraphView;\n  this.graphView = new graphViewToUse({\n    model: this.graphModel,\n    filterCollection: marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'filterCollection')\n  });\n  this.graphView.on('show-detail-view', _.bind(this.showDetailView, this));\n  this.ui.filterContainer.append(this.filterView.render().el);\n  this.ui.graphContainer.append(this.graphView.render().el);\n  this.ui.detailsContainerHome.append(new DefaultDetailsView({\n    graphData: this.model.get('graphData'),\n    query: this.model.get('query'),\n    networkType: marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'networkType'),\n    cachedQuery: cachedQ\n  }).render().el); // set the home tab as default\n\n  this.$(\".nav-tabs a[href='#home']\").tab('show');\n  this.$('.download').removeClass('hidden');\n  this.renderMetadata();\n}), _defineProperty(_Marionette$ItemView$, \"showDetailView\", function showDetailView(selected) {\n  var d = selected.__data__;\n  selected = d3__WEBPACK_IMPORTED_MODULE_1___default().select(selected); // there might not be a label because it might be a group\n\n  selected.select('.node-label').classed('selected-label', true); // but there should definitely be a path\n\n  selected.select('.node-path').classed('selected-node', true); // now, get the data\n\n  var allPapers = [];\n  var children;\n  var data = {};\n  var label;\n  var papers = [];\n  var graphData = this.model.get('graphData'); // author node\n\n  if (!d.children) {\n    papers = _.map(d.papers, function (bib) {\n      var paperDict = graphData.bibcode_dict[bib];\n      paperDict.bibcode = bib;\n\n      if (_.isArray(paperDict.title)) {\n        paperDict.title = paperDict.title[0];\n      }\n\n      return paperDict;\n    });\n    papers = _.sortBy(papers, function (p) {\n      return p.citation_count;\n    }).reverse(); // now find most recent year, and papers from that year\n\n    var mostRecentYear = _.chain(papers).pluck('bibcode').sortBy(function (bibcode) {\n      return bibcode.slice(0, 4);\n    }).value().reverse()[0].slice(0, 4);\n\n    data.bibcodes = d.papers;\n    data.mostRecentYear = mostRecentYear;\n    data.papers = papers;\n    data.total = papers.length;\n    data.name = d.name;\n    data.groupColor = d.parent.color;\n    data.inFilter = !!marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'filterCollection').get(d.name); // make the query that will be issued when user clicks \"view network for this person\"\n\n    data.dataQuery = 'author:\"' + d.name + '\"';\n    this.ui.detailsContainerSelected.empty().append(hbs_js_widgets_network_vis_templates_author_details_template__WEBPACK_IMPORTED_MODULE_8___default()(data)); // group node\n  } else {\n    children = d.children;\n\n    _.each(children, function (c) {\n      Array.prototype.push.apply(allPapers, c.papers);\n    }); // now find most recent year\n\n\n    var mostRecentYear = _.sortBy(allPapers, function (bibcode) {\n      return bibcode.slice(0, 4);\n    }).reverse()[0].slice(0, 4);\n\n    allPapers = _.pairs(_.countBy(allPapers));\n    /*\n     * compare three variables to get a final score : number of authors in the group,\n     * percent authors in the group, and total number of citations\n     * */\n\n    var numAuthors = _.chain(allPapers).map(function (a) {\n      return a[1];\n    }).sortBy(function (x) {\n      return x;\n    }).value();\n\n    var percentAuthors = _.chain(allPapers).map(function (a) {\n      return a[1] / graphData.bibcode_dict[a[0]].authors.length;\n    }).sortBy(function (x) {\n      return x;\n    }).value();\n\n    var numCitations = _.chain(allPapers).map(function (a) {\n      return graphData.bibcode_dict[a[0]].citation_count / graphData.bibcode_dict[a[0]].authors.length;\n    }).sortBy(function (x) {\n      return x;\n    }).value();\n\n    allPapers = _.sortBy(allPapers, function (list) {\n      // percent of authors that are members of this group\n      return (list[1] - numAuthors[0]) / (numAuthors[numAuthors.length - 1] - numAuthors[0]) * (list[1] / graphData.bibcode_dict[list[0]].authors.length - percentAuthors[0]) / (percentAuthors[percentAuthors.length - 1] - percentAuthors[0]) * (graphData.bibcode_dict[list[0]].citation_count / graphData.bibcode_dict[list[0]].authors.length - numCitations[0]) / (numCitations[numCitations.length - 1] - numCitations[0]);\n    }).reverse();\n    bibcodes = _.map(allPapers, function (l) {\n      return l[0];\n    });\n    papers = _.map(bibcodes, function (b, i) {\n      var d = {};\n      d.bibcode = b;\n      d.title = graphData.bibcode_dict[b].title;\n      d.citation_count = graphData.bibcode_dict[b].citation_count;\n      d.numAuthors = allPapers[i][1];\n      return d;\n    });\n    data.bibcodes = bibcodes;\n    data.papers = papers;\n    data.groupColor = d.color;\n    data.total = allPapers.length;\n    data.mostRecentYear = mostRecentYear;\n    data.name = d.name;\n    data.inFilter = !!marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'filterCollection').get(d.name);\n    this.ui.detailsContainerSelected.empty().append(hbs_js_widgets_network_vis_templates_group_details_template__WEBPACK_IMPORTED_MODULE_12___default()(data));\n  } // set the selected details tab as default\n\n\n  this.$(\".nav-tabs a[href='#selected-item']\").tab('show');\n}), _defineProperty(_Marionette$ItemView$, \"renderMetadata\", function renderMetadata() {\n  var data = {};\n  data.max = this.model.get('max');\n  data.current = this.model.get('current');\n  this.$('.network-metadata').html(hbs_js_widgets_network_vis_templates_network_metadata__WEBPACK_IMPORTED_MODULE_14___default()(data));\n}), _Marionette$ItemView$));\nvar ContainerModel = js_mixins_user_change_rows__WEBPACK_IMPORTED_MODULE_3__[\"default\"].Model.extend({\n  initialize: function initialize(opts) {\n    var options = opts || {};\n    this.on('newMetadata', function () {\n      this.updateCurrent();\n      this.updateMax();\n    });\n\n    if (!options.widgetName) {\n      throw new Error('need to configure with widget name so we can get limit/default info from api_targets._limits');\n    }\n\n    var defaults = {\n      graphData: {},\n      rows: undefined,\n      numFound: undefined,\n      current: undefined,\n      // current max\n      max: undefined,\n      // when this changes, make a new request\n      userVal: undefined,\n      // keep record of former query so user can return\n      cachedQuery: undefined,\n      loading: true\n    };\n\n    _.extend(defaults, js_components_api_targets__WEBPACK_IMPORTED_MODULE_2__[\"default\"]._limits[options.widgetName], options.title);\n\n    this.defaults = function () {\n      return defaults;\n    };\n\n    this.set(this.defaults());\n  }\n});\nvar GraphView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  initialize: function initialize(options) {\n    // listen to filter collection in order to re-render current view\n    this.listenTo(options.filterCollection, 'reset', this.showSelectedEntity);\n  },\n  template: (hbs_js_widgets_network_vis_templates_graph_container_template__WEBPACK_IMPORTED_MODULE_11___default()),\n  events: {\n    'change input[name=mode]': function changeInputNameMode(e) {\n      this.model.set('mode', e.target.value);\n    },\n    'change input[name=show-link]': function changeInputNameShowLink(e) {\n      this.model.set('linkLayer', e.target.checked);\n    }\n  },\n  modelEvents: {\n    'change:graphData': 'renderGraph',\n    'change:selectedEntity': 'showSelectedEntity',\n    'change:linkLayer': 'changeLinkLayer',\n    'change:mode': 'changeMode'\n  },\n  onRender: function onRender() {\n    if (this.model.get('graphData')) {\n      this.renderGraph();\n    }\n  },\n\n  /* functions to render the graph and overlay */\n  getConfig: function getConfig() {\n    // hold static config variables here\n    this.config = {\n      numberOfLabelsToShow: 100,\n      width: 900,\n      height: 900,\n      noGroupColor: '#a6a6a6'\n    };\n    this.config.radius = Math.min(this.config.width, this.config.height) / 3;\n  },\n  // /   for items generated over the course of regular d3 functions that might be useful later\n  cachedVals: {\n    partition: undefined,\n    line: undefined,\n    computeLabelPosition: undefined,\n    svg: undefined,\n    arc: undefined\n  },\n  renderGraph: function renderGraph() {\n    var graphData = this.model.get('graphData');\n    var that = this;\n    this.cachedVals.svg = d3__WEBPACK_IMPORTED_MODULE_1___default().select(this.$('svg')[0]);\n    this.getConfig(); // creating all the scales that this and other functions need\n\n    this.customizeScales(graphData); // some functions to be used below\n    // stash the old values for transition.\n\n    function stash(d) {\n      d.x0 = d.x;\n      d.dx0 = d.dx;\n    }\n\n    function computeLabelPosition(d) {\n      var angle = (d.x + d.x + d.dx) / 2 * 180 / Math.PI - 90;\n      var t = parseInt(that.config.radius) + 10;\n      var flip = angle > 90 ? 180 : 0;\n\n      if (flip) {\n        d3__WEBPACK_IMPORTED_MODULE_1___default().select(this).attr('text-anchor', 'end');\n      } else {\n        d3__WEBPACK_IMPORTED_MODULE_1___default().select(this).attr('text-anchor', 'start');\n      }\n\n      return 'rotate(' + angle + ')translate(' + t + ')rotate(' + flip + ')';\n    }\n\n    this.cachedVals.computeLabelPosition = computeLabelPosition; // append the groups containing the paths and the text labels\n\n    var svg = that.cachedVals.svg.attr('width', that.config.width).attr('height', that.config.height).append('g').classed('network-g', true);\n    var g2 = svg.append('g').classed('real-container-of-stuff', true); // zoom behavior\n\n    var zoom = d3__WEBPACK_IMPORTED_MODULE_1___default().behavior.zoom().scaleExtent([0.7, 3]).on('zoom', zoomed);\n\n    function zoomed() {\n      g2.attr('transform', 'translate(' + (d3__WEBPACK_IMPORTED_MODULE_1___default().event).translate + ')scale(' + (d3__WEBPACK_IMPORTED_MODULE_1___default().event).scale + ')');\n    }\n\n    svg.call(zoom);\n    svg.on('dblclick.zoom', null);\n    svg.attr('transform', 'translate(' + that.config.width / 2 + ',' + that.config.height / 2.1 + ')');\n    var partition = d3__WEBPACK_IMPORTED_MODULE_1___default().layout.partition().value(function (d) {\n      return d.size;\n    }).size([2 * Math.PI, that.config.radius * that.config.radius]).sort(function (a, b) {\n      return b.value - a.value;\n    });\n    this.cachedVals.partition = partition;\n    var arc = d3__WEBPACK_IMPORTED_MODULE_1___default().svg.arc().startAngle(function (d) {\n      return d.x;\n    }).endAngle(function (d) {\n      return d.x + d.dx;\n    }).innerRadius(function (d) {\n      if (d.depth == 1) {\n        return Math.sqrt(d.y) + 40;\n      }\n\n      return Math.sqrt(d.y);\n    }).outerRadius(function (d) {\n      return Math.sqrt(d.y + d.dy);\n    });\n    this.cachedVals.arc = arc; // for mouse interaction\n    // otherwise there is a weird hollow space between center and the colored sections\n\n    g2.append('circle').attr('r', that.config.radius).attr('fill', '#fff').style('cursor', 'move');\n    var containers = g2.selectAll('g').data(partition.nodes(graphData.root)).enter().append('g').classed('node-containers', true) // cache sort value\n    .each(function (d) {\n      d.sortVal = d.value;\n    });\n    var colorDict = {};\n    var path = containers.append('path').attr('d', arc).classed('node-path', function (d) {\n      if (d.depth == 0) {\n        return false;\n      }\n\n      return true;\n    }).style('cursor', function (d) {\n      if (d.depth == 0) return 'move';\n    }).style('fill', function (d) {\n      if (d.depth == 0) {\n        return 'white';\n      }\n\n      if (d.depth == 1) {\n        var index = d.parent.children.indexOf(d);\n\n        if (index < 7) {\n          d.color = that.scales.color(index);\n          colorDict[d.name] = d.color;\n          return d.color;\n        }\n\n        return that.config.noGroupColor;\n      }\n\n      if (d.depth == 2) {\n        // child nodes\n        if (!d.parent.color) {\n          return that.config.noGroupColor;\n        }\n\n        return d.parent.color;\n      }\n    }).each(stash); // now taking care of labels\n\n    containers.filter(function (d) {\n      return !d.children;\n    }).classed('author-node', true).append('text').text(function (d) {\n      return d.name;\n    }).classed('node-label', true).on('mouseover', function (d) {\n      // only show link stuff if link layer is active\n      if (!that.model.get('linkLayer')) {\n        return;\n      }\n\n      var thisD = d; // get all links, add selected link class\n\n      d3__WEBPACK_IMPORTED_MODULE_1___default().selectAll('.link').filter(function (d) {\n        if (d[0] == thisD || d[d.length - 1] == thisD) {\n          return true;\n        }\n      }).classed('selected-link', true); // add linked label class to nodes connected by a link\n\n      d3__WEBPACK_IMPORTED_MODULE_1___default().selectAll('.link').each(function (linkD) {\n        if (linkD[0] == thisD) {\n          d3__WEBPACK_IMPORTED_MODULE_1___default().selectAll('.node-label').filter(function (d) {\n            return d.name == linkD[linkD.length - 1].name;\n          }).classed('linked-label', true);\n        } else if (linkD[linkD.length - 1] == thisD) {\n          d3__WEBPACK_IMPORTED_MODULE_1___default().selectAll('.node-label').filter(function (d) {\n            return d.name == linkD[0].name;\n          }).classed('linked-label', true);\n        }\n      });\n    }).on('mouseout', function () {\n      d3__WEBPACK_IMPORTED_MODULE_1___default().selectAll('.link').classed('selected-link', false);\n      d3__WEBPACK_IMPORTED_MODULE_1___default().selectAll('.node-label').classed('linked-label', false);\n    }).attr('font-size', function (d) {\n      return that.scales.occurrencesFontScale(d.size) + 'px';\n    }).attr('transform', computeLabelPosition); // append connector nodes if possible\n\n    _.each(graphData.root.name, function (n, i) {\n      g2.append('text').classed('s-connector-node', true).attr('y', function () {\n        return i * 25 - graphData.root.name.length * 25 / 2;\n      }).text(n.nodeName);\n    }); // attach event listeners\n\n\n    containers.on('click', function (d, i) {\n      // ignore top-level node\n      if (d.depth == 0) {\n        return;\n      } // prevent interaction when link layer is active\n\n\n      if (that.model.get('linkLayer')) {\n        return;\n      } // could be a label or a path that was clicked\n      // within the group\n\n\n      if (that.model.get('selectedEntity') === this) {\n        that.model.set('selectedEntity', null);\n      } else {\n        that.model.set('selectedEntity', this);\n      }\n    }); // render the link layer\n\n    this.renderLinkLayer();\n  },\n  renderLinkLayer: function renderLinkLayer() {\n    var that = this;\n    svg = d3__WEBPACK_IMPORTED_MODULE_1___default().select(that.$('.real-container-of-stuff')[0]), tooltip = d3__WEBPACK_IMPORTED_MODULE_1___default().select(that.$('.d3-tooltip')[0]), bibDict = this.model.get('graphData').bibcode_dict;\n    var links;\n    var bundle;\n    var line;\n    var linkContainer;\n    links = _.map(that.model.get('graphData').link_data, function (l) {\n      var linkData = {};\n      linkData.source = svg.selectAll('.node-path').filter(function (d) {\n        return d.numberName == l[0];\n      })[0][0].__data__;\n      linkData.target = svg.selectAll('.node-path').filter(function (d) {\n        return d.numberName == l[1];\n      })[0][0].__data__;\n      linkData.weight = l[2];\n      return linkData;\n    });\n    bundle = d3__WEBPACK_IMPORTED_MODULE_1___default().layout.bundle();\n    line = d3__WEBPACK_IMPORTED_MODULE_1___default().svg.line.radial().interpolate('bundle').tension(0.9).radius(function (d) {\n      return Math.sqrt(d.y + d.dy);\n    }).angle(function (d) {\n      // UGH IT WANTS RADIANS NOT DEGREES BLAAKSKDKDK\n      return (d.x + d.x + d.dx) / 2;\n    }); // cache for event handlers\n\n    this.cachedVals.line = line;\n    linkContainer = svg.append('g').classed('link-container', true);\n    linkContainer.append('circle').attr('r', that.config.radius).classed('link-background', true);\n    linkContainer.selectAll('.link').data(bundle(links)).enter().append('path').attr('class', 'link').attr('d', function (d) {\n      return line(d);\n    }).attr('stroke-width', function (d) {\n      // get link weight\n      var weight = _.filter(links, function (l) {\n        return l.source == d[0] && l.target == d[d.length - 1] || l.target == d[0] && l.source == d[d.length - 1];\n      })[0].weight;\n\n      return that.scales.linkScale(weight);\n    });\n  },\n  customizeScales: function customizeScales(graphData) {\n    // scales and a few other variables to share\n    this.scales = {};\n    this.scales.color = d3__WEBPACK_IMPORTED_MODULE_1___default().scale.ordinal().domain([0, 1, 2, 3, 4, 5, 6]).range(['hsla(282, 60%, 52%, 1)', 'hsla(349, 61%, 47%, 1)', 'hsla(26, 95%, 67%, 1)', 'hsla(152, 60%, 40%, 1)', 'hsla(193, 64%, 61%, 1)', 'hsla(220, 70%, 56%, 1)', 'hsla(250, 50%, 47%, 1)']);\n    var sizes = [];\n    var citation_counts = [];\n    var read_counts = [];\n\n    _.each(graphData.root.children, function (group) {\n      _.each(group.children, function (c) {\n        sizes.push(c.size);\n        citation_counts.push(c.citation_count);\n        read_counts.push(c.read_count);\n      });\n    });\n\n    citation_counts = _.sortBy(citation_counts, function (c) {\n      return c;\n    }).reverse();\n    read_counts = _.sortBy(read_counts, function (r) {\n      return r;\n    }).reverse(); // when the ring sizing is by citation, how many labels should be shown?\n\n    this.scales.citationLimit = citation_counts[this.config.numberOfLabelsToShow] || citation_counts[citation_counts.length - 1]; // when the ring sizing is by reads, how many labels should be shown?\n\n    this.scales.readLimit = read_counts[this.config.numberOfLabelsToShow] || read_counts[read_counts.length - 1];\n    this.scales.occurrencesFontScale = d3__WEBPACK_IMPORTED_MODULE_1___default().scale.log().domain([d3__WEBPACK_IMPORTED_MODULE_1___default().min(sizes), d3__WEBPACK_IMPORTED_MODULE_1___default().max(sizes)]).range([8, 20]);\n    this.scales.citationFontScale = d3__WEBPACK_IMPORTED_MODULE_1___default().scale.linear().domain([d3__WEBPACK_IMPORTED_MODULE_1___default().min(citation_counts), d3__WEBPACK_IMPORTED_MODULE_1___default().max(citation_counts)]).range([8, 20]);\n    this.scales.readFontScale = d3__WEBPACK_IMPORTED_MODULE_1___default().scale.linear().domain([d3__WEBPACK_IMPORTED_MODULE_1___default().min(read_counts), d3__WEBPACK_IMPORTED_MODULE_1___default().max(read_counts)]).range([8, 20]); // link scale\n\n    var weights = _.map(graphData.link_data, function (l) {\n      return l[2];\n    });\n\n    this.scales.linkScale = d3__WEBPACK_IMPORTED_MODULE_1___default().scale.pow().exponent(8).domain([d3__WEBPACK_IMPORTED_MODULE_1___default().min(weights), d3__WEBPACK_IMPORTED_MODULE_1___default().max(weights)]).range([0.5, 3.5]);\n  },\n\n  /* functions to deal with user interaction */\n  showSelectedEntity: function showSelectedEntity() {\n    var selected = this.model.get('selectedEntity');\n    var that = this;\n    var $div = that.$('.network-detail-area');\n    this.cachedVals.svg.selectAll('.node-path').classed('selected-node', false);\n    this.cachedVals.svg.selectAll('.node-label').classed('selected-label', false);\n    $div.empty();\n\n    if (!selected) {\n      return;\n    }\n\n    this.trigger('show-detail-view', selected);\n  },\n  changeLinkLayer: function changeLinkLayer(model, val) {\n    if (val) {\n      this.model.set('cachedEntity', this.model.get('selectedEntity'));\n      this.model.set('selectedEntity', undefined); // show link layer\n\n      var interval;\n      d3__WEBPACK_IMPORTED_MODULE_1___default().select(this.$('.link-container')[0]).style('display', 'block').selectAll('.link').call(function (selection) {\n        interval = 3000 / selection[0].length;\n      }).sort(function (d) {\n        return d.weight;\n      }).style('display', 'block');\n    } else {\n      // hide it\n      this.model.set('selectedEntity', this.model.get('cachedEntity'));\n      d3__WEBPACK_IMPORTED_MODULE_1___default().select(this.$('.link-container')[0]).style('display', 'none');\n    }\n  },\n  changeMode: function changeMode(model, currentVal) {\n    var that = this;\n\n    function value(d) {\n      return d[currentVal];\n    } // Interpolate the arcs in data space.\n\n\n    function arcTween(a) {\n      var i = d3__WEBPACK_IMPORTED_MODULE_1___default().interpolate({\n        x: a.x0,\n        dx: a.dx0\n      }, a);\n      return function (t) {\n        var b = i(t);\n        a.x0 = b.x;\n        a.dx0 = b.dx;\n        return that.cachedVals.arc(b);\n      };\n    }\n\n    var containers = that.cachedVals.svg.selectAll('.node-containers');\n    var data = that.cachedVals.partition.sort(function (a, b) {\n      return b.sortVal - a.sortVal;\n    }).value(value).nodes(that.model.get('graphData').root);\n    containers.data(data, function (d) {\n      return d.name;\n    }).selectAll('path').transition().duration(1500).attrTween('d', arcTween);\n    containers.selectAll('text').attr('opacity', '0').attr('display', function (d) {\n      if (currentVal == 'size') {\n        return 'block';\n      }\n\n      if (currentVal == 'citation_count' && d.citation_count > that.scales.citationLimit) {\n        return 'block';\n      }\n\n      if (currentVal == 'read_count' && d.read_count > that.scales.readLimit) {\n        return 'block';\n      }\n\n      return 'none';\n    }).attr('font-size', function (d) {\n      if (currentVal == 'size') {\n        return that.scales.occurrencesFontScale(d.size) + 'px';\n      }\n\n      if (currentVal == 'citation_count') {\n        return that.scales.citationFontScale(d.citation_count) + 'px';\n      }\n\n      if (currentVal == 'read_count') {\n        return that.scales.readFontScale(d.read_count) + 'px';\n      }\n    }).attr('transform', that.cachedVals.computeLabelPosition).transition().duration(1500).attr('opacity', 1);\n    d3__WEBPACK_IMPORTED_MODULE_1___default().selectAll('.link').transition().duration(1500).attr('d', function (d) {\n      return that.cachedVals.line(d);\n    });\n  }\n});\nvar GraphModel = Backbone.Model.extend({\n  defaults: function defaults() {\n    return {\n      // data from the api\n      graphData: {},\n      // keep track of selection state\n      selectedEntity: undefined,\n      cachedEntity: undefined,\n      query: undefined,\n      linkLayer: false,\n      mode: 'occurrences'\n    };\n  }\n});\nvar NetworkWidget = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_6__[\"default\"].extend({\n  initialize: function initialize(options) {\n    if (!options.endpoint) {\n      throw new Error('widget was not configured with an endpoint');\n    }\n\n    if (options.broadcastFilteredQuery) {\n      this.broadcastFilteredQuery = options.broadcastFilteredQuery;\n    }\n\n    this.model = new ContainerModel({\n      widgetName: options.widgetName || 'AuthorNetwork',\n      title: options.networkType.charAt(0).toUpperCase() + options.networkType.slice(1) + ' Network'\n    });\n    this.listenTo(this.model, 'change:userVal', this.requestDifferentRows);\n    this.filterCollection = new FilterCollection();\n    this.view = new ContainerView({\n      graphView: options.graphView,\n      model: this.model,\n      filterCollection: this.filterCollection,\n      networkType: options.networkType,\n      helpText: options.helpText,\n      graphMixin: options.graphMixin,\n      showDetailGraphView: options.showDetailGraphView\n    });\n    this.listenTo(this.view, 'new-network-requested', this.requestDifferentQuery);\n    this.listenTo(this.view, 'filter:initiated', this.broadcastFilteredQuery);\n    this.listenTo(this.view, 'close', this.broadcastClose);\n    this.listenTo(this.view, 'download', this.download);\n    this.widgetName = 'visualization_' + options.networkType;\n    this.queryUpdater = new js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_7__[\"default\"](this.widgetName);\n  },\n  download: function download() {\n    var output = 'data:text/csv;charset=utf-8,';\n    var filename = 'author-network.csv';\n\n    if (this.model.get('widgetName') === 'AuthorNetwork') {\n      var root = this.model.get('graphData').root;\n      output += 'group, author, papers, citation count, download count\\n';\n      root.children.forEach(function (group) {\n        var groupName = group.name;\n        group.children.forEach(function (author) {\n          output += \"\".concat(groupName, \",\\\"\").concat(author.name, \"\\\",\\\"\").concat(author.papers.join(','), \"\\\",\").concat(author.citation_count, \",\").concat(author.read_count, \"\\n\");\n        });\n      });\n    } else if (this.model.get('widgetName') === 'PaperNetwork') {\n      filename = 'papers-network.csv';\n      var data = this.model.get('graphData').summaryGraph.nodes;\n      data.sort(function (e1, e2) {\n        if (e1.node_name === e2.node_name) {\n          return 0;\n        }\n\n        return e1.node_name < e2.node_name ? -1 : 1;\n      });\n      output += 'group,label,paper_count,top_references,citations,download count\\n';\n      data.forEach(function (row) {\n        output += \"\\\"\".concat(row.node_name, \"\\\",\\\"\").concat(Object.keys(row.node_label).join(','), \"\\\",\\\"\").concat(row.paper_count, \"\\\",\\\"\").concat(Object.keys(row.top_common_references).join(','), \"\\\",\\\"\").concat(row.total_citations, \"\\\",\\\"\").concat(row.total_reads, \"\\\"\\n\");\n      });\n    }\n\n    var encodedUri = encodeURI(output);\n    var link = document.getElementById('download-link');\n    link.setAttribute('download', filename);\n    link.setAttribute('href', encodedUri);\n    link.click();\n  },\n  generateApiRequest: function generateApiRequest(query) {\n    return new js_components_api_request__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n      target: marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'endpoint'),\n      query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n        query: JSON.stringify(query.toJSON())\n      }),\n      options: {\n        type: 'POST',\n        contentType: 'application/json'\n      }\n    });\n  },\n  // when a user requests a different number of documents\n  requestDifferentRows: function requestDifferentRows(model, rows) {\n    var query = this.getCurrentQuery().clone();\n    query.unlock();\n    query.set('rows', this.model.get('userVal'));\n    query.unset('hl');\n    query.unset('hl.fl');\n    var request = this.generateApiRequest(query);\n    this.getPubSub().publish(this.getPubSub().EXECUTE_REQUEST, request);\n  },\n  // allows you to view network for another author\n  requestDifferentQuery: function requestDifferentQuery(newQuery) {\n    // cache the current query\n    this.model.set('cachedQuery', this.getCurrentQuery()); // make a new query, otherwise facet parameters remain\n\n    var query = new js_components_api_query__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\n    query.set('q', newQuery);\n    query.set('rows', this.model.get('default')); // default setting sort to \"date desc\" since that is presumably what users will be used to\n    // this isn't perfect (it might override the original query's sorted value)\n    // but probably no one will notice\n\n    query.set('sort', 'date desc');\n    var request = this.generateApiRequest(query); // update the current widget query\n\n    this.setCurrentQuery(query);\n    this.getPubSub().publish(this.getPubSub().EXECUTE_REQUEST, request);\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n\n    _.bindAll(this, 'setOriginalQuery', 'processResponse');\n\n    var pubsub = this.getPubSub(); // custom dispatchRequest function goes here\n\n    pubsub.subscribe(pubsub.INVITING_REQUEST, this.setOriginalQuery); // custom handleResponse function goes here\n\n    pubsub.subscribe(pubsub.DELIVERING_RESPONSE, this.processResponse); // on initialization, store the current query\n\n    if (this.getBeeHive().getObject('AppStorage')) {\n      this.setOriginalQuery(this.getBeeHive().getObject('AppStorage').getCurrentQuery());\n    }\n\n    this.activateWidget();\n    this.attachGeneralHandler(this.onApiFeedback);\n  },\n  onApiFeedback: function onApiFeedback(feedback) {\n    if (feedback.error) {\n      var self = this; // on error, wait a small timeout and then exit\n\n      setTimeout(function () {\n        self.broadcastClose();\n      }, 1000);\n    }\n  },\n  // cache this so that the \"broadcastFilteredResponse\" still works even if user is looking at a\n  // different network\n  setOriginalQuery: function setOriginalQuery(query) {\n    // clear the \"cachedQuery\" because it's a new search cycle\n    this.model.set('cachedQuery', undefined);\n    this._originalQuery = query;\n    this.setCurrentQuery(query);\n  },\n  getOriginalQuery: function getOriginalQuery() {\n    return this._originalQuery;\n  },\n  // empty all data\n  // this will show the loading view by default\n  // until new data comes in\n  resetWidget: function resetWidget() {\n    // close graphView\n    if (this.view && this.view.graphView) {\n      this.view.$('.network-metadata').empty();\n      this.view.graphView.$el.empty();\n      this.view.graphView.stopListening();\n    }\n\n    this.filterCollection.reset(null, {\n      silent: true\n    }); // reset model\n\n    this.model.set(_.result(this.model, 'defaults'), {\n      silent: true\n    });\n  },\n  // for now, called to show vis for library\n  // and for bigquery\n  renderWidgetForListOfBibcodes: function renderWidgetForListOfBibcodes(bibcodes) {\n    // so the earlier state of the widget is not preserved\n    this.resetWidget(); // force a reset even if the data is the same\n    // so the earlier state of the widget is not preserved\n\n    this.model.set({\n      graphData: {},\n      loading: true\n    });\n    var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n      target: marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'endpoint'),\n      query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n        // endpoint caps at 1000\n        bibcodes: bibcodes.slice(0, 1000)\n      }),\n      options: {\n        type: 'POST',\n        contentType: 'application/json'\n      }\n    });\n    this.getPubSub().publish(this.getPubSub().EXECUTE_REQUEST, request);\n  },\n  // fetch data\n  renderWidgetForCurrentQuery: function renderWidgetForCurrentQuery() {\n    // force a reset even if the data is the same\n    // so the earlier state of the widget is not preserved\n    this.resetWidget();\n    var query = this.getCurrentQuery().clone();\n    query.unlock(); // if it's a bigquery, we need the bibcodes first\n\n    if (query.get('__qid')) {\n      query.set('fl', 'bibcode'); // limit is 1000\n\n      query.set('rows', '1000');\n      var request = this.composeRequest(query);\n      this.getPubSub().publish(this.getPubSub().DELIVERING_REQUEST, request);\n    } else {\n      query.set('rows', this.model.get('default'));\n      query.unset('hl');\n      query.unset('hl.fl');\n      var request = this.generateApiRequest(query);\n      this.getPubSub().publish(this.getPubSub().EXECUTE_REQUEST, request);\n    }\n  },\n  processResponse: function processResponse(jsonResponse) {\n    try {\n      // it's a bigquery response with bibcodes, now request the vis data\n      var qid = jsonResponse.get('responseHeader.params.__qid');\n      this.renderWidgetForListOfBibcodes(jsonResponse.get('response').docs.map(function (b) {\n        return b.bibcode;\n      }));\n    } catch (e) {\n      // it's from the network endpoint, loading is done\n      var data = jsonResponse.toJSON(); // let container view know how many bibcodes we have\n\n      this.model.set({\n        graphData: data.data,\n        numFound: parseInt(data.msg.numFound),\n        rows: parseInt(data.msg.rows),\n        query: jsonResponse.getApiQuery().get('q'),\n        loading: false\n      }); // so there is a one time render event\n\n      this.model.trigger('newMetadata');\n    }\n  },\n  // filter the original query\n  broadcastFilteredQuery: function broadcastFilteredQuery() {\n    var allBibs = _.flatten(this.filterCollection.pluck('papers'));\n\n    this.resetWidget();\n    var ps = this.getPubSub();\n    ps.publish(ps.CUSTOM_EVENT, 'second-order-search/limit', {\n      ids: allBibs\n    });\n  },\n  broadcastClose: function broadcastClose() {\n    this.resetWidget();\n    this.getPubSub().publish(this.getPubSub().NAVIGATE, 'results-page');\n  },\n  testing: {\n    detailView: DefaultDetailsView\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (NetworkWidget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/network_vis/network_widget.js?");

/***/ }),

/***/ "./src/js/widgets/network_vis/templates/author-details-template.html":
/*!***************************************************************************!*\
  !*** ./src/js/widgets/network_vis/templates/author-details-template.html ***!
  \***************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"    <button class=\\\"btn btn-sm  btn-default filter-remove\\\">\\n      <i class=\\\"s-filter-image\\\"></i>remove from filter\\n    </button>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \"    <button class=\\\"btn btn-sm btn-default filter-add\\\">\\n      <i class=\\\"s-filter-image\\\"></i> add to filter\\n    </button>\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <li>\\n      <a href=\\\"#abs/\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"bibcode\") || (depth0 != null ? lookupProperty(depth0,\"bibcode\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bibcode\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":29,\"column\":20},\"end\":{\"line\":29,\"column\":31}}}) : helper)))\n    + \"\\\" target=\\\"_blank\\\" rel=\\\"noreferrer noopener\\\"\\n        ><b>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":30,\"column\":12},\"end\":{\"line\":30,\"column\":21}}}) : helper)))\n    + \"</b></a\\n      >\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"citation_count\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(6, data, 0),\"inverse\":container.program(8, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":32,\"column\":6},\"end\":{\"line\":36,\"column\":13}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"numAuthors\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(10, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":36,\"column\":14},\"end\":{\"line\":38,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"    </li>\\n\";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"      <small> \"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"citation_count\") || (depth0 != null ? lookupProperty(depth0,\"citation_count\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"citation_count\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":33,\"column\":14},\"end\":{\"line\":33,\"column\":32}}}) : helper)))\n    + \" citations</small>\\n\";\n},\"8\":function(container,depth0,helpers,partials,data) {\n    return \"      <small>no citations</small>\\n      \";\n},\"10\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n      <small>(\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"numAuthors\") || (depth0 != null ? lookupProperty(depth0,\"numAuthors\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"numAuthors\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":37,\"column\":14},\"end\":{\"line\":37,\"column\":28}}}) : helper)))\n    + \" authors from this group)</small>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"author-detail-header print-hidden\\\">\\n  <div style=\\\"border-bottom:4px solid \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"groupColor\") || (depth0 != null ? lookupProperty(depth0,\"groupColor\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"groupColor\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":38},\"end\":{\"line\":2,\"column\":52}}}) : helper)))\n    + \"\\\">\\n    <h4>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":8},\"end\":{\"line\":3,\"column\":16}}}) : helper)))\n    + \"</h4>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"inFilter\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":4},\"end\":{\"line\":12,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"  </div>\\n  <div>\\n    Total Papers: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"total\") || (depth0 != null ? lookupProperty(depth0,\"total\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"total\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":18},\"end\":{\"line\":15,\"column\":27}}}) : helper)))\n    + \" Most recent Paper: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"mostRecentYear\") || (depth0 != null ? lookupProperty(depth0,\"mostRecentYear\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"mostRecentYear\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":47},\"end\":{\"line\":15,\"column\":65}}}) : helper)))\n    + \"\\n  </div>\\n  <button\\n    class=\\\"btn btn-default load-author-network\\\"\\n    data-query=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"dataQuery\") || (depth0 != null ? lookupProperty(depth0,\"dataQuery\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"dataQuery\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":16},\"end\":{\"line\":19,\"column\":29}}}) : helper)))\n    + \"\\\"\\n  >\\n    View author network for this author\\n  </button>\\n</div>\\n<div class=\\\"paper-description\\\">\\n  <h5>Papers by this author</h5>\\n  <ul class=\\\"list-unstyled\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"papers\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":27,\"column\":4},\"end\":{\"line\":40,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"  </ul>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/network_vis/templates/author-details-template.html?");

/***/ }),

/***/ "./src/js/widgets/network_vis/templates/container-template.html":
/*!**********************************************************************!*\
  !*** ./src/js/widgets/network_vis/templates/container-template.html ***!
  \**********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"container-fluid\\\">\\n<div class=\\\"row s-control-row\\\">\\n    <div class=\\\"col-xs-12 s-explore-close-container\\\">\\n        <div class=\\\"s-large-close close-widget close\\\">x</div>\\n    </div>\\n    <header class=\\\"s-network-title\\\">\\n        <h3 class=\\\"title\\\"></h3>\\n        <button class=\\\"btn btn-link download s-download hidden\\\">\\n            <i class=\\\"fa fa-download fa-2x\\\" aria-hidden=\\\"true\\\" title=\\\"download data in csv\\\"></i>\\n            <span class=\\\"sr-only\\\">download data in csv</span>\\n        </button>\\n    </header>\\n    <div class=\\\"col-xs-12 col-sm-6\\\">\\n        <div class=\\\"network-metadata s-network-metadata\\\"></div>\\n    </div>\\n    <div class=\\\"col-xs-12 col-sm-6\\\">\\n        <div class=\\\"network-filter-container s-network-filter-container\\\"></div>\\n    </div>\\n</div>\\n     <div class=\\\"network-container s-network-container row\\\">\\n         <div class=\\\"col-md-7 graph-container\\\">\\n\\n         </div>\\n         <div class=\\\"col-md-5 details-container\\\">\\n\\n             <!--tabs-->\\n\\n             <div role=\\\"tabpanel\\\">\\n\\n                 <!-- Nav tabs -->\\n                 <ul class=\\\"nav nav-tabs\\\" role=\\\"tablist\\\">\\n                     <li role=\\\"presentation\\\" class=\\\"active\\\"><a href=\\\"#home\\\" aria-controls=\\\"home\\\" role=\\\"tab\\\" data-toggle=\\\"tab\\\">Summary</a></li>\\n                     <li role=\\\"presentation\\\"><a href=\\\"#selected-item\\\" aria-controls=\\\"profile\\\" role=\\\"tab\\\" data-toggle=\\\"tab\\\">Detail </a></li>\\n                 </ul>\\n\\n                 <!-- Tab panes -->\\n                 <div class=\\\"tab-content\\\">\\n                     <div role=\\\"tabpanel\\\" class=\\\"tab-pane active\\\" id=\\\"home\\\"></div>\\n                     <div role=\\\"tabpanel\\\" class=\\\"tab-pane\\\" id=\\\"selected-item\\\">\\n                         <br/>\\n                         <br/>\\n                         <b>No item selected</b>\\n                         <p> Click on a section in the visualization on the left to see the papers\\n                         associated with an author or group of authors.</p>\\n                     </div>\\n\\n                 </div>\\n\\n             </div>\\n\\n\\n\\n         </div>\\n\\n     </div>\\n </div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/network_vis/templates/container-template.html?");

/***/ }),

/***/ "./src/js/widgets/network_vis/templates/default-details-template.html":
/*!****************************************************************************!*\
  !*** ./src/js/widgets/network_vis/templates/default-details-template.html ***!
  \****************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<h3><span class=\\\"s-light-font\\\">Author Network</span></h3>\\n\\n<p>This network visualization finds groups of authors within your search results.\\n    You can click on the segments to view the papers connected with a group or a particular author.\\n</p>\\n\\n<h5>Group Activity Over Time (measured in papers published)</h5>\\n <div class=\\\"time-series-container\\\">\\n <svg viewBox=\\\"0 0 960 500\\\" id=\\\"network-viz-time-series\\\"></svg>\\n </div>\\n\\n<br/>\\n<div>\\n    <a href=\\\"/help/actions/visualize#author-network\\\" target=\\\"_blank\\\" rel=\\\"noreferrer noopener\\\">Learn more about the author network.</a>\\n</div>\\n\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"cachedQuery\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.program(4, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":0},\"end\":{\"line\":32,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"\\n\\n\\n\\n</div>\\n\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<button class=\\\"btn btn-default load-author-network\\\" data-query=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"cachedQuery\") || (depth0 != null ? lookupProperty(depth0,\"cachedQuery\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cachedQuery\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":64},\"end\":{\"line\":20,\"column\":79}}}) : helper)))\n    + \"\\\">\\n    <i class=\\\"fa fa-arrow-left\\\" aria-hidden=\\\"true\\\"></i>\\n    Go back to previous author network (\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"cachedQuery\") || (depth0 != null ? lookupProperty(depth0,\"cachedQuery\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cachedQuery\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":22,\"column\":40},\"end\":{\"line\":22,\"column\":55}}}) : helper)))\n    + \")\\n</button>\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    return \"<!--only show this for first time view of network-->\\n\\n<p>If you are interested in seeing the author network for another author, you can do that directly\\n    by clicking on the author in the ring visualization, then clicking the button at the top.</p>\\n\\n<p>You can zoom and drag the visualization to reposition it.</p>\\n\\n\";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<h3><span class=\\\"s-light-font\\\">Paper Network for Query</span> \"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"currentQuery\") || (depth0 != null ? lookupProperty(depth0,\"currentQuery\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"currentQuery\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":43,\"column\":62},\"end\":{\"line\":43,\"column\":78}}}) : helper)))\n    + \"</h3>\\n\\n<p>The segments of the visualization to the left represent groups of papers from your result set which cite similar papers. </p>\\n\\n<h5>Group Activity Over Time (measured in papers published)</h5>\\n<div class=\\\"time-series-container\\\">\\n    <svg id=\\\"network-chart-main-visualization\\\" viewBox=\\\"0 0 960 500\\\"></svg>\\n</div>\\n\\n<br/>\\n<p>Click on a group to learn more about the papers within the group, as well as the papers cited by those papers.</p>\\n<a href=\\\"/help/actions/visualize#paper-network\\\" target=\\\"_blank\\\" rel=\\\"noreferrer noopener\\\">Learn more about the paper network.</a>\\n\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"networkType\") : depth0),\"author\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":39,\"column\":12}}})) != null ? stack1 : \"\")\n    + \"\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"networkType\") : depth0),\"paper\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(6, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":42,\"column\":0},\"end\":{\"line\":56,\"column\":12}}})) != null ? stack1 : \"\");\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/network_vis/templates/default-details-template.html?");

/***/ }),

/***/ "./src/js/widgets/network_vis/templates/filter-container-template.html":
/*!*****************************************************************************!*\
  !*** ./src/js/widgets/network_vis/templates/filter-container-template.html ***!
  \*****************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" \"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"limit\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":18},\"end\":{\"line\":8,\"column\":13}}})) != null ? stack1 : \"\")\n    + \" \";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" \"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(depth0 != null ? depth0 : (container.nullContext || {}),(data && lookupProperty(data,\"last\")),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":43},\"end\":{\"line\":7,\"column\":75}}})) != null ? stack1 : \"\")\n    + \"\\n    \";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \" OR \";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    return \" select an author or group of authors in the visualization\\n    below and click the \\\"add to filter\\\" button \";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"print-hidden\\\">\\n  <div>\\n    <b><i class=\\\"s-filter-image\\\"></i> Filter current search:</b>\\n    <button class=\\\"btn btn-default btn-xs clear-filter\\\">X clear</button>\\n  </div>\\n  <div class=\\\"s-filter-names-container \\\">\\n    \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"limit\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(5, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":4},\"end\":{\"line\":9,\"column\":54}}})) != null ? stack1 : \"\")\n    + \"\\n  </div>\\n\\n  <div class=\\\"s-filter-buttons-container\\\">\\n    <div>\\n      <button class=\\\"btn btn-success apply-filter\\\">\\n        <i class=\\\"icon-go fa-lg\\\" aria-hidden=\\\"true\\\"></i>\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/network_vis/templates/filter-container-template.html?");

/***/ }),

/***/ "./src/js/widgets/network_vis/templates/graph-container-template.html":
/*!****************************************************************************!*\
  !*** ./src/js/widgets/network_vis/templates/graph-container-template.html ***!
  \****************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"s-network-control-panel\\\">\\n    <div class=\\\"detail-panel s-detail-panel\\\">\\n        <h4 style=\\\"display:inline-block\\\">Size wedges based on:</h4>\\n        <div class=\\\"btn-group network-sizes\\\" data-toggle=\\\"buttons\\\">\\n        <label class=\\\"btn btn-primary active\\\">\\n            <input type=\\\"radio\\\" name=\\\"mode\\\" value=\\\"size\\\" checked autocomplete=\\\"off\\\"> Author Occurrences\\n        </label>\\n        <label class=\\\"btn btn-primary\\\">\\n            <input type=\\\"radio\\\" name=\\\"mode\\\" value=\\\"citation_count\\\" autocomplete=\\\"off\\\"> Paper Citations\\n        </label>\\n        <label class=\\\"btn btn-primary\\\">\\n            <input type=\\\"radio\\\" name=\\\"mode\\\" value=\\\"read_count\\\" autocomplete=\\\"off\\\"> Paper Downloads\\n        </label>\\n        </div>\\n        <br/>\\n        <label class=\\\"custom-checkbox\\\">\\n            <input type=\\\"checkbox\\\" name=\\\"show-link\\\" value=\\\"true\\\"> View Link Overlay\\n        </label>\\n    </div>\\n</div>\\n\\n<div class=\\\"s-network-graph-div\\\">\\n    <svg id=\\\"network-viz-main-chart\\\"\\n         class=\\\"network-chart s-network-chart\\\"\\n         viewBox=\\\"0 0 900 900\\\"\\n         style=\\\"font-family:helvetica,arial,san-serif\\\"\\n    >\\n    </svg>\\n    <a id=\\\"download-link\\\" class=\\\"hidden\\\"></a> \\n\\n</div>\\n\\n\\n\\n\\n\\n\\n\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/network_vis/templates/graph-container-template.html?");

/***/ }),

/***/ "./src/js/widgets/network_vis/templates/group-details-template.html":
/*!**************************************************************************!*\
  !*** ./src/js/widgets/network_vis/templates/group-details-template.html ***!
  \**************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"      <button class=\\\"btn btn-sm btn-default filter-remove\\\">\\n        <i class=\\\"s-filter-image\\\"></i>remove from filter\\n      </button>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \"      <button class=\\\"btn btn-sm btn-default filter-add\\\">\\n        <i class=\\\"s-filter-image\\\"></i> add to filter\\n      </button>\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <li>\\n      <a\\n        href=\\\"#abs/\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"bibcode\") || (depth0 != null ? lookupProperty(depth0,\"bibcode\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bibcode\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":19},\"end\":{\"line\":24,\"column\":30}}}) : helper)))\n    + \"\\\"\\n        data-bypass=\\\"\\\"\\n        target=\\\"_blank\\\"\\n        rel=\\\"noreferrer noopener\\\"\\n        ><b>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":28,\"column\":12},\"end\":{\"line\":28,\"column\":21}}}) : helper)))\n    + \"</b></a\\n      >\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"citation_count\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(6, data, 0),\"inverse\":container.program(8, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":30,\"column\":6},\"end\":{\"line\":32,\"column\":41}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"numAuthors\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(10, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":32,\"column\":42},\"end\":{\"line\":33,\"column\":69}}})) != null ? stack1 : \"\")\n    + \"\\n    </li>\\n\";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"      <small> \"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"citation_count\") || (depth0 != null ? lookupProperty(depth0,\"citation_count\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"citation_count\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":31,\"column\":14},\"end\":{\"line\":31,\"column\":32}}}) : helper)))\n    + \" citations</small> \";\n},\"8\":function(container,depth0,helpers,partials,data) {\n    return \"\\n      <small>no citations</small> \";\n},\"10\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n      <small>(\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"numAuthors\") || (depth0 != null ? lookupProperty(depth0,\"numAuthors\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"numAuthors\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":33,\"column\":14},\"end\":{\"line\":33,\"column\":28}}}) : helper)))\n    + \" authors from this group)</small> \";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"author-detail-header\\\">\\n  <div style=\\\"border-bottom:4px solid \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"groupColor\") || (depth0 != null ? lookupProperty(depth0,\"groupColor\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"groupColor\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":38},\"end\":{\"line\":2,\"column\":52}}}) : helper)))\n    + \"\\\" class=\\\"print-hidden\\\">\\n    <h4>Group \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":14},\"end\":{\"line\":3,\"column\":22}}}) : helper)))\n    + \"</h4>\\n    <span class=\\\"pull-right\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"inFilter\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":6},\"end\":{\"line\":13,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"    </span>\\n  </div>\\n  <small>Total papers: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"total\") || (depth0 != null ? lookupProperty(depth0,\"total\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"total\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":23},\"end\":{\"line\":16,\"column\":32}}}) : helper)))\n    + \"</small>\\n  <small>Most recent: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"mostRecentYear\") || (depth0 != null ? lookupProperty(depth0,\"mostRecentYear\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"mostRecentYear\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":22},\"end\":{\"line\":17,\"column\":40}}}) : helper)))\n    + \"</small>\\n</div>\\n<div class=\\\"paper-description\\\">\\n  <ul class=\\\"list-unstyled\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"papers\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":4},\"end\":{\"line\":35,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"  </ul>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/network_vis/templates/group-details-template.html?");

/***/ }),

/***/ "./src/js/widgets/network_vis/templates/loading-template.html":
/*!********************************************************************!*\
  !*** ./src/js/widgets/network_vis/templates/loading-template.html ***!
  \********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = container.invokePartial(__webpack_require__(/*! ../../../wraps/widget/loading/template.html */ \"./src/js/wraps/widget/loading/template.html\"),depth0,{\"name\":\"js/wraps/widget/loading/template\",\"hash\":{\"hideCloseButton\":true,\"widgetLoadingSize\":\"medium\"},\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\");\n},\"usePartial\":true,\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/network_vis/templates/loading-template.html?");

/***/ }),

/***/ "./src/js/widgets/network_vis/templates/network_metadata.html":
/*!********************************************************************!*\
  !*** ./src/js/widgets/network_vis/templates/network_metadata.html ***!
  \********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <form action=\\\"\\\">\\n    Change to first\\n    <input\\n      type=\\\"text\\\"\\n      class=\\\"network-rows s-network-rows form-control input-sm\\\"\\n    />\\n    papers (max is \"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"max\") || (depth0 != null ? lookupProperty(depth0,\"max\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"max\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":19},\"end\":{\"line\":11,\"column\":26}}}) : helper)))\n    + \").\\n    <button type=\\\"submit\\\" class=\\\"submit-rows btn btn-sm btn-info\\\">\\n      Submit\\n    </button>\\n  </form>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"print-hidden\\\">\\n  <h4>Currently viewing data for \"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"current\") || (depth0 != null ? lookupProperty(depth0,\"current\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(alias1,{\"name\":\"current\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":33},\"end\":{\"line\":2,\"column\":44}}}) : helper)))\n    + \" papers.</h4>\\n  <br />\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"max\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":2},\"end\":{\"line\":16,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/network_vis/templates/network_metadata.html?");

/***/ }),

/***/ "./src/js/widgets/network_vis/templates/not-enough-data-template.html":
/*!****************************************************************************!*\
  !*** ./src/js/widgets/network_vis/templates/not-enough-data-template.html ***!
  \****************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <button\\n    class=\\\"btn btn-default load-author-network\\\"\\n    data-query=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"cachedQuery\") || (depth0 != null ? lookupProperty(depth0,\"cachedQuery\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cachedQuery\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":16},\"end\":{\"line\":20,\"column\":31}}}) : helper)))\n    + \"\\\"\\n  >\\n    <i class=\\\"fa fa-arrow-left\\\" aria-hidden=\\\"true\\\"></i>\\n    Go back to previous author network. (\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"cachedQuery\") || (depth0 != null ? lookupProperty(depth0,\"cachedQuery\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cachedQuery\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":23,\"column\":41},\"end\":{\"line\":23,\"column\":56}}}) : helper)))\n    + \")\\n  </button>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"col-xs-12\\\">\\n  <br />\\n  <p>\\n    The network grouping algorithm could not generate group data for your\\n    network.\\n  </p>\\n  <p>\\n    This might be because the list of papers was too small or sparse to produce\\n    multiple meaningful groups.\\n  </p>\\n  <p>\\n    <a href=\\\"/help/actions/visualize\\\">\\n      Learn more about how ADS networks are created and how they can be used.\\n    </a>\\n  </p>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"cachedQuery\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":2},\"end\":{\"line\":25,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/network_vis/templates/not-enough-data-template.html?");

/***/ }),

/***/ "./src/js/widgets/paper_search_form/form.html":
/*!****************************************************!*\
  !*** ./src/js/widgets/paper_search_form/form.html ***!
  \****************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"row\\\" style=\\\"margin-bottom: 15px\\\">\\n  <div class=\\\"col-sm-12 well well-default\\\">\\n    <form class=\\\"form-horizontal\\\" data-form-type=\\\"journal\\\">\\n      <legend>Journal Search</legend>\\n      <div class=\\\"col-sm-12\\\">\\n        <div class=\\\"form-group help-block\\\">\\n          A bibstem is an abbreviation that the ADS uses to identify a journal.\\n          <a\\n            href=\\\"http://adsabs.harvard.edu/abs_doc/journal_abbr.html\\\"\\n            target=\\\"_blank\\\"\\n            rel=\\\"noreferrer noopener\\\"\\n            >A full list is available here.</a\\n          >\\n          The input field below will autocomplete on the 1,000 most popular\\n          journal names, allowing you to type \\\"Astrophysical Journal\\\", for\\n          instance, to find the bibstem \\\"ApJ\\\".\\n        </div>\\n      </div>\\n      <div class=\\\"col-sm-3\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"bibstem\\\">Publication</label>\\n          <input\\n            type=\\\"text\\\"\\n            name=\\\"bibstem\\\"\\n            id=\\\"bibstem\\\"\\n            class=\\\"form-control\\\"\\n            autofocus\\n          />\\n        </div>\\n      </div>\\n      <div class=\\\"col-sm-2 col-sm-offset-1\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"year\\\">Year</label>\\n          <input\\n            type=\\\"text\\\"\\n            name=\\\"year\\\"\\n            id=\\\"year\\\"\\n            class=\\\"form-control\\\"\\n            maxlength=\\\"4\\\"\\n          />\\n        </div>\\n      </div>\\n      <div class=\\\"col-sm-2 col-sm-offset-1\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"volume\\\">Volume</label>\\n          <input type=\\\"text\\\" name=\\\"volume\\\" id=\\\"volume\\\" class=\\\"form-control\\\" />\\n        </div>\\n      </div>\\n      <div class=\\\"col-sm-2 col-sm-offset-1\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"page\\\">Page/ID</label>\\n          <input type=\\\"text\\\" name=\\\"page\\\" id=\\\"page\\\" class=\\\"form-control\\\" />\\n        </div>\\n      </div>\\n      <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\">\\n        <i class=\\\"fa fa-search\\\" aria-hidden=\\\"true\\\"></i> Search\\n      </button>\\n      <button type=\\\"reset\\\" class=\\\"btn btn-default\\\">\\n        <i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i> Clear\\n      </button>\\n    </form>\\n  </div>\\n  <div class=\\\"error-container\\\" role=\\\"alert\\\"></div>\\n</div>\\n\\n<div class=\\\"row\\\" style=\\\"margin-bottom: 15px\\\">\\n  <div class=\\\"well well-default col-sm-12\\\">\\n    <form class=\\\"form-horizontal\\\" data-form-type=\\\"reference\\\">\\n      <legend>Reference Query</legend>\\n      <div class=\\\"col-sm-12\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"reference\\\">Reference</label>\\n          <input\\n            type=\\\"text\\\"\\n            name=\\\"reference\\\"\\n            id=\\\"reference\\\"\\n            class=\\\"form-control\\\"\\n            aria-describedby=\\\"reference_helper\\\"\\n            required\\n          />\\n          <span id=\\\"reference_helper\\\" class=\\\"help-block\\\"\\n            >Enter a full reference string (eg Smith et al 2000, A&A 362, pp.\\n            333-341)</span\\n          >\\n        </div>\\n      </div>\\n      <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\">\\n        <i class=\\\"fa fa-search\\\" aria-hidden=\\\"true\\\"></i> Search\\n      </button>\\n      <button type=\\\"reset\\\" class=\\\"btn btn-default\\\">\\n        <i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i> Clear\\n      </button>\\n    </form>\\n  </div>\\n  <div class=\\\"error-container\\\" role=\\\"alert\\\"></div>\\n</div>\\n\\n<div class=\\\"row\\\" style=\\\"margin-bottom: 15px\\\">\\n  <div class=\\\"well well-default col-sm-12\\\">\\n    <form class=\\\"form-horizontal\\\" data-form-type=\\\"bibcodes\\\">\\n      <legend>Bibliographic Code Query</legend>\\n      <div class=\\\"col-sm-12\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"bibcodes\\\">List of Bibcodes</label>\\n          <textarea\\n            name=\\\"bibcodes\\\"\\n            id=\\\"bibcodes\\\"\\n            cols=\\\"30\\\"\\n            rows=\\\"5\\\"\\n            class=\\\"form-control\\\"\\n            aria-describedby=\\\"bibcodes_helper\\\"\\n            style=\\\"min-width: 100%; max-width: 100%\\\"\\n            required\\n          ></textarea>\\n          <span class=\\\"help-block\\\" id=\\\"bibcodes_helper\\\"\\n            >Enter list of Bibcodes (e.g. 1989ApJ...342L..71R), one per\\n            line.</span\\n          >\\n        </div>\\n      </div>\\n      <button type=\\\"submit\\\" class=\\\"btn btn-primary\\\">\\n        <i class=\\\"fa fa-search\\\" aria-hidden=\\\"true\\\"></i> Search\\n      </button>\\n      <button type=\\\"reset\\\" class=\\\"btn btn-default\\\">\\n        <i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i> Clear\\n      </button>\\n    </form>\\n  </div>\\n  <div class=\\\"error-container\\\" role=\\\"alert\\\"></div>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/paper_search_form/form.html?");

/***/ }),

/***/ "./src/js/widgets/paper_search_form/topterms.js":
/*!******************************************************!*\
  !*** ./src/js/widgets/paper_search_form/topterms.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// 1000 top terms\n/* harmony default export */ __webpack_exports__[\"default\"] = ([{\n  value: 'PhRvL',\n  label: 'Physical Review Letters (PhRvL)'\n}, {\n  value: 'ApJ',\n  label: 'The Astrophysical Journal (ApJ)'\n}, {\n  value: 'ApJL',\n  label: 'The Astrophysical Journal Letters (ApJL)'\n}, {\n  value: 'PhRvB',\n  label: 'Physical Review B (PhRvB)'\n}, {\n  value: 'JChPh',\n  label: 'Journal of Chemical Physics (JChPh)'\n}, {\n  value: 'Natur',\n  label: 'Nature (Natur)'\n}, {\n  value: 'PhRvD',\n  label: 'Physical Review D (PhRvD)'\n}, {\n  value: 'ApPhL',\n  label: 'Applied Physics Letters (ApPhL)'\n}, {\n  value: 'Sci',\n  label: 'Science (Sci)'\n}, {\n  value: 'JGR',\n  label: 'Journal of Geophysical Research (JGR)'\n}, {\n  value: 'A&A',\n  label: 'Astronomy and Astrophysics (A&A)'\n}, {\n  value: 'JAP',\n  label: 'Journal of Applied Physics (JAP)'\n}, {\n  value: 'PhRv',\n  label: 'Physical Review (PhRv)'\n}, {\n  value: 'MNRAS',\n  label: 'Monthly Notices of the Royal Astronomical Society (MNRAS)'\n}, {\n  value: 'PhRvA',\n  label: 'Physical Review A (PhRvA)'\n}, {\n  value: 'PhLB',\n  label: 'Physics Letters B (PhLB)'\n}, {\n  value: 'NuPhB',\n  label: 'Nuclear Physics B (NuPhB)'\n}, {\n  value: 'PNAS',\n  label: 'Proceedings of the National Academy of Science (PNAS)'\n}, {\n  value: 'arXiv',\n  label: 'ArXiv e-prints (arXiv)'\n}, {\n  value: 'GeoRL',\n  label: 'Geophysical Research Letters (GeoRL)'\n}, {\n  value: 'PhRvE',\n  label: 'Physical Review E (PhRvE)'\n}, {\n  value: 'PhRvC',\n  label: 'Physical Review C (PhRvC)'\n}, {\n  value: 'JHEP',\n  label: 'Journal of High Energy Physics (JHEP)'\n}, {\n  value: 'AJ',\n  label: 'The Astronomical Journal (AJ)'\n}, {\n  value: 'CPL',\n  label: 'Chemical Physics Letters (CPL)'\n}, {\n  value: 'NuPhA',\n  label: 'Nuclear Physics A (NuPhA)'\n}, {\n  value: 'RvMP',\n  label: 'Reviews of Modern Physics (RvMP)'\n}, {\n  value: 'OptL',\n  label: 'Optics Letters (OptL)'\n}, {\n  value: 'E&PSL',\n  label: 'Earth and Planetary Science Letters (E&PSL)'\n}, {\n  value: 'GeCoA',\n  label: 'Geochimica et Cosmochimica Acta (GeCoA)'\n}, {\n  value: 'SurSc',\n  label: 'Surface Science (SurSc)'\n}, {\n  value: 'ApOpt',\n  label: 'Applied Optics (ApOpt)'\n}, {\n  value: 'SPIE',\n  label: 'Society of Photo-Optical Instrumentation Engineers (SPIE) Conference Series (SPIE)'\n}, {\n  value: 'JFM',\n  label: 'Journal of Fluid Mechanics (JFM)'\n}, {\n  value: 'ApJS',\n  label: 'The Astrophysical Journal Supplement Series (ApJS)'\n}, {\n  value: 'OExpr',\n  label: 'Optics Express (OExpr)'\n}, {\n  value: 'PhLA',\n  label: 'Physics Letters A (PhLA)'\n}, {\n  value: 'JaJAP',\n  label: 'Japanese Journal of Applied Physics (JaJAP)'\n}, {\n  value: 'JPSJ',\n  label: 'Journal of the Physical Society of Japan (JPSJ)'\n}, {\n  value: 'SSCom',\n  label: 'Solid State Communications (SSCom)'\n}, {\n  value: 'RSPSA',\n  label: 'Proceedings of the Royal Society of London Series A (RSPSA)'\n}, {\n  value: 'JAtS',\n  label: 'Journal of Atmospheric Sciences (JAtS)'\n}, {\n  value: 'JPCM',\n  label: 'Journal of Physics Condensed Matter (JPCM)'\n}, {\n  value: 'JPhA',\n  label: 'Journal of Physics A Mathematical General (JPhA)'\n}, {\n  value: 'PLoSO',\n  label: 'PLoS ONE (PLoSO)'\n}, {\n  value: 'PhR',\n  label: 'Physics Reports (PhR)'\n}, {\n  value: 'JPhB',\n  label: 'Journal of Physics B Atomic Molecular Physics (JPhB)'\n}, {\n  value: 'RScI',\n  label: 'Review of Scientific Instruments (RScI)'\n}, {\n  value: 'PhFl',\n  label: 'Physics of Fluids (PhFl)'\n}, {\n  value: 'EnST',\n  label: 'Environmental Science and Technology (EnST)'\n}, {\n  value: 'JGRD',\n  label: 'Journal of Geophysical Research (Atmospheres) (JGRD)'\n}, {\n  value: 'MaMol',\n  label: 'Macromolecules (MaMol)'\n}, {\n  value: 'NanoL',\n  label: 'Nano Letters (NanoL)'\n}, {\n  value: 'JCli',\n  label: 'Journal of Climate (JCli)'\n}, {\n  value: 'NIMPA',\n  label: 'Nuclear Instruments and Methods in Physics Research A (NIMPA)'\n}, {\n  value: 'AtmEn',\n  label: 'Atmospheric Environment (AtmEn)'\n}, {\n  value: 'ASAJ',\n  label: 'Acoustical Society of America Journal (ASAJ)'\n}, {\n  value: 'WRR',\n  label: 'Water Resources Research (WRR)'\n}, {\n  value: 'Icar',\n  label: 'Icarus (Icar)'\n}, {\n  value: 'JCrGr',\n  label: 'Journal of Crystal Growth (JCrGr)'\n}, {\n  value: 'JMP',\n  label: 'Journal of Mathematical Physics (JMP)'\n}, {\n  value: 'TSF',\n  label: 'Thin Solid Films (TSF)'\n}, {\n  value: 'Geo',\n  label: 'Geology (Geo)'\n}, {\n  value: 'PhPl',\n  label: 'Physics of Plasmas (PhPl)'\n}, {\n  value: 'JMMM',\n  label: 'Journal of Magnetism and Magnetic Materials (JMMM)'\n}, {\n  value: 'OptCo',\n  label: 'Optics Communications (OptCo)'\n}, {\n  value: 'EL',\n  label: 'EPL (Europhysics Letters) (EL)'\n}, {\n  value: 'MWRv',\n  label: 'Monthly Weather Review (MWRv)'\n}, {\n  value: 'JCoPh',\n  label: 'Journal of Computational Physics (JCoPh)'\n}, {\n  value: 'AnPhy',\n  label: 'Annals of Physics (AnPhy)'\n}, {\n  value: 'Tectp',\n  label: 'Tectonophysics (Tectp)'\n}, {\n  value: 'JPhD',\n  label: 'Journal of Physics D Applied Physics (JPhD)'\n}, {\n  value: 'NIMPB',\n  label: 'Nuclear Instruments and Methods in Physics Research B (NIMPB)'\n}, {\n  value: 'ITM',\n  label: 'IEEE Transactions on Magnetics (ITM)'\n}, {\n  value: 'CMaPh',\n  label: 'Communications in Mathematical Physics (CMaPh)'\n}, {\n  value: 'JPhC',\n  label: 'Journal of Physics C Solid State Physics (JPhC)'\n}, {\n  value: 'PSSBR',\n  label: 'Physica Status Solidi B Basic Research (PSSBR)'\n}, {\n  value: 'JNCS',\n  label: 'Journal of Non Crystalline Solids (JNCS)'\n}, {\n  value: 'CQGra',\n  label: 'Classical and Quantum Gravity (CQGra)'\n}, {\n  value: 'SoPh',\n  label: 'Solar Physics (SoPh)'\n}, {\n  value: 'ACP',\n  label: 'Atmospheric Chemistry & Physics (ACP)'\n}, {\n  value: 'IJQE',\n  label: 'IEEE Journal of Quantum Electronics (IJQE)'\n}, {\n  value: 'PhDT',\n  label: 'Ph.D. Thesis (PhDT)'\n}, {\n  value: 'MolPh',\n  label: 'Molecular Physics (MolPh)'\n}, {\n  value: 'NatMa',\n  label: 'Nature Materials (NatMa)'\n}, {\n  value: 'ApSS',\n  label: 'Applied Surface Science (ApSS)'\n}, {\n  value: 'PASP',\n  label: 'Publications of the Astronomical Society of the Pacific (PASP)'\n}, {\n  value: 'AIPC',\n  label: 'American Institute of Physics Conference Series (AIPC)'\n}, {\n  value: 'PhyC',\n  label: 'Physica C Superconductivity (PhyC)'\n}, {\n  value: 'PThPh',\n  label: 'Progress of Theoretical Physics (PThPh)'\n}, {\n  value: 'BpJ',\n  label: 'Biophysical Journal (BpJ)'\n}, {\n  value: 'JNuM',\n  label: 'Journal of Nuclear Materials (JNuM)'\n}, {\n  value: 'ITED',\n  label: 'IEEE Transactions on Electron Devices (ITED)'\n}, {\n  value: 'PhyA',\n  label: 'Physica A Statistical Mechanics and its Applications (PhyA)'\n}, {\n  value: 'JPCS',\n  label: 'Journal of Physics and Chemistry of Solids (JPCS)'\n}, {\n  value: 'ITGRS',\n  label: 'IEEE Transactions on Geoscience and Remote Sensing (ITGRS)'\n}, {\n  value: 'CoMP',\n  label: 'Contributions to Mineralogy and Petrology (CoMP)'\n}, {\n  value: 'JHyd',\n  label: 'Journal of Hydrology (JHyd)'\n}, {\n  value: 'ZPhy',\n  label: 'Zeitschrift fur Physik (ZPhy)'\n}, {\n  value: 'CP',\n  label: 'Chemical Physics (CP)'\n}, {\n  value: 'A&AS',\n  label: 'Astronomy and Astrophysics Supplement Series (A&AS)'\n}, {\n  value: 'JCAP',\n  label: 'Journal of Cosmology and Astro-Particle Physics (JCAP)'\n}, {\n  value: 'ARA&A',\n  label: 'Annual Review of Astronomy and Astrophysics (ARA&A)'\n}, {\n  value: 'QJRMS',\n  label: 'Quarterly Journal of the Royal Meteorological Society (QJRMS)'\n}, {\n  value: 'GeoJI',\n  label: 'Geophysical Journal International (GeoJI)'\n}, {\n  value: 'EPJC',\n  label: 'European Physical Journal C (EPJC)'\n}, {\n  value: 'JOSAB',\n  label: 'Journal of the Optical Society of America B Optical Physics (JOSAB)'\n}, {\n  value: 'JVST',\n  label: 'Journal of Vacuum Science Technology (JVST)'\n}, {\n  value: 'JMoSp',\n  label: 'Journal of Molecular Spectroscopy (JMoSp)'\n}, {\n  value: 'JPO',\n  label: 'Journal of Physical Oceanography (JPO)'\n}, {\n  value: 'ITAP',\n  label: 'IEEE Transactions on Antennas and Propagation (ITAP)'\n}, {\n  value: 'NatSR',\n  label: 'Scientific Reports (NatSR)'\n}, {\n  value: 'JGRA',\n  label: 'Journal of Geophysical Research (Space Physics) (JGRA)'\n}, {\n  value: 'RSEnv',\n  label: 'Remote Sensing of Environment (RSEnv)'\n}, {\n  value: 'PhyB',\n  label: 'Physica B Condensed Matter (PhyB)'\n}, {\n  value: 'ITNS',\n  label: 'IEEE Transactions on Nuclear Science (ITNS)'\n}, {\n  value: 'JPCA',\n  label: 'Journal of Physical Chemistry A (JPCA)'\n}, {\n  value: 'IPTL',\n  label: 'IEEE Photonics Technology Letters (IPTL)'\n}, {\n  value: 'NJPh',\n  label: 'New Journal of Physics (NJPh)'\n}, {\n  value: 'PSSAR',\n  label: 'Physica Status Solidi Applied Research (PSSAR)'\n}, {\n  value: 'NatCo',\n  label: 'Nature Communications (NatCo)'\n}, {\n  value: 'JMatS',\n  label: 'Journal of Materials Science (JMatS)'\n}, {\n  value: 'CoPhC',\n  label: 'Computer Physics Communications (CoPhC)'\n}, {\n  value: 'GSAB',\n  label: 'Geological Society of America Bulletin (GSAB)'\n}, {\n  value: 'RPPh',\n  label: 'Reports on Progress in Physics (RPPh)'\n}, {\n  value: 'JLwT',\n  label: 'Journal of Lightwave Technology (JLwT)'\n}, {\n  value: 'NatPh',\n  label: 'Nature Physics (NatPh)'\n}, {\n  value: 'RSPTA',\n  label: 'Philosophical Transactions of the Royal Society of London Series A (RSPTA)'\n}, {\n  value: 'PCCP',\n  label: 'Physical Chemistry Chemical Physics (Incorporating Faraday Transactions) (PCCP)'\n}, {\n  value: 'P&SS',\n  label: 'Planetary and Space Science (P&SS)'\n}, {\n  value: 'Geop',\n  label: 'Geophysics (Geop)'\n}, {\n  value: 'ITMTT',\n  label: 'IEEE Transactions on Microwave Theory Techniques (ITMTT)'\n}, {\n  value: 'ChGeo',\n  label: 'Chemical Geology (ChGeo)'\n}, {\n  value: 'JPS',\n  label: 'Journal of Power Sources (JPS)'\n}, {\n  value: 'APS',\n  label: 'APS Meeting Abstracts (APS)'\n}, {\n  value: 'ASPC',\n  label: 'Astronomical Society of the Pacific Conference Series (ASPC)'\n}, {\n  value: 'JOSAA',\n  label: 'Journal of the Optical Society of America A (JOSAA)'\n}, {\n  value: 'CaJPh',\n  label: 'Canadian Journal of Physics (CaJPh)'\n}, {\n  value: 'JSV',\n  label: 'Journal of Sound Vibration (JSV)'\n}, {\n  value: 'JGRB',\n  label: 'Journal of Geophysical Research (Solid Earth) (JGRB)'\n}, {\n  value: 'Nanot',\n  label: 'Nanotechnology (Nanot)'\n}, {\n  value: 'PhyD',\n  label: 'Physica D Nonlinear Phenomena (PhyD)'\n}, {\n  value: 'AGUFM',\n  label: 'AGU Fall Meeting Abstracts (AGUFM)'\n}, {\n  value: 'SSRv',\n  label: 'Space Science Reviews (SSRv)'\n}, {\n  value: 'AIAAJ',\n  label: 'AIAA Journal (AIAAJ)'\n}, {\n  value: 'JOSA',\n  label: 'Journal of the Optical Society of America (1917-1983) (JOSA)'\n}, {\n  value: 'JETP',\n  label: 'Soviet Journal of Experimental and Theoretical Physics (JETP)'\n}, {\n  value: 'JSSCh',\n  label: 'Journal of Solid State Chemistry France (JSSCh)'\n}, {\n  value: 'QSRv',\n  label: 'Quaternary Science Reviews (QSRv)'\n}, {\n  value: 'PMag',\n  label: 'Philosophical Magazine (PMag)'\n}, {\n  value: 'JETPL',\n  label: 'Soviet Journal of Experimental and Theoretical Physics Letters (JETPL)'\n}, {\n  value: 'JSP',\n  label: 'Journal of Statistical Physics (JSP)'\n}, {\n  value: 'MedPh',\n  label: 'Medical Physics (MedPh)'\n}, {\n  value: 'NucIM',\n  label: 'Nuclear Instruments and Methods (NucIM)'\n}, {\n  value: 'Ap&SS',\n  label: 'Astrophysics and Space Science (Ap&SS)'\n}, {\n  value: 'IAUS',\n  label: 'IAU Symposium (IAUS)'\n}, {\n  value: 'JQSRT',\n  label: 'Journal of Quantitative Spectroscopy and Radiative Transfer (JQSRT)'\n}, {\n  value: 'SSEle',\n  label: 'Solid State Electronics (SSEle)'\n}, {\n  value: 'IEDL',\n  label: 'IEEE Electron Device Letters (IEDL)'\n}, {\n  value: 'ApPhA',\n  label: 'Applied Physics A: Materials Science & Processing (ApPhA)'\n}, {\n  value: 'NucFu',\n  label: 'Nuclear Fusion (NucFu)'\n}, {\n  value: 'NaPho',\n  label: 'Nature Photonics (NaPho)'\n}, {\n  value: 'JVGR',\n  label: 'Journal of Volcanology and Geothermal Research (JVGR)'\n}, {\n  value: 'JApMe',\n  label: 'Journal of Applied Meteorology (JApMe)'\n}, {\n  value: 'JPhG',\n  label: 'Journal of Physics G Nuclear Physics (JPhG)'\n}, {\n  value: 'PEPI',\n  label: 'Physics of the Earth and Planetary Interiors (PEPI)'\n}, {\n  value: 'AdSpR',\n  label: 'Advances in Space Research (AdSpR)'\n}, {\n  value: 'IJRS',\n  label: 'International Journal of Remote Sensing (IJRS)'\n}, {\n  value: 'ApPhB',\n  label: 'Applied Physics B: Lasers and Optics (ApPhB)'\n}, {\n  value: 'JMoSt',\n  label: 'Journal of Molecular Structure (JMoSt)'\n}, {\n  value: 'BAMS',\n  label: 'Bulletin of the American Meteorological Society (BAMS)'\n}, {\n  value: 'JMagR',\n  label: 'Journal of Magnetic Resonance (JMagR)'\n}, {\n  value: 'NucPh',\n  label: 'Nuclear Physics (NucPh)'\n}, {\n  value: 'AdPhy',\n  label: 'Advances in Physics (AdPhy)'\n}, {\n  value: 'AcSpA',\n  label: 'Spectrochimica Acta Part A: Molecular Spectroscopy (AcSpA)'\n}, {\n  value: 'ClDy',\n  label: 'Climate Dynamics (ClDy)'\n}, {\n  value: 'NatNa',\n  label: 'Nature Nanotechnology (NatNa)'\n}, {\n  value: 'PASJ',\n  label: 'Publications of the Astronomical Society of Japan (PASJ)'\n}, {\n  value: 'JGRC',\n  label: 'Journal of Geophysical Research (Oceans) (JGRC)'\n}, {\n  value: 'AmJPh',\n  label: 'American Journal of Physics (AmJPh)'\n}, {\n  value: 'IJMPA',\n  label: 'International Journal of Modern Physics A (IJMPA)'\n}, {\n  value: 'Phy',\n  label: 'Physica (Phy)'\n}, {\n  value: 'CMAME',\n  label: 'Computer Methods in Applied Mechanics and Engineering (CMAME)'\n}, {\n  value: 'JSG',\n  label: 'Journal of Structural Geology (JSG)'\n}, {\n  value: 'JMatR',\n  label: 'Journal of Materials Research (JMatR)'\n}, {\n  value: 'NYASA',\n  label: 'Annals of the New York Academy of Sciences (NYASA)'\n}, {\n  value: 'PMB',\n  label: 'Physics in Medicine and Biology (PMB)'\n}, {\n  value: 'Litho',\n  label: 'Lithos (Litho)'\n}, {\n  value: 'GBioC',\n  label: 'Global Biogeochemical Cycles (GBioC)'\n}, {\n  value: 'PhyS',\n  label: 'Physica Scripta (PhyS)'\n}, {\n  value: 'AnP',\n  label: 'Annalen der Physik (AnP)'\n}, {\n  value: 'ITSP',\n  label: 'IEEE Transactions on Signal Processing (ITSP)'\n}, {\n  value: 'PPCF',\n  label: 'Plasma Physics and Controlled Fusion (PPCF)'\n}, {\n  value: 'JPet',\n  label: 'Journal of Petrology (JPet)'\n}, {\n  value: 'GeoJ',\n  label: 'Geophysical Journal (GeoJ)'\n}, {\n  value: 'JPhCS',\n  label: 'Journal of Physics Conference Series (JPhCS)'\n}, {\n  value: 'ZPhyB',\n  label: 'Zeitschrift fur Physik B Condensed Matter (ZPhyB)'\n}, {\n  value: 'MPLA',\n  label: 'Modern Physics Letters A (MPLA)'\n}, {\n  value: 'HyPr',\n  label: 'Hydrological Processes (HyPr)'\n}, {\n  value: 'JLTP',\n  label: 'Journal of Low Temperature Physics (JLTP)'\n}, {\n  value: 'JVSTB',\n  label: 'Journal of Vacuum Science Technology B: Microelectronics and Nanometer Structures (JVSTB)'\n}, {\n  value: 'Tecto',\n  label: 'Tectonics (Tecto)'\n}, {\n  value: 'JG',\n  label: 'Journal of Geology (JG)'\n}, {\n  value: 'PreR',\n  label: 'Precambrian Research (PreR)'\n}, {\n  value: 'EPJB',\n  label: 'European Physical Journal B (EPJB)'\n}, {\n  value: 'NuPhS',\n  label: 'Nuclear Physics B Proceedings Supplements (NuPhS)'\n}, {\n  value: 'ZNatA',\n  label: 'Zeitschrift Naturforschung Teil A (ZNatA)'\n}, {\n  value: 'AcSpe',\n  label: 'Spectrochimica Acta (AcSpe)'\n}, {\n  value: 'ITPS',\n  label: 'IEEE Transactions on Plasma Science (ITPS)'\n}, {\n  value: 'LNP',\n  label: 'Lecture Notes in Physics, Berlin Springer Verlag (LNP)'\n}, {\n  value: 'DSRII',\n  label: 'Deep Sea Research Part II: Topical Studies in Oceanography (DSRII)'\n}, {\n  value: 'JATP',\n  label: 'Journal of Atmospheric and Terrestrial Physics (JATP)'\n}, {\n  value: 'Geomo',\n  label: 'Geomorphology (Geomo)'\n}, {\n  value: 'PalOc',\n  label: 'Paleoceanography (PalOc)'\n}, {\n  value: 'math',\n  label: 'ArXiv Mathematics e-prints (math)'\n}, {\n  value: 'JPhF',\n  label: 'Journal of Physics F Metal Physics (JPhF)'\n}, {\n  value: 'BoLMe',\n  label: 'Boundary-Layer Meteorology (BoLMe)'\n}, {\n  value: 'ZPhyC',\n  label: 'Zeitschrift fur Physik C Particles and Fields (ZPhyC)'\n}, {\n  value: 'SuScT',\n  label: 'Superconductor Science Technology (SuScT)'\n}, {\n  value: 'RaSc',\n  label: 'Radio Science (RaSc)'\n}, {\n  value: 'PhL',\n  label: 'Physics Letters (PhL)'\n}, {\n  value: 'JCIS',\n  label: 'Journal of Colloid and Interface Science (JCIS)'\n}, {\n  value: 'OptEn',\n  label: 'Optical Engineering (OptEn)'\n}, {\n  value: 'JPoSA',\n  label: 'Journal of Polymer Science A Polymer Chemistry (JPoSA)'\n}, {\n  value: 'IJNME',\n  label: 'International Journal for Numerical Methods in Engineering (IJNME)'\n}, {\n  value: 'AnGeo',\n  label: 'Annales Geophysicae (AnGeo)'\n}, {\n  value: 'ApSpe',\n  label: 'Applied Spectroscopy (ApSpe)'\n}, {\n  value: 'NatGe',\n  label: 'Nature Geoscience (NatGe)'\n}, {\n  value: 'SMat',\n  label: 'Soft Matter (SMat)'\n}, {\n  value: 'AnRFM',\n  label: 'Annual Review of Fluid Mechanics (AnRFM)'\n}, {\n  value: 'SeScT',\n  label: 'Semiconductor Science Technology (SeScT)'\n}, {\n  value: 'PPS',\n  label: 'Proceedings of the Physical Society (PPS)'\n}, {\n  value: 'ZPhyA',\n  label: 'Zeitschrift fur Physik A Hadrons and Nuclei (ZPhyA)'\n}, {\n  value: 'GReGr',\n  label: 'General Relativity and Gravitation (GReGr)'\n}, {\n  value: 'JMPSo',\n  label: 'Journal of Mechanics Physics of Solids (JMPSo)'\n}, {\n  value: 'RvGeo',\n  label: 'Reviews of Geophysics (RvGeo)'\n}, {\n  value: 'ADNDT',\n  label: 'Atomic Data and Nuclear Data Tables (ADNDT)'\n}, {\n  value: 'LimOc',\n  label: 'Limnology and Oceanography (LimOc)'\n}, {\n  value: 'JLum',\n  label: 'Journal of Luminescence (JLum)'\n}, {\n  value: 'ARPC',\n  label: 'Annual Review of Physical Chemistry (ARPC)'\n}, {\n  value: 'GGG',\n  label: 'Geochemistry, Geophysics, Geosystems (GGG)'\n}, {\n  value: 'IJCli',\n  label: 'International Journal of Climatology (IJCli)'\n}, {\n  value: 'JAtOT',\n  label: 'Journal of Atmospheric and Oceanic Technology (JAtOT)'\n}, {\n  value: 'JEMat',\n  label: 'Journal of Electronic Materials (JEMat)'\n}, {\n  value: 'JGlac',\n  label: 'Journal of Glaciology (JGlac)'\n}, {\n  value: 'DRM',\n  label: 'Diamond and Related Materials (DRM)'\n}, {\n  value: 'CaJES',\n  label: 'Canadian Journal of Earth Sciences (CaJES)'\n}, {\n  value: 'ECSS',\n  label: 'Estuarine Coastal and Shelf Science (ECSS)'\n}, {\n  value: 'CSR',\n  label: 'Continental Shelf Research (CSR)'\n}, {\n  value: 'Ana',\n  label: 'The Analyst (Ana)'\n}, {\n  value: 'ChPhL',\n  label: 'Chinese Physics Letters (ChPhL)'\n}, {\n  value: 'QuRes',\n  label: 'Quaternary Research (QuRes)'\n}, {\n  value: 'NCimA',\n  label: 'Nuovo Cimento A Serie (NCimA)'\n}, {\n  value: 'AN',\n  label: 'Astronomische Nachrichten (AN)'\n}, {\n  value: 'ITIP',\n  label: 'IEEE Transactions on Image Processing (ITIP)'\n}, {\n  value: 'QuEle',\n  label: 'Quantum Electronics (QuEle)'\n}, {\n  value: 'Nanos',\n  label: 'Nanoscale (Nanos)'\n}, {\n  value: 'AREPS',\n  label: 'Annual Review of Earth and Planetary Sciences (AREPS)'\n}, {\n  value: 'NW',\n  label: 'Naturwissenschaften (NW)'\n}, {\n  value: 'MeScT',\n  label: 'Measurement Science and Technology (MeScT)'\n}, {\n  value: 'Sedim',\n  label: 'Sedimentology (Sedim)'\n}, {\n  value: 'CSF',\n  label: 'Chaos Solitons and Fractals (CSF)'\n}, {\n  value: 'LPI',\n  label: 'Lunar and Planetary Science Conference (LPI)'\n}, {\n  value: 'EPJA',\n  label: 'European Physical Journal A (EPJA)'\n}, {\n  value: 'BVol',\n  label: 'Bulletin of Volcanology (BVol)'\n}, {\n  value: 'SoEn',\n  label: 'Solar Energy (SoEn)'\n}, {\n  value: 'SedG',\n  label: 'Sedimentary Geology (SedG)'\n}, {\n  value: 'EGUGA',\n  label: 'EGU General Assembly Conference Abstracts (EGUGA)'\n}, {\n  value: 'JMOp',\n  label: 'Journal of Modern Optics (JMOp)'\n}, {\n  value: 'APh',\n  label: 'Astroparticle Physics (APh)'\n}, {\n  value: 'PhT',\n  label: 'Physics Today (PhT)'\n}, {\n  value: 'JGRE',\n  label: 'Journal of Geophysical Research (Planets) (JGRE)'\n}, {\n  value: 'AmMin',\n  label: 'American Mineralogist (AmMin)'\n}, {\n  value: 'ARNPS',\n  label: 'Annual Review of Nuclear and Particle Science (ARNPS)'\n}, {\n  value: 'RvGSP',\n  label: 'Reviews of Geophysics and Space Physics (RvGSP)'\n}, {\n  value: 'ESPL',\n  label: 'Earth Surface Processes and Landforms (ESPL)'\n}, {\n  value: 'ScTEn',\n  label: 'Science of the Total Environment (ScTEn)'\n}, {\n  value: 'ESRv',\n  label: 'Earth Science Reviews (ESRv)'\n}, {\n  value: 'JRSp',\n  label: 'Journal of Raman Spectroscopy (JRSp)'\n}, {\n  value: 'ASSL',\n  label: 'Astrophysics and Space Science Library (ASSL)'\n}, {\n  value: 'JPoSB',\n  label: 'Journal of Polymer Science B Polymer Physics (JPoSB)'\n}, {\n  value: 'IJMSI',\n  label: 'International Journal of Mass Spectrometry and Ion Processes (IJMSI)'\n}, {\n  value: 'PApGe',\n  label: 'Pure and Applied Geophysics (PApGe)'\n}, {\n  value: 'EPJD',\n  label: 'European Physical Journal D (EPJD)'\n}, {\n  value: 'JPCRD',\n  label: 'Journal of Physical and Chemical Reference Data (JPCRD)'\n}, {\n  value: 'ITAS',\n  label: 'IEEE Transactions on Applied Superconductivity (ITAS)'\n}, {\n  value: 'M&PS',\n  label: 'Meteoritics and Planetary Science (M&PS)'\n}, {\n  value: 'JAM',\n  label: 'Journal of Applied Mechanics (JAM)'\n}, {\n  value: 'PrOce',\n  label: 'Progress in Oceanography (PrOce)'\n}, {\n  value: 'JASTP',\n  label: 'Journal of Atmospheric and Solar-Terrestrial Physics (JASTP)'\n}, {\n  value: 'EOSTr',\n  label: 'EOS Transactions (EOSTr)'\n}, {\n  value: 'OptMa',\n  label: 'Optical Materials (OptMa)'\n}, {\n  value: 'ESASP',\n  label: 'ESA Special Publication (ESASP)'\n}, {\n  value: 'PhyE',\n  label: 'Physica E Low-Dimensional Systems and Nanostructures (PhyE)'\n}, {\n  value: 'PMagA',\n  label: 'Philosophical Magazine, Part A (PMagA)'\n}, {\n  value: 'PSST',\n  label: 'Plasma Sources Science Technology (PSST)'\n}, {\n  value: 'PMagB',\n  label: 'Philosophical Magazine, Part B (PMagB)'\n}, {\n  value: 'JHyMe',\n  label: 'Journal of Hydrometeorology (JHyMe)'\n}, {\n  value: 'GPC',\n  label: 'Global and Planetary Change (GPC)'\n}, {\n  value: 'BGeo',\n  label: 'Biogeosciences (BGeo)'\n}, {\n  value: 'PhFlB',\n  label: 'Physics of Fluids B (PhFlB)'\n}, {\n  value: 'MGeol',\n  label: 'Marine Geology (MGeol)'\n}, {\n  value: 'DSRA',\n  label: 'Deep Sea Research A (DSRA)'\n}, {\n  value: 'HESS',\n  label: 'Hydrology and Earth System Sciences (HESS)'\n}, {\n  value: 'IJMPB',\n  label: 'International Journal of Modern Physics B (IJMPB)'\n}, {\n  value: 'JChEd',\n  label: 'Journal of Chemical Education (JChEd)'\n}, {\n  value: 'QuInt',\n  label: 'Quaternary International (QuInt)'\n}, {\n  value: 'PhST',\n  label: 'Physica Scripta Volume T (PhST)'\n}, {\n  value: 'Chaos',\n  label: 'Chaos (Chaos)'\n}, {\n  value: 'MEPS',\n  label: 'Marine Ecology Progress Series (MEPS)'\n}, {\n  value: 'OptSp',\n  label: 'Optics and Spectroscopy (OptSp)'\n}, {\n  value: 'IJMPD',\n  label: 'International Journal of Modern Physics D (IJMPD)'\n}, {\n  value: 'AdWR',\n  label: 'Advances in Water Resources (AdWR)'\n}, {\n  value: 'HyInt',\n  label: 'Hyperfine Interactions (HyInt)'\n}, {\n  value: 'JAESc',\n  label: 'Journal of Asian Earth Sciences (JAESc)'\n}, {\n  value: 'AmJS',\n  label: 'American Journal of Science (AmJS)'\n}, {\n  value: 'IAUC',\n  label: 'International Astronomical Union Circular (IAUC)'\n}, {\n  value: 'PrPNP',\n  label: 'Progress in Particle and Nuclear Physics (PrPNP)'\n}, {\n  value: 'RaPC',\n  label: 'Radiation Physics and Chemistry (RaPC)'\n}, {\n  value: 'PThPS',\n  label: 'Progress of Theoretical Physics Supplement (PThPS)'\n}, {\n  value: 'AAS',\n  label: 'American Astronomical Society Meeting Abstracts (AAS)'\n}, {\n  value: 'JPhE',\n  label: 'Journal of Physics E Scientific Instruments (JPhE)'\n}, {\n  value: 'PCPS',\n  label: 'Proceedings of the Cambridge Philosophical Society (PCPS)'\n}, {\n  value: 'Cryo',\n  label: 'Cryogenics (Cryo)'\n}, {\n  value: 'AnGla',\n  label: 'Annals of Glaciology (AnGla)'\n}, {\n  value: 'IJTP',\n  label: 'International Journal of Theoretical Physics (IJTP)'\n}, {\n  value: 'ITAES',\n  label: 'IEEE Transactions on Aerospace Electronic Systems (ITAES)'\n}, {\n  value: 'SvPhU',\n  label: 'Soviet Physics Uspekhi (SvPhU)'\n}, {\n  value: 'JSMTE',\n  label: 'Journal of Statistical Mechanics: Theory and Experiment (JSMTE)'\n}, {\n  value: 'GSLSP',\n  label: 'Geological Society of London Special Publications (GSLSP)'\n}, {\n  value: 'JDE',\n  label: 'Journal of Differential Equations (JDE)'\n}, {\n  value: 'Chmsp',\n  label: 'Chemosphere (Chmsp)'\n}, {\n  value: 'WtFor',\n  label: 'Weather and Forecasting (WtFor)'\n}, {\n  value: 'JRScT',\n  label: 'Journal of Research in Science Teaching (JRScT)'\n}, {\n  value: 'ArRMA',\n  label: 'Archive for Rational Mechanics and Analysis (ArRMA)'\n}, {\n  value: 'JPlPh',\n  label: 'Journal of Plasma Physics (JPlPh)'\n}, {\n  value: 'NCimB',\n  label: 'Nuovo Cimento B Serie (NCimB)'\n}, {\n  value: 'CG',\n  label: 'Computers and Geosciences (CG)'\n}, {\n  value: 'PhFlA',\n  label: 'Physics of Fluids A (PhFlA)'\n}, {\n  value: 'SMaS',\n  label: 'Smart Material Structures (SMaS)'\n}, {\n  value: 'GCBio',\n  label: 'Global Change Biology (GCBio)'\n}, {\n  value: 'JMiMi',\n  label: 'Journal of Micromechanics and Microengineering (JMiMi)'\n}, {\n  value: 'SuMi',\n  label: 'Superlattices and Microstructures (SuMi)'\n}, {\n  value: 'SurSR',\n  label: 'Surface Science Reports (SurSR)'\n}, {\n  value: 'ChPhB',\n  label: 'Chinese Physics B (ChPhB)'\n}, {\n  value: 'TellB',\n  label: 'Tellus Series B Chemical and Physical Meteorology B (TellB)'\n}, {\n  value: 'AcCrA',\n  label: 'Acta Crystallographica Section A (AcCrA)'\n}, {\n  value: 'Oecol',\n  label: 'Oecologia (Oecol)'\n}, {\n  value: 'AuJPh',\n  label: 'Australian Journal of Physics (AuJPh)'\n}, {\n  value: 'BAAS',\n  label: 'Bulletin of the American Astronomical Society (BAAS)'\n}, {\n  value: 'AgFM',\n  label: 'Agricultural and Forest Meteorology (AgFM)'\n}, {\n  value: 'PCM',\n  label: 'Physics and Chemistry of Minerals (PCM)'\n}, {\n  value: 'JMS',\n  label: 'Journal of Marine Systems (JMS)'\n}, {\n  value: 'IJNMF',\n  label: 'International Journal for Numerical Methods in Fluids (IJNMF)'\n}, {\n  value: 'JBO',\n  label: 'Journal of Biomedical Optics (JBO)'\n}, {\n  value: 'ExFl',\n  label: 'Experiments in Fluids (ExFl)'\n}, {\n  value: 'APExp',\n  label: 'Applied Physics Express (APExp)'\n}, {\n  value: 'JRheo',\n  label: 'Journal of Rheology (JRheo)'\n}, {\n  value: 'DSRI',\n  label: 'Deep Sea Research Part I: Oceanographic Research (DSRI)'\n}, {\n  value: 'PPSA',\n  label: 'Proceedings of the Physical Society A (PPSA)'\n}, {\n  value: 'ICRC',\n  label: 'International Cosmic Ray Conference (ICRC)'\n}, {\n  value: 'LanB',\n  label: 'Landolt B&ouml;rnstein (LanB)'\n}, {\n  value: 'AcA',\n  label: 'Acta Astronomica (AcA)'\n}, {\n  value: 'PPP',\n  label: 'Palaeogeography Palaeoclimatology Palaeoecology (PPP)'\n}, {\n  value: 'Tell',\n  label: 'Tellus (Tell)'\n}, {\n  value: 'SciEd',\n  label: 'Science Education (SciEd)'\n}, {\n  value: 'JMetG',\n  label: 'Journal of Metamorphic Geology (JMetG)'\n}, {\n  value: 'PLSCB',\n  label: 'PLoS Computational Biology (PLSCB)'\n}, {\n  value: 'IBVS',\n  label: 'Information Bulletin on Variable Stars (IBVS)'\n}, {\n  value: 'Metro',\n  label: 'Metrologia (Metro)'\n}, {\n  value: 'JGCD',\n  label: 'Journal of Guidance Control Dynamics (JGCD)'\n}, {\n  value: 'AnRMS',\n  label: 'Annual Review of Materials Science (AnRMS)'\n}, {\n  value: 'NatCC',\n  label: 'Nature Climate Change (NatCC)'\n}, {\n  value: 'MTA',\n  label: 'Metallurgical Transactions A (MTA)'\n}, {\n  value: 'ThApC',\n  label: 'Theoretical and Applied Climatology (ThApC)'\n}, {\n  value: 'CzJPh',\n  label: 'Czechoslovak Journal of Physics (CzJPh)'\n}, {\n  value: 'IJMSp',\n  label: 'International Journal of Mass Spectrometry (IJMSp)'\n}, {\n  value: 'JSpRo',\n  label: 'Journal of Spacecraft and Rockets (JSpRo)'\n}, {\n  value: 'Nonli',\n  label: 'Nonlinearity (Nonli)'\n}, {\n  value: 'LaPhL',\n  label: 'Laser Physics Letters (LaPhL)'\n}, {\n  value: 'LMaPh',\n  label: 'Letters in Mathematical Physics (LMaPh)'\n}, {\n  value: 'RemS',\n  label: 'Remote Sensing (RemS)'\n}, {\n  value: 'CCM',\n  label: 'Clays and Clay Minerals (CCM)'\n}, {\n  value: 'SSASJ',\n  label: 'Soil Science Society of America Journal (SSASJ)'\n}, {\n  value: 'IJBC',\n  label: 'International Journal of Bifurcation and Chaos (IJBC)'\n}, {\n  value: 'Metic',\n  label: 'Meteoritics (Metic)'\n}, {\n  value: 'PhSS',\n  label: 'Physics of the Solid State (PhSS)'\n}, {\n  value: 'JGRF',\n  label: 'Journal of Geophysical Research (Earth Surface) (JGRF)'\n}, {\n  value: 'ZPhyD',\n  label: 'Zeitschrift fur Physik D Atoms Molecules Clusters (ZPhyD)'\n}, {\n  value: 'MSSP',\n  label: 'Mechanical Systems and Signal Processing (MSSP)'\n}, {\n  value: 'IGRSL',\n  label: 'IEEE Geoscience and Remote Sensing Letters (IGRSL)'\n}, {\n  value: 'InMat',\n  label: 'Inventiones Mathematicae (InMat)'\n}, {\n  value: 'gr.qc',\n  label: 'ArXiv General Relativity and Quantum Cosmology e-prints (gr.qc)'\n}, {\n  value: 'MMTA',\n  label: 'Metallurgical and Materials Transactions A (MMTA)'\n}, {\n  value: 'EP&S',\n  label: 'Earth, Planets, and Space (EP&S)'\n}, {\n  value: 'GeopP',\n  label: 'Geophysical Prospecting (GeopP)'\n}, {\n  value: 'IJSEd',\n  label: 'International Journal of Science Education (IJSEd)'\n}, {\n  value: 'FaDi',\n  label: 'Faraday Discussions (FaDi)'\n}, {\n  value: 'AtmRe',\n  label: 'Atmospheric Research (AtmRe)'\n}, {\n  value: 'InvPr',\n  label: 'Inverse Problems (InvPr)'\n}, {\n  value: 'SvA',\n  label: 'Soviet Astronomy (SvA)'\n}, {\n  value: 'SPhD',\n  label: 'Soviet Physics Doklady (SPhD)'\n}, {\n  value: 'AcAau',\n  label: 'Acta Astronautica (AcAau)'\n}, {\n  value: 'JCHyd',\n  label: 'Journal of Contaminant Hydrology (JCHyd)'\n}, {\n  value: 'ForPh',\n  label: 'Fortschritte der Physik (ForPh)'\n}, {\n  value: 'Vacuu',\n  label: 'Vacuum (Vacuu)'\n}, {\n  value: 'JApMC',\n  label: 'Journal of Applied Meteorology and Climatology (JApMC)'\n}, {\n  value: 'OptLT',\n  label: 'Optics Laser Technology (OptLT)'\n}, {\n  value: 'STIN',\n  label: 'NASA STI/Recon Technical Report N (STIN)'\n}, {\n  value: 'GCN',\n  label: 'GRB Coordinates Network (GCN)'\n}, {\n  value: 'ER',\n  label: 'Environmental Research (ER)'\n}, {\n  value: 'JPRS',\n  label: 'ISPRS Journal of Photogrammetry and Remote Sensing (JPRS)'\n}, {\n  value: 'JAWRA',\n  label: 'Journal of the American Water Resources Association (JAWRA)'\n}, {\n  value: 'JSedR',\n  label: 'Journal of Sedimentary Research (JSedR)'\n}, {\n  value: 'ZhPmR',\n  label: 'ZhETF Pisma Redaktsiiu (ZhPmR)'\n}, {\n  value: 'ERL',\n  label: 'Environmental Research Letters (ERL)'\n}, {\n  value: 'PhRvS',\n  label: 'Physical Review Accelerators and Beams (PhRvS)'\n}, {\n  value: 'ApPhy',\n  label: 'Applied Physics (ApPhy)'\n}, {\n  value: 'PhyU',\n  label: 'Physics Uspekhi (PhyU)'\n}, {\n  value: 'AuJES',\n  label: 'Australian Journal of Earth Sciences (AuJES)'\n}, {\n  value: 'ATel',\n  label: \"The Astronomer's Telegram (ATel)\"\n}, {\n  value: 'AZh',\n  label: 'Astronomicheskii Zhurnal (AZh)'\n}, {\n  value: 'PAN',\n  label: 'Physics of Atomic Nuclei (PAN)'\n}, {\n  value: 'GApFD',\n  label: 'Geophysical and Astrophysical Fluid Dynamics (GApFD)'\n}, {\n  value: 'PhRvX',\n  label: 'Physical Review X (PhRvX)'\n}, {\n  value: 'SciAm',\n  label: 'Scientific American (SciAm)'\n}, {\n  value: 'JQS',\n  label: 'Journal of Quaternary Science (JQS)'\n}, {\n  value: 'Prama',\n  label: 'Pramana (Prama)'\n}, {\n  value: 'BuSSA',\n  label: 'The Bulletin of the Seismological Society of America (BuSSA)'\n}, {\n  value: 'GeoRu',\n  label: 'Geologische Rundschau (GeoRu)'\n}, {\n  value: 'NRL',\n  label: 'Nanoscale Research Letters (NRL)'\n}, {\n  value: 'AerST',\n  label: 'Aerosol Science Technology (AerST)'\n}, {\n  value: 'ZhETF',\n  label: 'Zhurnal Eksperimentalnoi i Teoreticheskoi Fiziki (ZhETF)'\n}, {\n  value: 'JGRG',\n  label: 'Journal of Geophysical Research (Biogeosciences) (JGRG)'\n}, {\n  value: 'ElL',\n  label: 'Electronics Letters (ElL)'\n}, {\n  value: 'JAfES',\n  label: 'Journal of African Earth Sciences (JAfES)'\n}, {\n  value: 'RSPSB',\n  label: 'Proceedings of the Royal Society of London Series B (RSPSB)'\n}, {\n  value: 'JInst',\n  label: 'Journal of Instrumentation (JInst)'\n}, {\n  value: 'FoPh',\n  label: 'Foundations of Physics (FoPh)'\n}, {\n  value: 'NewA',\n  label: 'New Astronomy (NewA)'\n}, {\n  value: 'PSSCR',\n  label: 'Physica Status Solidi C Current Topics (PSSCR)'\n}, {\n  value: 'NDS',\n  label: 'Nuclear Data Sheets (NDS)'\n}, {\n  value: 'IAWPL',\n  label: 'IEEE Antennas and Wireless Propagation Letters (IAWPL)'\n}, {\n  value: 'LPSC',\n  label: 'Lunar and Planetary Science Conference Proceedings (LPSC)'\n}, {\n  value: 'NCim',\n  label: 'Il Nuovo Cimento (NCim)'\n}, {\n  value: 'RSPTB',\n  label: 'Philosophical Transactions of the Royal Society of London Series B (RSPTB)'\n}, {\n  value: 'JCoMa',\n  label: 'Journal of Composite Materials (JCoMa)'\n}, {\n  value: 'Optik',\n  label: 'Optik (Optik)'\n}, {\n  value: 'CNSNS',\n  label: 'Communications in Nonlinear Science and Numerical Simulations (CNSNS)'\n}, {\n  value: 'OcMod',\n  label: 'Ocean Modelling (OcMod)'\n}, {\n  value: 'NIMPR',\n  label: 'Nuclear Instruments and Methods in Physics Research (NIMPR)'\n}, {\n  value: 'JAerS',\n  label: 'Journal of Aerosol Science (JAerS)'\n}, {\n  value: 'ZA',\n  label: 'Zeitschrift fur Astrophysik (ZA)'\n}, {\n  value: 'CoTPh',\n  label: 'Communications in Theoretical Physics (CoTPh)'\n}, {\n  value: 'MPLB',\n  label: 'Modern Physics Letters B (MPLB)'\n}, {\n  value: 'TMP',\n  label: 'Theoretical and Mathematical Physics (TMP)'\n}, {\n  value: 'AcPPB',\n  label: 'Acta Physica Polonica B (AcPPB)'\n}, {\n  value: 'AMM',\n  label: 'Applied Mechanics and Materials (AMM)'\n}, {\n  value: 'Obs',\n  label: 'The Observatory (Obs)'\n}, {\n  value: 'ConPh',\n  label: 'Contemporary Physics (ConPh)'\n}, {\n  value: 'MAP',\n  label: 'Meteorology and Atmospheric Physics (MAP)'\n}, {\n  value: 'JFS',\n  label: 'Journal of Fluids and Structures (JFS)'\n}, {\n  value: 'AMT',\n  label: 'Atmospheric Measurement Techniques (AMT)'\n}, {\n  value: 'PrSS',\n  label: 'Progress In Surface Science (PrSS)'\n}, {\n  value: 'ISPM',\n  label: 'IEEE Signal Processing Magazine (ISPM)'\n}, {\n  value: 'PMagL',\n  label: 'Philosophical Magazine Letters (PMagL)'\n}, {\n  value: 'GondR',\n  label: 'Gondwana Research (GondR)'\n}, {\n  value: 'LRR',\n  label: 'Living Reviews in Relativity (LRR)'\n}, {\n  value: 'CeMDA',\n  label: 'Celestial Mechanics and Dynamical Astronomy (CeMDA)'\n}, {\n  value: 'KvanE',\n  label: 'Kvantovaia Elektronika Moscow (KvanE)'\n}, {\n  value: 'PhyBC',\n  label: 'Physica B+C (PhyBC)'\n}, {\n  value: 'NPhS',\n  label: 'Nature Physical Science (NPhS)'\n}, {\n  value: 'NHESS',\n  label: 'Natural Hazards and Earth System Sciences (NHESS)'\n}, {\n  value: 'PPSB',\n  label: 'Proceedings of the Physical Society B (PPSB)'\n}, {\n  value: 'GMS',\n  label: 'Washington DC American Geophysical Union Geophysical Monograph Series (GMS)'\n}, {\n  value: 'HydJ',\n  label: 'Hydrogeology Journal (HydJ)'\n}, {\n  value: 'Holoc',\n  label: 'The Holocene (Holoc)'\n}, {\n  value: 'TellA',\n  label: 'Tellus Series A (TellA)'\n}, {\n  value: 'JOptA',\n  label: 'Journal of Optics A: Pure and Applied Optics (JOptA)'\n}, {\n  value: 'IEEEP',\n  label: 'IEEE Proceedings (IEEEP)'\n}, {\n  value: 'JOpt',\n  label: 'Journal of Optics (JOpt)'\n}, {\n  value: 'IJNLM',\n  label: 'International Journal of Non Linear Mechanics (IJNLM)'\n}, {\n  value: 'JGeod',\n  label: 'Journal of Geodesy (JGeod)'\n}, {\n  value: 'NatCh',\n  label: 'Nature Chemistry (NatCh)'\n}, {\n  value: 'PlPh',\n  label: 'Plasma Physics (PlPh)'\n}, {\n  value: 'MPEC',\n  label: 'Minor Planet Electronic Circulars (MPEC)'\n}, {\n  value: 'ISPL',\n  label: 'IEEE Signal Processing Letters (ISPL)'\n}, {\n  value: 'GeoM',\n  label: 'Geological Magazine (GeoM)'\n}, {\n  value: 'LaPhy',\n  label: 'Laser Physics (LaPhy)'\n}, {\n  value: 'CAP',\n  label: 'Current Applied Physics (CAP)'\n}, {\n  value: 'SSSci',\n  label: 'Solid State Sciences (SSSci)'\n}, {\n  value: 'JScI',\n  label: 'Journal of Scientific Instruments (JScI)'\n}, {\n  value: 'BJAP',\n  label: 'British Journal of Applied Physics (BJAP)'\n}, {\n  value: 'CorRe',\n  label: 'Coral Reefs (CorRe)'\n}, {\n  value: 'RuMaS',\n  label: 'Russian Mathematical Surveys (RuMaS)'\n}, {\n  value: 'ZaMM',\n  label: 'Zeitschrift Angewandte Mathematik und Mechanik (ZaMM)'\n}, {\n  value: 'Semic',\n  label: 'Semiconductors (Semic)'\n}, {\n  value: 'IJMPE',\n  label: 'International Journal of Modern Physics E (IJMPE)'\n}, {\n  value: 'GMD',\n  label: 'Geoscientific Model Development (GMD)'\n}, {\n  value: 'CompM',\n  label: 'Computational Mechanics (CompM)'\n}, {\n  value: 'IJMPC',\n  label: 'International Journal of Modern Physics C (IJMPC)'\n}, {\n  value: 'AstL',\n  label: 'Astronomy Letters (AstL)'\n}, {\n  value: 'AcOpt',\n  label: 'Optica Acta (AcOpt)'\n}, {\n  value: 'JPoSc',\n  label: 'Journal of Polymer Science (JPoSc)'\n}, {\n  value: 'A&ARv',\n  label: 'Astronomy and Astrophysics Review (A&ARv)'\n}, {\n  value: 'JGP',\n  label: 'Journal of Geometry and Physics (JGP)'\n}, {\n  value: 'Geode',\n  label: 'Geofisica Internacional (Geode)'\n}, {\n  value: 'MinM',\n  label: 'Mineralogical Magazine (MinM)'\n}, {\n  value: 'PhTea',\n  label: 'The Physics Teacher (PhTea)'\n}, {\n  value: 'MmSAI',\n  label: 'Memorie della Societa Astronomica Italiana (MmSAI)'\n}, {\n  value: 'TCry',\n  label: 'The Cryosphere (TCry)'\n}, {\n  value: 'NewAR',\n  label: 'New Astronomy Reviews (NewAR)'\n}, {\n  value: 'MT',\n  label: 'Metallurgical Transactions (MT)'\n}, {\n  value: 'ApL',\n  label: 'Astrophysical Letters (ApL)'\n}, {\n  value: 'PASA',\n  label: 'Publications of the Astronomical Society of Australia (PASA)'\n}, {\n  value: 'MSMSE',\n  label: 'Modelling Simul. Mater. Sci. Eng. (MSMSE)'\n}, {\n  value: 'IJEaS',\n  label: 'International Journal of Earth Sciences (IJEaS)'\n}, {\n  value: 'ASIC',\n  label: 'NATO Advanced Science Institutes (ASI) Series C (ASIC)'\n}, {\n  value: 'AdTMP',\n  label: 'Advances in Theoretical and Mathematical Physics (AdTMP)'\n}, {\n  value: 'MPC',\n  label: 'Minor Planet Circulars (MPC)'\n}, {\n  value: 'IJT',\n  label: 'International Journal of Thermophysics (IJT)'\n}, {\n  value: 'MinDe',\n  label: 'Mineralium Deposita (MinDe)'\n}, {\n  value: 'OptLE',\n  label: 'Optics and Lasers in Engineering (OptLE)'\n}, {\n  value: 'ACPD',\n  label: 'Atmospheric Chemistry & Physics Discussions (ACPD)'\n}, {\n  value: 'Wthr',\n  label: 'Weather (Wthr)'\n}, {\n  value: 'ChPhy',\n  label: 'Chinese Physics (ChPhy)'\n}, {\n  value: 'CeMec',\n  label: 'Celestial Mechanics (CeMec)'\n}, {\n  value: 'TePhL',\n  label: 'Technical Physics Letters (TePhL)'\n}, {\n  value: 'JOM',\n  label: 'JOM - Journal of the Minerals, Metals and Materials Society (JOM)'\n}, {\n  value: 'JNR',\n  label: 'Journal of Nanoparticle Research (JNR)'\n}, {\n  value: 'BAN',\n  label: 'Bulletin of the Astronomical Institutes of the Netherlands (BAN)'\n}, {\n  value: 'AIPA',\n  label: 'AIP Advances (AIPA)'\n}, {\n  value: 'JSAES',\n  label: 'Journal of South American Earth Sciences (JSAES)'\n}, {\n  value: 'LTP',\n  label: 'Low Temperature Physics (LTP)'\n}, {\n  value: 'TeNov',\n  label: 'Terra Nova (TeNov)'\n}, {\n  value: 'CoPP',\n  label: 'Contributions to Plasma Physics (CoPP)'\n}, {\n  value: 'JAG',\n  label: 'Journal of Applied Geophysics (JAG)'\n}, {\n  value: 'SIAMR',\n  label: 'SIAM Review (SIAMR)'\n}, {\n  value: 'AsBio',\n  label: 'Astrobiology (AsBio)'\n}, {\n  value: 'Ge&Ae',\n  label: 'Geomagnetism and Aeronomy (Ge&Ae)'\n}, {\n  value: 'SJNA',\n  label: 'SIAM Journal on Numerical Analysis (SJNA)'\n}, {\n  value: 'MiMic',\n  label: 'Microscopy and Microanalysis (MiMic)'\n}, {\n  value: 'LPB',\n  label: 'Laser and Particle Beams (LPB)'\n}, {\n  value: 'ChSBu',\n  label: 'Chinese Science Bulletin (ChSBu)'\n}, {\n  value: 'EPJE',\n  label: 'European Physical Journal E (EPJE)'\n}, {\n  value: 'NHTA',\n  label: 'Numerical Heat Transfer Part A - Applications (NHTA)'\n}, {\n  value: 'MS&E',\n  label: 'Materials Science and Engineering Conference Series (MS&E)'\n}, {\n  value: 'JKPS',\n  label: 'Journal of Korean Physical Society (JKPS)'\n}, {\n  value: 'ZK',\n  label: 'Zeitschrift fur Kristallographie (ZK)'\n}, {\n  value: 'AdAtS',\n  label: 'Advances in Atmospheric Sciences (AdAtS)'\n}, {\n  value: 'JGG',\n  label: 'Journal of Geomagnetism and Geoelectricity (JGG)'\n}, {\n  value: 'ChPhC',\n  label: 'Chinese Physics C (ChPhC)'\n}, {\n  value: 'SvAL',\n  label: 'Soviet Astronomy Letters (SvAL)'\n}, {\n  value: 'ZaMP',\n  label: 'Zeitschrift Angewandte Mathematik und Physik (ZaMP)'\n}, {\n  value: 'AnAp',\n  label: \"Annales d'Astrophysique (AnAp)\"\n}, {\n  value: 'EPJST',\n  label: 'European Physical Journal Special Topics (EPJST)'\n}, {\n  value: 'RpMP',\n  label: 'Reports on Mathematical Physics (RpMP)'\n}, {\n  value: 'JOptB',\n  label: 'Journal of Optics B: Quantum and Semiclassical Optics (JOptB)'\n}, {\n  value: 'GML',\n  label: 'Geo-Marine Letters (GML)'\n}, {\n  value: 'Msngr',\n  label: 'The Messenger (Msngr)'\n}, {\n  value: 'CliPa',\n  label: 'Climate of the Past (CliPa)'\n}, {\n  value: 'InfPh',\n  label: 'Infrared Physics (InfPh)'\n}, {\n  value: 'SPIE1',\n  label: 'Society of Photo-Optical Instrumentation Engineers (SPIE) Conference Series (SPIE1)'\n}, {\n  value: 'JGeo',\n  label: 'Journal of Geodynamics (JGeo)'\n}, {\n  value: 'RMxAA',\n  label: 'Revista Mexicana de Astronomia y Astrofisica (RMxAA)'\n}, {\n  value: 'R&QE',\n  label: 'Radiophysics and Quantum Electronics (R&QE)'\n}, {\n  value: 'IJAEO',\n  label: 'International Journal of Applied Earth Observation and Geoinformation (IJAEO)'\n}, {\n  value: 'RadR',\n  label: 'Radiation Research (RadR)'\n}, {\n  value: 'JTST',\n  label: 'Journal of Thermal Spray Technology (JTST)'\n}, {\n  value: 'PlPhR',\n  label: 'Plasma Physics Reports (PlPhR)'\n}, {\n  value: 'yCat',\n  label: 'VizieR Online Data Catalog (yCat)'\n}, {\n  value: 'Mate',\n  label: 'Materials (Mate)'\n}, {\n  value: 'ITNan',\n  label: 'IEEE Transactions on Nanotechnology (ITNan)'\n}, {\n  value: 'IJBm',\n  label: 'International Journal of Biometeorology (IJBm)'\n}, {\n  value: 'WASP',\n  label: 'Water Air and Soil Pollution (WASP)'\n}, {\n  value: 'EM&P',\n  label: 'Earth Moon and Planets (EM&P)'\n}, {\n  value: 'S&T',\n  label: 'Sky and Telescope (S&T)'\n}, {\n  value: 'IJSSC',\n  label: 'IEEE Journal of Solid-State Circuits (IJSSC)'\n}, {\n  value: 'ApMRv',\n  label: 'Applied Mechanics Reviews (ApMRv)'\n}, {\n  value: 'ARep',\n  label: 'Astronomy Reports (ARep)'\n}, {\n  value: 'DPS',\n  label: 'AAS/Division for Planetary Sciences Meeting Abstracts (DPS)'\n}, {\n  value: 'InPhT',\n  label: 'Infrared Physics and Technology (InPhT)'\n}, {\n  value: 'NPGeo',\n  label: 'Nonlinear Processes in Geophysics (NPGeo)'\n}, {\n  value: 'IJIMW',\n  label: 'International Journal of Infrared and Millimeter Waves (IJIMW)'\n}, {\n  value: 'SGeo',\n  label: 'Surveys in Geophysics (SGeo)'\n}, {\n  value: 'EPJWC',\n  label: 'European Physical Journal Web of Conferences (EPJWC)'\n}, {\n  value: 'FBS',\n  label: 'Few-Body Systems (FBS)'\n}, {\n  value: 'PCE',\n  label: 'Physics and Chemistry of the Earth (PCE)'\n}, {\n  value: 'MinPe',\n  label: 'Mineralogy and Petrology (MinPe)'\n}, {\n  value: 'IJQC',\n  label: 'International Journal of Quantum Chemistry (IJQC)'\n}, {\n  value: 'CaJRS',\n  label: 'Canadian Journal of Remote Sensing (CaJRS)'\n}, {\n  value: 'CRPhy',\n  label: 'Comptes Rendus Physique (CRPhy)'\n}, {\n  value: 'JRASC',\n  label: 'Journal of the Royal Astronomical Society of Canada (JRASC)'\n}, {\n  value: 'JTePh',\n  label: 'Journal of Technical Physics (JTePh)'\n}, {\n  value: 'IGRv',\n  label: 'International Geology Review (IGRv)'\n}, {\n  value: 'OcDyn',\n  label: 'Ocean Dynamics (OcDyn)'\n}, {\n  value: 'DyAtO',\n  label: 'Dynamics of Atmospheres and Oceans (DyAtO)'\n}, {\n  value: 'JCoAM',\n  label: 'Journal of Computational and Applied Mathematics (JCoAM)'\n}, {\n  value: 'JSR',\n  label: 'Journal of Sea Research (JSR)'\n}, {\n  value: 'TrAGU',\n  label: 'Transactions, American Geophysical Union (TrAGU)'\n}, {\n  value: 'RuCRv',\n  label: 'Russian Chemical Reviews (RuCRv)'\n}, {\n  value: 'RadM',\n  label: 'Radiation Measurements (RadM)'\n}, {\n  value: 'JMolE',\n  label: 'Journal of Molecular Evolution (JMolE)'\n}, {\n  value: 'AdAMP',\n  label: 'Advances in Atomic and Molecular Physics (AdAMP)'\n}, {\n  value: 'LPICo',\n  label: 'LPI Contributions (LPICo)'\n}, {\n  value: 'Afz',\n  label: 'Astrofizika (Afz)'\n}, {\n  value: 'BAICz',\n  label: 'Bulletin of the Astronomical Institutes of Czechoslovakia (BAICz)'\n}, {\n  value: 'IAPM',\n  label: 'IEEE Antennas and Propagation Magazine (IAPM)'\n}, {\n  value: 'EJPh',\n  label: 'European Journal of Physics (EJPh)'\n}, {\n  value: 'JPhy1',\n  label: 'Journal de Physique I (JPhy1)'\n}, {\n  value: 'PhPro',\n  label: 'Physics Procedia (PhPro)'\n}, {\n  value: 'PQE',\n  label: 'Progress in Quantum Electronics (PQE)'\n}, {\n  value: 'Entrp',\n  label: 'Entropy (Entrp)'\n}, {\n  value: 'SoilS',\n  label: 'Soil Science (SoilS)'\n}, {\n  value: 'EPJAP',\n  label: 'European Physical Journal Applied Physics (EPJAP)'\n}, {\n  value: 'BrJPh',\n  label: 'Brazilian Journal of Physics (BrJPh)'\n}, {\n  value: 'HPR',\n  label: 'High Pressure Research (HPR)'\n}, {\n  value: 'SbMat',\n  label: 'Sbornik: Mathematics (SbMat)'\n}, {\n  value: 'JApSp',\n  label: 'Journal of Applied Spectroscopy (JApSp)'\n}, {\n  value: 'AGUSM',\n  label: 'AGU Spring Meeting Abstracts (AGUSM)'\n}, {\n  value: 'EnGeo',\n  label: 'Environmental Geology (EnGeo)'\n}, {\n  value: 'MmRAS',\n  label: 'Memoirs of the Royal Astronomical Society (MmRAS)'\n}, {\n  value: 'EnMan',\n  label: 'Environmental Management (EnMan)'\n}, {\n  value: 'COSSM',\n  label: 'Current Opinion in Solid State and Materials Science (COSSM)'\n}, {\n  value: 'CRGeo',\n  label: 'Comptes Rendus Geoscience (CRGeo)'\n}, {\n  value: 'IAM',\n  label: 'International Applied Mechanics (IAM)'\n}, {\n  value: 'AdQC',\n  label: 'Advances in Quantum Chemistry (AdQC)'\n}, {\n  value: 'RvMG',\n  label: 'Reviews in Mineralogy and Geochemistry (RvMG)'\n}, {\n  value: 'AAMOP',\n  label: 'Advances in Atomic Molecular and Optical Physics (AAMOP)'\n}, {\n  value: 'RCMS',\n  label: 'Rapid Communications in Mass Spectrometry (RCMS)'\n}, {\n  value: 'EJMin',\n  label: 'European Journal of Mineralogy (EJMin)'\n}, {\n  value: 'QJRAS',\n  label: 'Quarterly Journal of the Royal Astronomical Society (QJRAS)'\n}, {\n  value: 'SciA',\n  label: 'Science Advances (SciA)'\n}, {\n  value: 'JMEP',\n  label: 'Journal of Materials Engineering and Performance (JMEP)'\n}, {\n  value: 'JSup',\n  label: 'Journal of Superconductivity (JSup)'\n}, {\n  value: 'MTB',\n  label: 'Metallurgical Transactions B (MTB)'\n}, {\n  value: 'NCimC',\n  label: 'Nuovo Cimento C Geophysics Space Physics C (NCimC)'\n}, {\n  value: 'NASSP',\n  label: 'NASA Special Publication (NASSP)'\n}, {\n  value: 'NHTB',\n  label: 'Numerical Heat Transfer Part B - Fundamentals (NHTB)'\n}, {\n  value: 'JAMTP',\n  label: 'Journal of Applied Mechanics and Technical Physics (JAMTP)'\n}, {\n  value: 'ITPE',\n  label: 'IEEE Transactions on Power Electronics (ITPE)'\n}, {\n  value: 'ClMin',\n  label: 'Clay Minerals (ClMin)'\n}, {\n  value: 'SpecL',\n  label: 'Spectroscopy Letters (SpecL)'\n}, {\n  value: 'JAtC',\n  label: 'Journal of Atmospheric Chemistry (JAtC)'\n}, {\n  value: 'PrAeS',\n  label: 'Progress in Aerospace Sciences (PrAeS)'\n}, {\n  value: 'MMAS',\n  label: 'Mathematical Methods in the Applied Sciences (MMAS)'\n}, {\n  value: 'DoSSR',\n  label: 'Akademiia Nauk SSSR Doklady (DoSSR)'\n}, {\n  value: 'JBAA',\n  label: 'Journal of the British Astronomical Association (JBAA)'\n}, {\n  value: 'VA',\n  label: 'Vistas in Astronomy (VA)'\n}, {\n  value: 'MarMP',\n  label: 'Marine Micropaleontology (MarMP)'\n}, {\n  value: 'IJNAM',\n  label: 'International Journal for Numerical and Analytical Methods in Geomechanics (IJNAM)'\n}, {\n  value: 'PhyEd',\n  label: 'Physics Education (PhyEd)'\n}, {\n  value: 'OLEB',\n  label: 'Origins of Life and Evolution of the Biosphere (OLEB)'\n}, {\n  value: 'RAA',\n  label: 'Research in Astronomy and Astrophysics (RAA)'\n}, {\n  value: 'STAdM',\n  label: 'Science and Technology of Advanced Materials (STAdM)'\n}, {\n  value: 'QuIP',\n  label: 'Quantum Information Processing (QuIP)'\n}, {\n  value: 'MMTB',\n  label: 'Metallurgical and Materials Transactions B (MMTB)'\n}, {\n  value: 'BasR',\n  label: 'Basin Research (BasR)'\n}, {\n  value: 'PSSRR',\n  label: 'Physica Status Solidi Rapid Research Letters (PSSRR)'\n}, {\n  value: 'SpWea',\n  label: 'Space Weather (SpWea)'\n}, {\n  value: 'SCPMA',\n  label: 'Science China Physics, Mechanics, and Astronomy (SCPMA)'\n}, {\n  value: 'ARCMP',\n  label: 'Annual Review of Condensed Matter Physics (ARCMP)'\n}, {\n  value: 'JCAMD',\n  label: 'Journal of Computer-Aided Molecular Design (JCAMD)'\n}, {\n  value: 'FlDyR',\n  label: 'Fluid Dynamics Research (FlDyR)'\n}, {\n  value: 'ITPSy',\n  label: 'IEEE Transactions on Power Systems (ITPSy)'\n}, {\n  value: 'DokES',\n  label: 'Doklady Earth Sciences (DokES)'\n}, {\n  value: 'OptFT',\n  label: 'Optical Fiber Technology (OptFT)'\n}, {\n  value: 'EJMF',\n  label: 'European Journal of Mechanics B Fluids (EJMF)'\n}, {\n  value: 'CryRp',\n  label: 'Crystallography Reports (CryRp)'\n}, {\n  value: 'IJCA',\n  label: 'International Journal of Computer Applications (IJCA)'\n}, {\n  value: 'JPhy2',\n  label: 'Journal de Physique II (JPhy2)'\n}, {\n  value: 'MeApp',\n  label: 'Meteorological Applications (MeApp)'\n}, {\n  value: 'ISTSP',\n  label: 'IEEE Journal of Selected Topics in Signal Processing (ISTSP)'\n}, {\n  value: 'JMSp',\n  label: 'Journal of Mass Spectrometry (JMSp)'\n}, {\n  value: 'REDS',\n  label: 'Radiation Effects and Defects in Solids (REDS)'\n}, {\n  value: 'JGSoc',\n  label: 'Journal of the Geological Society (JGSoc)'\n}, {\n  value: 'PASA',\n  label: 'Publications of the Astronomical Society of Australia (PASA)'\n}, {\n  value: 'IJSTQ',\n  label: 'IEEE Journal of Selected Topics in Quantum Electronics (IJSTQ)'\n}, {\n  value: 'JApMM',\n  label: 'Journal of Applied Mathematics and Mechanics (JApMM)'\n}, {\n  value: 'AdGeo',\n  label: 'Advances in Geophysics (AdGeo)'\n}, {\n  value: 'MaCom',\n  label: 'Mathematics of Computation (MaCom)'\n}, {\n  value: 'JDisT',\n  label: 'Journal of Display Technology (JDisT)'\n}, {\n  value: 'ApGC',\n  label: 'Applied Geochemistry (ApGC)'\n}, {\n  value: 'ClRes',\n  label: 'Climate Research (ClRes)'\n}, {\n  value: 'E&ES',\n  label: 'IOP Conference Series: Earth and Environmental Science (E&ES)'\n}, {\n  value: 'JApA',\n  label: 'Journal of Astrophysics and Astronomy (JApA)'\n}, {\n  value: 'NCimD',\n  label: 'Nuovo Cimento D Serie (NCimD)'\n}, {\n  value: 'JArEn',\n  label: 'Journal of Arid Environments (JArEn)'\n}, {\n  value: 'GeCAS',\n  label: 'Geochimica et Cosmochimica Acta Supplement (GeCAS)'\n}, {\n  value: 'ExA',\n  label: 'Experimental Astronomy (ExA)'\n}, {\n  value: 'AnHP',\n  label: 'Annales Henri Poincar&eacute; (AnHP)'\n}, {\n  value: 'FlDy',\n  label: 'Fluid Dynamics (FlDy)'\n}, {\n  value: 'JJAPS',\n  label: 'Japanese Journal of Applied Physics Supplement (JJAPS)'\n}, {\n  value: 'DSR',\n  label: 'Deep Sea Research (DSR)'\n}, {\n  value: 'IRPC',\n  label: 'International Reviews in Physical Chemistry (IRPC)'\n}, {\n  value: 'EJMS',\n  label: 'European Journal of Mechanics Solids (EJMS)'\n}, {\n  value: 'HMT',\n  label: 'Heat and Mass Transfer (HMT)'\n}, {\n  value: 'PA',\n  label: 'Popular Astronomy (PA)'\n}, {\n  value: 'SPTP',\n  label: 'Soviet Physics Technical Physics (SPTP)'\n}, {\n  value: 'CBET',\n  label: 'Central Bureau Electronic Telegrams (CBET)'\n}, {\n  value: 'C&T',\n  label: 'Ciel et Terre (C&T)'\n}, {\n  value: 'MPCPS',\n  label: 'Mathematical Proceedings of the Cambridge Philosophical Society (MPCPS)'\n}, {\n  value: 'CRSSM',\n  label: 'Critical Reviews in Solid State & Materials Sciences (CRSSM)'\n}, {\n  value: 'JMSB',\n  label: 'Journal of Macromolecular Science, Part B (JMSB)'\n}, {\n  value: 'RvMaP',\n  label: 'Reviews in Mathematical Physics (RvMaP)'\n}, {\n  value: 'NJSR',\n  label: 'Netherlands Journal of Sea Research (NJSR)'\n}, {\n  value: 'JNEng',\n  label: 'Journal of Neural Engineering (JNEng)'\n}, {\n  value: 'JAMES',\n  label: 'Journal of Advances in Modeling Earth Systems (JAMES)'\n}, {\n  value: 'JPoSL',\n  label: 'Journal of Polymer Science: Polymer Letters Edition (JPoSL)'\n}, {\n  value: 'WiEn',\n  label: 'Wind Energy (WiEn)'\n}, {\n  value: 'RuPhJ',\n  label: 'Russian Physics Journal (RuPhJ)'\n}, {\n  value: 'MetZe',\n  label: 'Meteorologische Zeitschrift (MetZe)'\n}, {\n  value: 'JCP',\n  label: 'Journal de Chimie Physique (JCP)'\n}, {\n  value: 'ThCFD',\n  label: 'Theoretical and Computational Fluid Dynamics (ThCFD)'\n}, {\n  value: 'PhRvP',\n  label: 'Physical Review Applied (PhRvP)'\n}, {\n  value: 'ESOC',\n  label: 'European Southern Observatory Conference and Workshop Proceedings (ESOC)'\n}, {\n  value: 'ShWav',\n  label: 'Shock Waves (ShWav)'\n}, {\n  value: 'EAEJA',\n  label: 'EGS - AGU - EUG Joint Assembly (EAEJA)'\n}, {\n  value: 'PKM',\n  label: 'Physik der Kondensierten Materie (PKM)'\n}, {\n  value: 'PAZh',\n  label: 'Pisma v Astronomicheskii Zhurnal (PAZh)'\n}, {\n  value: 'OcSci',\n  label: 'Ocean Science (OcSci)'\n}, {\n  value: 'JASMS',\n  label: 'Journal of The American Society for Mass Spectrometry (JASMS)'\n}, {\n  value: 'StGG',\n  label: 'Studia Geophysica et Geodaetica (StGG)'\n}, {\n  value: 'RScEd',\n  label: 'Research in Science Education (RScEd)'\n}, {\n  value: 'IzMat',\n  label: 'Izvestiya: Mathematics (IzMat)'\n}, {\n  value: 'PhyM',\n  label: 'Physiological Measurement (PhyM)'\n}, {\n  value: 'RSPT',\n  label: 'Philosophical Transactions of the Royal Society of London Series I (RSPT)'\n}, {\n  value: 'BaltA',\n  label: 'Baltic Astronomy (BaltA)'\n}, {\n  value: 'MSHT',\n  label: 'Metal Science and Heat Treatment (MSHT)'\n}, {\n  value: 'Moon',\n  label: 'Moon (Moon)'\n}, {\n  value: 'EPJP',\n  label: 'European Physical Journal Plus (EPJP)'\n}, {\n  value: 'BASI',\n  label: 'Bulletin of the Astronomical Society of India (BASI)'\n}, {\n  value: 'RMxAC',\n  label: 'Revista Mexicana de Astronomia y Astrofisica Conference Series (RMxAC)'\n}, {\n  value: 'BGD',\n  label: 'Biogeosciences Discussions (BGD)'\n}, {\n  value: 'ITEdu',\n  label: 'IEEE Transactions on Education (ITEdu)'\n}, {\n  value: 'OptRv',\n  label: 'Optical Review (OptRv)'\n}, {\n  value: 'SRL',\n  label: 'Surface Review and Letters (SRL)'\n}, {\n  value: 'JNS',\n  label: 'Journal of NonLinear Science (JNS)'\n}, {\n  value: 'LAstr',\n  label: \"L'Astronomie (LAstr)\"\n}, {\n  value: 'SvPhJ',\n  label: 'Soviet Physics Journal (SvPhJ)'\n}, {\n  value: 'PlST',\n  label: 'Plasma Science and Technology (PlST)'\n}, {\n  value: 'Geosp',\n  label: 'Geosphere (Geosp)'\n}, {\n  value: 'Ap',\n  label: 'Astrophysics (Ap)'\n}, {\n  value: 'JElS',\n  label: 'Journal of the Electrochemical Society (JElS)'\n}, {\n  value: 'DokPh',\n  label: 'Physics - Doklady (DokPh)'\n}, {\n  value: 'FCPh',\n  label: 'Fundamentals of Cosmic Physics (FCPh)'\n}, {\n  value: 'MSRv',\n  label: 'Mass Spectrometry Reviews (MSRv)'\n}, {\n  value: 'MarGR',\n  label: 'Marine Geophysical Research (MarGR)'\n}, {\n  value: 'NDT',\n  label: 'Nuclear Data Tables (NDT)'\n}, {\n  value: 'NASCP',\n  label: 'NASA Conference Publication (NASCP)'\n}, {\n  value: 'SurSL',\n  label: 'Surface Science Letters (SurSL)'\n}, {\n  value: 'ISenJ',\n  label: 'IEEE Sensors Journal (ISenJ)'\n}, {\n  value: 'JEnMa',\n  label: 'Journal of Engineering Mathematics (JEnMa)'\n}, {\n  value: 'RMRE',\n  label: 'Rock Mechanics and Rock Engineering (RMRE)'\n}, {\n  value: 'HDP',\n  label: 'Handbuch der Physik (HDP)'\n}, {\n  value: 'LRSP',\n  label: 'Living Reviews in Solar Physics (LRSP)'\n}, {\n  value: 'PTEP',\n  label: 'Progress of Theoretical and Experimental Physics (PTEP)'\n}, {\n  value: 'PhBio',\n  label: 'Physical Biology (PhBio)'\n}, {\n  value: 'AmSci',\n  label: 'American Scientist (AmSci)'\n}, {\n  value: 'JSeis',\n  label: 'Journal of Seismology (JSeis)'\n}, {\n  value: 'AcMSn',\n  label: 'Acta Mechanica Sinica (AcMSn)'\n}, {\n  value: 'Palai',\n  label: 'PALAIOS (Palai)'\n}, {\n  value: 'OptPN',\n  label: 'Optics & Photonics News (OptPN)'\n}, {\n  value: 'LNCS',\n  label: 'Lecture Notes in Computer Science (LNCS)'\n}, {\n  value: 'GrCo',\n  label: 'Gravitation and Cosmology (GrCo)'\n}, {\n  value: 'UsFiN',\n  label: 'Uspekhi Fizicheskikh Nauk (UsFiN)'\n}, {\n  value: 'RJPCA',\n  label: 'Russian Journal of Physical Chemistry A (RJPCA)'\n}, {\n  value: 'IJTPE',\n  label: 'IEEJ Transactions on Power and Energy (IJTPE)'\n}, {\n  value: 'ARMS',\n  label: 'Annual Review of Marine Science (ARMS)'\n}, {\n  value: 'SIGMA',\n  label: 'SIGMA (SIGMA)'\n}, {\n  value: 'CoPhR',\n  label: 'Computer Physics Reports (CoPhR)'\n}, {\n  value: 'ECMS',\n  label: 'Estuarine and Coastal Marine Science (ECMS)'\n}, {\n  value: 'CMT',\n  label: 'Continuum Mechanics and Thermodynamics (CMT)'\n}, {\n  value: 'APhy',\n  label: 'Acoustical Physics (APhy)'\n}, {\n  value: 'ApSRv',\n  label: 'Applied Spectroscopy Reviews (ApSRv)'\n}, {\n  value: 'Sc&Ed',\n  label: 'Science & Education (Sc&Ed)'\n}, {\n  value: 'ChOpL',\n  label: 'Chinese Optics Letters (ChOpL)'\n}, {\n  value: 'PDiff',\n  label: 'Powder Diffraction (PDiff)'\n}, {\n  value: 'AnPh',\n  label: 'Annales de Physique (AnPh)'\n}, {\n  value: 'HEDP',\n  label: 'High Energy Density Physics (HEDP)'\n}, {\n  value: 'SoSyR',\n  label: 'Solar System Research (SoSyR)'\n}, {\n  value: 'ITPAS',\n  label: 'IEEE Transactions on Power Apparatus Systems (ITPAS)'\n}, {\n  value: 'prpl.conf',\n  label: 'Protostars and Planets (prpl.conf)'\n}, {\n  value: 'NCimR',\n  label: 'Nuovo Cimento Rivista Serie (NCimR)'\n}, {\n  value: 'AAM',\n  label: 'Archive of Applied Mechanics (AAM)'\n}, {\n  value: 'PDAO',\n  label: 'Publications of the Dominion Astrophysical Observatory Victoria (PDAO)'\n}, {\n  value: 'JPall',\n  label: 'Journal of Palaeolimnology (JPall)'\n}, {\n  value: 'RaF',\n  label: 'Radiofizika (RaF)'\n}, {\n  value: 'EJASP',\n  label: 'EURASIP Journal on Applied Signal Processing (EJASP)'\n}, {\n  value: 'RuGG',\n  label: 'Russian Geology and Geophysics (RuGG)'\n}, {\n  value: 'JEI',\n  label: 'Journal of Electronic Imaging (JEI)'\n}, {\n  value: 'TSICE',\n  label: 'Transactions of the Society of Instrument and Control Engineers (TSICE)'\n}, {\n  value: 'HTrEn',\n  label: 'Heat Transfer Engineering (HTrEn)'\n}, {\n  value: 'ATsir',\n  label: 'Astronomicheskij Tsirkulyar (ATsir)'\n}, {\n  value: 'ClCh',\n  label: 'Climatic Change (ClCh)'\n}, {\n  value: 'SciMo',\n  label: 'The Scientific Monthly (SciMo)'\n}, {\n  value: 'InJPh',\n  label: 'Indian Journal of Physics (InJPh)'\n}, {\n  value: 'HESSD',\n  label: 'Hydrology and Earth System Sciences Discussions (HESSD)'\n}, {\n  value: 'SAOSR',\n  label: 'SAO Special Report (SAOSR)'\n}, {\n  value: 'JEP',\n  label: 'Journal of Engineering Physics (JEP)'\n}, {\n  value: 'IJTFM',\n  label: 'IEEJ Transactions on Fundamentals and Materials (IJTFM)'\n}, {\n  value: 'AD',\n  label: 'Atomic Data (AD)'\n}, {\n  value: 'ITEIS',\n  label: 'IEEJ Transactions on Electronics, Information and Systems (ITEIS)'\n}, {\n  value: 'WRM',\n  label: 'Waves in Random Media (WRM)'\n}, {\n  value: 'PZETF',\n  label: 'Pisma v Zhurnal Eksperimentalnoi i Teoreticheskoi Fiziki (PZETF)'\n}, {\n  value: 'HiA',\n  label: 'Highlights of Astronomy (HiA)'\n}, {\n  value: 'CRASM',\n  label: 'Academie des Sciences Paris Comptes Rendus Serie Sciences Mathematiques (CRASM)'\n}, {\n  value: 'AIHPC',\n  label: \"Annales de L'Institut Henri Poincare Section (C) Non Linear Analysis (AIHPC)\"\n}, {\n  value: 'CosRe',\n  label: 'Cosmic Research (CosRe)'\n}, {\n  value: 'MsT',\n  label: 'Masters Thesis (MsT)'\n}, {\n  value: 'NCimL',\n  label: 'Nuovo Cimento Lettere (NCimL)'\n}, {\n  value: 'FizPl',\n  label: 'Fizika Plazmy (FizPl)'\n}, {\n  value: 'ISPAr',\n  label: 'ISPRS - International Archives of the Photogrammetry, Remote Sensing and Spatial Information Sciences (ISPAr)'\n}, {\n  value: 'AcO',\n  label: 'Acta Oecologica (AcO)'\n}, {\n  value: 'JESS',\n  label: 'Journal of Earth System Science (JESS)'\n}, {\n  value: 'JTurb',\n  label: 'Journal of Turbulence (JTurb)'\n}, {\n  value: 'APLM',\n  label: 'APL Materials (APLM)'\n}, {\n  value: 'IJTIA',\n  label: 'IEEJ Transactions on Industry Applications (IJTIA)'\n}, {\n  value: 'JMAA',\n  label: 'Journal of Mathematical Analysis and Applications (JMAA)'\n}, {\n  value: 'JNOPM',\n  label: 'Journal of Nonlinear Optical Physics and Materials (JNOPM)'\n}, {\n  value: 'JNET',\n  label: 'Journal of Non Equilibrium Thermodynamics (JNET)'\n}, {\n  value: 'SScEd',\n  label: 'Studies in Science Education (SScEd)'\n}, {\n  value: 'MRE',\n  label: 'Materials Research Express (MRE)'\n}, {\n  value: 'TDM',\n  label: '2D Materials (TDM)'\n}, {\n  value: 'ComPh',\n  label: 'Computers in Physics (ComPh)'\n}, {\n  value: 'IEITE',\n  label: 'IEICE Transactions on Electronics (IEITE)'\n}, {\n  value: 'JApSc',\n  label: 'Journal of Applied Sciences (JApSc)'\n}, {\n  value: 'M&PSA',\n  label: 'Meteoritics and Planetary Science Supplement (M&PSA)'\n}, {\n  value: 'PFR',\n  label: 'Plasma and Fusion Research (PFR)'\n}, {\n  value: 'RaEl',\n  label: 'Radiotekhnika i Elektronika (RaEl)'\n}, {\n  value: 'AcASn',\n  label: 'Acta Astronomica Sinica (AcASn)'\n}, {\n  value: 'ChJAA',\n  label: 'Chinese Journal of Astronomy and Astrophysics (ChJAA)'\n}, {\n  value: 'TTSP',\n  label: 'Transport Theory and Statistical Physics (TTSP)'\n}, {\n  value: 'JSemi',\n  label: 'Journal of Semiconductors (JSemi)'\n}, {\n  value: 'RSPS',\n  label: 'Proceedings of the Royal Society of London Series I (RSPS)'\n}, {\n  value: 'XRS',\n  label: 'X-ray Spectrometry (XRS)'\n}, {\n  value: 'CEJPh',\n  label: 'Central European Journal of Physics (CEJPh)'\n}, {\n  value: 'AtScL',\n  label: 'Atmospheric Science Letters (AtScL)'\n}, {\n  value: 'JPhy4',\n  label: 'Journal de Physique IV (JPhy4)'\n}, {\n  value: 'KosIs',\n  label: 'Kosmicheskie Issledovaniia (KosIs)'\n}, {\n  value: 'BRASP',\n  label: 'Bulletin of the Russian Academy of Sciences, Physics (BRASP)'\n}, {\n  value: 'PolRe',\n  label: 'National Institute Polar Research Memoirs (PolRe)'\n}, {\n  value: 'JNIS',\n  label: 'Journal of Near Infrared Spectroscopy (JNIS)'\n}, {\n  value: 'PMM',\n  label: 'Physics of Metals and Metallography (PMM)'\n}, {\n  value: 'PDU',\n  label: 'Physics of the Dark Universe (PDU)'\n}, {\n  value: 'SvApM',\n  label: 'Soviet Applied Mechanics (SvApM)'\n}, {\n  value: 'CRMec',\n  label: 'Comptes Rendus Mecanique (CRMec)'\n}, {\n  value: 'MNSSA',\n  label: 'Monthly Notes of the Astronomical Society of South Africa (MNSSA)'\n}, {\n  value: 'OrLi',\n  label: 'Origins of Life (OrLi)'\n}, {\n  value: 'ScChA',\n  label: 'Science in China A: Mathematics (ScChA)'\n}, {\n  value: 'PRPER',\n  label: 'Physical Review Physics Education Research (PRPER)'\n}, {\n  value: 'IEITC',\n  label: 'IEICE Transactions on Communications (IEITC)'\n}, {\n  value: 'JVSJ',\n  label: 'Journal of the Vacuum Society of Japan (JVSJ)'\n}, {\n  value: 'EurSS',\n  label: 'Eurasian Soil Science (EurSS)'\n}, {\n  value: 'IPhoJ',\n  label: 'IEEE Photonics Journal (IPhoJ)'\n}, {\n  value: 'PhNan',\n  label: 'Photonics and Nanostructures (PhNan)'\n}, {\n  value: 'ITTST',\n  label: 'IEEE Transactions on Terahertz Science and Technology (ITTST)'\n}, {\n  value: 'ChJOL',\n  label: 'Chinese Journal of Oceanology and Limnology (ChJOL)'\n}, {\n  value: 'CRASB',\n  label: 'Academie des Sciences Paris Comptes Rendus Serie B Sciences Physiques (CRASB)'\n}, {\n  value: 'JFuE',\n  label: 'Journal of Funsion Energy (JFuE)'\n}, {\n  value: 'DSROA',\n  label: 'Deep Sea Research and Oceanographic Abstracts (DSROA)'\n}, {\n  value: 'RadEf',\n  label: 'Radiation Effects (RadEf)'\n}, {\n  value: 'JSTEd',\n  label: 'Journal of Science Teacher Education (JSTEd)'\n}, {\n  value: 'M&P',\n  label: 'Moon and Planets (M&P)'\n}, {\n  value: 'JRPC',\n  label: 'Journal of Reinforced Plastics and Composites (JRPC)'\n}, {\n  value: 'STMP',\n  label: 'Springer Tracts in Modern Physics (STMP)'\n}, {\n  value: 'AntSc',\n  label: 'Antarctic Science (AntSc)'\n}, {\n  value: 'RvPP',\n  label: 'Reviews of Plasma Physics (RvPP)'\n}, {\n  value: 'JAVSO',\n  label: 'Journal of the American Association of Variable Star Observers (JAAVSO) (JAVSO)'\n}, {\n  value: 'JBIS',\n  label: 'Journal of the British Interplanetary Society (JBIS)'\n}, {\n  value: 'ASSP',\n  label: 'Astrophysics and Space Science Proceedings (ASSP)'\n}, {\n  value: 'QJMat',\n  label: 'The Quarterly Journal of Mathematics (QJMat)'\n}, {\n  value: 'MitAG',\n  label: 'Mitteilungen der Astronomischen Gesellschaft Hamburg (MitAG)'\n}, {\n  value: 'PhyOJ',\n  label: 'Physics Online Journal (PhyOJ)'\n}, {\n  value: 'JKAS',\n  label: 'Journal of Korean Astronomical Society (JKAS)'\n}, {\n  value: 'JNMP',\n  label: 'Journal of Nonlinear Mathematical Physics (JNMP)'\n}, {\n  value: 'IJHMT',\n  label: 'International Journal of Heat and Mass Transfer (IJHMT)'\n}, {\n  value: 'GeoPA',\n  label: 'Geofisica Pura e Applicata (GeoPA)'\n}, {\n  value: 'TeMAE',\n  label: 'Terrestrial Magnetism and Atmospheric Electricity (Journal of Geophysical Research) (TeMAE)'\n}, {\n  value: 'ITEnC',\n  label: 'IEEE Transactions on Energy Conversion (ITEnC)'\n}, {\n  value: 'BGeod',\n  label: 'Bulletin Geodesique (BGeod)'\n}, {\n  value: 'PhRvI',\n  label: 'Physical Review Series I (PhRvI)'\n}, {\n  value: 'JAChS',\n  label: 'Journal of the American Chemical Society (JAChS)'\n}, {\n  value: 'ESSD',\n  label: 'Earth System Science Data (ESSD)'\n}, {\n  value: 'IEITF',\n  label: 'IEICE Transactions on Fundamentals of Electronics Communications and Computer Sciences (IEITF)'\n}, {\n  value: 'PApOp',\n  label: 'Pure Applied Optics (PApOp)'\n}, {\n  value: 'TrGeo',\n  label: 'Treatise on Geochemistry (TrGeo)'\n}, {\n  value: 'CTM',\n  label: 'Combustion Theory and Modelling (CTM)'\n}, {\n  value: 'Lsphe',\n  label: 'Lithoshere (Lsphe)'\n}, {\n  value: 'ChA&A',\n  label: 'Chinese Astronomy and Astrophysics (ChA&A)'\n}, {\n  value: 'JDDE',\n  label: 'Journal of Dynamics and Differential Equations (JDDE)'\n}, {\n  value: 'A&AT',\n  label: 'Astronomical and Astrophysical Transactions (A&AT)'\n}, {\n  value: 'JSEdT',\n  label: 'Journal of Science Education and Technology (JSEdT)'\n}, {\n  value: 'LIACo',\n  label: 'Liege International Astrophysical Colloquia (LIACo)'\n}, {\n  value: 'PPN',\n  label: 'Physics of Particles and Nuclei (PPN)'\n}, {\n  value: 'JARS',\n  label: 'Journal of Applied Remote Sensing (JARS)'\n}, {\n  value: 'AnMat',\n  label: 'Annals of Mathematics (AnMat)'\n}, {\n  value: 'SoEnM',\n  label: 'Solar Energy Materials (SoEnM)'\n}, {\n  value: 'AcPPA',\n  label: 'Acta Physica Polonica A (AcPPA)'\n}, {\n  value: 'CoAst',\n  label: 'Communications in Asteroseismology (CoAst)'\n}, {\n  value: 'ScChG',\n  label: 'Science in China: Physics, Mechanics and Astronomy (ScChG)'\n}, {\n  value: 'AcGeo',\n  label: 'Acta Geophysica (AcGeo)'\n}, {\n  value: 'JNuE',\n  label: 'Journal of Nuclear Energy (JNuE)'\n}, {\n  value: 'JEPT',\n  label: 'Journal of Engineering Physics and Thermophysics (JEPT)'\n}, {\n  value: 'IzAOP',\n  label: 'Izvestiya Atmospheric and Oceanic Physics (IzAOP)'\n}, {\n  value: 'EGSGA',\n  label: 'E&amp;G Quaternary Science Journal (EGSGA)'\n}, {\n  value: 'ComAp',\n  label: 'Comments on Astrophysics (ComAp)'\n}, {\n  value: 'ChEG',\n  label: 'Chemie der Erde / Geochemistry (ChEG)'\n}, {\n  value: 'JLasA',\n  label: 'Journal of Laser Applications (JLasA)'\n}, {\n  value: 'IJGMM',\n  label: 'International Journal of Geometric Methods in Modern Physics (IJGMM)'\n}, {\n  value: 'MMI',\n  label: 'Metals and Materials International (MMI)'\n}, {\n  value: 'IzKry',\n  label: 'Izvestiya Ordena Trudovogo Krasnogo Znameni Krymskoj Astrofizicheskoj Observatorii (IzKry)'\n}, {\n  value: 'EaInt',\n  label: 'Earth Interactions (EaInt)'\n}, {\n  value: 'Freq',\n  label: 'Frequenz (Freq)'\n}, {\n  value: 'LicOB',\n  label: 'Lick Observatory Bulletin (LicOB)'\n}, {\n  value: 'IJSTA',\n  label: 'IEEE Journal of Selected Topics in Applied Earth Observations and Remote Sensing (IJSTA)'\n}, {\n  value: 'PCEA',\n  label: 'Physics and Chemistry of the Earth A (PCEA)'\n}, {\n  value: 'CoSka',\n  label: 'Contributions of the Astronomical Observatory Skalnate Pleso (CoSka)'\n}, {\n  value: 'BiBi',\n  label: 'Bioinspiration and Biomimetics (BiBi)'\n}, {\n  value: 'AeoRe',\n  label: 'Aeolian Research (AeoRe)'\n}, {\n  value: 'AdAst',\n  label: 'Advances in Astronomy (AdAst)'\n}, {\n  value: 'DeHyZ',\n  label: 'Deutsche Hydrographische Zeitschrift (DeHyZ)'\n}, {\n  value: 'SvJPP',\n  label: 'Soviet Journal of Plasma Physics (SvJPP)'\n}, {\n  value: 'IEITI',\n  label: 'IEICE Transactions on Information and Systems (IEITI)'\n}, {\n  value: 'FrPhy',\n  label: 'Frontiers of Physics (FrPhy)'\n}, {\n  value: 'EAS',\n  label: 'EAS Publications Series (EAS)'\n}, {\n  value: 'Physi',\n  label: 'Physics (Physi)'\n}, {\n  value: 'ITAC',\n  label: 'IEEE Transactions on Automatic Control (ITAC)'\n}, {\n  value: 'AnHar',\n  label: 'Annals of Harvard College Observatory (AnHar)'\n}, {\n  value: 'RCD',\n  label: 'Regular and Chaotic Dynamics (RCD)'\n}, {\n  value: 'GescJ',\n  label: 'Geosciences Journal (GescJ)'\n}, {\n  value: 'JMPh',\n  label: 'Journal of Modern Physics (JMPh)'\n}, {\n  value: 'AuJPA',\n  label: 'Australian Journal of Physics Astrophysical Supplement (AuJPA)'\n}, {\n  value: 'SSI',\n  label: 'Space Science Instrumentation (SSI)'\n}, {\n  value: 'JPhys',\n  label: 'Journal de Physique (JPhys)'\n}, {\n  value: 'SJADS',\n  label: 'SIAM Journal on Applied Dynamical Systems (SJADS)'\n}, {\n  value: 'PhLRv',\n  label: 'Physics of Life Reviews (PhLRv)'\n}, {\n  value: 'IJMPS',\n  label: 'International Journal of Modern Physics Conference Series (IJMPS)'\n}, {\n  value: 'JGeEd',\n  label: 'Journal of Geoscience Education (JGeEd)'\n}, {\n  value: 'JBR',\n  label: 'Journal of Breath Research (JBR)'\n}, {\n  value: 'PhuZ',\n  label: 'Physik in unserer Zeit (PhuZ)'\n}, {\n  value: 'EML',\n  label: 'Electronic Materials Letters (EML)'\n}, {\n  value: 'KFNT',\n  label: 'Kinematika i Fizika Nebesnykh Tel (KFNT)'\n}, {\n  value: 'ApL&C',\n  label: 'Astrophysical Letters and Communications (ApL&C)'\n}, {\n  value: 'IJAsB',\n  label: 'International Journal of Astrobiology (IJAsB)'\n}, {\n  value: 'HWM',\n  label: 'Helgol&auml;nder Wissenschaftliche Meeresuntersuchungen (HWM)'\n}, {\n  value: 'AMTD',\n  label: 'Atmospheric Measurement Techniques Discussions (AMTD)'\n}, {\n  value: 'JRadR',\n  label: 'Journal of Radiation Research (JRadR)'\n}, {\n  value: 'HEAD',\n  label: 'AAS/High Energy Astrophysics Division (HEAD)'\n}, {\n  value: 'HMR',\n  label: 'Helgoland Marine Research (HMR)'\n}, {\n  value: 'ChJPh',\n  label: 'Chinese Journal of Physics (ChJPh)'\n}, {\n  value: 'IJOE',\n  label: 'IEEE Journal of Oceanic Engineering (IJOE)'\n}, {\n  value: 'JRP',\n  label: 'Journal of Radiological Protection (JRP)'\n}, {\n  value: 'JOptT',\n  label: 'Journal of Optical Technology (JOptT)'\n}, {\n  value: 'PZ',\n  label: 'Peremennye Zvezdy (PZ)'\n}, {\n  value: 'CMMPh',\n  label: 'Computational Mathematics and Mathematical Physics (CMMPh)'\n}, {\n  value: 'MCM',\n  label: 'Mechanics of Composite Materials (MCM)'\n}, {\n  value: 'PPNL',\n  label: 'Physics of Particles and Nuclei Letters (PPNL)'\n}, {\n  value: 'IrAJ',\n  label: 'Irish Astronomical Journal (IrAJ)'\n}, {\n  value: 'ARAC',\n  label: 'Annual Review of Analytical Chemistry (ARAC)'\n}, {\n  value: 'IJCFD',\n  label: 'International Journal of Computational Fluid Dynamics (IJCFD)'\n}, {\n  value: 'AcSSn',\n  label: 'Acta Seismologica Sinica (AcSSn)'\n}, {\n  value: 'CoASP',\n  label: 'Comments on Astrophysics and Space Physics (CoASP)'\n}, {\n  value: 'NewSc',\n  label: 'New Scientist (NewSc)'\n}, {\n  value: 'IzSSR',\n  label: 'Akademiia Nauk SSSR Izvestiia Seriia Fizicheskaia (IzSSR)'\n}, {\n  value: 'NuAlg',\n  label: 'Numerical Algorithms (NuAlg)'\n}, {\n  value: 'ResPh',\n  label: 'Results in Physics (ResPh)'\n}, {\n  value: 'JIMO',\n  label: 'WGN, Journal of the International Meteor Organization (JIMO)'\n}, {\n  value: 'FNCN',\n  label: 'Fullerene Nanotubes and Carbon Nanostructures (FNCN)'\n}, {\n  value: 'JO',\n  label: 'Journal des Observateurs (JO)'\n}, {\n  value: 'CzJPS',\n  label: 'Czechoslovak Journal of Physics Supplement (CzJPS)'\n}, {\n  value: 'JGE',\n  label: 'Journal of Geophysics and Engineering (JGE)'\n}, {\n  value: 'JIEEJ',\n  label: 'Journal of The Institute of Electrical Engineers of Japan (JIEEJ)'\n}, {\n  value: 'SolE',\n  label: 'Solid Earth (SolE)'\n}, {\n  value: 'IJDE',\n  label: 'International Journal of Digital Earth (IJDE)'\n}, {\n  value: 'JIPM',\n  label: 'Journal of Information Processing and Management (JIPM)'\n}, {\n  value: 'BAAA',\n  label: 'Boletin de la Asociacion Argentina de Astronomia La Plata Argentina (BAAA)'\n}, {\n  value: 'JHA',\n  label: 'Journal for the History of Astronomy (JHA)'\n}, {\n  value: 'QuOpt',\n  label: 'Quantum Optics (QuOpt)'\n}, {\n  value: 'CoLPL',\n  label: 'Communications of the Lunar and Planetary Laboratory (CoLPL)'\n}, {\n  value: 'IzPSE',\n  label: 'Izvestiya Physics of the Solid Earth (IzPSE)'\n}, {\n  value: 'cosp',\n  label: 'COSPAR Scientific Assembly (cosp)'\n}, {\n  value: 'OMExp',\n  label: 'Optical Materials Express (OMExp)'\n}, {\n  value: 'AstBu',\n  label: 'Astrophysical Bulletin (AstBu)'\n}, {\n  value: 'SCoA',\n  label: 'Smithsonian Contributions to Astrophysics (SCoA)'\n}, {\n  value: 'ITGE',\n  label: 'IEEE Transactions on Geoscience Electronics (ITGE)'\n}, {\n  value: 'GeoSu',\n  label: 'Geophysical Surveys (GeoSu)'\n}, {\n  value: 'RSTEd',\n  label: 'Research in Science and Technological Education (RSTEd)'\n}, {\n  value: 'JSMEB',\n  label: 'JSME International Journal Series B (JSMEB)'\n}, {\n  value: 'PCEB',\n  label: 'Physics and Chemistry of the Earth B (PCEB)'\n}, {\n  value: 'ASIB',\n  label: 'NATO Advanced Science Institutes (ASI) Series B (ASIB)'\n}, {\n  value: 'LPRv',\n  label: 'Laser & Photonics Review (LPRv)'\n}, {\n  value: 'PhyEs',\n  label: 'Physics Essays (PhyEs)'\n}, {\n  value: 'InEPS',\n  label: 'Indian Academy of Sciences Proceedings: Earth and Planetary Sciences (InEPS)'\n}, {\n  value: 'ApPRv',\n  label: 'Applied Physics Reviews (ApPRv)'\n}, {\n  value: 'JAnSc',\n  label: 'Journal of the Astronautical Sciences (JAnSc)'\n}, {\n  value: 'OptEL',\n  label: 'Optoelectronics Letters (OptEL)'\n}, {\n  value: 'MPBu',\n  label: 'Minor Planet Bulletin (MPBu)'\n}, {\n  value: 'AnaCh',\n  label: 'Analytical Chemistry (AnaCh)'\n}, {\n  value: 'CosEl',\n  label: 'Cosmic Electrodynamics (CosEl)'\n}, {\n  value: 'RvMA',\n  label: 'Reviews in Modern Astronomy (RvMA)'\n}, {\n  value: 'LRCA',\n  label: 'Living Reviews in Computational Astrophysics (LRCA)'\n}]);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/paper_search_form/topterms.js?");

/***/ }),

/***/ "./src/js/widgets/paper_search_form/widget.js":
/*!****************************************************!*\
  !*** ./src/js/widgets/paper_search_form/widget.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var hbs_js_widgets_paper_search_form_form__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! hbs!js/widgets/paper_search_form/form */ \"./src/js/widgets/paper_search_form/form.html\");\n/* harmony import */ var hbs_js_widgets_paper_search_form_form__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_paper_search_form_form__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var js_widgets_paper_search_form_topterms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/widgets/paper_search_form/topterms */ \"./src/js/widgets/paper_search_form/topterms.js\");\n\n\n\n\n\n\n\n\n\nvar renderAutoCompleteItem = function renderAutoCompleteItem(ul, item) {\n  var re = new RegExp('(' + this.term + ')', 'i');\n  var label = item.label.replace(re, '<span class=\"ui-state-highlight\">$1</span>');\n  var $li = jquery__WEBPACK_IMPORTED_MODULE_1___default()('<li/>').appendTo(ul);\n  jquery__WEBPACK_IMPORTED_MODULE_1___default()('<a/>').html(label).appendTo($li);\n  return $li;\n};\n\nvar getAutoCompleteSource = function getAutoCompleteSource(request, response) {\n  var matches = jquery__WEBPACK_IMPORTED_MODULE_1___default().map(js_widgets_paper_search_form_topterms__WEBPACK_IMPORTED_MODULE_7__[\"default\"], function (item) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(request.term)) {\n      var term = request.term.toUpperCase();\n      var bibstem = item.value.toUpperCase();\n      var label = item.label.toUpperCase();\n\n      if (bibstem.indexOf(term) === 0 || label.indexOf(term) === 0 || label.replace(/^THE\\s/, '').indexOf(term) === 0) {\n        return item;\n      }\n    }\n  });\n  return response(matches);\n};\n\nvar createAutoComplete = function createAutoComplete(el) {\n  var $input = jquery__WEBPACK_IMPORTED_MODULE_1___default()('input#bibstem', el); // don't rebind to the element\n\n  if ($input.data('ui-autocomplete')) {\n    return;\n  }\n\n  $input.on('keyup', function (e) {\n    if (e.keyCode === 13) {\n      $input.trigger('enter');\n    }\n  });\n  $input.autocomplete({\n    minLength: 1,\n    autoFocus: true,\n    source: getAutoCompleteSource\n  });\n  $input.data('ui-autocomplete')._renderItem = renderAutoCompleteItem;\n};\n\nvar View = Marionette.ItemView.extend({\n  template: (hbs_js_widgets_paper_search_form_form__WEBPACK_IMPORTED_MODULE_6___default()),\n  className: 'paper-search-form',\n  onRender: function onRender() {\n    var _this = this;\n\n    createAutoComplete(this.el);\n    setTimeout(function () {\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('input', _this.el).get(0).focus();\n    }, 100);\n  },\n  events: {\n    'submit form': 'submit'\n  },\n  _submit: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debounce(function (e) {\n    var type = jquery__WEBPACK_IMPORTED_MODULE_1___default()(e.target).addClass('submitted').data('formType');\n    var $inputs = jquery__WEBPACK_IMPORTED_MODULE_1___default()('input, textarea', e.target); // parse the inputs' values into an object\n\n    var data = $inputs.toArray().reduce(function (acc, el) {\n      acc[el.name] = el.value;\n      return acc;\n    }, {}); // disable to form, change the button to loading, and trigger submit\n\n    this.setFormDisabled(true);\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('button[type=\"submit\"]', e.target).html('<i class=\"fa fa-spinner fa-spin\" aria-hidden=\"true\"></i> Submitting...');\n    this.trigger('submit', type, data);\n  }, 1000, {\n    leading: true,\n    trailing: false\n  }),\n  submit: function submit(e) {\n    e.preventDefault();\n\n    this._submit(e);\n  },\n  setFormDisabled: function setFormDisabled(disable) {\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('input, textarea, button', this.el).prop('disabled', disable).toggleClass('disabled', disable);\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('button[type=\"submit\"]', this.el).html(\"\\n        <i class=\\\"fa fa-search\\\" aria-hidden=\\\"true\\\"></i> Search\\n      \");\n  },\n  onDone: function onDone() {\n    this.setFormDisabled(false);\n  },\n  onFail: function onFail() {\n    var msg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'Error';\n    // show an error message, and then remove it next time the user focuses on an input\n    var $el = jquery__WEBPACK_IMPORTED_MODULE_1___default()(this.el);\n    var $submittedContainer = jquery__WEBPACK_IMPORTED_MODULE_1___default()('form.submitted', $el).closest('.row');\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('.error-container', $submittedContainer).html(\"\\n      <div class=\\\"alert alert-danger\\\" id=\\\"error-message\\\">\\n        <i class=\\\"fa fa-exclamation-triangle\\\" aria-hidden=\\\"true\\\"></i>  <strong>Error: \".concat(msg, \"</strong>\\n      </div>\\n    \"));\n    this.setFormDisabled(false);\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('input, textarea, button', $el).one('focus', function () {\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('#error-message', $el).remove();\n      jquery__WEBPACK_IMPORTED_MODULE_1___default()('form.submitted', $el).removeClass('submitted');\n    });\n  },\n  onReset: function onReset() {\n    this.render();\n  },\n  onShow: function onShow() {\n    this.setFormDisabled(false);\n    jquery__WEBPACK_IMPORTED_MODULE_1___default()('input', this.el).get(0).focus();\n  }\n});\n\nvar extractBibcodeFromReference = function extractBibcodeFromReference(data) {\n  var score = data.score,\n      bibcode = data.bibcode;\n\n  if (score !== '0.0' && bibcode) {\n    return bibcode;\n  }\n\n  return null;\n};\n\nvar PaperForm = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend({\n  initialize: function initialize() {\n    this.view = new View();\n    this.view.on('submit', this.onSubmit.bind(this));\n  },\n  activate: function activate(beehive) {\n    var _this2 = this;\n\n    js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_2__[\"default\"].prototype.activate.call(this, beehive);\n    var ps = this.getPubSub();\n    ps.subscribe(ps.CUSTOM_EVENT, function (ev, data) {\n      if (ev === 'start-new-search') {\n        _this2.onNewSearch();\n      } else if (ev === 'second-order-search/error') {\n        _this2.view.triggerMethod('fail', data.message);\n      }\n    });\n  },\n  onNewSearch: function onNewSearch() {\n    this.view.triggerMethod('reset');\n  },\n  processResponse: function processResponse() {},\n  onSubmit: function onSubmit(type, data) {\n    var _this3 = this;\n\n    switch (type) {\n      case 'reference':\n        {\n          this.sendReferenceQuery(data).done(function (_ref) {\n            var resolved = _ref.resolved;\n            var bib = extractBibcodeFromReference(resolved);\n\n            if (bib) {\n              return _this3.doSearch(\"bibcode:\".concat(bib));\n            }\n\n            _this3.view.triggerMethod('fail', 'No bibcodes matching reference string');\n          }).fail(function (event) {\n            if (event.responseJSON && event.responseJSON.error) {\n              return _this3.view.triggerMethod('fail', event.responseJSON.error);\n            }\n\n            _this3.view.triggerMethod('fail', 'Error occurred sending reference request');\n          });\n        }\n        break;\n\n      case 'journal':\n        {\n          try {\n            var queryStr = Object.keys(data).filter(function (k) {\n              return data[k].trim();\n            }).map(function (k) {\n              return \"\".concat(k, \":\").concat(data[k]);\n            }).join(' ');\n            this.doSearch(queryStr);\n          } catch (e) {\n            this.view.triggerMethod('fail', 'Error parsing journals');\n          }\n        }\n        break;\n\n      case 'bibcodes':\n        {\n          try {\n            var bibcodes = data.bibcodes.split(/\\s+/).filter(function (s) {\n              return !!s;\n            });\n\n            if (bibcodes.length === 0) {\n              return this.view.triggerMethod('done');\n            }\n\n            this.doBigSearch(bibcodes);\n          } catch (e) {\n            this.view.triggerMethod('fail', 'Error parsing bibcodes');\n          }\n        }\n        break;\n    }\n  },\n  doBigSearch: function doBigSearch() {\n    var bibcodes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var ps = this.getPubSub();\n    ps.publish(ps.CUSTOM_EVENT, 'second-order-search/limit', {\n      ids: bibcodes\n    });\n  },\n  doSearch: function doSearch() {\n    var queryStr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var query = new js_components_api_query__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n      q: queryStr,\n      sort: ['date desc']\n    });\n    var ps = this.getPubSub();\n    ps.publish(ps.NAVIGATE, 'search-page', {\n      q: query,\n      context: {\n        referrer: 'PaperSearchForm'\n      }\n    });\n  },\n  sendReferenceQuery: function sendReferenceQuery(data) {\n    var $dd = jquery__WEBPACK_IMPORTED_MODULE_1___default().Deferred();\n    var ps = this.getPubSub();\n    var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n      target: js_components_api_targets__WEBPACK_IMPORTED_MODULE_5__[\"default\"].REFERENCE + '/' + encodeURIComponent(data.reference),\n      query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({}),\n      options: {\n        type: 'GET',\n        headers: {\n          Accept: 'application/json; charset=utf-8',\n          'Content-Type': 'application/json; charset=utf-8'\n        },\n        done: function done(data) {\n          return $dd.resolve(data);\n        },\n        fail: function fail() {\n          return $dd.reject.apply($dd, arguments);\n        },\n        always: function always() {\n          return $dd.always();\n        }\n      }\n    });\n    ps.publish(ps.EXECUTE_REQUEST, request);\n    return $dd.promise();\n  },\n  onShow: function onShow() {\n    this.view.triggerMethod('show');\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (PaperForm);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/paper_search_form/widget.js?");

/***/ }),

/***/ "./src/js/widgets/preferences/templates/application.html":
/*!***************************************************************!*\
  !*** ./src/js/widgets/preferences/templates/application.html ***!
  \***************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"              <option value=\\\"\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,(depths[1] != null ? lookupProperty(depths[1],\"numAuthorsSelected\") : depths[1]),{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(2, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":33,\"column\":39},\"end\":{\"line\":34,\"column\":68}}})) != null ? stack1 : \"\")\n    + \">\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\n              </option>\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    return \" selected=\\\"selected\\\" \";\n},\"4\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"              <option value=\\\"\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,(depths[1] != null ? lookupProperty(depths[1],\"externalLinksSelected\") : depths[1]),{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(2, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":62,\"column\":39},\"end\":{\"line\":63,\"column\":71}}})) != null ? stack1 : \"\")\n    + \">\\n                \"\n    + alias2(alias1(depth0, depth0))\n    + \"</option>\\n\";\n},\"6\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"              <option value=\\\"\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,(depths[1] != null ? lookupProperty(depths[1],\"homePageSelected\") : depths[1]),{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(2, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":91,\"column\":39},\"end\":{\"line\":92,\"column\":66}}})) != null ? stack1 : \"\")\n    + \">\\n                \"\n    + alias2(alias1(depth0, depth0))\n    + \"</option>\\n\";\n},\"8\":function(container,depth0,helpers,partials,data) {\n    return \"              <button class=\\\"btn btn-primary btn-xs section-modify\\\" type=\\\"button\\\" data-section=\\\"database\\\">Modify\\n              </button>\\n\";\n},\"10\":function(container,depth0,helpers,partials,data) {\n    return \"              <button class=\\\"btn btn-link btn-xs section-reset\\\" type=\\\"button\\\" data-section=\\\"database\\\">Reset</button>\\n\";\n},\"12\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <p>\\n              <label style=\\\"font-size: 1.5rem\\\">\\n                <input type=\\\"checkbox\\\" name=\\\"database\\\" id=\\\"database_all\\\" value=\\\"all\\\"\\n                       \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(lookupProperty(helpers,\"prop\")||(depth0 && lookupProperty(depth0,\"prop\"))||container.hooks.helperMissing).call(alias1,\"All\",(depth0 != null ? lookupProperty(depth0,\"databaseSelected\") : depth0),{\"name\":\"prop\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":134,\"column\":29},\"end\":{\"line\":134,\"column\":58}}}),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(13, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":134,\"column\":23},\"end\":{\"line\":134,\"column\":74}}})) != null ? stack1 : \"\")\n    + \"\\n                >\\n                All Collections\\n              </label>\\n            </p>\\n\\n            <div class=\\\"btn-group\\\" data-toggle=\\\"buttons\\\" role=\\\"group\\\" aria-labelledby=\\\"defaultDatabaseLabel\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"databaseOptions\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(15, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":141,\"column\":14},\"end\":{\"line\":159,\"column\":23}}})) != null ? stack1 : \"\")\n    + \"            </div>\\n\";\n},\"13\":function(container,depth0,helpers,partials,data) {\n    return \"checked\";\n},\"15\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=container.lambda, alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                <label\\n                  class=\\\"database-select btn btn-default\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(lookupProperty(helpers,\"and\")||(depth0 && lookupProperty(depth0,\"and\"))||alias2).call(alias1,(lookupProperty(helpers,\"prop\")||(depth0 && lookupProperty(depth0,\"prop\"))||alias2).call(alias1,depth0,(depths[1] != null ? lookupProperty(depths[1],\"databaseSelected\") : depths[1]),{\"name\":\"prop\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":144,\"column\":25},\"end\":{\"line\":144,\"column\":56}}}),(lookupProperty(helpers,\"not\")||(depth0 && lookupProperty(depth0,\"not\"))||alias2).call(alias1,(lookupProperty(helpers,\"prop\")||(depth0 && lookupProperty(depth0,\"prop\"))||alias2).call(alias1,\"All\",(depths[1] != null ? lookupProperty(depths[1],\"databaseSelected\") : depths[1]),{\"name\":\"prop\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":144,\"column\":62},\"end\":{\"line\":144,\"column\":94}}}),{\"name\":\"not\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":144,\"column\":57},\"end\":{\"line\":144,\"column\":95}}}),{\"name\":\"and\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":144,\"column\":20},\"end\":{\"line\":144,\"column\":96}}}),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(16, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":143,\"column\":56},\"end\":{\"line\":144,\"column\":112}}})) != null ? stack1 : \"\")\n    + \"\\\"\\n                  data-id=\\\"\"\n    + alias4(alias3(depth0, depth0))\n    + \"\\\"\\n                  \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(lookupProperty(helpers,\"prop\")||(depth0 && lookupProperty(depth0,\"prop\"))||alias2).call(alias1,\"All\",(depths[1] != null ? lookupProperty(depths[1],\"databaseSelected\") : depths[1]),{\"name\":\"prop\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":146,\"column\":24},\"end\":{\"line\":146,\"column\":56}}}),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(18, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":146,\"column\":18},\"end\":{\"line\":146,\"column\":73}}})) != null ? stack1 : \"\")\n    + \"\\n                >\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(lookupProperty(helpers,\"not\")||(depth0 && lookupProperty(depth0,\"not\"))||alias2).call(alias1,(lookupProperty(helpers,\"prop\")||(depth0 && lookupProperty(depth0,\"prop\"))||alias2).call(alias1,\"All\",(depths[1] != null ? lookupProperty(depths[1],\"databaseSelected\") : depths[1]),{\"name\":\"prop\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":148,\"column\":29},\"end\":{\"line\":148,\"column\":61}}}),{\"name\":\"not\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":148,\"column\":24},\"end\":{\"line\":148,\"column\":62}}}),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(20, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":148,\"column\":18},\"end\":{\"line\":156,\"column\":25}}})) != null ? stack1 : \"\")\n    + \"                  \"\n    + alias4(alias3(depth0, depth0))\n    + \"\\n                </label>\\n\";\n},\"16\":function(container,depth0,helpers,partials,data) {\n    return \" active\";\n},\"18\":function(container,depth0,helpers,partials,data) {\n    return \"disabled\";\n},\"20\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, alias3=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                    <input\\n                      type=\\\"checkbox\\\"\\n                      name=\\\"database\\\"\\n                      id=\\\"database_\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\\"\\n                      value=\\\"\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\\"\\n                      \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias3,(lookupProperty(helpers,\"prop\")||(depth0 && lookupProperty(depth0,\"prop\"))||container.hooks.helperMissing).call(alias3,depth0,(depths[1] != null ? lookupProperty(depths[1],\"databaseSelected\") : depths[1]),{\"name\":\"prop\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":154,\"column\":28},\"end\":{\"line\":154,\"column\":59}}}),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(13, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":154,\"column\":22},\"end\":{\"line\":154,\"column\":75}}})) != null ? stack1 : \"\")\n    + \"\\n                    />\\n\";\n},\"22\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"              <option value=\\\"\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,(depths[1] != null ? lookupProperty(depths[1],\"hideSideBarsSelected\") : depths[1]),{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(2, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":187,\"column\":39},\"end\":{\"line\":188,\"column\":70}}})) != null ? stack1 : \"\")\n    + \">\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\n              </option>\\n\";\n},\"24\":function(container,depth0,helpers,partials,data) {\n    return \"          <i class=\\\"text-muted fa fa-refresh fa-spin fa-3x\\\" aria-hidden=\\\"true\\\"></i> \";\n},\"26\":function(container,depth0,helpers,partials,data) {\n    return \"\\n        <div class=\\\"alert alert-success fade in h4\\\" role=\\\"alert\\\">\\n          <i class=\\\"fa fa-check fa-2x\\\" aria-hidden=\\\"true\\\"></i> Settings updated successfully\\n        </div>\\n      \";\n},\"28\":function(container,depth0,helpers,partials,data) {\n    return \"\\n        <div class=\\\"alert alert-danger fade in h4\\\" role=\\\"alert\\\">\\n          <i class=\\\"fa fa-times fa-3x\\\" aria-hidden=\\\"true\\\"></i> Settings not updated, please try again.\\n        </div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"panel-heading\\\" style=\\\"display: flex; justify-content: space-between\\\">\\n  Search Settings\\n  <button class=\\\"btn btn-link btn-xs reset-to-defaults\\\" type=\\\"button\\\">Reset to defaults</button>\\n</div>\\n\\n<div class=\\\"panel-body\\\" id=\\\"application-settings-container\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <form id=\\\"app-settings-form\\\" class=\\\"form-horizontal\\\">\\n\\n        <!-- NUM AUTHORS -->\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"numAuthors\\\">\\n            Authors Visible Per Result\\n            <button href=\\\"#collapseNumAuthorsDesc\\\" data-toggle=\\\"collapse\\\" class=\\\"btn-link\\\" aria-expanded=\\\"false\\\"\\n                    aria-controls=\\\"collapseNumAuthorsDesc\\\" aria-label=\\\"number of authors per result\\\">\\n              <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i>\\n            </button>\\n          </label>\\n          <p>\\n          <div class=\\\"collapse\\\" id=\\\"collapseNumAuthorsDesc\\\">\\n            <div class=\\\"card card-body\\\">\\n              <p>\\n                Specifies the number of authors to show under each result before the list is truncated.\\n                <br> (\\n                <strong>default: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"numAuthorsDefault\") || (depth0 != null ? lookupProperty(depth0,\"numAuthorsDefault\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"numAuthorsDefault\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":26,\"column\":33},\"end\":{\"line\":26,\"column\":54}}}) : helper)))\n    + \"</strong>)\\n              </p>\\n            </div>\\n          </div>\\n          </p>\\n          <select class=\\\"form-control\\\" id=\\\"numAuthors\\\" aria-describedby=\\\"collapseNumAuthorsDesc\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"numAuthorsOptions\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":32,\"column\":12},\"end\":{\"line\":36,\"column\":21}}})) != null ? stack1 : \"\")\n    + \"          </select>\\n        </div>\\n\\n        <!-- Always Open Links In New Tab/Same Tab -->\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"externalLinks\\\">\\n            Default Action For External Links\\n            <button href=\\\"#collapseExternalLinks\\\" data-toggle=\\\"collapse\\\" class=\\\"btn-link\\\" aria-expanded=\\\"false\\\"\\n                    aria-controls=\\\"collapseExternalLinks\\\" aria-label=\\\"default action for external links\\\">\\n              <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i>\\n            </button>\\n          </label>\\n          <p>\\n          <div class=\\\"collapse\\\" id=\\\"collapseExternalLinks\\\">\\n            <div class=\\\"card card-body\\\">\\n              <p>\\n                Select the default action when opening an external link.\\n                <br> (\\n                <strong>default: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"externalLinksDefault\") || (depth0 != null ? lookupProperty(depth0,\"externalLinksDefault\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"externalLinksDefault\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":55,\"column\":33},\"end\":{\"line\":55,\"column\":57}}}) : helper)))\n    + \"</strong>)\\n              </p>\\n            </div>\\n          </div>\\n          </p>\\n          <select class=\\\"form-control\\\" id=\\\"externalLinks\\\" aria-describedby=\\\"collapseExternalLinks\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"externalLinksOptions\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(4, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":61,\"column\":12},\"end\":{\"line\":65,\"column\":21}}})) != null ? stack1 : \"\")\n    + \"          </select>\\n        </div>\\n\\n        <!-- Home Page Default -->\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"homePage\\\">\\n            Default Home Page\\n            <button href=\\\"#collapseHomePage\\\" data-toggle=\\\"collapse\\\" class=\\\"btn-link\\\" aria-expanded=\\\"false\\\"\\n                    aria-controls=\\\"collapseHomePage\\\" aria-label=\\\"default home page\\\">\\n              <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i>\\n            </button>\\n          </label>\\n          <p>\\n          <div class=\\\"collapse\\\" id=\\\"collapseHomePage\\\">\\n            <div class=\\\"card card-body\\\">\\n              <p>\\n                Select the default landing page shown when loading the application or starting a new search.\\n                <br> (\\n                <strong>default: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"homePageDefault\") || (depth0 != null ? lookupProperty(depth0,\"homePageDefault\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"homePageDefault\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":84,\"column\":33},\"end\":{\"line\":84,\"column\":52}}}) : helper)))\n    + \"</strong>)\\n              </p>\\n            </div>\\n          </div>\\n          </p>\\n          <select class=\\\"form-control\\\" id=\\\"homePage\\\" aria-describedby=\\\"collapseHomePage\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"homePageOptions\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(6, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":90,\"column\":12},\"end\":{\"line\":94,\"column\":21}}})) != null ? stack1 : \"\")\n    + \"          </select>\\n        </div>\\n\\n        <!-- Default Collection -->\\n        <div class=\\\"form-group\\\">\\n          <div style=\\\"display:flex; align-items: center;\\\">\\n            <label id=\\\"defaultDatabaseLabel\\\" style=\\\"margin: 0;\\\">\\n              Default Collection(s)\\n              <button href=\\\"#collapseDatabase\\\" data-toggle=\\\"collapse\\\" class=\\\"btn-link\\\" aria-expanded=\\\"false\\\"\\n                      aria-controls=\\\"collapseDatabase\\\" aria-label=\\\"default collection\\\">\\n                <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i>\\n              </button>\\n            </label>\\n            <div style=\\\"width: 40px\\\"></div>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(lookupProperty(helpers,\"not\")||(depth0 && lookupProperty(depth0,\"not\"))||alias2).call(alias1,(lookupProperty(helpers,\"includes\")||(depth0 && lookupProperty(depth0,\"includes\"))||alias2).call(alias1,\"database\",(depth0 != null ? lookupProperty(depth0,\"modifySections\") : depth0),{\"name\":\"includes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":109,\"column\":23},\"end\":{\"line\":109,\"column\":64}}}),{\"name\":\"not\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":109,\"column\":18},\"end\":{\"line\":109,\"column\":65}}}),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(8, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":109,\"column\":12},\"end\":{\"line\":112,\"column\":19}}})) != null ? stack1 : \"\")\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(lookupProperty(helpers,\"includes\")||(depth0 && lookupProperty(depth0,\"includes\"))||alias2).call(alias1,\"database\",(depth0 != null ? lookupProperty(depth0,\"modifySections\") : depth0),{\"name\":\"includes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":113,\"column\":18},\"end\":{\"line\":113,\"column\":59}}}),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(10, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":113,\"column\":12},\"end\":{\"line\":115,\"column\":19}}})) != null ? stack1 : \"\")\n    + \"          </div>\\n          <p>\\n          <div class=\\\"collapse\\\" id=\\\"collapseDatabase\\\">\\n            <div class=\\\"card card-body\\\">\\n              <p>\\n                This will apply a default collection facet to each search. You can manually remove or alter it from\\n                there.\\n                <br> (\\n                <strong>default: none</strong>)\\n              </p>\\n            </div>\\n          </div>\\n          </p>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(lookupProperty(helpers,\"includes\")||(depth0 && lookupProperty(depth0,\"includes\"))||alias2).call(alias1,\"database\",(depth0 != null ? lookupProperty(depth0,\"modifySections\") : depth0),{\"name\":\"includes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":130,\"column\":16},\"end\":{\"line\":130,\"column\":57}}}),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(12, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":130,\"column\":10},\"end\":{\"line\":161,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"\\n        </div>\\n\\n        <!-- Default Show/Hide Sidebars -->\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"hideSideBars\\\">\\n            Results List Side Bars\\n            <button href=\\\"#collapseHideSideBars\\\" data-toggle=\\\"collapse\\\" class=\\\"btn-link\\\" aria-expanded=\\\"false\\\"\\n                    aria-controls=\\\"collapseHideSideBars\\\" aria-label=\\\"results list side bars\\\">\\n              <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i>\\n            </button>\\n          </label>\\n          <p>\\n          <div class=\\\"collapse\\\" id=\\\"collapseHideSideBars\\\">\\n            <div class=\\\"card card-body\\\">\\n              <p>\\n                Select the default state of the results list sidebars (hide/show)\\n                <br> (\\n                <strong>default: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"hideSideBarsDefault\") || (depth0 != null ? lookupProperty(depth0,\"hideSideBarsDefault\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"hideSideBarsDefault\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":180,\"column\":33},\"end\":{\"line\":180,\"column\":56}}}) : helper)))\n    + \"</strong>)\\n              </p>\\n            </div>\\n          </div>\\n          </p>\\n          <select class=\\\"form-control\\\" id=\\\"hideSideBars\\\" aria-describedby=\\\"collapseHideSideBars\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"hideSideBarsOptions\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(22, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":186,\"column\":12},\"end\":{\"line\":190,\"column\":21}}})) != null ? stack1 : \"\")\n    + \"          </select>\\n        </div>\\n      </form>\\n\\n      <div class=\\\"col-md-6 col-md-offset-3 text-center\\\" id=\\\"app-settings-msg\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"loading\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(24, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":196,\"column\":8},\"end\":{\"line\":197,\"column\":91}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"updateSucceeded\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(26, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":197,\"column\":92},\"end\":{\"line\":201,\"column\":13}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"updateFailed\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(28, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":201,\"column\":14},\"end\":{\"line\":205,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"      </div>\\n    </div>\\n  </div>\\n</div>\\n\";\n},\"useData\":true,\"useDepths\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/preferences/templates/application.html?");

/***/ }),

/***/ "./src/js/widgets/preferences/templates/export.html":
/*!**********************************************************!*\
  !*** ./src/js/widgets/preferences/templates/export.html ***!
  \**********************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <option value=\\\"\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,(depths[1] != null ? lookupProperty(depths[1],\"exportFormatSelected\") : depths[1]),{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(2, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":30,\"column\":37},\"end\":{\"line\":30,\"column\":111}}})) != null ? stack1 : \"\")\n    + \">\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\n            </option>\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    return \" selected=\\\"selected\\\" \";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"              <li class=\\\"list-group-item clearfix\\\" data-id=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":63,\"column\":60},\"end\":{\"line\":63,\"column\":66}}}) : helper)))\n    + \"\\\">\\n                <div class=\\\"col-xs-1\\\">\\n                  <i class=\\\"fa fa-unsorted\\\" aria-hidden=\\\"true\\\"></i>\\n                </div>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"editing\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.program(7, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":68,\"column\":16},\"end\":{\"line\":104,\"column\":31}}})) != null ? stack1 : \"\")\n    + \"\\n              </li>\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                <div class=\\\"col-xs-3\\\">\\n                  <input type=\\\"text\\\" class=\\\"form-control custom-format-edit\\\" id=\\\"custom-format-name-\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":70,\"column\":100},\"end\":{\"line\":70,\"column\":106}}}) : helper)))\n    + \"\\\" placeholder=\\\"My New Format\\\" value=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":70,\"column\":143},\"end\":{\"line\":70,\"column\":151}}}) : helper)))\n    + \"\\\" data-id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":70,\"column\":162},\"end\":{\"line\":70,\"column\":168}}}) : helper)))\n    + \"\\\">\\n                </div>\\n                <div class=\\\"col-xs-6\\\">\\n                  <input type=\\\"text\\\" class=\\\"form-control custom-format-edit\\\" placeholder=\\\"%l (%Y), %j, %V, %p.\\\\n\\\" id=\\\"custom-format-code-\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":73,\"column\":137},\"end\":{\"line\":73,\"column\":143}}}) : helper)))\n    + \"\\\" value=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"code\") || (depth0 != null ? lookupProperty(depth0,\"code\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"code\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":73,\"column\":152},\"end\":{\"line\":73,\"column\":160}}}) : helper)))\n    + \"\\\" data-id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":73,\"column\":171},\"end\":{\"line\":73,\"column\":177}}}) : helper)))\n    + \"\\\">\\n                </div>\\n                <span class=\\\"col-xs-2 text-right\\\">\\n                  <button data-id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":76,\"column\":35},\"end\":{\"line\":76,\"column\":41}}}) : helper)))\n    + \"\\\" class=\\\"btn-link addCustomFormatConfirmEdit\\\"\\n                    title=\\\"confirm edit\\\">\\n                    <i class=\\\"fa fa-check text-success\\\" aria-hidden=\\\"true\\\"></i>\\n                  </button>\\n                  <button data-id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":80,\"column\":35},\"end\":{\"line\":80,\"column\":41}}}) : helper)))\n    + \"\\\" class=\\\"btn-link addCustomFormatCancelEdit\\\"\\n                    title=\\\"cancel edit\\\">\\n                    <i class=\\\"fa fa-times text-danger\\\" aria-hidden=\\\"true\\\"></i>\\n                  </button>\\n                </span> \";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n                <div class=\\\"col-xs-3\\\">\\n                  <p id=\\\"custom-format-name-\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":86,\"column\":44},\"end\":{\"line\":86,\"column\":50}}}) : helper)))\n    + \"\\\">\\n                    <strong>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":87,\"column\":28},\"end\":{\"line\":87,\"column\":36}}}) : helper)))\n    + \"</strong>\\n                  </p>\\n                </div>\\n                <div class=\\\"col-xs-6\\\">\\n                  <p id=\\\"custom-format-code-\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":91,\"column\":44},\"end\":{\"line\":91,\"column\":50}}}) : helper)))\n    + \"\\\">\\n                    <code>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"code\") || (depth0 != null ? lookupProperty(depth0,\"code\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"code\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":92,\"column\":26},\"end\":{\"line\":92,\"column\":34}}}) : helper)))\n    + \"</code>\\n                  </p>\\n                </div>\\n                <span class=\\\"col-xs-2 text-right\\\">\\n                  <button data-id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":96,\"column\":35},\"end\":{\"line\":96,\"column\":41}}}) : helper)))\n    + \"\\\" class=\\\"btn-link addCustomFormatEdit\\\"\\n                    title=\\\"edit custom format\\\">\\n                    <i class=\\\"fa fa-pencil text-primary\\\" aria-hidden=\\\"true\\\"></i>\\n                  </button>\\n                  <button data-id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":100,\"column\":35},\"end\":{\"line\":100,\"column\":41}}}) : helper)))\n    + \"\\\" class=\\\"btn-link addCustomFormatDelete\\\"\\n                    title=\\\"delete custom format\\\">\\n                    <i class=\\\"fa fa-times text-danger\\\" aria-hidden=\\\"true\\\"></i>\\n                  </button>\\n                </span> \";\n},\"9\":function(container,depth0,helpers,partials,data) {\n    return \"              <div class=\\\"well\\\">\\n                Nothing here... Add a new format below\\n                <br> (its also possible we didn't properly load your custom formats, please try refreshing this page)\\n              </div>\\n\";\n},\"11\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <option value=\\\"\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,(depths[1] != null ? lookupProperty(depths[1],\"bibtexJournalFormatSelected\") : depths[1]),{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(2, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":201,\"column\":37},\"end\":{\"line\":201,\"column\":118}}})) != null ? stack1 : \"\")\n    + \">\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\n            </option>\\n\";\n},\"13\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                <option value=\\\"\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,(depths[1] != null ? lookupProperty(depths[1],\"bibtexMaxAuthorsSelected\") : depths[1]),{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(2, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":231,\"column\":41},\"end\":{\"line\":231,\"column\":119}}})) != null ? stack1 : \"\")\n    + \">\\n                  \"\n    + alias2(alias1(depth0, depth0))\n    + \"</option>\\n\";\n},\"15\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                <option value=\\\"\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,(depths[1] != null ? lookupProperty(depths[1],\"bibtexAuthorCutoffSelected\") : depths[1]),{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(2, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":263,\"column\":41},\"end\":{\"line\":263,\"column\":121}}})) != null ? stack1 : \"\")\n    + \">\\n                  \"\n    + alias2(alias1(depth0, depth0))\n    + \"</option>\\n\";\n},\"17\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                <option value=\\\"\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,(depths[1] != null ? lookupProperty(depths[1],\"bibtexABSMaxAuthorsSelected\") : depths[1]),{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(2, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":348,\"column\":41},\"end\":{\"line\":348,\"column\":122}}})) != null ? stack1 : \"\")\n    + \">\\n                  \"\n    + alias2(alias1(depth0, depth0))\n    + \"</option>\\n\";\n},\"19\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                <option value=\\\"\"\n    + alias2(alias1(depth0, depth0))\n    + \"\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,(depths[1] != null ? lookupProperty(depths[1],\"bibtexABSAuthorCutoffSelected\") : depths[1]),{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(2, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":380,\"column\":41},\"end\":{\"line\":380,\"column\":124}}})) != null ? stack1 : \"\")\n    + \">\\n                  \"\n    + alias2(alias1(depth0, depth0))\n    + \"</option>\\n\";\n},\"21\":function(container,depth0,helpers,partials,data) {\n    return \"        <i class=\\\"text-muted fa fa-refresh fa-spin fa-3x\\\" aria-hidden=\\\"true\\\"></i> \";\n},\"23\":function(container,depth0,helpers,partials,data) {\n    return \"\\n        <div class=\\\"alert alert-success fade in h4\\\" role=\\\"alert\\\">\\n          <i class=\\\"fa fa-check fa-2x\\\" aria-hidden=\\\"true\\\"></i> Settings updated successfully\\n        </div>\\n        \";\n},\"25\":function(container,depth0,helpers,partials,data) {\n    return \"\\n        <div class=\\\"alert alert-danger fade in h4\\\" role=\\\"alert\\\">\\n          <i class=\\\"fa fa-times fa-3x\\\" aria-hidden=\\\"true\\\"></i> Settings not updated, please try again.\\n        </div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"panel-heading\\\">Export Settings</div>\\n\\n<div class=\\\"panel-body\\\" id=\\\"export-settings-container\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <form id=\\\"export-settings-form\\\" class=\\\"form-horizontal\\\">\\n\\n        <!-- Default Export Format -->\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"exportFormat\\\">\\n            Default Export Format\\n            <button href=\\\"#collapseExportFormat\\\" data-toggle=\\\"collapse\\\" class=\\\"btn-link\\\" aria-expanded=\\\"false\\\"\\n              aria-controls=\\\"collapseExportFormat\\\" aria-label=\\\"default export format\\\">\\n              <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i>\\n            </button>\\n          </label>\\n          <p>\\n            <div class=\\\"collapse\\\" id=\\\"collapseExportFormat\\\">\\n              <div class=\\\"card card-body\\\">\\n                <p>\\n                  Select the default export format you would like to use when opening the Export tool.\\n                  <br> (\\n                  <strong>default: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"exportFormatDefault\") || (depth0 != null ? lookupProperty(depth0,\"exportFormatDefault\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"exportFormatDefault\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":23,\"column\":35},\"end\":{\"line\":23,\"column\":58}}}) : helper)))\n    + \"</strong>)\\n                </p>\\n              </div>\\n            </div>\\n          </p>\\n          <select class=\\\"form-control\\\" id=\\\"exportFormat\\\" aria-describedby=\\\"collapseExportFormat\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"exportFormatOptions\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":29,\"column\":12},\"end\":{\"line\":32,\"column\":21}}})) != null ? stack1 : \"\")\n    + \"          </select>\\n        </div>\\n\\n        <!-- Custom Formats -->\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"addCustomFormat\\\">\\n            Custom Formats\\n            <button href=\\\"#collapseAddCustomFormat\\\" data-toggle=\\\"collapse\\\" class=\\\"btn-link\\\" aria-expanded=\\\"false\\\"\\n              aria-controls=\\\"collapseAddCustomFormat\\\" aria-label=\\\"custom formats\\\">\\n              <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i>\\n            </button>\\n          </label>\\n          <p>\\n            <div class=\\\"collapse\\\" id=\\\"collapseAddCustomFormat\\\">\\n              <div class=\\\"card card-body\\\">\\n                <p>\\n                  Edit your saved custom formats\\n                </p>\\n                <p>\\n                  Check out our <a href=\\\"/help/actions/export\\\" rel=\\\"noreferrer noopener\\\" target=\\\"_blank\\\">docs</a> for more information.\\n                </p>\\n              </div>\\n            </div>\\n          </p>\\n          <p>\\n            You currently have \"\n    + alias4(container.lambda(((stack1 = (depth0 != null ? lookupProperty(depth0,\"addCustomFormatOptions\") : depth0)) != null ? lookupProperty(stack1,\"length\") : stack1), depth0))\n    + \" format(s) defined.\\n          </p>\\n          <div id=\\\"addCustomFormat\\\">\\n            <ul class=\\\"list-group col-xs-12\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"addCustomFormatOptions\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(4, data, 0, blockParams, depths),\"inverse\":container.program(9, data, 0, blockParams, depths),\"data\":data,\"loc\":{\"start\":{\"line\":62,\"column\":14},\"end\":{\"line\":111,\"column\":23}}})) != null ? stack1 : \"\")\n    + \"            </ul>\\n          </div>\\n          <p>\\n            <button class=\\\"btn btn-primary\\\" id=\\\"addCustomFormatAdd\\\">Add</button> &nbsp;\\n            <span id=\\\"new-format-msg\\\" class=\\\"text-muted\\\" style=\\\"display: none\\\">\\n              New format added!\\n            </span>\\n          </p>\\n        </div>\\n\\n        <!-- Set BibTeX key format  -->\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"bibtexKeyFormat\\\">\\n            BibTeX Default Export Key Format\\n            <button href=\\\"#collapsebibtexKeyFormat\\\" data-toggle=\\\"collapse\\\" class=\\\"btn-link\\\" aria-expanded=\\\"false\\\"\\n              aria-controls=\\\"collapsebibtexKeyFormat\\\" aria-label=\\\"bibtex default export key format\\\">\\n              <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i>\\n            </button>\\n          </label>\\n          <p>\\n            <div class=\\\"collapse\\\" id=\\\"collapsebibtexKeyFormat\\\">\\n              <div class=\\\"card card-body\\\">\\n                <p>\\n                  Select the default key format when exporting in BibTeX (<a href=\\\"/help/actions/export\\\" rel=\\\"noreferrer noopener\\\" target=\\\"_blank\\\">Learn More <i\\n                      class=\\\"fa fa-external-link\\\" aria-hidden=\\\"true\\\"></i></a>)\\n                  <table class=\\\"table\\\">\\n                    <caption>\\n                      Key format codes and descriptions\\n                    </caption>\\n                    <thead>\\n                      <tr>\\n                        <th>Code</th>\\n                        <th>Description</th>\\n                      </tr>\\n                    </thead>\\n                    <tbody>\\n                      <tr>\\n                        <td><code>%R</code></td>\\n                        <td>Bibcode</td>\\n                      </tr>\\n                      <tr>\\n                        <td><code>%nH</code></td>\\n                        <td>Author, where <code>n</code> can be any number</td>\\n                      </tr>\\n                      <tr>\\n                        <td><code>%q</code></td>\\n                        <td>Publication</td>\\n                      </tr>\\n                      <tr>\\n                        <td><code>%Y</code></td>\\n                        <td>Year</td>\\n                      </tr>\\n                      <tr>\\n                        <td><code>%zm</code></td>\\n                        <td>Enumeration</td>\\n                      </tr>\\n                    </tbody>\\n                  </table>\\n                  <p>* Any other text will be passed as raw strings</p>\\n                  (<strong>default: None</strong>)\\n                </p>\\n              </div>\\n            </div>\\n          </p>\\n          <input type=\\\"text\\\" id=\\\"bibtexKeyFormat\\\" value=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"bibtexKeyFormatSelected\") || (depth0 != null ? lookupProperty(depth0,\"bibtexKeyFormatSelected\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bibtexKeyFormatSelected\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":176,\"column\":57},\"end\":{\"line\":176,\"column\":84}}}) : helper)))\n    + \"\\\" data-no-convert=\\\"true\\\" aria-describedby=\\\"collapsebibtexKeyFormat\\\" placeholder=\\\"%1H:%Y:%q\\\" class=\\\"form-control\\\" title=\\\"bibtex key format\\\" maxlength=\\\"30\\\">\\n        </div>\\n\\n        <!-- Default TeX Journal Name Handling -->\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"bibtexJournalFormat\\\">\\n            TeX Journal Name Handling\\n            <button href=\\\"#collapseBibtexJournalFormat\\\" data-toggle=\\\"collapse\\\" class=\\\"btn-link\\\" aria-expanded=\\\"false\\\"\\n              aria-controls=\\\"collapseBibtexJournalFormat\\\" aria-label=\\\"results list side bars\\\">\\n              <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i>\\n            </button>\\n          </label>\\n          <p>\\n            <div class=\\\"collapse\\\" id=\\\"collapseBibtexJournalFormat\\\">\\n              <div class=\\\"card card-body\\\">\\n                <p>\\n                  This setting is used to define how journal names are rendered in the output of the following TeX-based formats: BibTeX, BibTeX ABS, and AASTeX. If journal macros are used (default), the following file contains the proper journal definitions compatible with most Astronomy Journals: <a href=\\\"http://adsabs.harvard.edu/abs_doc/aas_macros.html\\\">http://adsabs.harvard.edu/abs_doc/aas_macros.html</a>\\n                  <br> (\\n                  <strong>default: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"bibtexJournalFormatDefault\") || (depth0 != null ? lookupProperty(depth0,\"bibtexJournalFormatDefault\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bibtexJournalFormatDefault\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":194,\"column\":35},\"end\":{\"line\":194,\"column\":65}}}) : helper)))\n    + \"</strong>)\\n                </p>\\n              </div>\\n            </div>\\n          </p>\\n          <select class=\\\"form-control\\\" id=\\\"bibtexJournalFormat\\\" aria-describedby=\\\"collapseBibtexJournalFormat\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"bibtexJournalFormatOptions\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(11, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":200,\"column\":12},\"end\":{\"line\":203,\"column\":21}}})) != null ? stack1 : \"\")\n    + \"          </select>\\n        </div>\\n\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-sm-5\\\">\\n            <!-- Set BibTeX key max authors  -->\\n            <div class=\\\"form-group\\\">\\n              <label for=\\\"bibtexMaxAuthors\\\">\\n                BibTeX Default Export Max Authors\\n                <a href=\\\"#collapsebibtexMaxAuthors\\\" data-toggle=\\\"collapse\\\" class=\\\"btn-link\\\" aria-expanded=\\\"false\\\"\\n                  aria-controls=\\\"collapsebibtexMaxAuthors\\\" aria-label=\\\"bibtex default export max authors\\\">\\n                  <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i>\\n                </a>\\n              </label>\\n              <p>\\n                <div class=\\\"collapse\\\" id=\\\"collapsebibtexMaxAuthors\\\">\\n                  <div class=\\\"card card-body\\\">\\n                    <p>\\n                      Select the default max number of authors shown when exporting in BibTeX\\n                      <br> (\\n                      <strong>default: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"bibtexMaxAuthorsDefault\") || (depth0 != null ? lookupProperty(depth0,\"bibtexMaxAuthorsDefault\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bibtexMaxAuthorsDefault\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":224,\"column\":39},\"end\":{\"line\":224,\"column\":66}}}) : helper)))\n    + \"</strong>)\\n                    </p>\\n                  </div>\\n                </div>\\n              </p>\\n              <select class=\\\"form-control\\\" id=\\\"bibtexMaxAuthors\\\" aria-describedby=\\\"collapsebibtexMaxAuthors\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"bibtexMaxAuthorsOptions\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(13, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":230,\"column\":16},\"end\":{\"line\":233,\"column\":25}}})) != null ? stack1 : \"\")\n    + \"              </select>\\n            </div>\\n          </div>\\n          <div class=\\\"col-sm-5 col-sm-offset-2\\\">\\n            <!-- Set BibTeX author cutoff  -->\\n            <div class=\\\"form-group\\\">\\n              <label for=\\\"bibtexAuthorCutoff\\\">\\n                BibTeX Default Author Cutoff\\n                <button href=\\\"#collapsebibtexAuthorCutoff\\\" data-toggle=\\\"collapse\\\" class=\\\"btn-link\\\" aria-expanded=\\\"false\\\"\\n                  aria-controls=\\\"collapsebibtexAuthorCutoff\\\" aria-label=\\\"bibtex default author cutoff\\\">\\n                  <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i>\\n                </button>\\n              </label>\\n              <p>\\n                <div class=\\\"collapse\\\" id=\\\"collapsebibtexAuthorCutoff\\\">\\n                  <div class=\\\"card card-body\\\">\\n                    <p>\\n                        <p>\\n                          If the number of authors in the list is larger than the cutoff,\\n                          the list will be truncated to the max number allowed, otherwise all will be shown.\\n                        </p>\\n                      <br> (\\n                      <strong>default: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"bibtexAuthorCutoffDefault\") || (depth0 != null ? lookupProperty(depth0,\"bibtexAuthorCutoffDefault\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bibtexAuthorCutoffDefault\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":256,\"column\":39},\"end\":{\"line\":256,\"column\":68}}}) : helper)))\n    + \"</strong>)\\n                    </p>\\n                  </div>\\n                </div>\\n              </p>\\n              <select class=\\\"form-control\\\" id=\\\"bibtexAuthorCutoff\\\" aria-describedby=\\\"collapsebibtexAuthorCutoff\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"bibtexAuthorCutoffOptions\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(15, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":262,\"column\":16},\"end\":{\"line\":265,\"column\":25}}})) != null ? stack1 : \"\")\n    + \"              </select>\\n            </div>\\n          </div>\\n        </div>\\n\\n        <!-- Set BibTeX ABS key format  -->\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"bibtexABSKeyFormat\\\">\\n            BibTeX ABS Default Export Key Format\\n            <button href=\\\"#collapsebibtexABSKeyFormat\\\" data-toggle=\\\"collapse\\\" class=\\\"btn-link\\\" aria-expanded=\\\"false\\\"\\n              aria-controls=\\\"collapsebibtexABSKeyFormat\\\" aria-label=\\\"bibtex abs default export key format\\\">\\n              <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i>\\n            </button>\\n          </label>\\n          <p>\\n            <div class=\\\"collapse\\\" id=\\\"collapsebibtexABSKeyFormat\\\">\\n              <div class=\\\"card card-body\\\">\\n                <p>\\n                  Select the default key format when exporting in BibTeX ABS (<a href=\\\"/help/actions/export\\\" rel=\\\"noreferrer noopener\\\" target=\\\"_blank\\\">Learn More <i\\n                      class=\\\"fa fa-external-link\\\" aria-hidden=\\\"true\\\"></i></a>)\\n                  <table class=\\\"table\\\">\\n                    <caption>\\n                      Key format codes and descriptions\\n                    </caption>\\n                    <thead>\\n                      <tr>\\n                        <th>Code</th>\\n                        <th>Description</th>\\n                      </tr>\\n                    </thead>\\n                    <tbody>\\n                      <tr>\\n                        <td><code>%R</code></td>\\n                        <td>Bibcode</td>\\n                      </tr>\\n                      <tr>\\n                        <td><code>%nH</code></td>\\n                        <td>Author, where <code>n</code> can be any number</td>\\n                      </tr>\\n                      <tr>\\n                        <td><code>%q</code></td>\\n                        <td>Publication</td>\\n                      </tr>\\n                      <tr>\\n                        <td><code>%Y</code></td>\\n                        <td>Year</td>\\n                      </tr>\\n                    </tbody>\\n                  </table>\\n                  <p>* Any other text will be passed as raw strings</p>\\n                  (<strong>default: None</strong>)\\n                </p>\\n              </div>\\n            </div>\\n          </p>\\n          <input type=\\\"text\\\" id=\\\"bibtexABSKeyFormat\\\" value=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"bibtexABSKeyFormatSelected\") || (depth0 != null ? lookupProperty(depth0,\"bibtexABSKeyFormatSelected\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bibtexABSKeyFormatSelected\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":321,\"column\":60},\"end\":{\"line\":321,\"column\":90}}}) : helper)))\n    + \"\\\" data-no-convert=\\\"true\\\" aria-describedby=\\\"collapsebibtexABSKeyFormat\\\" placeholder=\\\"%1H:%Y:%q\\\" class=\\\"form-control\\\" title=\\\"bibtex ABS key format\\\" maxlength=\\\"30\\\">\\n        </div>\\n\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-sm-5\\\">\\n            <!-- Set BibTeX ABS key max authors -->\\n            <div class=\\\"form-group\\\">\\n              <label for=\\\"bibtexABSMaxAuthors\\\">\\n                BibTeX ABS Default Export Max Authors\\n                <button href=\\\"#collapsebibtexABSMaxAuthors\\\" data-toggle=\\\"collapse\\\" class=\\\"btn-link\\\" aria-expanded=\\\"false\\\"\\n                  aria-controls=\\\"collapsebibtexABSMaxAuthors\\\" aria-label=\\\"bibtex abs default export max authors\\\">\\n                  <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i>\\n                </button>\\n              </label>\\n                <p>\\n                  <div class=\\\"collapse\\\" id=\\\"collapsebibtexABSMaxAuthors\\\">\\n                    <div class=\\\"card card-body\\\">\\n                      <p>\\n                        Select the default max number of authors shown when exporting in BibTeX ABS\\n                        <br> (\\n                        <strong>default: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"bibtexABSMaxAuthorsDefault\") || (depth0 != null ? lookupProperty(depth0,\"bibtexABSMaxAuthorsDefault\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bibtexABSMaxAuthorsDefault\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":341,\"column\":41},\"end\":{\"line\":341,\"column\":71}}}) : helper)))\n    + \"</strong>)\\n                      </p>\\n                    </div>\\n                  </div>\\n                </p>\\n                <select class=\\\"form-control\\\" id=\\\"bibtexABSMaxAuthors\\\" aria-describedby=\\\"collapsebibtexABSMaxAuthors\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"bibtexABSMaxAuthorsOptions\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(17, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":347,\"column\":16},\"end\":{\"line\":350,\"column\":25}}})) != null ? stack1 : \"\")\n    + \"              </select>\\n            </div>\\n          </div>\\n          <div class=\\\"col-sm-5 col-sm-offset-2\\\">\\n            <!-- Set BibTeX ABS author cutoff  -->\\n            <div class=\\\"form-group\\\">\\n              <label for=\\\"bibtexABSAuthorCutoff\\\">\\n                BibTeX ABS Default Author Cutoff\\n                <button href=\\\"#collapsebibtexABSAuthorCutoff\\\" data-toggle=\\\"collapse\\\" class=\\\"btn-link\\\" aria-expanded=\\\"false\\\"\\n                  aria-controls=\\\"collapsebibtexABSAuthorCutoff\\\" aria-label=\\\"bibtex abs default author cutoff\\\">\\n                  <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i>\\n                </button>\\n              </label>\\n              <p>\\n                <div class=\\\"collapse\\\" id=\\\"collapsebibtexABSAuthorCutoff\\\">\\n                  <div class=\\\"card card-body\\\">\\n                    <p>\\n                        <p>\\n                          If the number of authors in the list is larger than the cutoff,\\n                          the list will be truncated to the max number allowed, otherwise all will be shown.\\n                        </p>\\n                      <br> (\\n                      <strong>default: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"bibtexABSAuthorCutoffDefault\") || (depth0 != null ? lookupProperty(depth0,\"bibtexABSAuthorCutoffDefault\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bibtexABSAuthorCutoffDefault\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":373,\"column\":39},\"end\":{\"line\":373,\"column\":71}}}) : helper)))\n    + \"</strong>)\\n                    </p>\\n                  </div>\\n                </div>\\n              </p>\\n              <select class=\\\"form-control\\\" id=\\\"bibtexABSAuthorCutoff\\\" aria-describedby=\\\"collapsebibtexABSAuthorCutoff\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"bibtexABSAuthorCutoffOptions\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(19, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":379,\"column\":16},\"end\":{\"line\":382,\"column\":25}}})) != null ? stack1 : \"\")\n    + \"              </select>\\n            </div>\\n          </div>\\n        </div>\\n      </form>\\n\\n      <div class=\\\"col-md-6 col-md-offset-3 text-center\\\" id=\\\"app-settings-msg\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"loading\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(21, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":390,\"column\":8},\"end\":{\"line\":391,\"column\":89}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"updateSucceeded\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(23, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":391,\"column\":90},\"end\":{\"line\":395,\"column\":15}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"updateFailed\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(25, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":395,\"column\":16},\"end\":{\"line\":399,\"column\":15}}})) != null ? stack1 : \"\")\n    + \"      </div>\\n    </div>\\n  </div>\\n</div>\\n\";\n},\"useData\":true,\"useDepths\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/preferences/templates/export.html?");

/***/ }),

/***/ "./src/js/widgets/preferences/templates/openurl.html":
/*!***********************************************************!*\
  !*** ./src/js/widgets/preferences/templates/openurl.html ***!
  \***********************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"      <div class=\\\"alert alert-danger\\\">\\n        Error retrieving user link servers, please try again later.\\n      </div>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \"      <div class=\\\"row\\\">\\n        <div class=\\\"col-sm-12 text-center\\\">\\n          <i class=\\\"icon-loading\\\" aria-hidden=\\\"true\\\"></i> Loading...\\n        </div>\\n      </div>\\n\";\n},\"5\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"unless\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"openURLError\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(6, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":6},\"end\":{\"line\":122,\"column\":17}}})) != null ? stack1 : \"\");\n},\"6\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        <div class=\\\"row\\\">\\n          <div class=\\\"col-sm-12\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"openURLName\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0, blockParams, depths),\"inverse\":container.program(9, data, 0, blockParams, depths),\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":12},\"end\":{\"line\":28,\"column\":19}}})) != null ? stack1 : \"\")\n    + \"          </div>\\n        </div>\\n        <div class=\\\"help-block\\\">\\n          <button id=\\\"change-link-server\\\" class=\\\"btn btn-primary\\\">\\n            <i class=\\\"fa fa-cog\\\" aria-hidden=\\\"true\\\"></i> Update\\n          </button>\\n          <button id=\\\"clear-link-server\\\"\\n            class=\\\"btn btn-link \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"editing\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(11, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":36,\"column\":32},\"end\":{\"line\":36,\"column\":64}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"openURLName\") : depth0),undefined,{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(11, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":36,\"column\":65},\"end\":{\"line\":36,\"column\":121}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n            <span class=\\\"text-danger\\\">\\n              <i class=\\\"fa fa-trash\\\" aria-hidden=\\\"true\\\"></i> Clear\\n            </span>\\n          </button>\\n        </div>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"editing\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(13, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":42,\"column\":8},\"end\":{\"line\":60,\"column\":15}}})) != null ? stack1 : \"\")\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"confirming\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(17, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":61,\"column\":8},\"end\":{\"line\":76,\"column\":15}}})) != null ? stack1 : \"\")\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"confirming\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(19, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":77,\"column\":8},\"end\":{\"line\":79,\"column\":19}}})) != null ? stack1 : \"\")\n    + \"        <div class=\\\"row\\\">\\n          <div class=\\\"col-md-8\\\">\\n            <div class=\\\"h4\\\">\\n              <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i>\\n              What Is a Library Link Server?\\n            </div>\\n            <p>\\n              Users who have access to electronic resources through their library\\n              subscriptions can configure their user preferences so that the appropriate\\n              links to the fulltext will be provided when viewing a record in the ADS.\\n            </p>\\n            <p>\\n              After your selection, look for the <span class=\\\"link-server-univ-icon\\\"><strong>My Institution</strong> <i class=\\\"fa fa-university\\\" aria-hidden=\\\"true\\\"></i></span>\\n              entry in the source list on an abstract page.\\n            </p>\\n            <p>\\n              If you find your institution in the above list, please select it so that we\\n              can generate the appropriate links for you. For more information,\\n              please visit our <a rel=\\\"noreferrer noopener\\\" target=\\\"_blank\\\" href=\\\"/help/userpreferences/library-servers\\\">Help Docs.</a>\\n            </p>\\n          </div>\\n          <div class=\\\"col-md-4\\\"></div>\\n        </div>\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-md-8\\\">\\n              <div class=\\\"h4\\\">\\n                <i class=\\\"fa fa-exclamation-triangle\\\" aria-hidden=\\\"true\\\"></i>\\n                Institution Not Found?\\n              </div>\\n              <p>\\n                Please contact your electronic resources librarian and request that\\n                they email <em>adshelp@cfa.harvard.edu</em> with the relevant\\n                openurl information.\\n              </p>\\n              <p>\\n                If you are still having difficulties,\\n                <strong><a href=\\\"mailto:adshelp@cfa.harvard.edu\\\">Contact Us</a></strong>\\n                for help.\\n              </p>\\n          </div>\\n          <div class=\\\"col-md-4\\\"></div>\\n        </div>\\n\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"              <div class=\\\"h4\\\">\\n                Current Link Server: <strong>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"openURLName\") || (depth0 != null ? lookupProperty(depth0,\"openURLName\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"openURLName\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":22,\"column\":45},\"end\":{\"line\":22,\"column\":60}}}) : helper)))\n    + \"</strong>.\\n              </div>\\n\";\n},\"9\":function(container,depth0,helpers,partials,data) {\n    return \"              <div class=\\\"h4\\\">\\n                No Link Server Selected.\\n              </div>\\n\";\n},\"11\":function(container,depth0,helpers,partials,data) {\n    return \" disabled \";\n},\"13\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        <div class=\\\"link-server-form-container\\\">\\n          <form class=\\\"form-inline\\\">\\n            <div class=\\\"input-group\\\">\\n              <label for=\\\"set-link-server\\\">Choose Your Institution\\n                <select name=\\\"set-link-server\\\" id=\\\"set-link-server\\\" class=\\\"form-control\\\" style=\\\"width: 100%\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"openURLConfig\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(14, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":48,\"column\":18},\"end\":{\"line\":50,\"column\":27}}})) != null ? stack1 : \"\")\n    + \"                </select>\\n              </label>\\n            </div>\\n            <div class=\\\"help-block\\\">\\n              <button class=\\\"btn btn-success\\\" id=\\\"link-server-apply\\\">Apply</button>\\n              <button class=\\\"btn btn-danger\\\" id=\\\"link-server-cancel\\\">Cancel</button>\\n            </div>\\n          </form>\\n        </div>\\n\";\n},\"14\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=container.lambda, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                  <option value=\\\"\"\n    + container.escapeExpression(alias1((depth0 != null ? lookupProperty(depth0,\"link\") : depth0), depth0))\n    + \"\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depths[1] != null ? lookupProperty(depths[1],\"link_server\") : depths[1]),(depth0 != null ? lookupProperty(depth0,\"link\") : depth0),{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(15, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":49,\"column\":48},\"end\":{\"line\":49,\"column\":119}}})) != null ? stack1 : \"\")\n    + \">\"\n    + ((stack1 = alias1((depth0 != null ? lookupProperty(depth0,\"name\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</option>\\n\";\n},\"15\":function(container,depth0,helpers,partials,data) {\n    return \" selected=\\\"selected\\\" \";\n},\"17\":function(container,depth0,helpers,partials,data) {\n    return \"          <div id=\\\"link-server-clear-confirm\\\">\\n            <div class=\\\"row col-sm-6 col-sm-offset-3\\\">\\n              <div class=\\\"alert alert-info text-center\\\">\\n                <p>\\n                  <strong>Are you sure?</strong>\\n                </p>\\n                <p>\\n                  <button class=\\\"btn btn-success btn-sm submit\\\" id=\\\"clear-link-server-confirm\\\">Yes, clear</button>\\n                  <button class=\\\"btn btn-danger btn-sm reset\\\" id=\\\"clear-link-server-cancel\\\">Cancel</button>\\n                </p>\\n              </div>\\n            </div>\\n            <div class=\\\"col-sm-3\\\"></div>\\n          </div>\\n\";\n},\"19\":function(container,depth0,helpers,partials,data) {\n    return \"          <hr class=\\\"hr\\\">\\n\";\n},\"21\":function(container,depth0,helpers,partials,data) {\n    return \"  <p>\\n    <i class=\\\"icon-loading\\\" aria-hidden=\\\"true\\\"></i>\\n    Loading...\\n  </p>\\n\";\n},\"23\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"openURLName\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(24, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":137,\"column\":2},\"end\":{\"line\":145,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"\\n    <div id=\\\"link-server-container\\\" class=\\\"\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"openURLName\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(27, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":147,\"column\":43},\"end\":{\"line\":147,\"column\":80}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n      <br/>\\n      <form class=\\\"form-inline\\\">\\n        <div class=\\\"form-group\\\" style=\\\"min-width:300px\\\">\\n          <label for=\\\"set-link-server\\\">Choose Your Institution</label>\\n          <br/>\\n          <select name=\\\"set-link-server\\\" id=\\\"set-link-server\\\" class=\\\"form-control\\\" style=\\\"width: 100%\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"openURLConfig\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(29, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":154,\"column\":12},\"end\":{\"line\":156,\"column\":21}}})) != null ? stack1 : \"\")\n    + \"          </select>\\n        </div>\\n        <button class=\\\"btn btn-sm btn-success submit\\\">submit</button>\\n\\n        <br/>\\n        <br/>\\n        <br/>\\n\\n        <p>\\n          <b>Can't find your institution in the list above?</b>\\n        </p>\\n        <p>\\n          Please contact your electronic resources librarian and request that he or she email adshelp@cfa.harvard.edu with the relevant\\n          openurl information.\\n        </p>\\n        <p>\\n          If you are still having difficulties,\\n          <b>\\n            <a href=\\\"mailto:adshelp@cfa.harvard.edu\\\">contact us</a>\\n          </b> for help.\\n        </p>\\n      </form>\\n      <br/>\\n      <div>\\n        <div class=\\\"h3\\\">\\n          <i class=\\\"fa fa-question-circle\\\" aria-hidden=\\\"true\\\"></i>\\n          What Is a Library Link Server?\\n        </div>\\n        <p>\\n          Users who have access to electronic resources through their library\\n          subscriptions can configure their user preferences so that the appropriate\\n          links to the fulltext will be provided when viewing a record in the ADS.\\n        </p>\\n        <p>\\n          Look for the <span class=\\\"link-server-univ-icon\\\"><strong>My Institution</strong> <i class=\\\"fa fa-university\\\" aria-hidden=\\\"true\\\"></i></span>\\n          entry in the source list on the abstract page.\\n        </p>\\n        <p>\\n          If you find your institution in the above list, please select it so that we\\n          can generate the appropriate links for you. For more information,\\n          please visit our <a href=\\\"/help/userpreferences/library-servers\\\">Help Docs.</a>\\n        </p>\\n      </div>\\n    </div>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"showConfirm\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(31, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":202,\"column\":4},\"end\":{\"line\":218,\"column\":11}}})) != null ? stack1 : \"\");\n},\"24\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <div class=\\\"current-link-server\\\">\\n      <p>Your Library Link Server is set to\\n      <b>\"\n    + ((stack1 = ((helper = (helper = lookupProperty(helpers,\"openURLName\") || (depth0 != null ? lookupProperty(depth0,\"openURLName\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(alias1,{\"name\":\"openURLName\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":140,\"column\":9},\"end\":{\"line\":140,\"column\":26}}}) : helper))) != null ? stack1 : \"\")\n    + \"</b>.</p>\\n      <button id=\\\"change-link-server\\\" class=\\\"btn btn-primary-faded \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"openURLName\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(25, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":141,\"column\":67},\"end\":{\"line\":141,\"column\":105}}})) != null ? stack1 : \"\")\n    + \"\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#link-server-container\\\">\\n      <i class=\\\"toggle-icon\\\"></i> Change Library Link Server</button>\\n      <button id=\\\"clear-link-server\\\" class=\\\"btn btn-danger\\\">Clear Link Server</button>\\n    </div>\\n\";\n},\"25\":function(container,depth0,helpers,partials,data) {\n    return \" collapsed \";\n},\"27\":function(container,depth0,helpers,partials,data) {\n    return \" collapse \";\n},\"29\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=container.lambda, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <option value=\\\"\"\n    + container.escapeExpression(alias1((depth0 != null ? lookupProperty(depth0,\"link\") : depth0), depth0))\n    + \"\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depths[1] != null ? lookupProperty(depths[1],\"link_server\") : depths[1]),(depth0 != null ? lookupProperty(depth0,\"link\") : depth0),{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(15, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":155,\"column\":42},\"end\":{\"line\":155,\"column\":113}}})) != null ? stack1 : \"\")\n    + \">\"\n    + ((stack1 = alias1((depth0 != null ? lookupProperty(depth0,\"name\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</option>\\n\";\n},\"31\":function(container,depth0,helpers,partials,data) {\n    return \"      <div id=\\\"link-server-clear-confirm\\\">\\n        <div class=\\\"container\\\">\\n          <div class=\\\"row\\\" style=\\\"margin-top: 20px; max-width: 300px\\\">\\n            <div class=\\\"alert alert-info text-center\\\">\\n              <p>\\n                <strong>Are you sure?</strong>\\n              </p>\\n              <p>\\n                <button class=\\\"btn btn-success btn-sm\\\" id=\\\"clear-link-server-confirm\\\">Yes, clear</button>\\n                <button class=\\\"btn btn-danger btn-sm\\\" id=\\\"clear-link-server-cancel\\\">Cancel</button>\\n              </p>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"panel-heading\\\"> Library Link Server </div>\\n\\n<div class=\\\"panel-body\\\">\\n  <div class=\\\"container-fluid link-server-container\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"openURLError\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":4},\"end\":{\"line\":9,\"column\":11}}})) != null ? stack1 : \"\")\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"loading\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0, blockParams, depths),\"inverse\":container.program(5, data, 0, blockParams, depths),\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":4},\"end\":{\"line\":123,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"  </div>\\n\\n\\n\\n\\n<!--\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"loading\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(21, data, 0, blockParams, depths),\"inverse\":container.program(23, data, 0, blockParams, depths),\"data\":data,\"loc\":{\"start\":{\"line\":131,\"column\":2},\"end\":{\"line\":219,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"</div> -->\\n\";\n},\"useData\":true,\"useDepths\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/preferences/templates/openurl.html?");

/***/ }),

/***/ "./src/js/widgets/preferences/templates/orcid-form-submit-modal.html":
/*!***************************************************************************!*\
  !*** ./src/js/widgets/preferences/templates/orcid-form-submit-modal.html ***!
  \***************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<p>You can always resubmit the form if your information changes.</p>\\n\\n<p><a href=\\\"#user/orcid\\\" class=\\\"btn btn-default\\\">Go to my ORCID profile page in ADS</a></p>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/preferences/templates/orcid-form-submit-modal.html?");

/***/ }),

/***/ "./src/js/widgets/preferences/templates/orcid-name-row-template.html":
/*!***************************************************************************!*\
  !*** ./src/js/widgets/preferences/templates/orcid-name-row-template.html ***!
  \***************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"orcid-name-row\\\">\\n  <input\\n    class=\\\"form-control input-list__input\\\"\\n    type=\\\"text\\\"\\n    placeholder=\\\"Last, First Middle\\\"\\n  />\\n  <button\\n    class=\\\"btn btn-danger btn-inverse remove-name\\\"\\n    title=\\\"remove this name\\\"\\n  >\\n    <i class=\\\"fa fa-minus-circle\\\" aria-hidden=\\\"true\\\"></i>\\n  </button>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/preferences/templates/orcid-name-row-template.html?");

/***/ }),

/***/ "./src/js/widgets/preferences/templates/orcid.html":
/*!*********************************************************!*\
  !*** ./src/js/widgets/preferences/templates/orcid.html ***!
  \*********************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"    <div class=\\\"panel-heading\\\">ORCID SETTINGS</div>\\n<div class=\\\"panel-body\\\"> <p><i class=\\\"icon-loading\\\" aria-hidden=\\\"true\\\"></i> Loading...</p></div>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n    <div class=\\\"panel-heading\\\">\\n\\n        ORCID Settings\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"orcidLoggedIn\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":8},\"end\":{\"line\":16,\"column\":15}}})) != null ? stack1 : \"\")\n    + \"\\n    </div>\\n    <div class=\\\"panel-body\\\">\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"orcidLoggedIn\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(6, data, 0),\"inverse\":container.program(17, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":8},\"end\":{\"line\":96,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"    </div>\\n\\n\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        <h4>You are signed in to ORCID as <b>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"prettyOrcidName\") || (depth0 != null ? lookupProperty(depth0,\"prettyOrcidName\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"prettyOrcidName\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":45},\"end\":{\"line\":11,\"column\":64}}}) : helper)))\n    + \"</b></h4>\\n\\n        <p> Not you?\\n            <button class=\\\"btn btn-sm btn-default orcid-authenticate\\\">Sign into ORCID as a different user</button>\\n        </p>\\n\";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n        <div class=\\\"form-group\\\">\\n            <h4>1. Your Current Academic Affiliation</h4>\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"aff-input\\\" class=\\\"sr-only\\\">your current academic affiliation</label>\\n                <input type=\\\"text\\\"\\n                       \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"userSubmitted\") : depth0)) != null ? lookupProperty(stack1,\"currentAffiliation\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":28,\"column\":23},\"end\":{\"line\":28,\"column\":116}}})) != null ? stack1 : \"\")\n    + \"\\n                id=\\\"aff-input\\\"\\n                class=\\\"form-control\\\"\\n                placeholder=\\\"e.g. Wesleyan University\\\"\\n                style=\\\"width:300px\\\">\\n            </div>\\n        </div>\\n\\n        <br>\\n        <h4 id=\\\"name-variant-header\\\">2. Names Under Which You Have Published</h4>\\n        <p class=\\\"emphasis-text\\\">\\n            If you have published under a different surname, for example,\\n            or using a middle name, please add those name variations here.\\n        </p>\\n\\n        <div class=\\\"form-group well orcid-name-container clearfix\\\" aria-labelledby=\\\"#name-variant-header\\\">\\n\\n            <div class=\\\"input-list\\\">\\n                <div class=\\\"original-orcid-name\\\">\\n                    <!--this isnt editable-->\\n                    <label for=\\\"original-orcid-name\\\">ORCID name</label>\\n                    <input class=\\\"form-control input-list__input\\\"\\n                           type=\\\"text\\\"\\n                           id=\\\"original-orcid-name\\\"\\n                           value=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"orcidName\") || (depth0 != null ? lookupProperty(depth0,\"orcidName\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(alias1,{\"name\":\"orcidName\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":52,\"column\":34},\"end\":{\"line\":52,\"column\":47}}}) : helper)))\n    + \"\\\" disabled>\\n                </div>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"userSubmitted\") : depth0)) != null ? lookupProperty(stack1,\"nameVariations\") : stack1),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":54,\"column\":16},\"end\":{\"line\":59,\"column\":25}}})) != null ? stack1 : \"\")\n    + \"                <button class=\\\"btn btn-primary-faded pull-right add-another-orcid-name\\\"><i class=\\\"fa fa-plus\\\" aria-hidden=\\\"true\\\"> </i> add a name</button>\\n\\n                <div class=\\\"warning \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"userSubmitted\") : depth0)) != null ? lookupProperty(stack1,\"authorizedUser\") : stack1),false,{\"name\":\"compare\",\"hash\":{\"operator\":\"!==\"},\"fn\":container.program(11, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":62,\"column\":36},\"end\":{\"line\":62,\"column\":118}}})) != null ? stack1 : \"\")\n    + \"\\\" style=\\\"clear:both;padding-top:15px\\\" >\\n                <i class=\\\"fa fa-lg fa-warning\\\" aria-hidden=\\\"true\\\"></i>\\n                To become an ADS-verified user and have the above name data used to enrich your ORCID matches in ADS, you must check the box below.\\n            </div>\\n        </div>\\n    </div>\\n    <br>\\n    <div class=\\\"form-group\\\">\\n        <h4> 3. Permission for ADS to Record and Publish Claims</h4>\\n\\n        <!-- <div class=\\\"checkbox\\\"> -->\\n            <div class=\\\"emphasis-text\\\">\\n                <label class=\\\"custom-checkbox\\\">\\n                    <input type=\\\"checkbox\\\"\\n                        \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"userSubmitted\") : depth0)) != null ? lookupProperty(stack1,\"authorizedUser\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(13, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":76,\"column\":24},\"end\":{\"line\":76,\"column\":76}}})) != null ? stack1 : \"\")\n    + \"\\n                    \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"userSubmitted\") : depth0)) != null ? lookupProperty(stack1,\"authorizedUser\") : stack1),undefined,{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(15, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":77,\"column\":20},\"end\":{\"line\":77,\"column\":93}}})) != null ? stack1 : \"\")\n    + \"\\n                    class=\\\"authorized-ads-user\\\" />\\n                </label>\\n                I allow the ADS to record my claims and to make them available publically for auditing and indexing.\\n                <br>This makes me an \\\"ADS Verified User\\\" and allows ADS to validate my name(s) against author lists in papers.\\n            </div>\\n        <!-- </div> -->\\n\\n    </div>\\n\\n    <br>\\n\\n    <button class=\\\"submit btn btn-success\\\">submit</button>\\n\\n\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" value=\\\"\"\n    + container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? lookupProperty(depth0,\"userSubmitted\") : depth0)) != null ? lookupProperty(stack1,\"currentAffiliation\") : stack1), depth0))\n    + \"\\\" \";\n},\"9\":function(container,depth0,helpers,partials,data) {\n    return \"                <div class=\\\"orcid-name-row\\\">\\n                    <input class=\\\"form-control input-list__input\\\" type=\\\"text\\\" placeholder=\\\"Last, First Middle\\\"  value=\\\"\"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + \"\\\">\\n                    <button class=\\\"btn btn-danger btn-inverse remove-name\\\" title=\\\"remove this name\\\"><i class=\\\"fa fa-minus-circle\\\" aria-hidden=\\\"true\\\"></i></button>\\n                </div>\\n\";\n},\"11\":function(container,depth0,helpers,partials,data) {\n    return \" hidden \";\n},\"13\":function(container,depth0,helpers,partials,data) {\n    return \" checked \";\n},\"15\":function(container,depth0,helpers,partials,data) {\n    return \" checked  \";\n},\"17\":function(container,depth0,helpers,partials,data) {\n    return \"    <br>\\n    <button class=\\\"btn btn-primary orcid-authenticate\\\">Authenticate with ORCID to view ADS ORCID Settings\\n    </button>\\n\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"loading\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":0},\"end\":{\"line\":100,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/preferences/templates/orcid.html?");

/***/ }),

/***/ "./src/js/widgets/preferences/views/application.js":
/*!*********************************************************!*\
  !*** ./src/js/widgets/preferences/views/application.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var hbs_js_widgets_preferences_templates_application__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hbs!js/widgets/preferences/templates/application */ \"./src/js/widgets/preferences/templates/application.html\");\n/* harmony import */ var hbs_js_widgets_preferences_templates_application__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_preferences_templates_application__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var js_widgets_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/widgets/config */ \"./src/js/widgets/config.js\");\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n\n\n\n\nvar DEFAULTS = {\n  numAuthors: {\n    initialOptions: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].range(1, 11).concat(['all']),\n    initialValue: 4\n  },\n  externalLinks: {\n    initialOptions: ['Auto', 'Open new tab', 'Open in current tab'],\n    initialValue: 'Auto'\n  },\n  homePage: {\n    initialOptions: ['Modern Form', 'Classic Form', 'Paper Form'],\n    initialValue: 'Modern Form'\n  },\n  database: {\n    'All': false,\n    'Physics': false,\n    'Astronomy': false,\n    'General': false,\n    'Earth Science': false\n  },\n  hideSidebars: {\n    initialValue: 'Show',\n    initialOptions: ['Show', 'Hide']\n  }\n};\n\nvar isEqualToDefault = function isEqualToDefault(prop, value) {\n  if (prop === 'numAuthorsSelected') {\n    return value === DEFAULTS.numAuthors.initialValue;\n  }\n\n  if (prop === 'externalLinksSelected') {\n    return value === DEFAULTS.externalLinks.initialValue;\n  }\n\n  if (prop === 'homePageSelected') {\n    return value === DEFAULTS.homePage.initialValue;\n  }\n\n  if (prop === 'hideSideBarsSelected') {\n    return value === DEFAULTS.hideSidebars.initialValue;\n  }\n\n  if (prop === 'databaseSelected') {\n    return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEqual(value, DEFAULTS.database.initialValue);\n  }\n\n  return false;\n};\n/**\n * Incoming database isa an array of objects, we need to transform and merge it to our internal format\n * @param databases\n * @returns {*|*[]}\n */\n\n\nvar mergeDatabases = function mergeDatabases(databases) {\n  if (!Array.isArray(databases) || Array.isArray(databases) && databases.length === 0) {\n    return DEFAULTS.database;\n  } // remove any undefined values\n\n\n  var cleanedDbs = databases.filter(function (d) {\n    return !!d;\n  });\n  var merged = {};\n  Object.keys(DEFAULTS.database).forEach(function (name) {\n    var found = cleanedDbs.find(function (d) {\n      return d.name === name;\n    });\n    merged[name] = found ? !!found.value : DEFAULTS.database[name];\n  });\n  return merged;\n};\n/**\n * Transform the internal database format to the external format\n * @param databases\n */\n\n\nvar transformDatabases = function transformDatabases(databases) {\n  return Object.keys(databases).map(function (name) {\n    return {\n      name: name,\n      value: databases[name]\n    };\n  });\n};\n\nvar watchedProps = ['numAuthorsSelected', 'externalLinksSelected', 'databaseSelected', 'homePageSelected', 'hideSideBarsSelected'];\nvar ApplicationView = marionette__WEBPACK_IMPORTED_MODULE_1___default().ItemView.extend({\n  initialize: function initialize() {\n    // Get the latest value from the incoming model, or just take the default\n    var numAuthors = this.model.get('minAuthorsPerResult') || DEFAULTS.numAuthors.initialValue;\n    var externalLinks = this.model.get('externalLinkAction') || DEFAULTS.externalLinks.initialValue;\n    var homePage = this.model.get('homePage') || DEFAULTS.homePage.initialValue;\n    var hideSidebars = this.model.get('defaultHideSidebars') || DEFAULTS.hideSidebars.initialValue;\n    var databases = mergeDatabases(this.model.get('defaultDatabase')); // must clone the props that will get mutated\n\n    this.model.set({\n      numAuthorsOptions: DEFAULTS.numAuthors.initialOptions,\n      numAuthorsDefault: DEFAULTS.numAuthors.initialValue,\n      numAuthorsSelected: this._convertToNumber(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(numAuthors)),\n      externalLinksOptions: DEFAULTS.externalLinks.initialOptions,\n      externalLinksDefault: DEFAULTS.externalLinks.initialValue,\n      externalLinksSelected: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(externalLinks),\n      // remove the 'All' database from the list, so it doesn't get rendered as a button\n      databaseSelected: databases,\n      databaseOptions: Object.keys(databases).filter(function (name) {\n        return name !== 'All';\n      }),\n      homePageOptions: DEFAULTS.homePage.initialOptions,\n      homePageDefault: DEFAULTS.homePage.initialValue,\n      homePageSelected: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(homePage),\n      hideSideBarsDefault: DEFAULTS.hideSidebars.initialValue,\n      hideSideBarsOptions: DEFAULTS.hideSidebars.initialOptions,\n      hideSideBarsSelected: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(hideSidebars),\n      modifySections: _toConsumableArray(Object.keys(databases).some(function (name) {\n        return databases[name];\n      }) ? ['database'] : [])\n    });\n    this.model.trigger('change');\n    this.render = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debounce(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.render), 60);\n  },\n  template: (hbs_js_widgets_preferences_templates_application__WEBPACK_IMPORTED_MODULE_2___default()),\n  className: 'panel panel-default s-form-container',\n  events: {\n    'click .database-select': 'onDatabaseSelect',\n    'change #database_all': 'onDatabaseALLSelect',\n    'change select': 'syncModel',\n    'click .section-modify': 'onModifySection',\n    'click .section-reset': 'onResetSection',\n    'click .reset-to-defaults': 'onResetToDefaults'\n  },\n  modelEvents: {\n    change: 'render'\n  },\n  onDatabaseALLSelect: function onDatabaseALLSelect(e) {\n    var checked = $(e.currentTarget).prop('checked');\n    this.model.set('databaseSelected', _objectSpread({}, DEFAULTS.database, {\n      All: checked\n    }));\n    this.model.trigger('change');\n  },\n  onDatabaseSelect: function onDatabaseSelect(e) {\n    var dbState = this.model.get('databaseSelected'); // if 'ALL' selected, then the other options are disabled\n\n    if (dbState.All) {\n      return;\n    }\n\n    var id = $(e.currentTarget).data('id');\n    this.model.set('databaseSelected', _objectSpread({}, dbState, _defineProperty({}, id, !dbState[id])));\n    this.model.trigger('change');\n  },\n  onModifySection: function onModifySection(e) {\n    var section = $(e.currentTarget).data('section');\n    this.model.set('modifySections', [].concat(_toConsumableArray(this.model.get('modifySections')), [section]));\n  },\n  onResetSection: function onResetSection(e) {\n    var section = $(e.currentTarget).data('section');\n    this.model.set(_objectSpread({\n      modifySections: this.model.get('modifySections').filter(function (s) {\n        return s !== section;\n      })\n    }, section === 'database' ? {\n      databaseSelected: DEFAULTS.database\n    } : {}));\n    this.model.trigger('change');\n  },\n  _convertToNumber: function _convertToNumber(val) {\n    try {\n      return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isNaN(Number(val)) ? val : Number(val);\n    } catch (e) {\n      return val;\n    }\n  },\n  _convertToString: function _convertToString(val) {\n    try {\n      return String(val) !== '[object Object]' ? String(val) : val;\n    } catch (e) {\n      return val;\n    }\n  },\n  syncModel: function syncModel() {\n    var update = {};\n    var convert = this._convertToNumber;\n    $('.form-control', this.el).each(function () {\n      var $el = $(this);\n      var val = $el.val();\n\n      if (!$el.data('noConvert')) {\n        val = convert(val);\n      }\n\n      update[$el.attr('id') + 'Selected'] = val;\n    });\n    this.model.set(update);\n  },\n  onSubmit: function onSubmit() {\n    this.model.set({\n      updateSucceeded: false,\n      updateFailed: false,\n      loading: true\n    });\n    this.syncModel();\n    this.trigger('change:applicationSettings', {\n      minAuthorsPerResult: this._convertToString(this.model.get('numAuthorsSelected')),\n      externalLinkAction: this.model.get('externalLinksSelected'),\n      defaultDatabase: transformDatabases(this.model.get('databaseSelected')),\n      defaultHideSidebars: this.model.get('hideSideBarsSelected'),\n      homePage: this.model.get('homePageSelected')\n    });\n    return false;\n  },\n  onCancel: function onCancel(e) {\n    this.initialize();\n    return false;\n  },\n  onResetToDefaults: function onResetToDefaults() {\n    // clear the model\n    this.model.set({\n      minAuthorsPerResult: undefined,\n      externalLinkAction: undefined,\n      defaultDatabase: undefined,\n      defaultHideSidebars: undefined\n    }, {\n      unset: true\n    });\n    this.onCancel.apply(this, arguments);\n  },\n  onError: function onError() {\n    var _this = this;\n\n    var model = this.model;\n    model.set({\n      updateFailed: true,\n      loading: false\n    });\n    setTimeout(function () {\n      model.set('updateFailed', false, {\n        silent: true\n      });\n\n      _this.hideMessage();\n    }, 5000);\n  },\n  onSuccess: function onSuccess() {\n    var _this2 = this;\n\n    var model = this.model;\n    model.set({\n      updateSucceeded: true,\n      loading: false\n    });\n    setTimeout(function () {\n      model.set('updateSucceeded', false, {\n        silent: true\n      });\n\n      _this2.hideMessage();\n    }, 3000);\n  },\n  hideMessage: function hideMessage() {\n    $('#app-settings-msg').fadeOut(500, function () {\n      $(this).empty();\n    });\n  },\n  onSortChange: function onSortChange(e, ui) {\n    var items = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(this.model.get('addCustomFormatOptions'));\n\n    var index = this.$('#addCustomFormat .list-group-item').index(ui.item);\n    var id = this.$(ui.item).data('id');\n\n    var fIndex = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findIndex(items, {\n      id: id\n    }); // swap\n\n\n    if (index !== fIndex) {\n      items.splice(index, 0, items.splice(fIndex, 1)[0]);\n    }\n\n    this.model.set('addCustomFormatOptions', items);\n  },\n  isEditing: function isEditing() {\n    return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].any(this.model.get('addCustomFormatOptions'), {\n      editing: true\n    });\n  },\n  _renderCount: 1,\n  onRender: function onRender() {\n    var _this3 = this;\n\n    // skip initial x renders, because when we first get data it'll render and detect a change\n    if (this._renderCount > 0) {\n      this._renderCount -= 1;\n      return;\n    }\n\n    var onSortChange = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.onSortChange, this);\n\n    setTimeout(function () {\n      $('#addCustomFormat').sortable({\n        axis: 'y',\n        items: '.list-group-item',\n        update: onSortChange,\n        scroll: true,\n        scrollSensitivity: 80,\n        scrollSpeed: 3\n      });\n    }, 100); // check if any of the watched props matched the ones changed\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(watchedProps, function (p) {\n      if (_this3.model.changed[p]) {\n        // check if the prop is custom format\n        if (p === 'addCustomFormatOptions') {\n          var isEditing = _this3.isEditing(); // we don't want to submit if we're editing a custom format, just continue\n\n\n          if (isEditing) {\n            return true;\n          }\n        } // execute submit\n\n\n        _this3.onSubmit();\n\n        return false;\n      }\n    });\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (ApplicationView);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/preferences/views/application.js?");

/***/ }),

/***/ "./src/js/widgets/preferences/views/export.js":
/*!****************************************************!*\
  !*** ./src/js/widgets/preferences/views/export.js ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var hbs_js_widgets_preferences_templates_export__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hbs!js/widgets/preferences/templates/export */ \"./src/js/widgets/preferences/templates/export.html\");\n/* harmony import */ var hbs_js_widgets_preferences_templates_export__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_preferences_templates_export__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var js_widgets_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/widgets/config */ \"./src/js/widgets/config.js\");\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n\n\n\n\nvar DEFAULTS = {\n  exportFormat: {\n    initialOptions: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(js_widgets_config__WEBPACK_IMPORTED_MODULE_3__[\"default\"].export.formats, 'label'),\n    initialValue: 'BibTeX'\n  },\n  addCustomFormatOptions: [],\n  bibtexMaxAuthors: {\n    initialValue: 10,\n    initialOptions: [].concat(_toConsumableArray(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].range(1, 10, 1)), _toConsumableArray(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].range(10, 110, 10, true)), ['all'])\n  },\n  bibtexKeyFormat: {\n    initialValue: ''\n  },\n  bibtexJournalFormat: {\n    initialValue: 'Use AASTeX macros',\n    initialOptions: ['Use AASTeX macros', 'Use Journal Abbreviations', 'Use Full Journal Name']\n  },\n  bibtexABSMaxAuthors: {\n    initialValue: 10,\n    initialOptions: [].concat(_toConsumableArray(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].range(1, 10, 1)), _toConsumableArray(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].range(10, 110, 10, true)), ['all'])\n  },\n  bibtexABSKeyFormat: {\n    initialValue: ''\n  },\n  bibtexAuthorCutoff: {\n    initialValue: 200,\n    initialOptions: [].concat(_toConsumableArray(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].range(1, 11, 1)), _toConsumableArray(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].range(100, 600, 100)))\n  },\n  bibtexABSAuthorCutoff: {\n    initialValue: 200,\n    initialOptions: [].concat(_toConsumableArray(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].range(1, 11, 1)), _toConsumableArray(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].range(100, 600, 100)))\n  }\n};\nvar watchedProps = ['exportFormatSelected', 'addCustomFormatOptions', 'bibtexMaxAuthorsSelected', 'bibtexKeyFormatSelected', 'bibtexJournalFormatSelected', 'bibtexABSMaxAuthorsSelected', 'bibtexABSKeyFormatSelected', 'bibtexAuthorCutoffSelected', 'bibtexABSAuthorCutoffSelected'];\nvar ExportView = marionette__WEBPACK_IMPORTED_MODULE_1___default().ItemView.extend({\n  initialize: function initialize() {\n    // Get the latest value from the incoming model, or just take the default\n    var exportFormat = this.model.get('defaultExportFormat') || DEFAULTS.exportFormat.initialValue;\n    var addCustomFormatOptions = this.model.get('customFormats') || DEFAULTS.addCustomFormatOptions;\n    var bibtexKeyFormat = this.model.get('bibtexKeyFormat') || DEFAULTS.bibtexKeyFormat.initialValue;\n    var bibtexJournalFormat = this.model.get('bibtexJournalFormat') || DEFAULTS.bibtexJournalFormat.initialValue;\n    var bibtexMaxAuthors = this.model.get('bibtexMaxAuthors') || DEFAULTS.bibtexMaxAuthors.initialValue;\n    var bibtexABSKeyFormat = this.model.get('bibtexABSKeyFormat') || DEFAULTS.bibtexABSKeyFormat.initialValue;\n    var bibtexABSMaxAuthors = this.model.get('bibtexABSMaxAuthors') || DEFAULTS.bibtexABSMaxAuthors.initialValue;\n    var bibtexAuthorCutoff = this.model.get('bibtexAuthorCutoff') || DEFAULTS.bibtexAuthorCutoff.initialValue;\n    var bibtexABSAuthorCutoff = this.model.get('bibtexABSAuthorCutoff') || DEFAULTS.bibtexABSAuthorCutoff.initialValue; // must clone the props that will get mutated\n\n    this.model.set({\n      exportFormatOptions: DEFAULTS.exportFormat.initialOptions,\n      exportFormatDefault: DEFAULTS.exportFormat.initialValue,\n      exportFormatSelected: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(exportFormat),\n      addCustomFormatOptions: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(addCustomFormatOptions),\n      bibtexKeyFormatDefault: DEFAULTS.bibtexKeyFormat.initialValue,\n      bibtexKeyFormatSelected: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(bibtexKeyFormat),\n      bibtexJournalFormatDefault: DEFAULTS.bibtexJournalFormat.initialValue,\n      bibtexJournalFormatOptions: DEFAULTS.bibtexJournalFormat.initialOptions,\n      bibtexJournalFormatSelected: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(bibtexJournalFormat),\n      bibtexMaxAuthorsDefault: DEFAULTS.bibtexMaxAuthors.initialValue,\n      bibtexMaxAuthorsOptions: DEFAULTS.bibtexMaxAuthors.initialOptions,\n      bibtexMaxAuthorsSelected: this._convertToNumber(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(bibtexMaxAuthors)),\n      bibtexABSKeyFormatDefault: DEFAULTS.bibtexABSKeyFormat.initialValue,\n      bibtexABSKeyFormatSelected: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(bibtexABSKeyFormat),\n      bibtexABSMaxAuthorsDefault: DEFAULTS.bibtexABSMaxAuthors.initialValue,\n      bibtexABSMaxAuthorsOptions: DEFAULTS.bibtexABSMaxAuthors.initialOptions,\n      bibtexABSMaxAuthorsSelected: this._convertToNumber(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(bibtexABSMaxAuthors)),\n      bibtexAuthorCutoffDefault: DEFAULTS.bibtexAuthorCutoff.initialValue,\n      bibtexAuthorCutoffOptions: DEFAULTS.bibtexAuthorCutoff.initialOptions,\n      bibtexAuthorCutoffSelected: this._convertToNumber(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(bibtexAuthorCutoff)),\n      bibtexABSAuthorCutoffDefault: DEFAULTS.bibtexABSAuthorCutoff.initialValue,\n      bibtexABSAuthorCutoffOptions: DEFAULTS.bibtexABSAuthorCutoff.initialOptions,\n      bibtexABSAuthorCutoffSelected: this._convertToNumber(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(bibtexABSAuthorCutoff))\n    });\n    this.model.trigger('change');\n    this.render = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debounce(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.render), 280);\n  },\n  template: (hbs_js_widgets_preferences_templates_export__WEBPACK_IMPORTED_MODULE_2___default()),\n  className: 'panel panel-default s-form-container',\n  events: {\n    'click #addCustomFormatAdd': 'onAddCustomFormat',\n    // Custom format editor events\n    'click .addCustomFormatEdit': 'onEditCustomFormat',\n    'click .addCustomFormatConfirmEdit': 'onConfirmEditCustomFormat',\n    'click .addCustomFormatCancelEdit': 'onCancelEditCustomFormat',\n    // custom format deleting events\n    'click .addCustomFormatDelete': 'onDeleteCustomFormat',\n    'change #bibtexKeyFormat': 'onChangeBibtexKeyFormat',\n    'change #bibtexABSKeyFormat': 'onChangeBibtexABSKeyFormat',\n    'change select': 'syncModel'\n  },\n  modelEvents: {\n    change: 'render'\n  },\n  _convertToNumber: function _convertToNumber(val) {\n    try {\n      return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isNaN(Number(val)) ? val : Number(val);\n    } catch (e) {\n      return val;\n    }\n  },\n  _convertToString: function _convertToString(val) {\n    try {\n      return String(val) !== '[object Object]' ? String(val) : val;\n    } catch (e) {\n      return val;\n    }\n  },\n  syncModel: function syncModel() {\n    var update = {};\n    var convert = this._convertToNumber;\n    $('.form-control', this.el).each(function () {\n      var $el = $(this);\n      var val = $el.val();\n\n      if (!$el.data('noConvert')) {\n        val = convert(val);\n      }\n\n      update[$el.attr('id') + 'Selected'] = val;\n    });\n    this.model.set(update);\n  },\n  onSubmit: function onSubmit() {\n    this.model.set({\n      updateSucceeded: false,\n      updateFailed: false,\n      loading: true\n    });\n    this.syncModel();\n    this.trigger('change:exportSettings', {\n      defaultExportFormat: this.model.get('exportFormatSelected'),\n      customFormats: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(this.model.get('addCustomFormatOptions'), function (i) {\n        return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pick(i, ['id', 'name', 'code']);\n      }),\n      bibtexMaxAuthors: this._convertToString(this.model.get('bibtexMaxAuthorsSelected') === 'all' ? 0 : this.model.get('bibtexMaxAuthorsSelected')),\n      bibtexKeyFormat: this.model.get('bibtexKeyFormatSelected'),\n      bibtexJournalFormat: this.model.get('bibtexJournalFormatSelected'),\n      bibtexABSMaxAuthors: this._convertToString(this.model.get('bibtexABSMaxAuthorsSelected') === 'all' ? 0 : this.model.get('bibtexABSMaxAuthorsSelected')),\n      bibtexABSKeyFormat: this.model.get('bibtexABSKeyFormatSelected'),\n      bibtexAuthorCutoff: this._convertToString(this.model.get('bibtexAuthorCutoffSelected')),\n      bibtexABSAuthorCutoff: this._convertToString(this.model.get('bibtexABSAuthorCutoffSelected'))\n    });\n    return false;\n  },\n  onCancel: function onCancel(e) {\n    this.initialize();\n    return false;\n  },\n  onChangeBibtexKeyFormat: function onChangeBibtexKeyFormat() {\n    this.onSubmit();\n  },\n  onChangeBibtexABSKeyFormat: function onChangeBibtexABSKeyFormat() {\n    this.onSubmit();\n  },\n  onResetToDefaults: function onResetToDefaults() {\n    // clear the model\n    this.model.set({\n      defaultExportFormat: undefined\n    }, {\n      unset: true\n    });\n    this.onCancel.apply(this, arguments);\n  },\n  onError: function onError() {\n    var _this = this;\n\n    var model = this.model;\n    model.set({\n      updateFailed: true,\n      loading: false\n    });\n    setTimeout(function () {\n      model.set('updateFailed', false, {\n        silent: true\n      });\n\n      _this.hideMessage();\n    }, 5000);\n  },\n  onSuccess: function onSuccess() {\n    var _this2 = this;\n\n    var model = this.model;\n    model.set({\n      updateSucceeded: true,\n      loading: false\n    });\n    setTimeout(function () {\n      model.set('updateSucceeded', false, {\n        silent: true\n      });\n\n      _this2.hideMessage();\n    }, 3000);\n  },\n  hideMessage: function hideMessage() {\n    $('#app-settings-msg').fadeOut(500, function () {\n      $(this).empty();\n    });\n  },\n  onAddCustomFormat: function onAddCustomFormat(e) {\n    var items = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(this.model.get('addCustomFormatOptions'));\n\n    var applyEditById = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.applyEditById, this);\n\n    items = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].map(items, function (i, idx) {\n      return i.editing ? applyEditById(i.id, true)[idx] : i;\n    });\n\n    var id = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].uniqueId('format-');\n\n    items.unshift({\n      id: id,\n      name: '',\n      code: '',\n      editing: true\n    });\n    this.model.set('addCustomFormatOptions', items);\n    var $name = $('#custom-format-name-' + id);\n    $name.focus().select();\n    var $msg = this.$('#new-format-msg');\n    $msg.fadeIn('slow', function () {\n      $msg.fadeOut('slow');\n    });\n    return false;\n  },\n  updateCustomFormatEntry: function updateCustomFormatEntry(_id, data, silent) {\n    var items = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(this.model.get('addCustomFormatOptions'));\n\n    var id = _id + '';\n\n    var idx = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findIndex(items, {\n      id: id\n    });\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isPlainObject(data)) {\n      items[idx] = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, items[idx], data);\n    }\n\n    if (!silent) {\n      this.model.set('addCustomFormatOptions', items);\n      this.model.trigger('change', {\n        addCustomFormatOptions: items\n      });\n    }\n\n    return items;\n  },\n  onEditCustomFormat: function onEditCustomFormat(e) {\n    // do not allow editing multiple items at once\n    if (this.isEditing()) {\n      return false;\n    }\n\n    var id = this.$(e.currentTarget).data('id'); // update the page\n\n    this.updateCustomFormatEntry(id, {\n      editing: true\n    }); // apply some listeners\n\n    var $name = $('#custom-format-name-' + id);\n    $name.focus().select();\n    return false;\n  },\n  applyEditById: function applyEditById(id, silent) {\n    var name = this.$('#custom-format-name-' + id).val();\n    var code = this.$('#custom-format-code-' + id).val(); // don't apply the edit if either input is empty\n\n    if (name === '' || code === '') {\n      return;\n    }\n\n    this._forceUpdate = true;\n    return this.updateCustomFormatEntry(id, {\n      editing: false,\n      name: name,\n      code: code\n    }, silent);\n  },\n  onConfirmEditCustomFormat: function onConfirmEditCustomFormat(e) {\n    var id = this.$(e.currentTarget).data('id');\n    this.applyEditById(id);\n    return false;\n  },\n  onCancelEditCustomFormat: function onCancelEditCustomFormat(e) {\n    var id = this.$(e.currentTarget).data('id');\n    this.updateCustomFormatEntry(id, {\n      editing: false\n    });\n    return false;\n  },\n  onDeleteCustomFormat: function onDeleteCustomFormat(e) {\n    // do not allow deletion if editing\n    if (this.isEditing()) {\n      return false;\n    }\n\n    if (!confirm('Are you sure?')) {\n      return false;\n    }\n\n    var model = this.model;\n    var id = this.$(e.currentTarget).data('id') + '';\n\n    var items = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(model.get('addCustomFormatOptions'));\n\n    var newList = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].reject(items, {\n      id: id\n    });\n\n    this.$(e.currentTarget).closest('li').fadeOut(400, function () {\n      model.set('addCustomFormatOptions', newList);\n    });\n    return false;\n  },\n  onSortChange: function onSortChange(e, ui) {\n    var items = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clone(this.model.get('addCustomFormatOptions'));\n\n    var index = this.$('#addCustomFormat .list-group-item').index(ui.item);\n    var id = this.$(ui.item).data('id');\n\n    var fIndex = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findIndex(items, {\n      id: id\n    }); // swap\n\n\n    if (index !== fIndex) {\n      items.splice(index, 0, items.splice(fIndex, 1)[0]);\n    }\n\n    this.model.set('addCustomFormatOptions', items);\n  },\n  isEditing: function isEditing() {\n    return underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].any(this.model.get('addCustomFormatOptions'), {\n      editing: true\n    });\n  },\n  onRender: function onRender() {\n    var _this3 = this;\n\n    var onSortChange = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.onSortChange, this);\n\n    setTimeout(function () {\n      $('#addCustomFormat').sortable({\n        axis: 'y',\n        items: '.list-group-item',\n        update: onSortChange,\n        scroll: true,\n        scrollSensitivity: 80,\n        scrollSpeed: 3\n      });\n    }, 100); // check if any of the watched props matched the ones changed\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(watchedProps, function (p) {\n      if (_this3.model.changed[p]) {\n        // check if the prop is custom format\n        if (p === 'addCustomFormatOptions') {\n          var isEditing = _this3.isEditing(); // we don't want to submit if we're editing a custom format, just continue\n\n\n          if (isEditing) {\n            return true;\n          }\n        } // execute submit\n\n\n        _this3.onSubmit();\n\n        return false;\n      }\n    });\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (ExportView);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/preferences/views/export.js?");

/***/ }),

/***/ "./src/js/widgets/preferences/views/openurl.js":
/*!*****************************************************!*\
  !*** ./src/js/widgets/preferences/views/openurl.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var hbs_js_widgets_preferences_templates_openurl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! hbs!js/widgets/preferences/templates/openurl */ \"./src/js/widgets/preferences/templates/openurl.html\");\n/* harmony import */ var hbs_js_widgets_preferences_templates_openurl__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_preferences_templates_openurl__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bootstrap */ \"./src/libs/bootstrap/bootstrap.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var select2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! select2 */ \"./node_modules/select2/dist/js/select2.js\");\n/* harmony import */ var select2__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(select2__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nvar OpenURLView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  template: (hbs_js_widgets_preferences_templates_openurl__WEBPACK_IMPORTED_MODULE_1___default()),\n  className: 'panel panel-default s-form-container',\n  onRender: function onRender() {\n    this.$('select[name=set-link-server]').select2();\n  },\n  serializeData: function serializeData() {\n    var data = this.model.toJSON();\n\n    if (data.openURLError) {\n      data.loading = false;\n      return data;\n    } // if this is true, there was an issue getting it from the server\n\n\n    if (_.isEmpty(data.openURLConfig) || _.isEmpty(data.user)) {\n      data.loading = true;\n      return data;\n    }\n\n    if (_.isEmpty(data.openURLName)) {\n      data.openURLName = 'None';\n      this.editing = true;\n    } // in weird/buggy cases, the previously selected open url might not exist in our openURLCOnfig data\n    // available now. So just act like there is no openURLName, which will prompt the user to select a new\n    // openURL\n\n\n    var current = _.find(data.openURLConfig, {\n      link: data.link_server\n    });\n\n    data.openURLName = current ? current.name : false;\n    return data;\n  },\n  modelEvents: {\n    'change:link_server': 'render',\n    'change:user': 'render',\n    'change:openURLConfig': 'render',\n    'change:editing': 'render',\n    'change:confirming': 'render',\n    'change:loading': 'render',\n    'change:openURLError': 'render'\n  },\n  events: {\n    'click #link-server-apply': 'changeLinkServer',\n    'click #link-server-cancel': 'onCancelLinkServer',\n    'click #change-link-server': 'onChangeClick',\n    'click #clear-link-server': 'onClearClick',\n    'click #clear-link-server-confirm': 'onConfirmClear',\n    'click #clear-link-server-cancel': 'onConfirmCancel'\n  },\n  changeLinkServer: function changeLinkServer(e) {\n    var newVal = this.$('#set-link-server').val(); // check for a re-apply\n\n    if (this.model.has('link_server') && newVal === this.model.get('link_server')) {\n      return this.model.set('editing', false);\n    }\n\n    this.$(e.currentTarget).html('<i class=\"fa fa-spinner fa-pulse\" aria-hidden=\"true\"></i> Loading'); // otherwise, trigger the update\n\n    this.trigger('change:link_server', newVal);\n    this.model.set('editing', false);\n    return false;\n  },\n  onCancelLinkServer: function onCancelLinkServer() {\n    this.model.set({\n      editing: false,\n      confirming: false,\n      showConfirm: false\n    });\n  },\n  onChangeClick: function onChangeClick() {\n    if (this.model.get('editing')) {\n      return this.model.set('editing', false);\n    }\n\n    this.model.set({\n      confirming: false,\n      editing: true\n    });\n  },\n  onClearClick: function onClearClick() {\n    this.model.set({\n      editing: false,\n      confirming: true\n    });\n  },\n  onConfirmCancel: function onConfirmCancel() {\n    this.model.set({\n      editing: false,\n      confirming: false\n    });\n  },\n  onConfirmClear: function onConfirmClear() {\n    this.trigger('change:link_server', '');\n    this.model.set({\n      openURLName: '',\n      editing: false,\n      confirming: false\n    });\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (OpenURLView);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/preferences/views/openurl.js?");

/***/ }),

/***/ "./src/js/widgets/preferences/views/orcid.js":
/*!***************************************************!*\
  !*** ./src/js/widgets/preferences/views/orcid.js ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var hbs_js_widgets_preferences_templates_orcid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! hbs!js/widgets/preferences/templates/orcid */ \"./src/js/widgets/preferences/templates/orcid.html\");\n/* harmony import */ var hbs_js_widgets_preferences_templates_orcid__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_preferences_templates_orcid__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var hbs_js_widgets_preferences_templates_orcid_name_row_template__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hbs!js/widgets/preferences/templates/orcid-name-row-template */ \"./src/js/widgets/preferences/templates/orcid-name-row-template.html\");\n/* harmony import */ var hbs_js_widgets_preferences_templates_orcid_name_row_template__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_preferences_templates_orcid_name_row_template__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nvar OrcidView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  template: (hbs_js_widgets_preferences_templates_orcid__WEBPACK_IMPORTED_MODULE_1___default()),\n  className: 'panel panel-default s-form-container',\n  events: {\n    'click  .submit': 'submitForm',\n    'change .authorized-ads-user': 'toggleWarning',\n    'click .add-another-orcid-name': 'addNameRow',\n    'click .remove-name': 'removeNameRow'\n  },\n  toggleWarning: function toggleWarning(e) {\n    if (this.$('.authorized-ads-user').is(':checked')) {\n      this.$('.orcid-name-container .warning').addClass('hidden');\n    } else {\n      this.$('.orcid-name-container .warning').removeClass('hidden');\n    }\n  },\n  addNameRow: function addNameRow(e) {\n    this.$('.add-another-orcid-name').before(hbs_js_widgets_preferences_templates_orcid_name_row_template__WEBPACK_IMPORTED_MODULE_2___default()());\n  },\n  removeNameRow: function removeNameRow(e) {\n    $(arguments[0].currentTarget).parent().remove();\n  },\n  triggers: {\n    'click .orcid-authenticate': 'orcid-authenticate'\n  },\n  modelEvents: {\n    change: 'render'\n  },\n  submitForm: function submitForm(e) {\n    var data = {};\n    data.currentAffiliation = this.$('#aff-input').val();\n    data.authorizedUser = this.$('.authorized-ads-user').is(':checked');\n    data.nameVariations = this.$('.orcid-name-row').map(function (index) {\n      return $(this).find('input').val();\n    }).get();\n    var loadingString = '<i class=\"fa fa-spinner fa-pulse\" aria-hidden=\"true\"></i> Loading';\n    this.$('.submit').html(loadingString); // loading string will be removed when view is re-rendered\n\n    this.trigger('orcid-form-submit', data);\n    return false;\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (OrcidView);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/preferences/views/orcid.js?");

/***/ }),

/***/ "./src/js/widgets/preferences/widget.js":
/*!**********************************************!*\
  !*** ./src/js/widgets/preferences/widget.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var js_widgets_preferences_views_openurl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/widgets/preferences/views/openurl */ \"./src/js/widgets/preferences/views/openurl.js\");\n/* harmony import */ var js_widgets_preferences_views_orcid__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/widgets/preferences/views/orcid */ \"./src/js/widgets/preferences/views/orcid.js\");\n/* harmony import */ var js_widgets_preferences_views_application__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/widgets/preferences/views/application */ \"./src/js/widgets/preferences/views/application.js\");\n/* harmony import */ var js_widgets_preferences_views_export__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/widgets/preferences/views/export */ \"./src/js/widgets/preferences/views/export.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var hbs_js_widgets_preferences_templates_orcid_form_submit_modal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! hbs!js/widgets/preferences/templates/orcid-form-submit-modal */ \"./src/js/widgets/preferences/templates/orcid-form-submit-modal.html\");\n/* harmony import */ var hbs_js_widgets_preferences_templates_orcid_form_submit_modal__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_preferences_templates_orcid_form_submit_modal__WEBPACK_IMPORTED_MODULE_8__);\n\n\n\n\n\n\n\n\n\nvar PreferencesModel = Backbone.Model.extend({\n  defaults: function defaults() {\n    return {\n      openURLConfig: undefined,\n      orcidLoggedIn: undefined\n    };\n  }\n});\nvar PreferencesView = marionette__WEBPACK_IMPORTED_MODULE_1___default().LayoutView.extend({\n  template: function template() {\n    return '<div class=\"content-container\"></div>';\n  },\n  className: 's-preferences preferences-widget',\n  regions: {\n    content: '.content-container'\n  },\n  setSubView: function setSubView(viewConstructor) {\n    // providing all views with a copy of the model\n    var view = new viewConstructor({\n      model: this.model\n    });\n    this.getRegion('content').show(view); // forward events\n\n    this.listenTo(view, 'all', function () {\n      this.trigger.apply(this, arguments);\n    });\n  }\n});\n/*\n * the rule is that preferences widget provides sub views with its model,\n * and widgets do not touch the model-- instead, they emit form submitted events\n * with a json structure representing the form data\n * */\n\nvar PreferencesWidget = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend({\n  initialize: function initialize(options) {\n    options = options || {};\n    this.model = new PreferencesModel();\n    this.view = new PreferencesView({\n      model: this.model\n    });\n    this.listenTo(this.view, 'all', this.handleViewEvents);\n    js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_2__[\"default\"].prototype.initialize.apply(this, arguments);\n    this.fetchNecessaryData = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debounce(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.fetchNecessaryData, this), 300);\n  },\n  activate: function activate(beehive) {\n    var that = this;\n    this.setBeeHive(beehive);\n\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bindAll(this);\n\n    var pubsub = beehive.getService('PubSub');\n    pubsub.subscribe(pubsub.USER_ANNOUNCEMENT, this.handleUserAnnouncement);\n    pubsub.subscribe(pubsub.ORCID_ANNOUNCEMENT, this.handleOrcidAnnouncement);\n    this.updateFromUser();\n  },\n  updateFromUser: function updateFromUser() {\n    var model = this.model;\n    var user = this.getBeeHive().getObject('User'); // as soon as preferences widget is activated, get the open url config\n\n    user.getOpenURLConfig().done(function (config) {\n      model.set({\n        openURLConfig: config,\n        openURLError: false\n      });\n    }).fail(function () {\n      model.set('openURLError', true);\n    }); // and the user data (which contains user's open url selection)\n\n    model.set(user.getUserData());\n  },\n  // translates what comes from toc widget (e.g. userPreferences__orcid) to view name\n  views: {\n    orcid: js_widgets_preferences_views_orcid__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n    librarylink: js_widgets_preferences_views_openurl__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n    application: js_widgets_preferences_views_application__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n    export: js_widgets_preferences_views_export__WEBPACK_IMPORTED_MODULE_6__[\"default\"]\n  },\n  setSubView: function setSubView(subView) {\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(subView)) {\n      // XXX:figure out why array\n      subView = subView[0];\n    }\n\n    var viewConstructor = this.views[subView];\n\n    if (!viewConstructor) {\n      console.warn(\"don't recognize this subview: \", subView);\n      return;\n    }\n\n    this.view.setSubView(viewConstructor);\n    this.fetchNecessaryData.apply(this, arguments);\n  },\n  fetchNecessaryData: function fetchNecessaryData(subView) {\n    var that = this;\n    this.updateFromUser();\n    this.model.set('orcidLoggedIn', this.getBeeHive().getService('OrcidApi').hasAccess());\n    /* right now only orcid view needs extra data */\n\n    if (subView === 'orcid' && this.model.get('orcidLoggedIn')) {\n      this.model.set('loading', true); // get main orcid name\n\n      var orcidProfile = this.getBeeHive().getService('OrcidApi').getUserBio();\n      var adsOrcidUserInfo = this.getBeeHive().getService('OrcidApi').getADSUserData(); // doing it at once so there's no flicker of rapid rendering as different vals change\n\n      $.when(orcidProfile, adsOrcidUserInfo).done(function (profile, ads) {\n        var data = {\n          userSubmitted: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isArray(ads) ? ads[0] : ads\n        };\n\n        try {\n          var firstName = profile.getFirstName();\n          var lastName = profile.getLastName(); // unchangeable orcid name\n\n          data.orcidName = lastName + ', ' + firstName;\n          data.prettyOrcidName = firstName + ' ' + lastName;\n        } catch (e) {\n          data.orcidName = 'unknown';\n          data.prettyOrcidName = 'unknown';\n        }\n\n        data.loading = false;\n        that.model.set(data);\n      });\n    }\n  },\n  handleViewEvents: function handleViewEvents(event, arg1, arg2) {\n    var that = this;\n\n    if (event === 'change:link_server') {\n      this.getBeeHive().getObject('User').setUserData({\n        link_server: arg1\n      });\n    } else if (event === 'orcid-authenticate') {\n      this.getBeeHive().getService('OrcidApi').signIn();\n    } else if (event === 'orcid-form-submit') {\n      this.getBeeHive().getService('OrcidApi').setADSUserData(arg1).done(function () {\n        // show the success modal\n        that.getPubSub().publish(that.getPubSub().ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n          code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_7__[\"default\"].CODES.ALERT,\n          msg: hbs_js_widgets_preferences_templates_orcid_form_submit_modal__WEBPACK_IMPORTED_MODULE_8___default()(),\n          type: 'success',\n          title: 'Thanks for submitting your supplemental ORCID information',\n          modal: true\n        })); // this will re-render the form\n\n        that.setSubView('orcid');\n      }).fail(function () {\n        // show the success modal\n        that.getPubSub().publish(that.getPubSub().ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n          code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_7__[\"default\"].CODES.ALERT,\n          msg: 'Please try again later.',\n          type: 'danger',\n          title: 'Your ORCID information was not submitted',\n          modal: true\n        }));\n      });\n    } else if (event === 'change:applicationSettings') {\n      var subView = this.view.content.currentView;\n      this.getBeeHive().getObject('User').setUserData(arg1).done(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(subView.onSuccess, subView)).fail(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(subView.onError, subView));\n    } else if (event === 'change:exportSettings') {\n      var _subView = this.view.content.currentView;\n      this.getBeeHive().getObject('User').setUserData(arg1).done(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(_subView.onSuccess, _subView)).fail(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(_subView.onError, _subView));\n    }\n  },\n  handleUserAnnouncement: function handleUserAnnouncement(event, data) {\n    // update the user model if it changes\n    var user = this.getBeeHive().getObject('User');\n\n    if (event == user.USER_INFO_CHANGE) {\n      this.model.set(data);\n    }\n  },\n  handleOrcidAnnouncement: function handleOrcidAnnouncement(event) {\n    // update the user model if it changes\n    if (event === 'login') {\n      this.model.set('orcidLoggedIn', false);\n    } else if (event === 'logout') {\n      this.model.set('orcidLoggedIn', false);\n    }\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (PreferencesWidget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/preferences/widget.js?");

/***/ }),

/***/ "./src/js/widgets/query_info/query_info_template.html":
/*!************************************************************!*\
  !*** ./src/js/widgets/query_info/query_info_template.html ***!
  \************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"s-right-col-widget-container\\\" style=\\\"margin: 0\\\">\\n    <div class=\\\"currently-selected\\\">\\n        <b>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"selected\") || (depth0 != null ? lookupProperty(depth0,\"selected\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"selected\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":11},\"end\":{\"line\":4,\"column\":23}}}) : helper)))\n    + \"</b> <span class=\\\"s-light-font\\\">selected</span>\\n        &nbsp;&nbsp;<button class=\\\"btn btn-xs btn-default clear-selected\\\"> <i class=\\\"fa fa-times\\\" aria-hidden=\\\"true\\\"></i> clear all</button>\\n        <button class=\\\"btn btn-xs btn-default limit-to-selected\\\"> <i class=\\\"fa fa-plus-square\\\" aria-hidden=\\\"true\\\"></i> limit to</button>\\n        <button class=\\\"btn btn-xs btn-default exclude-selected\\\"> <i class=\\\"fa fa-minus-square\\\" aria-hidden=\\\"true\\\"></i> exclude</button>\\n    </div>\\n</div>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"s-library-area\\\">\\n  <div class=\\\"panel panel-default\\\">\\n    <div class=\\\"panel-heading\\\" style=\\\"padding:0px;\\\">\\n      <div class=\\\"panel-title\\\">\\n        <button class=\\\"library-add-title btn btn-link btn-block\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#library-console\\\" aria-expanded=\\\"false}\\\">\\n          <div class=\\\"s-library-add-title__title\\\">\\n            <span><i class=\\\"fa fa-book\\\" aria-hidden=\\\"true\\\"></i> Add papers to library</span>\\n            <span>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"libraryDrawerOpen\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0, blockParams, depths),\"inverse\":container.program(6, data, 0, blockParams, depths),\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":14},\"end\":{\"line\":25,\"column\":21}}})) != null ? stack1 : \"\")\n    + \"            </span>\\n          </div>\\n        </button>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"panel-collapse collapse \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"libraryDrawerOpen\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(8, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":32,\"column\":40},\"end\":{\"line\":32,\"column\":77}}})) != null ? stack1 : \"\")\n    + \"\\\" id=\\\"library-console\\\">\\n      <div class=\\\"panel-body\\\">\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"selected\") : depth0),0,{\"name\":\"compare\",\"hash\":{\"operator\":\">\"},\"fn\":container.program(10, data, 0, blockParams, depths),\"inverse\":container.program(13, data, 0, blockParams, depths),\"data\":data,\"loc\":{\"start\":{\"line\":35,\"column\":8},\"end\":{\"line\":44,\"column\":20}}})) != null ? stack1 : \"\")\n    + \"\\n\\n        <div class=\\\"libraries-container\\\">\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"libraries\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(15, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":49,\"column\":12},\"end\":{\"line\":62,\"column\":19}}})) != null ? stack1 : \"\")\n    + \"            \\n            <div>\\n              <label for=\\\"create-new\\\">create a new library </label>\\n              <input id=\\\"create-new\\\"\\n                class=\\\"form-control input-sm new-library-name s-display-inline\\\"\\n                type=\\\"text\\\"\\n                name=\\\"new-library-name\\\"\\n                placeholder=\\\"New Library Name\\\"\\n                value=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"newLibraryName\") || (depth0 != null ? lookupProperty(depth0,\"newLibraryName\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(alias1,{\"name\":\"newLibraryName\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":71,\"column\":23},\"end\":{\"line\":71,\"column\":41}}}) : helper)))\n    + \"\\\"\\n                style=\\\"max-width:166px;margin-bottom:10px;\\\"\\n                aria-label=\\\"enter new library name\\\"/>\\n            </div>  \\n\\n            <button class=\\\"btn btn-md btn-primary-faded submit-add-to-library\\\"></i>Add</button>\\n\\n        </div>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"libraries\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(21, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":80,\"column\":10},\"end\":{\"line\":85,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"\\n        <div style=\\\"margin-top:6px\\\" class=\\\"feedback s-feedback\\\">\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(23, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":89,\"column\":10},\"end\":{\"line\":122,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"        </div>\\n      </div>\\n    </div>\\n  </div>\\n    <!--end 'library area' if user is signed in-->\\n</div>\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    return \"                <i class=\\\"fa fa-caret-down\\\" aria-hidden=\\\"true\\\"></i>\\n\";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    return \"                <i class=\\\"fa fa-caret-right\\\" aria-hidden=\\\"true\\\"></i>\\n\";\n},\"8\":function(container,depth0,helpers,partials,data) {\n    return \" in \";\n},\"10\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        add\\n        <select class=\\\"form-control input-sm s-all-vs-selected\\\" name=\\\"all-vs-selected\\\" id=\\\"all-vs-selected\\\">\\n            <option value=\\\"selected\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"selectedVsAll\") : depth0),\"selected\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(11, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":38,\"column\":37},\"end\":{\"line\":38,\"column\":102}}})) != null ? stack1 : \"\")\n    + \"> selected papers only </option>\\n            <option value=\\\"all\\\"  \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"selectedVsAll\") : depth0),\"all\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(11, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":39,\"column\":33},\"end\":{\"line\":39,\"column\":93}}})) != null ? stack1 : \"\")\n    + \"> all results</option>\\n        </select>\\n\";\n},\"11\":function(container,depth0,helpers,partials,data) {\n    return \" selected=\\\"true\\\"\";\n},\"13\":function(container,depth0,helpers,partials,data) {\n    return \"        add  <span class=\\\"s-text-bold\\\">all results</span> <i class=\\\"icon-help\\\" aria-hidden=\\\"true\\\" data-toggle=\\\"popover\\\" data-container=\\\"body\\\" data-content=\\\"All papers in your search results will be added, up to 1,000 records. To add only selected papers, click on the checkboxes next to the paper titles.\\\"></i>\\n        from this query\\n\";\n},\"15\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <div style=\\\"margin-top: 8px\\\" class=\\\"\\\">\\n                <label for=\\\"library-select\\\">to an <span class=\\\"s-text-bold\\\">existing library:</span></label>\\n                <select id=\\\"library-select\\\" name=\\\"library-select\\\" class=\\\"form-control input-sm s-library-select\\\" aria-label=\\\"select existing library\\\">\\n                    <option value=\\\"0\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"selectedLibrary\") : depth0),undefined,{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(16, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":53,\"column\":38},\"end\":{\"line\":53,\"column\":105}}})) != null ? stack1 : \"\")\n    + \">Select a library...</option>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"libraries\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(18, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":54,\"column\":20},\"end\":{\"line\":56,\"column\":29}}})) != null ? stack1 : \"\")\n    + \"                </select>\\n            </div>\\n            <div style=\\\"margin:10px 0 4px 0\\\">\\n                OR\\n            </div>\\n\";\n},\"16\":function(container,depth0,helpers,partials,data) {\n    return \" selected=\\\"true\\\" \";\n},\"18\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, alias3=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                    <option value=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \"\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"id\") : depth0),(depths[1] != null ? lookupProperty(depths[1],\"selectedLibrary\") : depths[1]),{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(16, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":55,\"column\":48},\"end\":{\"line\":55,\"column\":111}}})) != null ? stack1 : \"\")\n    + \">\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"name\") : depth0), depth0))\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"permission\") : depth0),\"owner\",{\"name\":\"compare\",\"hash\":{\"operator\":\"!==\"},\"fn\":container.program(19, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":55,\"column\":125},\"end\":{\"line\":55,\"column\":200}}})) != null ? stack1 : \"\")\n    + \"</option>\\n\";\n},\"19\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" (\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"owner\") : depth0), depth0))\n    + \")\";\n},\"21\":function(container,depth0,helpers,partials,data) {\n    return \"          <div style=\\\"margin-top:10px\\\">\\n            <a href=\\\"#user/libraries\\\">Go to my libraries</a>\\n          </div>\\n\\n\";\n},\"23\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0)) != null ? lookupProperty(stack1,\"success\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(24, data, 0),\"inverse\":container.program(30, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":91,\"column\":14},\"end\":{\"line\":120,\"column\":21}}})) != null ? stack1 : \"\")\n    + \"\\n\";\n},\"24\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n              <div class=\\\"alert alert-success alert-dismissable\\\" role=\\\"alert\\\">\\n                  <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\"></span></button>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0)) != null ? lookupProperty(stack1,\"create\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(25, data, 0),\"inverse\":container.program(27, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":95,\"column\":18},\"end\":{\"line\":102,\"column\":25}}})) != null ? stack1 : \"\")\n    + \"              </div>\\n\\n\";\n},\"25\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                  <a href=\\\"#user/libraries/\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0)) != null ? lookupProperty(stack1,\"id\") : stack1), depth0))\n    + \"\\\"> Library <b>\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0)) != null ? lookupProperty(stack1,\"name\") : stack1), depth0))\n    + \"</b></a> was successfully created and \"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0)) != null ? lookupProperty(stack1,\"numRecords\") : stack1), depth0))\n    + \" new records were added.\\n\";\n},\"27\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                  \"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0)) != null ? lookupProperty(stack1,\"numRecords\") : stack1), depth0))\n    + \" new records were added to  <a href=\\\"#user/libraries/\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0)) != null ? lookupProperty(stack1,\"id\") : stack1), depth0))\n    + \"\\\"> library <b>\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0)) != null ? lookupProperty(stack1,\"name\") : stack1), depth0))\n    + \"</b></a>.\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0)) != null ? lookupProperty(stack1,\"numAlreadyInLib\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(28, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":99,\"column\":18},\"end\":{\"line\":101,\"column\":25}}})) != null ? stack1 : \"\");\n},\"28\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                  (\"\n    + container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0)) != null ? lookupProperty(stack1,\"numAlreadyInLib\") : stack1), depth0))\n    + \" were already in the library).\\n\";\n},\"30\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n              <div class=\\\"alert alert-danger alert-dismissable\\\" role=\\\"alert\\\">\\n                  <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"alert\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\"></span></button>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0)) != null ? lookupProperty(stack1,\"create\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(31, data, 0),\"inverse\":container.program(33, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":109,\"column\":18},\"end\":{\"line\":117,\"column\":25}}})) != null ? stack1 : \"\")\n    + \"              </div>\\n\\n\";\n},\"31\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                  <b>\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0)) != null ? lookupProperty(stack1,\"name\") : stack1), depth0))\n    + \"</b> was not created, error occured.\\n                  <em>\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0)) != null ? lookupProperty(stack1,\"error\") : stack1), depth0))\n    + \"</em>\\n\";\n},\"33\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0)) != null ? lookupProperty(stack1,\"name\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(34, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":113,\"column\":18},\"end\":{\"line\":115,\"column\":25}}})) != null ? stack1 : \"\")\n    + \"                  <em>\"\n    + container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0)) != null ? lookupProperty(stack1,\"error\") : stack1), depth0))\n    + \"</em>\\n\";\n},\"34\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                  Records were not added to <b>\"\n    + container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? lookupProperty(depth0,\"feedback\") : depth0)) != null ? lookupProperty(stack1,\"name\") : stack1), depth0))\n    + \"</b>, error occurred.\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"selected\") : depth0),0,{\"name\":\"compare\",\"hash\":{\"operator\":\">\"},\"fn\":container.program(1, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":10,\"column\":12}}})) != null ? stack1 : \"\")\n    + \"\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"loggedIn\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":0},\"end\":{\"line\":129,\"column\":7}}})) != null ? stack1 : \"\");\n},\"useData\":true,\"useDepths\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/query_info/query_info_template.html?");

/***/ }),

/***/ "./src/js/widgets/query_info/query_info_widget.js":
/*!********************************************************!*\
  !*** ./src/js/widgets/query_info/query_info_widget.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var hbs_js_widgets_query_info_query_info_template__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! hbs!js/widgets/query_info/query_info_template */ \"./src/js/widgets/query_info/query_info_template.html\");\n/* harmony import */ var hbs_js_widgets_query_info_query_info_template__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_query_info_query_info_template__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var js_mixins_formatter__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/mixins/formatter */ \"./src/js/mixins/formatter.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! bootstrap */ \"./src/libs/bootstrap/bootstrap.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n\n\n\n\n\n\n\n\n\n\nvar QueryModel = backbone__WEBPACK_IMPORTED_MODULE_1___default().Model.extend({\n  defaults: {\n    selected: 0,\n    // for libraries\n    libraryDrawerOpen: false,\n    // for rendering library select\n    libraries: [],\n    loggedIn: false,\n    feedback: undefined,\n    newLibraryName: undefined,\n    selectedLibrary: undefined\n  }\n});\nvar QueryDisplayView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  className: 'query-info-widget s-query-info-widget',\n  template: (hbs_js_widgets_query_info_query_info_template__WEBPACK_IMPORTED_MODULE_6___default()),\n  initialize: function initialize() {\n    this.onOpen = this.onOpen.bind(this);\n    this.onClose = this.onClose.bind(this);\n  },\n  serializeData: function serializeData() {\n    var data = this.model.toJSON();\n    data.selected = this.formatNum(data.selected);\n    return data;\n  },\n  modelEvents: {\n    'change:selected': 'render',\n    'change:loggedIn': 'render',\n    'change:libraries': 'render',\n    'change:feedback': 'render',\n    'change:libraryDrawerOpen': 'render'\n  },\n  triggers: {\n    'click .clear-selected': 'clear-selected',\n    'click .limit-to-selected': 'limit-to-selected',\n    'click .exclude-selected': 'exclude-selected'\n  },\n  events: {\n    'change #all-vs-selected': 'recordAllVsSelected',\n    'change #library-select': 'recordLibrarySelection',\n    'keyup .new-library-name': 'recordNewLibraryName',\n    'click .library-add-title': 'toggleLibraryDrawer',\n    'click .submit-add-to-library': 'libraryAddOrCreate'\n  },\n  recordLibrarySelection: function recordLibrarySelection(e) {\n    this.model.set('selectedLibrary', $(e.currentTarget).val());\n  },\n  recordNewLibraryName: function recordNewLibraryName(e) {\n    this.model.set('newLibraryName', $(e.currentTarget).val());\n  },\n  recordAllVsSelected: function recordAllVsSelected(e) {\n    this.model.set('selectedVsAll', $(e.currentTarget).val());\n  },\n  libraryAddOrCreate: function libraryAddOrCreate() {\n    var data = {};\n    var selected = this.$('#library-select').val();\n    var createNew = this.model.get('newLibraryName'); // if selected existing library\n\n    if (selected && selected !== '0' && !createNew) {\n      data.libraryID = this.$('#library-select').val();\n\n      if (this.model.get('selected')) {\n        data.recordsToAdd = this.$('#all-vs-selected').val();\n      } else {\n        data.recordsToAdd = 'all';\n      } // show loading view\n\n\n      this.$('.submit-add-to-library').html('<i class=\"fa fa-spinner fa-pulse\" aria-hidden=\"true\"></i>');\n      this.trigger('library-add', data);\n    } // else if creating new library\n    else if ((!selected || selected === '0') && createNew) {\n      data.name = this.model.get('newLibraryName');\n\n      if (this.model.get('selected')) {\n        data.recordsToAdd = this.$('#all-vs-selected').val();\n      } else {\n        data.recordsToAdd = 'all';\n      }\n\n      data.name = this.model.get('newLibraryName') || '';\n      data.name = data.name.trim(); // show loading view\n\n      this.$('.submit-add-to-library').html('<i class=\"fa fa-spinner fa-pulse\" aria-hidden=\"true\"></i>');\n      this.trigger('library-create', data);\n    } // both selected, invalid\n    else if (selected && selected !== '0' && createNew) {\n      this.model.set('feedback', {\n        success: false,\n        error: 'Either select from an existing or create a new one'\n      });\n    } // none selected, invalid\n    else {\n      this.model.set('feedback', {\n        success: false,\n        error: 'Select from an existing library or create a new one'\n      });\n    }\n  },\n  toggleLibraryDrawer: function toggleLibraryDrawer() {\n    this.model.set('libraryDrawerOpen', !this.model.get('libraryDrawerOpen'), {\n      silent: true\n    });\n  },\n  onOpen: function onOpen() {\n    this.model.set('libraryDrawerOpen', true);\n    this.model.trigger('change:libraryDrawerOpen');\n  },\n  onClose: function onClose() {\n    this.model.set('libraryDrawerOpen', false);\n    this.model.trigger('change:libraryDrawerOpen');\n  },\n  onRender: function onRender() {\n    this.$('.icon-help').popover({\n      trigger: 'hover',\n      placement: 'right',\n      html: true\n    });\n    this.$('#library-console').off('show.bs.collapse', this.onOpen).on('show.bs.collapse', this.onOpen).off('hide.bs.collapse', this.onClose).on('hide.bs.collapse', this.onClose);\n  }\n});\n\nunderscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend(QueryDisplayView.prototype, js_mixins_formatter__WEBPACK_IMPORTED_MODULE_7__[\"default\"]);\n\nvar Widget = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_5__[\"default\"].extend({\n  modelConstructor: QueryModel,\n  viewConstructor: QueryDisplayView,\n  initialize: function initialize(options) {\n    options = options || {};\n    this.model = new QueryModel();\n    this.view = new QueryDisplayView({\n      model: this.model,\n      template: options.template\n    });\n    js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_5__[\"default\"].prototype.initialize.call(this, options);\n  },\n  viewEvents: {\n    'clear-selected': 'clearSelected',\n    'limit-to-selected': 'limitToSelected',\n    'exclude-selected': 'excludeSelected',\n    'library-add': 'libraryAddSubmit',\n    'library-create': 'libraryCreateSubmit'\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n\n    underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].bindAll(this);\n\n    var that = this;\n    var pubsub = this.getPubSub();\n    pubsub.subscribe(pubsub.STORAGE_PAPER_UPDATE, this.onStoragePaperChange);\n    pubsub.subscribe(pubsub.LIBRARY_CHANGE, this.processLibraryInfo);\n    pubsub.subscribe(pubsub.USER_ANNOUNCEMENT, this.handleUserAnnouncement); // check if user is signed in (because widget was just instantiated, but app might have been running for a while\n\n    if (this.getBeeHive().getObject('User').isLoggedIn()) {\n      // know whether to show library panel\n      this.model.set('loggedIn', true); // fetch list of libraries\n\n      var libraryData = this.getBeeHive().getObject('LibraryController').getLibraryMetadata().done(function (data) {\n        that.processLibraryInfo(data);\n      });\n    }\n  },\n  handleUserAnnouncement: function handleUserAnnouncement(event, arg) {\n    var user = this.getBeeHive().getObject('User');\n\n    if (event == user.USER_SIGNED_IN) {\n      this.model.set('loggedIn', true);\n    } else if (event == user.USER_SIGNED_OUT) {\n      this.model.set('loggedIn', false);\n    }\n  },\n  onStoragePaperChange: function onStoragePaperChange(numSelected) {\n    this.model.set('selected', numSelected);\n  },\n  processLibraryInfo: function processLibraryInfo(data) {\n    data.sort(function (a, b) {\n      return a.name.toLowerCase().localeCompare(b.name.toLowerCase());\n    });\n    this.model.set('libraries', data);\n  },\n  clearSelected: function clearSelected() {\n    this.getBeeHive().getObject('AppStorage').clearSelectedPapers();\n  },\n  limitToSelected: function limitToSelected() {\n    var ps = this.getPubSub();\n    ps.publish(ps.CUSTOM_EVENT, 'second-order-search/limit');\n  },\n  excludeSelected: function excludeSelected() {\n    var ps = this.getPubSub();\n    ps.publish(ps.CUSTOM_EVENT, 'second-order-search/exclude');\n  },\n  libraryAddSubmit: function libraryAddSubmit(data) {\n    var options = {};\n    var that = this;\n    options.library = data.libraryID; // are we adding the current query or just the selected bibcodes?\n    // if it's an abstract page widget, will have this._bibcode val\n\n    if (this.abstractPage) {\n      options.bibcodes = [this._bibcode];\n    } else {\n      options.bibcodes = data.recordsToAdd;\n    }\n\n    var name = underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findWhere(this.model.get('libraries'), {\n      id: data.libraryID\n    }).name; // this returns a promise\n\n\n    this.getBeeHive().getObject('LibraryController').addBibcodesToLib(options).done(function (response, status) {\n      var numAlreadyInLib = response.numBibcodesRequested - parseInt(response.number_added);\n      that.model.unset('selectedLibrary');\n      that.model.set('feedback', {\n        success: true,\n        name: name,\n        id: data.libraryID,\n        numRecords: response.number_added,\n        numAlreadyInLib: numAlreadyInLib\n      });\n    }).fail(function (response) {\n      that.model.set('feedback', {\n        success: false,\n        name: name,\n        id: data.libraryID,\n        error: JSON.parse(arguments[0].responseText).error\n      });\n    });\n    this.clearFeedbackWithDelay();\n  },\n  libraryCreateSubmit: function libraryCreateSubmit(data) {\n    var options = {},\n        that = this; // are we adding the current query or just the selected bibcodes?\n    // if it's an abstract page widget, will have this._bibcode val\n\n    if (this.abstractPage) {\n      options.bibcodes = [this._bibcode];\n    } else {\n      options.bibcodes = data.recordsToAdd;\n    }\n\n    options.name = data.name; // XXX:rca - to decide\n\n    this.getBeeHive().getObject('LibraryController').createLibAndAddBibcodes(options).done(function (response, status) {\n      // reset library add name (in input field)\n      that.model.set('newLibraryName', undefined);\n      that.model.set('feedback', {\n        create: true,\n        success: true,\n        name: data.name,\n        id: response.id,\n        numRecords: response.bibcode.length\n      });\n    }).fail(function (response) {\n      that.model.set('feedback', {\n        success: false,\n        name: data.name,\n        create: true,\n        error: JSON.parse(arguments[0].responseText).error\n      });\n    });\n    this.clearFeedbackWithDelay();\n  },\n  clearFeedbackWithDelay: function clearFeedbackWithDelay() {\n    var that = this,\n        // ten seconds\n    timeout = 30000;\n    setTimeout(function () {\n      that.model.unset('feedback');\n    }, timeout);\n  },\n  processResponse: function processResponse(apiResponse) {\n    var q = apiResponse.getApiQuery();\n    var filters = [];\n\n    underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].each(q.keys(), function (k) {\n      if (k.substring(0, 2) == 'fq') {\n        underscore__WEBPACK_IMPORTED_MODULE_2__[\"default\"].each(q.get(k), function (v) {\n          if (v.indexOf('{!') == -1) {\n            filters.push(v);\n          }\n        });\n      }\n    });\n\n    this.view.model.set('fq', filters);\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (Widget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/query_info/query_info_widget.js?");

/***/ }),

/***/ "./src/js/widgets/results/templates/container-template.html":
/*!******************************************************************!*\
  !*** ./src/js/widgets/results/templates/container-template.html ***!
  \******************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"        <div class=\\\"select-all-docs\\\">\\n          <label class=\\\"custom-checkbox\\\">\\n            <input\\n              title=\\\"select all on this page\\\"\\n              type=\\\"checkbox\\\"\\n              id=\\\"select-all-docs-cb\\\"\\n            />\\n          </label>\\n          <label for=\\\"select-all-docs-cb\\\" class=\\\"sr-only\\\">\\n            select all on this page\\n          </label>\\n        </div>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"showHighlights\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":22,\"column\":28},\"end\":{\"line\":31,\"column\":28}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"showAbstract\") : depth0),\"open\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.program(11, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":31,\"column\":29},\"end\":{\"line\":39,\"column\":20}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"showSidebars\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(13, data, 0),\"inverse\":container.program(15, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":39,\"column\":21},\"end\":{\"line\":51,\"column\":15}}})) != null ? stack1 : \"\")\n    + \"        <button class=\\\"btn-sm btn-link pull-right\\\" id=\\\"go-to-bottom\\\">\\n          Go To Bottom\\n        </button>\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"showHighlights\") : depth0),\"open\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.program(7, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":22,\"column\":51},\"end\":{\"line\":31,\"column\":20}}})) != null ? stack1 : \"\")\n    + \" \";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    return \"\\n        <button class=\\\"btn  btn-primary  btn-sm show-highlights\\\">\\n          Hide highlights\\n        </button>\\n\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    return \"        <button class=\\\"btn btn-primary btn-sm btn-inverse show-highlights\\\">\\n          Show highlights\\n        </button>\\n        \";\n},\"9\":function(container,depth0,helpers,partials,data) {\n    return \"\\n        <button class=\\\"btn show-abstract btn-sm btn-primary\\\">\\n          Hide abstracts\\n        </button>\\n\";\n},\"11\":function(container,depth0,helpers,partials,data) {\n    return \"        <button class=\\\"btn show-abstract btn-sm btn-inverse btn-primary\\\">\\n          Show abstracts\\n        </button>\\n        \";\n},\"13\":function(container,depth0,helpers,partials,data) {\n    return \"\\n        <button\\n          class=\\\"btn btn-sm btn-inverse btn-primary toggle-sidebars hidden-xs hidden-sm\\\"\\n        >\\n          Hide Sidebars\\n        </button>\\n\";\n},\"15\":function(container,depth0,helpers,partials,data) {\n    return \"        <button\\n          class=\\\"btn btn-sm btn-primary toggle-sidebars hidden-xs hidden-sm\\\"\\n        >\\n          Show Sidebars\\n        </button>\\n\";\n},\"17\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <div class=\\\"col-sm-12\\\">\\n      <h2 class=\\\"s-article-title\\\">\"\n    + ((stack1 = container.lambda((depth0 != null ? lookupProperty(depth0,\"title\") : depth0), depth0)) != null ? stack1 : \"\")\n    + \"</h2>\\n    </div>\\n\";\n},\"19\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \" \"\n    + ((stack1 = container.invokePartial(__webpack_require__(/*! ../../list_of_things/templates/pagination-partial.html */ \"./src/js/widgets/list_of_things/templates/pagination-partial.html\"),depth0,{\"name\":\"js/widgets/list_of_things/templates/pagination-partial\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \" \";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"s-results-widget results-widget\\\">\\n  <div class=\\\"row s-list-controls\\\">\\n    <div class=\\\"s-results-border-bottom\\\">\\n      <div class=\\\"col-xs-1 s-checkbox-col\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"loading\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":8},\"end\":{\"line\":18,\"column\":19}}})) != null ? stack1 : \"\")\n    + \"      </div>\\n\\n      <div class=\\\"col-xs-11 s-show-details-container\\\">\\n        \"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"loading\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":22,\"column\":8},\"end\":{\"line\":55,\"column\":19}}})) != null ? stack1 : \"\")\n    + \"      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"row\\\">\\n    <h2 class=\\\"sr-only\\\">Search Results</h2>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"title\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(17, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":62,\"column\":4},\"end\":{\"line\":66,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"    <ul\\n      class=\\\"col-sm-12 results-list  s-results-list list-unstyled s-display-block\\\"\\n      aria-label=\\\"list of results\\\"\\n    ></ul>\\n  </div>\\n  \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"pagination\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(19, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":72,\"column\":2},\"end\":{\"line\":73,\"column\":66}}})) != null ? stack1 : \"\")\n    + \"\\n</div>\\n\";\n},\"usePartial\":true,\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/results/templates/container-template.html?");

/***/ }),

/***/ "./src/js/widgets/results/widget.js":
/*!******************************************!*\
  !*** ./src/js/widgets/results/widget.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_widgets_list_of_things_widget__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/widgets/list_of_things/widget */ \"./src/js/widgets/list_of_things/widget.js\");\n/* harmony import */ var js_widgets_abstract_widget__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/widgets/abstract/widget */ \"./src/js/widgets/abstract/widget.js\");\n/* harmony import */ var js_mixins_add_stable_index_to_collection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/mixins/add_stable_index_to_collection */ \"./src/js/mixins/add_stable_index_to_collection.js\");\n/* harmony import */ var js_mixins_link_generator_mixin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/mixins/link_generator_mixin */ \"./src/js/mixins/link_generator_mixin.js\");\n/* harmony import */ var js_mixins_formatter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/mixins/formatter */ \"./src/js/mixins/formatter.js\");\n/* harmony import */ var hbs_js_widgets_results_templates_container_template__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! hbs!js/widgets/results/templates/container-template */ \"./src/js/widgets/results/templates/container-template.html\");\n/* harmony import */ var hbs_js_widgets_results_templates_container_template__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_results_templates_container_template__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var js_mixins_papers_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/mixins/papers_utils */ \"./src/js/mixins/papers_utils.js\");\n/* harmony import */ var js_mixins_expose_metadata__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/mixins/expose_metadata */ \"./src/js/mixins/expose_metadata.js\");\n/* harmony import */ var js_modules_orcid_extension__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/modules/orcid/extension */ \"./src/js/modules/orcid/extension.js\");\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/**\n * Widget to display list of result hits - it allows to paginate through them\n * and display details\n *\n */\n\n\n\n\n\n\n\n\n\n\n\nvar ResultsWidget = js_widgets_list_of_things_widget__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  initialize: function initialize() {\n    js_widgets_list_of_things_widget__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.initialize.apply(this, arguments); // now adjusting the List Model\n\n    this.view.template = (hbs_js_widgets_results_templates_container_template__WEBPACK_IMPORTED_MODULE_5___default());\n\n    this.view.model.defaults = function () {\n      return {\n        mainResults: true,\n        title: undefined,\n        // assuming there will always be abstracts\n        showAbstract: 'closed',\n        showSidebars: true,\n        showCheckboxes: true,\n        // often they won't exist\n        showHighlights: 'closed',\n        pagination: true\n      };\n    };\n\n    this.model.set(this.model.defaults(), {\n      silent: true\n    }); // also need to add an event listener for the \"toggle all\" action\n\n    this.view.toggleAll = function (e) {\n      var flag = e.target.checked ? 'add' : 'remove';\n      this.trigger('toggle-all', flag);\n    };\n\n    _.extend(this.view.events, {\n      'click input#select-all-docs-cb': 'toggleAll'\n    });\n\n    this.view.resultsWidget = true;\n    this.view.delegateEvents(); // this must come after the event delegation!\n\n    this.listenTo(this.collection, 'reset', this.checkDetails); // finally, listen\n    // to this event on the view\n\n    this.listenTo(this.view, 'toggle-all', this.triggerBulkAction);\n    this.minAuthorsPerResult = 3;\n    this.model.on('change:showSidebars', _.bind(this._onToggleSidebars, this)); // update the default fields with whatever the abstract page needs\n\n    var abstractFields = js_widgets_abstract_widget__WEBPACK_IMPORTED_MODULE_1__[\"default\"].prototype.defaultQueryArguments.fl.split(',');\n    var resultsFields = this.defaultQueryArguments.fl.split(',');\n    resultsFields = _.union(abstractFields, resultsFields); // remove 'aff' if in list\n\n    var affIdx = resultsFields.indexOf('aff');\n\n    if (affIdx > -1) {\n      resultsFields.splice(affIdx, 1);\n    }\n\n    this.defaultQueryArguments.fl = resultsFields.join(',');\n    this.on('page-manager-message', _.bind(this.onPageManagerMessage, this));\n  },\n  defaultQueryArguments: {\n    fl: 'title,abstract,bibcode,author,keyword,id,links_data,property,esources,data,citation_count,citation_count_norm,[citations],pub,email,volume,pubdate,doi,doctype,identifier,publisher',\n    rows: 25,\n    start: 0\n  },\n  activate: function activate(beehive) {\n    js_widgets_list_of_things_widget__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.activate.apply(this, [].slice.apply(arguments));\n    var pubsub = beehive.getService('PubSub');\n\n    _.bindAll(this, 'dispatchRequest', 'processResponse', 'onUserAnnouncement', 'onStoragePaperUpdate', 'onCustomEvent', 'onStartSearch');\n\n    pubsub.subscribe(pubsub.INVITING_REQUEST, this.dispatchRequest);\n    pubsub.subscribe(pubsub.DELIVERING_RESPONSE, this.processResponse);\n    pubsub.subscribe(pubsub.USER_ANNOUNCEMENT, this.onUserAnnouncement);\n    pubsub.subscribe(pubsub.STORAGE_PAPER_UPDATE, this.onStoragePaperUpdate);\n    pubsub.subscribe(pubsub.CUSTOM_EVENT, this.onCustomEvent);\n    pubsub.subscribe(pubsub.START_SEARCH, this.onStartSearch);\n    this.queryTimer = +new Date();\n  },\n  onPageManagerMessage: function onPageManagerMessage(event, data) {\n    if (event === 'side-bars-update') {\n      this._onSidebarsUpdate(data);\n    }\n  },\n  _clearResults: function _clearResults() {\n    this.hiddenCollection.reset();\n    this.view.collection.reset();\n  },\n  onStartSearch: function onStartSearch(apiQuery) {\n    // quickly check if the query changed\n    try {\n      var beehive = this.getBeeHive();\n      var storage = beehive.getObject('AppStorage');\n      var history = beehive.getService('HistoryManager');\n      var recentQuery = storage.getCurrentQuery().toJSON();\n      var currentQuery = apiQuery.toJSON();\n      var previousNav = history.getCurrentNav();\n    } catch (e) {\n      return;\n    }\n\n    if (!_.isEqual(recentQuery, currentQuery)) {\n      this._clearResults();\n    } else if (_.isArray(previousNav) && previousNav[0] === 'ShowAbstract') {\n      // clear the focus interval\n      clearInterval(this.focusInterval); // loop for a while, in case we have to wait for the elemen to show up\n\n      var focusInterval = setInterval(function () {\n        var $link = $('a[href$=\"' + previousNav[1].href + '\"]');\n\n        if ($link) {\n          // found it, clear the interval and scroll\n          clearInterval(focusInterval);\n          $(document.documentElement).animate({\n            scrollTop: $link.offset() && $link.offset().top ? $link.offset().top : 0\n          }, 'fast');\n        }\n      }, 100); // clear it after a timeout no matter what\n\n      setTimeout(function () {\n        clearInterval(focusInterval);\n      }, 10000);\n      this.focusInterval = focusInterval;\n    }\n\n    this.queryTimer = +new Date();\n  },\n  _onToggleSidebars: function _onToggleSidebars() {\n    this.trigger('page-manager-event', 'side-bars-update', this.model.get('showSidebars'));\n  },\n  _onSidebarsUpdate: function _onSidebarsUpdate(value) {\n    this.model.set('showSidebars', value);\n  },\n  onUserAnnouncement: function onUserAnnouncement(message, data) {\n    if (message == 'user_info_change' && _.has(data, 'isOrcidModeOn')) {\n      // make sure to reset orcid state of all cached records, not just currently\n      // visible ones\n      var collection = this.hiddenCollection.toJSON();\n\n      var docs = _.map(collection, function (x) {\n        delete x.orcid;\n        return x;\n      });\n\n      if (data.isOrcidModeOn) {\n        this.addOrcidInfo(docs);\n      }\n\n      this.hiddenCollection.reset(docs);\n      this.view.collection.reset(this.hiddenCollection.getVisibleModels());\n    }\n\n    this.updateMinAuthorsFromUserData();\n  },\n  onCustomEvent: function onCustomEvent(event) {\n    if (event === 'add-all-on-page') {\n      var bibs = this.collection.pluck('bibcode');\n      var pubsub = this.getPubSub();\n      pubsub.publish(pubsub.BULK_PAPER_SELECTION, bibs);\n    }\n  },\n  dispatchRequest: function dispatchRequest(apiQuery) {\n    this.reset();\n    this.setCurrentQuery(apiQuery);\n    this.model.set('loading', true);\n    js_widgets_list_of_things_widget__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.dispatchRequest.call(this, apiQuery);\n  },\n  customizeQuery: function customizeQuery(apiQuery) {\n    var q = apiQuery.clone();\n    q.unlock();\n\n    if (this.defaultQueryArguments) {\n      q = this.composeQuery(this.defaultQueryArguments, q);\n    }\n\n    return q;\n  },\n  checkDetails: function checkDetails() {\n    var hExists = false;\n\n    for (var i = 0; i < this.collection.models.length; i++) {\n      var m = this.collection.models[i];\n\n      if (m.attributes.highlights) {\n        hExists = true;\n        break;\n      }\n    }\n  },\n  getUserData: function getUserData() {\n    try {\n      var beehive = _.isFunction(this.getBeeHive) && this.getBeeHive();\n      var user = _.isFunction(beehive.getObject) && beehive.getObject('User');\n\n      if (_.isPlainObject(user)) {\n        return _.isFunction(user.getUserData) && user.getUserData('USER_DATA');\n      }\n\n      return {};\n    } catch (e) {\n      return {};\n    }\n  },\n  updateMinAuthorsFromUserData: function updateMinAuthorsFromUserData() {\n    var userData = this.getUserData();\n    var min = _.has(userData, 'minAuthorsPerResult') ? userData.minAuthorsPerResult : this.minAuthorsPerResult;\n\n    if (String(min).toUpperCase() === 'ALL') {\n      this.minAuthorsPerResult = Number.MAX_SAFE_INTEGER;\n    } else if (String(min).toUpperCase() === 'NONE') {\n      this.minAuthorsPerResult = 0;\n    } else {\n      this.minAuthorsPerResult = Number(min);\n    }\n  },\n  processDocs: function processDocs(apiResponse, docs, paginationInfo) {\n    var params = apiResponse.get('responseHeader.params');\n    var start = params.start || 0;\n    var docs = js_mixins_add_stable_index_to_collection__WEBPACK_IMPORTED_MODULE_2__[\"default\"].addPaginationToDocs(docs, start);\n    var highlights = apiResponse.has('highlighting') ? apiResponse.get('highlighting') : {};\n    var self = this;\n    var userData = this.getBeeHive().getObject('User').getUserData('USER_DATA');\n    var link_server = userData.link_server;\n\n    this.__exposeMetadata(docs);\n\n    this.updateMinAuthorsFromUserData();\n    var appStorage = null;\n\n    if (this.hasBeeHive() && this.getBeeHive().hasObject('AppStorage')) {\n      appStorage = this.getBeeHive().getObject('AppStorage');\n    } // check for normalized citation count, this will change display of \"cited:N\"\n\n\n    var normCiteSort = /citation_count_norm/gi.test(params.sort); // stash docs so other widgets can access them\n\n    this.getBeeHive().getObject('DocStashController').stashDocs(docs); // any preprocessing before adding the resultsIndex is done here\n\n    docs = _.map(docs, function (d) {\n      d.normCiteSort = normCiteSort;\n\n      if (normCiteSort) {\n        try {\n          d.citationCountNorm = d.citation_count_norm.toFixed(2);\n        } catch (e) {\n          d.citationCountNorm = 0;\n        }\n      } // used by link generator mixin\n\n\n      d.link_server = link_server;\n      d.identifier = d.bibcode ? d.bibcode : d.identifier; // make sure undefined doesn't become \"undefined\"\n\n      d.encodedIdentifier = _.isUndefined(d.identifier) ? d.identifier : encodeURIComponent(d.identifier);\n      var h = {};\n\n      if (_.keys(highlights).length) {\n        h = function () {\n          var hl = highlights[d.id];\n          var finalList = []; // adding abstract,title, etc highlights to one big list\n\n          _.each(_.pairs(hl), function (pair) {\n            finalList = finalList.concat(pair[1]);\n          });\n\n          return {\n            highlights: finalList\n          };\n        }();\n      }\n\n      d.highlights = h.highlights;\n      var maxAuthorNames = self.minAuthorsPerResult;\n      var shownAuthors;\n\n      if (d.author && d.author.length > maxAuthorNames) {\n        d.extraAuthors = d.author.length - maxAuthorNames;\n        shownAuthors = d.author.slice(0, maxAuthorNames);\n      } else if (d.author) {\n        shownAuthors = d.author;\n      }\n\n      if (d.author) {\n        var format = function format(d, i, arr) {\n          var l = arr.length - 1;\n\n          if (i === l || l === 0) {\n            return d; // last one, or only one\n          }\n\n          return d + ';';\n        };\n\n        d.authorFormatted = _.map(shownAuthors, format);\n        d.allAuthorFormatted = _.map(d.author, format);\n      }\n\n      d.formattedDate = d.pubdate ? self.formatDate(d.pubdate) : undefined;\n      d.shortAbstract = d.abstract ? self.shortenAbstract(d.abstract) : undefined;\n\n      if (appStorage && appStorage.isPaperSelected(d.identifier)) {\n        d.chosen = true;\n      }\n\n      return d;\n    });\n\n    try {\n      docs = this.parseLinksData(docs);\n    } catch (e) {\n      console.warn(e.message);\n    }\n\n    var pubsub = this.getPubSub(); // if the latest request equals the total perPage, then we're done, send off event\n\n    if (this.pagination && this.pagination.perPage === +params.start + +params.rows) {\n      pubsub.publish(pubsub.CUSTOM_EVENT, 'timing:results-loaded', +new Date() - this.queryTimer);\n    }\n\n    this.model.set('loading', false);\n    pubsub.publish(pubsub.CUSTOM_EVENT, 'search-page-results', {\n      docs: docs\n    });\n    return docs;\n  },\n  onStoragePaperUpdate: function onStoragePaperUpdate() {\n    var appStorage;\n\n    if (this.hasBeeHive() && this.getBeeHive().hasObject('AppStorage')) {\n      appStorage = this.getBeeHive().getObject('AppStorage');\n    } else {\n      console.warn('AppStorage object disapperared!');\n      return;\n    }\n\n    this.collection.each(function (m) {\n      if (appStorage.isPaperSelected(m.get('identifier'))) {\n        m.set('chosen', true);\n      } else {\n        m.set('chosen', false);\n      }\n    });\n    this.hiddenCollection.each(function (m) {\n      if (appStorage.isPaperSelected(m.get('identifier'))) {\n        m.set('chosen', true);\n      } else {\n        m.set('chosen', false);\n      }\n    });\n\n    if (this.collection.where({\n      chosen: true\n    }).length == 0) {\n      // make sure the \"selectAll\" button is unchecked\n      var $chk = this.view.$('input#select-all-docs-cb');\n\n      if ($chk.length > 0) {\n        $chk[0].checked = false;\n      }\n    }\n  },\n  triggerBulkAction: function triggerBulkAction(flag) {\n    var bibs = this.collection.pluck('bibcode');\n    this.getPubSub().publish(this.getPubSub().BULK_PAPER_SELECTION, bibs, flag);\n  },\n  reset: function reset() {\n    // persist the sidebar state through resets\n    var sidebarState = this.model.get('showSidebars');\n    js_widgets_list_of_things_widget__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.reset.apply(this, arguments);\n    this.model.set('showSidebars', sidebarState);\n  }\n});\n\n_.extend(ResultsWidget.prototype, js_mixins_link_generator_mixin__WEBPACK_IMPORTED_MODULE_3__[\"default\"]);\n\n_.extend(ResultsWidget.prototype, js_mixins_formatter__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\n\n_.extend(ResultsWidget.prototype, js_mixins_papers_utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"], js_mixins_expose_metadata__WEBPACK_IMPORTED_MODULE_7__[\"default\"], js_mixins_dependon__WEBPACK_IMPORTED_MODULE_9__[\"default\"].BeeHive);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ((0,js_modules_orcid_extension__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(ResultsWidget));\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/results/widget.js?");

/***/ }),

/***/ "./src/js/widgets/search_bar/search_bar_widget.js":
/*!********************************************************!*\
  !*** ./src/js/widgets/search_bar/search_bar_widget.js ***!
  \********************************************************/
/***/ (function() {

eval("throw new Error(\"Module build failed (from ./node_modules/babel-loader/lib/index.js):\\nSyntaxError: /home/tim/code/bbb/src/js/widgets/search_bar/search_bar_widget.js: ES2015 named imports do not destructure. Use another statement for destructuring after the import. (13:17)\\n\\n\\u001b[0m \\u001b[90m 11 |\\u001b[39m \\u001b[36mimport\\u001b[39m \\u001b[33mApiFeedback\\u001b[39m \\u001b[36mfrom\\u001b[39m \\u001b[32m'js/components/api_feedback'\\u001b[39m\\u001b[33m;\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m 12 |\\u001b[39m \\u001b[36mimport\\u001b[39m \\u001b[33mFormatMixin\\u001b[39m \\u001b[36mfrom\\u001b[39m \\u001b[32m'js/mixins/formatter'\\u001b[39m\\u001b[33m;\\u001b[39m\\u001b[0m\\n\\u001b[0m\\u001b[31m\\u001b[1m>\\u001b[22m\\u001b[39m\\u001b[90m 13 |\\u001b[39m \\u001b[36mimport\\u001b[39m { render\\u001b[33m:\\u001b[39m renderAutocomplete\\u001b[33m,\\u001b[39m autocompleteSource\\u001b[33m:\\u001b[39m autocompleteArray } \\u001b[36mfrom\\u001b[39m \\u001b[32m'js/widgets/search_bar/autocomplete'\\u001b[39m\\u001b[33m;\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m    |\\u001b[39m                  \\u001b[31m\\u001b[1m^\\u001b[22m\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m 14 |\\u001b[39m \\u001b[36mimport\\u001b[39m quickFieldDesc \\u001b[36mfrom\\u001b[39m \\u001b[32m'js/widgets/search_bar/quick-field-desc'\\u001b[39m\\u001b[33m;\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m 15 |\\u001b[39m \\u001b[36mimport\\u001b[39m bootstrap \\u001b[36mfrom\\u001b[39m \\u001b[32m'bootstrap'\\u001b[39m\\u001b[33m;\\u001b[39m\\u001b[0m\\n\\u001b[0m \\u001b[90m 16 |\\u001b[39m \\u001b[36mimport\\u001b[39m jqueryUI \\u001b[36mfrom\\u001b[39m \\u001b[32m'jquery-ui'\\u001b[39m\\u001b[33m;\\u001b[39m\\u001b[0m\\n    at Parser._raise (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:798:17)\\n    at Parser.raiseWithData (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:791:17)\\n    at Parser.raise (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:752:17)\\n    at Parser.parseNamedImportSpecifiers (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:14388:22)\\n    at Parser.parseImport (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:14230:39)\\n    at Parser.parseStatementContent (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:12896:27)\\n    at Parser.parseStatement (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:12796:17)\\n    at Parser.parseBlockOrModuleBlockBody (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:13385:25)\\n    at Parser.parseBlockBody (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:13376:10)\\n    at Parser.parseProgram (/home/tim/code/bbb/node_modules/@babel/parser/lib/index.js:12718:10)\");\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/search_bar/search_bar_widget.js?");

/***/ }),

/***/ "./src/js/widgets/sort/components/sort-app.jsx.js":
/*!********************************************************!*\
  !*** ./src/js/widgets/sort/components/sort-app.jsx.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./src/libs/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ \"./src/libs/prop-types.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nvar SortApp = function SortApp(_ref) {\n  var setSort = _ref.setSort,\n      setDirection = _ref.setDirection,\n      app = _ref.app;\n  var options = app.options,\n      sort = app.sort,\n      direction = app.direction;\n  /**\n   * Call the handler after a selection is made from the dropdown\n   *\n   * @param {object} item - the sort option\n   * @param {object} e - the event object\n   */\n\n  var onSelect = function onSelect(item, e) {\n    e.preventDefault();\n\n    if (e.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    setSort(item);\n  };\n\n  var changeDirectionText = direction === 'asc' ? 'Change sort direction to descending' : 'Change sort direction to ascending';\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"btn-group\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-default\",\n    onClick: setDirection,\n    title: changeDirectionText\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"i\", {\n    className: \"fa fa-sort-amount-\".concat(direction),\n    \"aria-hidden\": \"true\"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n    className: \"sr-only\"\n  }, changeDirectionText)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"button\", {\n    style: {\n      minWidth: 100\n    },\n    type: \"button\",\n    className: \"btn btn-default dropdown-toggle\",\n    \"data-toggle\": \"dropdown\",\n    title: \"Select a sort option\"\n  }, sort.text, \" \", /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"span\", {\n    className: \"caret\",\n    \"aria-hidden\": \"true\"\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"ul\", {\n    className: \"dropdown-menu pull-right\",\n    role: \"menu\"\n  }, options.map(function (o) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"li\", {\n      key: o.id\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"a\", {\n      href: \"javascript:void(0)\",\n      title: o.desc,\n      onClick: function onClick(e) {\n        return onSelect(o, e);\n      }\n    }, o.text));\n  })));\n};\n\nSortApp.propTypes = {\n  app: prop_types__WEBPACK_IMPORTED_MODULE_1___default().shape({\n    options: prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().shape({\n      id: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().string),\n      desc: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().string),\n      text: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().string)\n    })),\n    sort: prop_types__WEBPACK_IMPORTED_MODULE_1___default().shape({\n      text: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().string)\n    }),\n    direction: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().string)\n  }).isRequired,\n  setSort: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().func).isRequired,\n  setDirection: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().func).isRequired\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (SortApp);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/sort/components/sort-app.jsx.js?");

/***/ }),

/***/ "./src/js/widgets/sort/containers/sort-container.js":
/*!**********************************************************!*\
  !*** ./src/js/widgets/sort/containers/sort-container.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-redux */ \"./src/libs/react-redux.js\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_widgets_sort_redux_modules_sort_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/widgets/sort/redux/modules/sort-app */ \"./src/js/widgets/sort/redux/modules/sort-app.js\");\n/* harmony import */ var js_widgets_sort_components_sort_app_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/widgets/sort/components/sort-app.jsx */ \"./src/js/widgets/sort/components/sort-app.jsx.js\");\n\n\n // actions\n\nvar _setSort = js_widgets_sort_redux_modules_sort_app__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setSort,\n    _setDirection = js_widgets_sort_redux_modules_sort_app__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setDirection; // mapping state to props\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    app: state // state is available on sub-components as 'app'\n\n  };\n}; // dispatch to props\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setSort: function setSort(value) {\n      return dispatch(_setSort(value));\n    },\n    setDirection: function setDirection() {\n      return dispatch(_setDirection());\n    }\n  };\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (react_redux__WEBPACK_IMPORTED_MODULE_0___default().connect(mapStateToProps, mapDispatchToProps)(js_widgets_sort_components_sort_app_jsx__WEBPACK_IMPORTED_MODULE_2__[\"default\"]));\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/sort/containers/sort-container.js?");

/***/ }),

/***/ "./src/js/widgets/sort/redux/configure-store.js":
/*!******************************************************!*\
  !*** ./src/js/widgets/sort/redux/configure-store.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ configureStore; }\n/* harmony export */ });\n/* harmony import */ var redux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redux */ \"./src/libs/redux.js\");\n/* harmony import */ var redux__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(redux__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var redux_thunk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! redux-thunk */ \"./src/libs/redux-thunk.js\");\n/* harmony import */ var redux_thunk__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(redux_thunk__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_widgets_sort_redux_modules_sort_app__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/widgets/sort/redux/modules/sort-app */ \"./src/js/widgets/sort/redux/modules/sort-app.js\");\n\n\n\nvar createStore = (redux__WEBPACK_IMPORTED_MODULE_0___default().createStore),\n    applyMiddleware = (redux__WEBPACK_IMPORTED_MODULE_0___default().applyMiddleware);\nfunction configureStore(context) {\n  var middleware = applyMiddleware(redux_thunk__WEBPACK_IMPORTED_MODULE_1___default()[\"default\"].withExtraArgument(context));\n  var composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || (redux__WEBPACK_IMPORTED_MODULE_0___default().compose);\n  return createStore(js_widgets_sort_redux_modules_sort_app__WEBPACK_IMPORTED_MODULE_2__[\"default\"].reducer, composeEnhancers(middleware));\n}\n;\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/sort/redux/configure-store.js?");

/***/ }),

/***/ "./src/js/widgets/sort/redux/modules/sort-app.js":
/*!*******************************************************!*\
  !*** ./src/js/widgets/sort/redux/modules/sort-app.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n // Action Constants\n\nvar SET_DIRECTION = 'SET_DIRECTION';\nvar SET_SORT = 'SET_SORT';\nvar SET_QUERY = 'SET_QUERY';\nvar SET_LOCKED = 'SET_LOCKED'; // Action Creators\n\n/**\n * Takes a new sort object and dispatches the update to the state.  If only a\n * string is passed, then it will attempt to find the value in the current\n * list of options.\n *\n * @param {string|object} value - The new selected sort\n * @param {boolean} silent - if true, a change event will not be triggered\n */\n\nvar setSort = function setSort(value, silent) {\n  return function (dispatch, getState, widget) {\n    // if passed a string, convert it to one of our pre-defined options\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(value)) {\n      var _getState = getState(),\n          options = _getState.options; // attempt to find something, if not just provide the first option\n\n\n      value = options.find(function (_ref) {\n        var id = _ref.id;\n        return id === value;\n      }) || options[0];\n    }\n\n    dispatch({\n      type: SET_SORT,\n      value: value\n    }); // only fire if we aren't being silent\n\n    !silent && widget.onSortChange();\n  };\n};\n/**\n * Takes in a direction and dispatches a request\n * if no direction is passed, it will toggle the current direction between\n * `asc` and `desc`\n *\n * @param {string} [value] - The new direction\n * @param {boolean} silent - if true, a change event will not be triggered\n */\n\n\nvar setDirection = function setDirection(value, silent) {\n  return function (dispatch, getState, widget) {\n    // if a direction isn't passed, then just toggle\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isUndefined(value)) {\n      var _getState2 = getState(),\n          direction = _getState2.direction;\n\n      value = direction === 'asc' ? 'desc' : 'asc';\n    }\n\n    dispatch({\n      type: SET_DIRECTION,\n      value: value\n    }); // only fire if we aren't being silent\n\n    !silent && widget.onSortChange();\n  };\n};\n/**\n * Set the current query\n *\n * @param {object} value - the new query\n */\n\n\nvar setQuery = function setQuery(value) {\n  return {\n    type: SET_QUERY,\n    value: value\n  };\n};\n/**\n * Set the current locked value\n *\n * @param {boolean} value - the new locked value\n */\n\n\nvar setLocked = function setLocked(value) {\n  return function (dispatch, getState) {\n    // grab the current timer (if exists)\n    var _getState3 = getState(),\n        lockTimer = _getState3.lockTimer;\n\n    if (lockTimer) {\n      clearTimeout(lockTimer);\n    } // create a new timer, which resets the locked state after a period of time\n\n\n    var timer = setTimeout(function () {\n      return dispatch({\n        type: SET_LOCKED,\n        value: false\n      });\n    }, 30000); // dispatch the new state\n\n    dispatch({\n      type: SET_LOCKED,\n      value: value,\n      timer: timer\n    });\n  };\n}; // initial state\n\n\nvar initialState = {\n  options: [{\n    id: 'author_count',\n    text: 'Author Count',\n    desc: 'sort by number of authors'\n  }, {\n    id: 'bibcode',\n    text: 'Bibcode',\n    desc: 'sort by bibcode'\n  }, {\n    id: 'citation_count',\n    text: 'Citation Count',\n    desc: 'sort by number of citations'\n  }, {\n    id: 'citation_count_norm',\n    text: 'Normalized Citation Count',\n    desc: 'sort by number of normalized citations'\n  }, {\n    id: 'classic_factor',\n    text: 'Classic Factor',\n    desc: 'sort using classical score'\n  }, {\n    id: 'first_author',\n    text: 'First Author',\n    desc: 'sort by first author'\n  }, {\n    id: 'date',\n    text: 'Date',\n    desc: 'sort by publication date'\n  }, {\n    id: 'entry_date',\n    text: 'Entry Date',\n    desc: 'sort by date work entered the database'\n  }, {\n    id: 'read_count',\n    text: 'Read Count',\n    desc: 'sort by number of reads'\n  }, {\n    id: 'score',\n    text: 'Score',\n    desc: 'sort by the relative score'\n  }],\n  sort: {\n    id: 'date',\n    text: 'Date'\n  },\n  direction: 'desc',\n  query: null,\n  locked: false,\n  lockTimer: null\n}; // reducer\n\nvar reducer = function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case SET_SORT:\n      return _objectSpread({}, state, {\n        sort: action.value\n      });\n\n    case SET_DIRECTION:\n      return _objectSpread({}, state, {\n        direction: action.value\n      });\n\n    case SET_QUERY:\n      return _objectSpread({}, state, {\n        query: action.value\n      });\n\n    case SET_LOCKED:\n      return _objectSpread({}, state, {\n        locked: action.value,\n        lockTimer: action.timer\n      });\n\n    default:\n      return initialState;\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  setSort: setSort,\n  setDirection: setDirection,\n  setQuery: setQuery,\n  setLocked: setLocked,\n  initialState: initialState,\n  reducer: reducer\n});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/sort/redux/modules/sort-app.js?");

/***/ }),

/***/ "./src/js/widgets/sort/widget.jsx.js":
/*!*******************************************!*\
  !*** ./src/js/widgets/sort/widget.jsx.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! analytics */ \"./src/js/components/analytics.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./src/libs/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-redux */ \"./src/libs/react-redux.js\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-dom */ \"./src/libs/react-dom.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var js_widgets_sort_redux_configure_store__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/widgets/sort/redux/configure-store */ \"./src/js/widgets/sort/redux/configure-store.js\");\n/* harmony import */ var js_widgets_sort_redux_modules_sort_app__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/widgets/sort/redux/modules/sort-app */ \"./src/js/widgets/sort/redux/modules/sort-app.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_widgets_sort_containers_sort_container__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! js/widgets/sort/containers/sort-container */ \"./src/js/widgets/sort/containers/sort-container.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Main App View\n *\n * This view is the entry point of the app, it will pass the\n * store down using a <provider></provider> higher-order component.\n *\n * All sub-components will automatically have `store` available via context\n */\n\nvar View = backbone__WEBPACK_IMPORTED_MODULE_1___default().View.extend({\n  initialize: function initialize(options) {\n    underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign(this, options);\n  },\n  render: function render() {\n    react_dom__WEBPACK_IMPORTED_MODULE_5___default().render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement((react_redux__WEBPACK_IMPORTED_MODULE_4___default().Provider), {\n      store: this.store\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(js_widgets_sort_containers_sort_container__WEBPACK_IMPORTED_MODULE_11__[\"default\"], null)), this.el);\n    return this;\n  },\n  destroy: function destroy() {\n    react_dom__WEBPACK_IMPORTED_MODULE_5___default().unmountComponentAtNode(this.el);\n  }\n});\n/**\n * Backbone widget which does the wiring between the react view and\n * the application\n */\n\nvar Widget = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_9__[\"default\"].extend({\n  /**\n   * Initialize the widget\n   */\n  initialize: function initialize() {\n    // create the store, using the configurator\n    this.store = (0,js_widgets_sort_redux_configure_store__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this); // create the view, passing in store\n\n    this.view = new View({\n      store: this.store\n    });\n    this.onSortChange = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].debounce(this.onSortChange, 500);\n    this.handleFeedback = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.handleFeedback, this);\n  },\n\n  /**\n   * Activate the widget\n   *\n   * @param {object} beehive\n   */\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n    this.activateWidget();\n    var pubsub = this.getPubSub();\n    pubsub.subscribe(pubsub.FEEDBACK, this.handleFeedback);\n  },\n\n  /**\n   * Handler that is called internally which will take the current state and\n   * update the current query's sort parameter.\n   *\n   * It will only replace the first entry in the sort (up to the first `,`)\n   *\n   * Finally it will start a new search using the updated sort param and the\n   * stored query.\n   */\n  onSortChange: function onSortChange() {\n    var pubsub = this.getPubSub();\n    var app = this.store.getState();\n    var sort = app.sort.id;\n    var dir = app.direction;\n    var query = app.query;\n    var newSort = sort + ' ' + dir; // try local app storage if we don't have one stored\n\n    if (underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isNull(query)) {\n      query = this.getBeeHive().getObject('AppStorage').getCurrentQuery();\n    } // play nice with the sort, don't destroy what's there\n    // only replace the first entry (primary sort)\n\n\n    if (!underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isUndefined(query.sort) && !underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isEmpty(query.sort)) {\n      var arr = query.sort[0].split(/,\\s?/).slice(1);\n      arr.unshift(newSort);\n      newSort = arr.join(', ');\n    } // don't do anything if we weren't able to find a query\n\n\n    if (query) {\n      query.sort = [newSort];\n      pubsub.publish(pubsub.NAVIGATE, 'search-page', {\n        q: new js_components_api_query__WEBPACK_IMPORTED_MODULE_8__[\"default\"](query)\n      });\n      (0,analytics__WEBPACK_IMPORTED_MODULE_2__[\"default\"])('send', 'event', 'interaction', 'sort-applied', newSort);\n    }\n  },\n\n  /**\n   * Called when the pubsub issues a feedback event.\n   * Watch for search cycle events, and if a new one starts, grab the query\n   * from it and disable the dropdown (prevents further updates, mid-cycle)\n   *\n   * Once the cycle is finished, for whatever reason, unlock the component.\n   *\n   * @param {ApiFeedback} feedback - the feedback object\n   */\n  handleFeedback: function handleFeedback(feedback) {\n    var dispatch = this.store.dispatch;\n    var setQuery = js_widgets_sort_redux_modules_sort_app__WEBPACK_IMPORTED_MODULE_7__[\"default\"].setQuery,\n        setSort = js_widgets_sort_redux_modules_sort_app__WEBPACK_IMPORTED_MODULE_7__[\"default\"].setSort,\n        setDirection = js_widgets_sort_redux_modules_sort_app__WEBPACK_IMPORTED_MODULE_7__[\"default\"].setDirection,\n        setLocked = js_widgets_sort_redux_modules_sort_app__WEBPACK_IMPORTED_MODULE_7__[\"default\"].setLocked;\n\n    switch (feedback.code) {\n      case js_components_api_feedback__WEBPACK_IMPORTED_MODULE_10__[\"default\"].CODES.SEARCH_CYCLE_STARTED:\n        {\n          var query = feedback && feedback.query && feedback.query.toJSON();\n\n          if (query) {\n            var sortStr = this.extractSort(query.sort[0]);\n            dispatch(setQuery(query));\n            dispatch(setSort(sortStr.sort, true));\n            dispatch(setDirection(sortStr.direction, true));\n            dispatch(setLocked(true));\n          }\n        }\n        break;\n\n      case js_components_api_feedback__WEBPACK_IMPORTED_MODULE_10__[\"default\"].CODES.SEARCH_CYCLE_PROGRESS:\n        {\n          dispatch(setLocked(true));\n        }\n        break;\n\n      case js_components_api_feedback__WEBPACK_IMPORTED_MODULE_10__[\"default\"].CODES.SEARCH_CYCLE_FAILED_TO_START:\n      case js_components_api_feedback__WEBPACK_IMPORTED_MODULE_10__[\"default\"].CODES.SEARCH_CYCLE_FINISHED:\n        {\n          dispatch(setLocked(false));\n        }\n    }\n  },\n\n  /**\n   * Splits a sort string into parts and then returns the first entry\n   * mapped to an object\n   *\n   * @param {string} sort - the string to break apart\n   * @returns {{sort: string, direction: string}}\n   */\n  extractSort: function extractSort(sort) {\n    // grab only the first sort and break it apart\n    var sortStr = sort.split(/,\\s?/)[0] || 'date desc';\n    sortStr = sortStr.split(' ');\n    return {\n      sort: sortStr[0],\n      direction: sortStr[1]\n    };\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (Widget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/sort/widget.jsx.js?");

/***/ }),

/***/ "./src/js/widgets/success/success_template.html":
/*!******************************************************!*\
  !*** ./src/js/widgets/success/success_template.html ***!
  \******************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"panel panel-default\\\">\\n  <div class=\\\"panel-heading\\\">\\n    <i class=\\\"icon-success fa-3x\\\" aria-hidden=\\\"true\\\"> </i> \"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":59},\"end\":{\"line\":3,\"column\":68}}}) : helper)))\n    + \"\\n  </div>\\n  <div class=\\\"panel-body\\\">\\n    <p>\"\n    + ((stack1 = ((helper = (helper = lookupProperty(helpers,\"message\") || (depth0 != null ? lookupProperty(depth0,\"message\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"message\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":7},\"end\":{\"line\":6,\"column\":20}}}) : helper))) != null ? stack1 : \"\")\n    + \"</p>\\n  </div>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/success/success_template.html?");

/***/ }),

/***/ "./src/js/widgets/success/view.js":
/*!****************************************!*\
  !*** ./src/js/widgets/success/view.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var hbs_js_widgets_success_success_template__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! hbs!js/widgets/success/success_template */ \"./src/js/widgets/success/success_template.html\");\n/* harmony import */ var hbs_js_widgets_success_success_template__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_success_success_template__WEBPACK_IMPORTED_MODULE_1__);\n\n\nvar SuccessView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  initialize: function initialize(options) {\n    _.extend(this, options);\n  },\n  title: 'Success!',\n  message: 'Check your email for further instructions.',\n  template: (hbs_js_widgets_success_success_template__WEBPACK_IMPORTED_MODULE_1___default()),\n  serializeData: function serializeData() {\n    return {\n      title: this.title,\n      message: this.message\n    };\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (SuccessView);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/success/view.js?");

/***/ }),

/***/ "./src/js/widgets/user_navbar/nav_template.html":
/*!******************************************************!*\
  !*** ./src/js/widgets/user_navbar/nav_template.html ***!
  \******************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \" class=\\\"active\\\" \";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<ul class=\\\"nav nav-pills user-pill-nav s-user-pill-nav\\\">\\n\\n    <li \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"page\") : depth0),\"libraries-page\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":8},\"end\":{\"line\":3,\"column\":70}}})) != null ? stack1 : \"\")\n    + \">\\n        <a href=\\\"#user/libraries\\\">\\n            <i class=\\\"fa fa-book\\\" aria-hidden=\\\"true\\\"></i> ADS Libraries\\n        </a>\\n    </li>\\n    <li \"\n    + ((stack1 = lookupProperty(helpers,\"compare\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"page\") : depth0),\"settings-page\",{\"name\":\"compare\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":8},\"end\":{\"line\":8,\"column\":69}}})) != null ? stack1 : \"\")\n    + \">\\n        <a href=\\\"#user/settings\\\"><i class=\\\"fa fa-cog\\\" aria-hidden=\\\"true\\\">\\n            </i> Settings\\n        </a>\\n    </li>\\n</ul>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/user_navbar/nav_template.html?");

/***/ }),

/***/ "./src/js/widgets/user_navbar/widget.js":
/*!**********************************************!*\
  !*** ./src/js/widgets/user_navbar/widget.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var hbs_js_widgets_user_navbar_nav_template__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! hbs!js/widgets/user_navbar/nav_template */ \"./src/js/widgets/user_navbar/nav_template.html\");\n/* harmony import */ var hbs_js_widgets_user_navbar_nav_template__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_user_navbar_nav_template__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_mixins_dependon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/mixins/dependon */ \"./src/js/mixins/dependon.js\");\n\n\n\nvar NavModel = Backbone.Model.extend({\n  defaults: function defaults() {\n    return {\n      page: undefined,\n      userName: undefined\n    };\n  }\n});\nvar NavView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  template: (hbs_js_widgets_user_navbar_nav_template__WEBPACK_IMPORTED_MODULE_1___default()),\n  modelEvents: {\n    change: 'render'\n  }\n});\nvar NavWidget = marionette__WEBPACK_IMPORTED_MODULE_0___default().Controller.extend({\n  initialize: function initialize(options) {\n    options = options || {};\n    this.model = new NavModel();\n    this.view = new NavView({\n      model: this.model\n    });\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n    var pubsub = beehive.getService('PubSub');\n\n    _.bindAll(this); // custom dispatchRequest function goes here\n\n\n    pubsub.subscribe(pubsub.PAGE_CHANGE, this.updateCurrentView);\n    pubsub.subscribe(pubsub.USER_ANNOUNCEMENT, this.updateUser);\n  },\n  updateCurrentView: function updateCurrentView(page) {\n    this.model.set('page', page);\n  },\n  updateUser: function updateUser(event, arg) {\n    var user = this.getBeeHive().getObject('User');\n\n    if (event == user.USER_SIGNED_IN) {\n      var userName = arg;\n\n      if (userName && userName.indexOf('@') > -1) {\n        userName = userName.split('@')[0];\n      }\n\n      this.model.set('user', userName);\n    } else if (event == user.USER_SIGNED_OUT) {\n      this.model.set('user', undefined);\n    }\n  },\n  render: function render() {\n    this.view.render();\n    return this.view.el;\n  }\n});\n\n_.extend(NavWidget.prototype, js_mixins_dependon__WEBPACK_IMPORTED_MODULE_2__[\"default\"].BeeHive);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (NavWidget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/user_navbar/widget.js?");

/***/ }),

/***/ "./src/js/widgets/user_settings/templates/api_key.html":
/*!*************************************************************!*\
  !*** ./src/js/widgets/user_settings/templates/api_key.html ***!
  \*************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"\\n            <p><i class=\\\"icon-loading\\\" aria-hidden=\\\"true\\\"></i> Loading...</p>\\n\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n        <div class=\\\"input-group\\\">\\n            <input type=\\\"text\\\" class=\\\"form-control\\\" aria-label=\\\"api key\\\" readonly value=\\\"\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"access_token\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.program(6, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":89},\"end\":{\"line\":13,\"column\":167}}})) != null ? stack1 : \"\")\n    + \"\\\" style=\\\"cursor:text\\\">\\n              <span class=\\\"input-group-btn\\\">\\n                <button class=\\\"btn btn-primary-faded\\\" type=\\\"submit\\\">Generate a new key</button>\\n              </span>\\n        </div><!-- /input-group -->\\n\\n        <div class=\\\"description\\\">\\n            <br/>\\n            <br/>\\n            <p> This API token allows you to access ADS data programmatically. For instance, to fetch the first few bibcodes for the query \\\"star\\\", make the following request: </p>\\n            <p>\\n                <code> curl -H 'Authorization: Bearer \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"access_token\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.program(8, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":54},\"end\":{\"line\":24,\"column\":122}}})) != null ? stack1 : \"\")\n    + \"' 'https://api.adsabs.harvard.edu/v1/search/query?q=star&fl=bibcode'</code>\\n            </p>\\n            <p>\\n                <i>(If you've generated a token, you can copy-paste the preceding line directly into your terminal)</i>\\n            </p>\\n            <p> Documentation on how to use the API is available on the <a href=\\\"https://github.com/adsabs/adsabs-dev-api#access-settings\\\"> ADS API Github repo.</a></p>\\n            <p> <b>Make sure to keep your API key secret to protect it from abuse.</b></p>\\n            <p> If your key has been exposed publically (say, by accidentally  being commited to a Github repo) you can generate a new one by clicking on the button above. </p>\\n        </div>\\n\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"access_token\") || (depth0 != null ? lookupProperty(depth0,\"access_token\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"access_token\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":109},\"end\":{\"line\":13,\"column\":125}}}) : helper)));\n},\"6\":function(container,depth0,helpers,partials,data) {\n    return \" No token currently exists \";\n},\"8\":function(container,depth0,helpers,partials,data) {\n    return \"[YOUR TOKEN HERE]\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"panel panel-default form-horizontal s-form-container\\\">\\n    <legend class=\\\"panel-heading\\\"> API Token\\n    </legend>\\n    <div class=\\\"panel-body\\\">\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"loading\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":8},\"end\":{\"line\":34,\"column\":15}}})) != null ? stack1 : \"\")\n    + \"\\n    </div>\\n\\n\\n</div>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/user_settings/templates/api_key.html?");

/***/ }),

/***/ "./src/js/widgets/user_settings/templates/change_email.html":
/*!******************************************************************!*\
  !*** ./src/js/widgets/user_settings/templates/change_email.html ***!
  \******************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <div class=\\\"error-block alert alert-danger\\\">Server Error: \"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"hasError\") || (depth0 != null ? lookupProperty(depth0,\"hasError\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"hasError\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":48,\"column\":62},\"end\":{\"line\":48,\"column\":74}}}) : helper)))\n    + \"</div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"panel panel-default s-form-container\\\">\\n  <legend class=\\\"panel-heading\\\">Change Email Address</legend>\\n  <form class=\\\"panel-body\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Current email address:&nbsp;&nbsp; </label>\\n      <p class=\\\"form-control-static\\\">\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"user\") || (depth0 != null ? lookupProperty(depth0,\"user\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(alias1,{\"name\":\"user\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":37},\"end\":{\"line\":6,\"column\":45}}}) : helper)))\n    + \"</p>\\n    </div>\\n    <div class=\\\"form-group has-feedback\\\">\\n      <label for=\\\"email\\\" class=\\\"control-label\\\"> New email address </label>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n      <input type=\\\"email\\\" class=\\\"form-control\\\" name=\\\"email\\\" id=\\\"email\\\" />\\n    </div>\\n\\n    <div class=\\\"form-group has-feedback\\\">\\n      <label for=\\\"confirm-email\\\" class=\\\"control-label\\\">\\n        Confirm new email address\\n      </label>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n      <input\\n        type=\\\"email\\\"\\n        class=\\\"form-control\\\"\\n        name=\\\"confirm-email\\\"\\n        id=\\\"confirm-email\\\"\\n      />\\n    </div>\\n\\n    <div class=\\\"form-group has-feedback\\\">\\n      <label for=\\\"password\\\" class=\\\"control-label\\\"> Password </label>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n      <input\\n        type=\\\"password\\\"\\n        class=\\\"form-control\\\"\\n        name=\\\"password\\\"\\n        id=\\\"password\\\"\\n      />\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <div>\\n        You will be logged out of your account until you click the link from the\\n        verification email.\\n      </div>\\n      <button class=\\\"btn btn-primary-faded initial-submit\\\" type=\\\"submit\\\">\\n        Change my email\\n      </button>\\n    </div>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"hasError\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":47,\"column\":4},\"end\":{\"line\":49,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"  </form>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/user_settings/templates/change_email.html?");

/***/ }),

/***/ "./src/js/widgets/user_settings/templates/change_password.html":
/*!*********************************************************************!*\
  !*** ./src/js/widgets/user_settings/templates/change_password.html ***!
  \*********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"panel panel-default s-form-container\\\">\\n  <legend class=\\\"panel-heading\\\"> Change Your Password</legend>\\n  <form class=\\\"panel-body\\\">\\n    <div class=\\\"form-group has-feedback\\\">\\n      <label for=\\\"old_password\\\" class=\\\"control-label\\\"> Current password </label>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n      <input type=\\\"password\\\" class=\\\"form-control\\\" name=\\\"old_password\\\" id=\\\"old_password\\\">\\n    </div>\\n    <div class=\\\"form-group has-feedback\\\">\\n      <label for=\\\"new_password1\\\" class=\\\"control-label\\\"> New password </label>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n      <div class=\\\"s-user-help\\\">Passwords should be at least eight characters and include at least one number and one\\n        capital letter.\\n      </div>\\n      <input type=\\\"password\\\" class=\\\"form-control\\\" name=\\\"new_password1\\\" id=\\\"new_password1\\\">\\n    </div>\\n    <div class=\\\"form-group has-feedback\\\">\\n      <label for=\\\"new_password2\\\" class=\\\"control-label\\\"> Retype new password </label>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n      <input type=\\\"password\\\" class=\\\"form-control\\\" name=\\\"new_password2\\\" id=\\\"new_password2\\\">\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <button type=\\\"submit\\\" class=\\\"btn btn-primary-faded\\\">Submit</button>\\n      <span class=\\\"help-block no-show s-help-block\\\"></span>\\n    </div>\\n  </form>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/user_settings/templates/change_password.html?");

/***/ }),

/***/ "./src/js/widgets/user_settings/templates/delete_account.html":
/*!********************************************************************!*\
  !*** ./src/js/widgets/user_settings/templates/delete_account.html ***!
  \********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"panel panel-default s-form-container\\\">\\n    <legend class=\\\"panel-heading\\\">Delete Account\\n    </legend>\\n    <div class=\\\"panel-body\\\">\\n        <div class=\\\"form-group\\\">\\n            <p> This action cannot be reversed.\\n            </p>\\n            <div>\\n                <button type=\\\"button\\\" class=\\\"btn btn-danger\\\" id=\\\"delete-account\\\">Delete my account</button>\\n            </div>\\n        </div>\\n\\n    </div>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/user_settings/templates/delete_account.html?");

/***/ }),

/***/ "./src/js/widgets/user_settings/widget.js":
/*!************************************************!*\
  !*** ./src/js/widgets/user_settings/widget.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var js_mixins_form_view_functions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/mixins/form_view_functions */ \"./src/js/mixins/form_view_functions.js\");\n/* harmony import */ var js_widgets_success_view__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/widgets/success/view */ \"./src/js/widgets/success/view.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var hbs_js_widgets_user_settings_templates_api_key__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! hbs!js/widgets/user_settings/templates/api_key */ \"./src/js/widgets/user_settings/templates/api_key.html\");\n/* harmony import */ var hbs_js_widgets_user_settings_templates_api_key__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_user_settings_templates_api_key__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var hbs_js_widgets_user_settings_templates_change_email__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! hbs!js/widgets/user_settings/templates/change_email */ \"./src/js/widgets/user_settings/templates/change_email.html\");\n/* harmony import */ var hbs_js_widgets_user_settings_templates_change_email__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_user_settings_templates_change_email__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var hbs_js_widgets_user_settings_templates_change_password__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! hbs!js/widgets/user_settings/templates/change_password */ \"./src/js/widgets/user_settings/templates/change_password.html\");\n/* harmony import */ var hbs_js_widgets_user_settings_templates_change_password__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_user_settings_templates_change_password__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var hbs_js_widgets_user_settings_templates_delete_account__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! hbs!js/widgets/user_settings/templates/delete_account */ \"./src/js/widgets/user_settings/templates/delete_account.html\");\n/* harmony import */ var hbs_js_widgets_user_settings_templates_delete_account__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_user_settings_templates_delete_account__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var backbone_validation__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! backbone-validation */ \"./src/libs/backbone-validation.js\");\n/* harmony import */ var backbone_validation__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(backbone_validation__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var backbone_stickit__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! backbone.stickit */ \"./src/libs/backbone.stickit.js\");\n/* harmony import */ var backbone_stickit__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(backbone_stickit__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! bootstrap */ \"./src/libs/bootstrap/bootstrap.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_11__);\n\n\n\n\n\n\n\n\n\n\n\n\nvar passwordRegex = /(?=.*\\d)(?=.*[a-zA-Z]).{5,}/;\nvar FormView;\nvar FormModel;\nFormView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  activateValidation: js_mixins_form_view_functions__WEBPACK_IMPORTED_MODULE_2__[\"default\"].activateValidation,\n  checkValidationState: js_mixins_form_view_functions__WEBPACK_IMPORTED_MODULE_2__[\"default\"].checkValidationState,\n  triggerSubmit: js_mixins_form_view_functions__WEBPACK_IMPORTED_MODULE_2__[\"default\"].triggerSubmit,\n  modelEvents: {\n    change: 'checkValidationState'\n  },\n  events: {\n    'click button[type=submit]': 'triggerSubmit'\n  }\n});\nFormModel = Backbone.Model.extend({\n  isValidSafe: js_mixins_form_view_functions__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isValidSafe,\n  reset: js_mixins_form_view_functions__WEBPACK_IMPORTED_MODULE_2__[\"default\"].reset\n});\nvar ChangeEmailView;\nvar ChangeEmailModel;\nChangeEmailModel = FormModel.extend({\n  validation: {\n    email: {\n      required: true,\n      pattern: 'email',\n      msg: '(A valid email is required)'\n    },\n    'confirm-email': {\n      required: true,\n      pattern: 'email',\n      equalTo: 'email',\n      msg: '(This email must be valid and match the one above)'\n    },\n    password: {\n      required: true,\n      pattern: passwordRegex,\n      msg: '(A valid password is required)'\n    }\n  }\n});\nChangeEmailView = FormView.extend({\n  template: (hbs_js_widgets_user_settings_templates_change_email__WEBPACK_IMPORTED_MODULE_6___default()),\n  className: 'change-email',\n  onShow: function onShow() {\n    var _this = this;\n\n    setTimeout(function () {\n      return _this.model.set('hasError', null);\n    }, 10000);\n  },\n  triggerSubmit: function triggerSubmit(e) {\n    e.preventDefault();\n    this.model.unset('user');\n    this.listenToOnce(this.model, 'change:hasError', function () {\n      this.resetPage('email');\n    });\n    return js_mixins_form_view_functions__WEBPACK_IMPORTED_MODULE_2__[\"default\"].triggerSubmit.apply(this, arguments);\n  },\n  resetPage: function resetPage(page) {\n    this.trigger('resetpage', page);\n  },\n  // for the view\n  // checks whether to show a green submit button on model change\n  checkValidationState: function checkValidationState() {\n    // hide possible submit button message\n    if (this.model.isValidSafe()) {\n      // don't go for actual submit button, that is on the modal\n      this.$('button.initial-submit').prev('.help-block').html('').addClass('no-show');\n    }\n  },\n  events: {\n    'click button[type=submit]': 'triggerSubmit'\n  },\n  modelEvents: {\n    'change:hasError': 'render'\n  },\n  bindings: {\n    'input[name=email]': {\n      observe: 'email',\n      setOptions: {\n        validate: true\n      }\n    },\n    'input[name=confirm-email]': {\n      observe: 'confirm-email',\n      setOptions: {\n        validate: true\n      }\n    },\n    'input[name=password]': {\n      observe: 'password',\n      setOptions: {\n        validate: true\n      }\n    }\n  },\n  onRender: function onRender() {\n    this.activateValidation();\n  }\n});\nvar ChangePasswordView;\nvar ChangePasswordModel;\nChangePasswordModel = FormModel.extend({\n  validation: {\n    old_password: {\n      required: true,\n      pattern: passwordRegex,\n      msg: '(A valid password is required)'\n    },\n    new_password1: {\n      required: true,\n      pattern: passwordRegex,\n      msg: '(A valid password is required)'\n    },\n    new_password2: {\n      required: true,\n      equalTo: 'new_password1',\n      pattern: passwordRegex,\n      msg: '(The passwords do not match)'\n    }\n  }\n});\nChangePasswordView = FormView.extend({\n  template: (hbs_js_widgets_user_settings_templates_change_password__WEBPACK_IMPORTED_MODULE_7___default()),\n  className: 'change-password',\n  onRender: function onRender() {\n    this.activateValidation();\n  },\n  bindings: {\n    'input[name=old_password]': {\n      observe: 'old_password',\n      setOptions: {\n        validate: true\n      }\n    },\n    'input[name=new_password1]': {\n      observe: 'new_password1',\n      setOptions: {\n        validate: true\n      }\n    },\n    'input[name=new_password2]': {\n      observe: 'new_password2',\n      setOptions: {\n        validate: true\n      }\n    }\n  }\n});\nvar ChangeTokenView;\nvar ChangeTokenModel;\nChangeTokenModel = Backbone.Model.extend({\n  defaults: function defaults() {\n    return {\n      access_token: undefined,\n      loading: false\n    };\n  }\n});\nChangeTokenView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  template: (hbs_js_widgets_user_settings_templates_api_key__WEBPACK_IMPORTED_MODULE_5___default()),\n  className: 'change-token',\n  triggerSubmit: js_mixins_form_view_functions__WEBPACK_IMPORTED_MODULE_2__[\"default\"].triggerSubmit,\n  events: {\n    'click button[type=submit]': 'triggerSubmit'\n  },\n  // a promise could put the token in the model\n  // after render has already been called by \"show\"\n  modelEvents: {\n    'change:access_token': 'render',\n    'change:loading': 'render'\n  }\n});\nvar DeleteAccountView;\nvar DeleteAccountModel;\nDeleteAccountModel = FormModel.extend({});\nDeleteAccountView = FormView.extend({\n  template: (hbs_js_widgets_user_settings_templates_delete_account__WEBPACK_IMPORTED_MODULE_8___default()),\n  className: 'delete-account',\n  events: {\n    'click #delete-account': 'confirm'\n  },\n  confirm: function (_confirm) {\n    function confirm() {\n      return _confirm.apply(this, arguments);\n    }\n\n    confirm.toString = function () {\n      return _confirm.toString();\n    };\n\n    return confirm;\n  }(function () {\n    var msg = 'This action cannot be reversed\\n\\nAre you sure?';\n\n    if (confirm(msg)) {\n      js_mixins_form_view_functions__WEBPACK_IMPORTED_MODULE_2__[\"default\"].triggerSubmit.call(this);\n    }\n  })\n});\nvar UserSettingsView;\nvar UserSettings;\nUserSettingsView = marionette__WEBPACK_IMPORTED_MODULE_0___default().LayoutView.extend({\n  template: function template() {\n    return '<div class=\"content-container\"></div>';\n  },\n  className: 's-user-settings s-form-widget',\n  regions: {\n    content: '.content-container'\n  },\n  events: {\n    'click .user-pill-nav a:not(.dropdown-toggle)': 'stopPropagation'\n  },\n  stopPropagation: function stopPropagation() {\n    return false;\n  },\n  setSubView: function setSubView(subView) {\n    var config = marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'config');\n    var viewModel = new config[subView].model();\n    var viewToShow = new config[subView].view({\n      model: viewModel\n    });\n    var that = this; // cache the subView\n\n    this.model.set('subView', subView);\n\n    if (subView == 'token') {\n      if (this.model.get('access_token')) {\n        viewModel.set('access_token', this.model.get('access_token'));\n      } else {\n        viewModel.set('loading', true);\n        this.getToken().done(function (data) {\n          // keep for next time\n          that.model.set('access_token', data.access_token); // set in current viewmodel\n\n          viewModel.set('access_token', data.access_token);\n          viewModel.set('loading', false);\n        });\n      }\n    } else if (subView == 'email') {\n      viewModel.set('user', this.model.get('user'));\n    }\n\n    this.listenToOnce(viewToShow, 'submit-form', this.forwardSubmit);\n    this.listenToOnce(viewToShow, 'resetpage', this.resetPage);\n    this.content.show(viewToShow);\n  },\n  // special success views\n  showPasswordSuccessView: function showPasswordSuccessView() {\n    this.content.show(new js_widgets_success_view__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n      title: 'Password Changed',\n      message: 'Next time you log in, please use your new password'\n    }));\n  },\n  forwardSubmit: function forwardSubmit(model) {\n    this.trigger('submit-form', model);\n  },\n  resetPage: function resetPage(page) {\n    // grab current model\n    var model = this.content.currentView.model.toJSON();\n    this.setSubView(page); // update the new view's model\n\n    this.content.currentView.model.set(model);\n  }\n});\nvar UserSettingsModel = Backbone.Model.extend({\n  defaults: function defaults() {\n    return {\n      user: undefined,\n      token: undefined,\n      subView: undefined\n    };\n  }\n});\nUserSettings = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_1__[\"default\"].extend({\n  config: {\n    email: {\n      view: ChangeEmailView,\n      model: ChangeEmailModel\n    },\n    password: {\n      view: ChangePasswordView,\n      model: ChangePasswordModel\n    },\n    token: {\n      view: ChangeTokenView,\n      model: ChangeTokenModel\n    },\n    delete: {\n      view: DeleteAccountView,\n      model: DeleteAccountModel\n    }\n  },\n  initialize: function initialize(options) {\n    options = options || {};\n    this.model = new UserSettingsModel();\n    this.view = new UserSettingsView({\n      model: this.model,\n      config: this.config\n    });\n    js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_1__[\"default\"].prototype.initialize.apply(this, arguments);\n  },\n  setSubView: function setSubView(subView) {\n    if (_.isArray(subView)) {\n      // XXX:figure out why array\n      subView = subView[0];\n    } // call this regardless of whether subView changed\n\n\n    this.view.setSubView(subView);\n  },\n  activate: function activate(beehive) {\n    var that = this;\n    this.setBeeHive(beehive);\n    var pubsub = beehive.getService('PubSub');\n\n    _.bindAll(this, ['handleUserAnnouncement']);\n\n    pubsub.subscribe(pubsub.USER_ANNOUNCEMENT, this.handleUserAnnouncement);\n\n    this.view.getToken = function () {\n      return that.getBeeHive().getObject('User').getToken();\n    };\n\n    this.model.set('user', this.getBeeHive().getObject('User').getUserName());\n  },\n  viewEvents: {\n    'submit-form': 'submitForm'\n  },\n  handleUserAnnouncement: function handleUserAnnouncement(announcement, arg1) {\n    var user = this.getBeeHive().getObject('User');\n\n    if (announcement == user.USER_SIGNED_IN) {\n      this.model.set('user', arg1);\n    } else if (announcement == user.USER_SIGNED_OUT) {\n      this.model.clear();\n    }\n  },\n  submitForm: function submitForm(model) {\n    var User = this.getBeeHive().getObject('User');\n    var that = this;\n\n    if (model instanceof this.config.token.model) {\n      User.generateToken().done(function (data) {\n        that.model.set('access_token', data.access_token); // show new token view with new token\n\n        that.setSubView('token');\n      });\n    } else if (model instanceof this.config.delete.model) {\n      User.deleteAccount();\n    } else if (model instanceof this.config.email.model) {\n      User.changeEmail(model.toJSON()).fail(function (err) {\n        if (err && err.responseJSON) {\n          model.set('hasError', err.responseJSON.message);\n        }\n      });\n    } else if (model instanceof this.config.password.model) {\n      User.changePassword(model.toJSON()).done(function () {\n        that.view.showPasswordSuccessView();\n      });\n    }\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (UserSettings);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/user_settings/widget.js?");

/***/ }),

/***/ "./src/js/widgets/widget_states.js":
/*!*****************************************!*\
  !*** ./src/js/widgets/widget_states.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar States = {\n  READY: 0,\n  LOADING: 1,\n  IDLE: 2,\n  FAILED: 3\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (States);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/widget_states.js?");

/***/ }),

/***/ "./src/js/widgets/wordcloud/templates/selected-list-template.html":
/*!************************************************************************!*\
  !*** ./src/js/widgets/wordcloud/templates/selected-list-template.html ***!
  \************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" \"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"selectedWords\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":26},\"end\":{\"line\":10,\"column\":13}}})) != null ? stack1 : \"\")\n    + \" \";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    return \"\\n\\n    <li>\\n      <span class=\\\"selected-word\\\">\"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + \"</span> <i class=\\\"close\\\">&times;</i>\\n    </li>\\n\\n    \";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    return \"\\n\\n    <li>Click on a term to add it to this list.</li>\\n    <li>Click again on the term to remove it.</li>\\n\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"print-hidden\\\">\\n  <h5>Selected Terms:</h5>\\n  <ul class=\\\"vis-select-list s-vis-select-list\\\">\\n    \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"selectedWords\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(4, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":4},\"end\":{\"line\":15,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"  </ul>\\n\\n  <button class=\\\"btn btn-info apply-vis-facet\\\">Apply Filter to Search</button>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/wordcloud/templates/selected-list-template.html?");

/***/ }),

/***/ "./src/js/widgets/wordcloud/templates/wordcloud-template.html":
/*!********************************************************************!*\
  !*** ./src/js/widgets/wordcloud/templates/wordcloud-template.html ***!
  \********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = container.invokePartial(__webpack_require__(/*! ../../../wraps/widget/loading/template.html */ \"./src/js/wraps/widget/loading/template.html\"),depth0,{\"name\":\"js/wraps/widget/loading/template\",\"hash\":{\"hideCloseButton\":true,\"widgetLoadingSize\":\"medium\"},\"data\":data,\"indent\":\"      \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\");\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \"    <div style=\\\"position:relative\\\">\\n        <svg id=\\\"wordcloud-svg\\\" viewBox=\\\"0 0 1000 600\\\" class=\\\"s-wordcloud-svg\\\">\\n        </svg>\\n    </div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div>\\n<div class=\\\"col-xs-12 s-explore-close-container\\\">\\n    <div class=\\\"s-large-close close-widget close\\\">x</div>\\n</div>\\n<header class=\\\"s-network-title\\\">\\n    <h3>Word Cloud</h3>\\n    <button class=\\\"btn btn-link download s-download hidden\\\">\\n        <i class=\\\"fa fa-download fa-2x\\\" aria-hidden=\\\"true\\\" title=\\\"download data in csv\\\"></i>\\n        <span class=\\\"sr-only\\\">download data in csv</span>\\n    </button>\\n</header>\\n</div>\\n\\n<div class=\\\"col-xs-11 col-sm-2\\\" id=\\\"wordcloud-controlpanel\\\">\\n\\n    <div>\\n        This visualization shows you unique and frequent words from\\n        a set of the top 100 search results.\\n        <br/>\\n        <b><a href=\\\"/help/actions/visualize#word-cloud\\\" target=\\\"_blank\\\" rel=\\\"noreferrer noopener\\\">\\n            Learn more about the concept cloud</a></b>\\n        <br/>\\n        <br/>\\n    </div>\\n\\n    <div class=\\\"s-vis-item-format clearfix print-hidden\\\"><span style=\\\"font-size:14px\\\"> Recalculate Cloud</span><br/><br/>\\n        <div id= \\\"ticker\\\">\\n\\n        </div>\\n        <div id=\\\"word-choice\\\">\\n\\n        </div>\\n        <div class=\\\"s-wordcloud-tick-container\\\">\\n            <span style=\\\"display:inline-block;margin-left: 0%;\\\">|</span>\\n            <span style=\\\"display:inline-block;margin-left: 24%;\\\">|</span>\\n            <span style=\\\"display:inline-block;margin-left: 23%;\\\">|</span>\\n            <span style=\\\"display:inline-block;margin-left: 22%;\\\">|</span>\\n            <span style=\\\"display:block;float:right;\\\">|</span>\\n        </div>\\n        <div class=\\\"s-wordcloud-slider-labels\\\"><span class=\\\"pull-left\\\">Unique</span><span class=\\\"pull-right\\\">Frequent</span></div>\\n\\n    </div>\\n    <div class=\\\"selected-word-list\\\">\\n\\n    </div>\\n</div>\\n\\n\\n\\n<div class=\\\"s-wordcloud-container col-xs-12 col-sm-9\\\" id=\\\"wordcloud-container\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"loading\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":51,\"column\":4},\"end\":{\"line\":58,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"</div>\\n<a id=\\\"download-link\\\" class=\\\"hidden\\\"></a> \\n</div>\\n\";\n},\"usePartial\":true,\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/wordcloud/templates/wordcloud-template.html?");

/***/ }),

/***/ "./src/js/widgets/wordcloud/widget.js":
/*!********************************************!*\
  !*** ./src/js/widgets/wordcloud/widget.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! backbone */ \"./src/libs/backbone.js\");\n/* harmony import */ var backbone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! d3 */ \"./src/libs/d3.js\");\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(d3__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var js_components_api_request__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/components/api_request */ \"./src/js/components/api_request.js\");\n/* harmony import */ var js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/widgets/base/base_widget */ \"./src/js/widgets/base/base_widget.js\");\n/* harmony import */ var hbs_js_widgets_wordcloud_templates_wordcloud_template__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! hbs!js/widgets/wordcloud/templates/wordcloud-template */ \"./src/js/widgets/wordcloud/templates/wordcloud-template.html\");\n/* harmony import */ var hbs_js_widgets_wordcloud_templates_wordcloud_template__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_wordcloud_templates_wordcloud_template__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var hbs_js_widgets_wordcloud_templates_selected_list_template__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! hbs!js/widgets/wordcloud/templates/selected-list-template */ \"./src/js/widgets/wordcloud/templates/selected-list-template.html\");\n/* harmony import */ var hbs_js_widgets_wordcloud_templates_selected_list_template__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_wordcloud_templates_selected_list_template__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js/components/api_query_updater */ \"./src/js/components/api_query_updater.js\");\n/* harmony import */ var js_components_api_query__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! js/components/api_query */ \"./src/js/components/api_query.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var jquery_ui__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! jquery-ui */ \"./src/libs/jquery-ui.js\");\n/* harmony import */ var jquery_ui__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(jquery_ui__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! bootstrap */ \"./src/libs/bootstrap/bootstrap.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var d3_cloud__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! d3-cloud */ \"./src/libs/d3-cloud.js\");\n/* harmony import */ var d3_cloud__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(d3_cloud__WEBPACK_IMPORTED_MODULE_14__);\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar helpText = '<p>This word cloud allows you to view interesting words from the titles and abstracts of your search results.</p>' + '<p> Move the slider towards <strong> Frequent</strong> to view a word cloud that is simply composed of the words that appeared most' + \" frequently in your results. (This word cloud is likely to feature generic terms like 'observations' prominently.) </p> <p>Move the slider towards\" + ' <strong>Unique</strong> to see a word cloud that shows words that appeared in your results but which appear very rarely in the rest of the ADS corpus.</p>' + \"<p>To facet your ADS search, select words from the word cloud and click the 'Apply Filter to Search' button.</p>\";\nvar ListModel = backbone__WEBPACK_IMPORTED_MODULE_1___default().Model.extend({\n  initialize: function initialize() {\n    this.on('selected', function (name) {\n      this.add(name);\n    });\n    this.on('unselected', function (name) {\n      this.remove(name);\n    });\n  },\n  add: function add(word) {\n    this.get('selectedWords').push(word);\n    this.trigger('userChange:selectedWords', word);\n  },\n  remove: function remove(word) {\n    var word = word.trim();\n\n    var l = _.without(this.get('selectedWords'), word);\n\n    this.set('selectedWords', l);\n    this.trigger('userChange:selectedWords', word);\n  },\n  reset: function reset() {\n    this.set('selectedWords', []);\n  },\n  defaults: {\n    selectedWords: []\n  }\n});\nvar ListView = backbone__WEBPACK_IMPORTED_MODULE_1___default().View.extend({\n  initialize: function initialize(options) {\n    options = options || {};\n    this.model = new ListModel();\n    this.listenTo(this.model, 'userChange:selectedWords', this.render);\n  },\n  template: (hbs_js_widgets_wordcloud_templates_selected_list_template__WEBPACK_IMPORTED_MODULE_7___default()),\n  render: function render() {\n    this.$el.html(this.template(this.model.toJSON()));\n    return this;\n  },\n  events: {\n    'click .close': 'removeWord',\n    'click .apply-vis-facet': 'submitFacet'\n  },\n  removeWord: function removeWord(e) {\n    var word = jquery__WEBPACK_IMPORTED_MODULE_0___default()(e.target).parent().find('.selected-word').text();\n    this.model.remove(word);\n  },\n  submitFacet: function submitFacet() {\n    // only trigger event if there is at least one word selected\n    if (this.model.get('selectedWords').length) {\n      this.trigger('submitFacet');\n    }\n  }\n});\nvar WordCloudView = marionette__WEBPACK_IMPORTED_MODULE_2___default().ItemView.extend({\n  className: 's-wordcloud-widget clearfix',\n  events: {\n    'click .close-widget': 'signalCloseWidget',\n    'click .download': 'signalDownload'\n  },\n  initialize: function initialize(options) {\n    options = options || {};\n    this.listView = options.listView;\n    this.listenTo(this.model, 'change:processedWordList', this.onProcessedWordChange);\n    this.listenTo(this.listView.model, 'userChange:selectedWords', this.toggleHighlight);\n  },\n  signalCloseWidget: function signalCloseWidget() {\n    this.trigger('close-widget');\n  },\n  signalDownload: function signalDownload() {\n    this.trigger('download');\n  },\n  toggleHighlight: function toggleHighlight(word) {\n    var w = word.trim();\n    d3__WEBPACK_IMPORTED_MODULE_3___default().selectAll(this.$('text')).filter(function () {\n      if (this.textContent.trim() == w) {\n        var d3This = d3__WEBPACK_IMPORTED_MODULE_3___default().select(this);\n        d3This.classed('selected', !d3This.classed('selected'));\n      }\n    });\n  },\n  template: (hbs_js_widgets_wordcloud_templates_wordcloud_template__WEBPACK_IMPORTED_MODULE_6___default()),\n  render: function render() {\n    this.$el.html(hbs_js_widgets_wordcloud_templates_wordcloud_template__WEBPACK_IMPORTED_MODULE_6___default()({\n      helpText: helpText,\n      loading: this.model.get('processedWordList').length <= 0\n    }));\n    this.listView.setElement(this.$('.selected-word-list')).render(); // add popover listener\n\n    this.$('.icon-help').popover({\n      trigger: 'hover',\n      placement: 'right',\n      html: true\n    });\n    return this;\n  },\n  onProcessedWordChange: function onProcessedWordChange() {\n    this.render(); // prevents word cloud from drawing if no information\n\n    if (this.model.get('processedWordList').length > 0) {\n      this.buildSlider();\n      this.buildCloudLayout();\n    }\n  },\n  buildCloudLayout: function buildCloudLayout() {\n    d3__WEBPACK_IMPORTED_MODULE_3___default().layout.cloud().size([1000, 600]).words(this.model.get('processedWordList')).padding(3).rotate(function () {\n      return 0;\n    }).font('Arial').fontSize(function (d) {\n      return d.size;\n    }).on('end', _.bind(this.draw, this)).start();\n  },\n  buildSlider: function buildSlider() {\n    var that = this;\n    this.$('#word-choice').slider({\n      value: that.model.get('currentSliderVal'),\n      min: 1,\n      max: 5,\n      step: 1,\n      slide: function slide(event, ui) {\n        that.model.set({\n          currentSliderVal: ui.value\n        });\n      },\n      create: function create(event) {\n        jquery__WEBPACK_IMPORTED_MODULE_0___default()('a', event.target).attr('href', 'javascript:void(0)').attr('aria-label', 'slider handle');\n      }\n    });\n  },\n  draw: function draw() {\n    var that = this;\n    var renderVals = this.model.get('renderVals');\n    var height = 600;\n    var width = 1000;\n    var svg = d3__WEBPACK_IMPORTED_MODULE_3___default().select(this.$('#wordcloud-svg')[0]);\n    var words = this.model.get('processedWordList'); // set up code, only runs the first time\n\n    if (!this.$('#words-group').length) {\n      var g = svg.attr('aria-label', 'wordcloud chart').append('g').attr('id', 'words-group').attr('width', width).attr('height', height).attr('transform', function () {\n        return 'translate(' + width / 2 + ' ' + height / 2 + ')';\n      }); // using event delegation for click events\n      // this seems to reduce time spent rendering\n\n      svg[0][0].addEventListener('click', function (e) {\n        var classList = e.target.classList; // only interested in wordcloud text elements\n\n        if (!classList.contains('s-wordcloud-text')) {\n          return;\n        }\n\n        if (!classList.contains('selected')) {\n          that.listView.model.trigger('selected', e.target.textContent);\n        } else {\n          that.listView.model.trigger('unselected', e.target.textContent);\n        }\n      });\n    } else {\n      g = d3__WEBPACK_IMPORTED_MODULE_3___default().select(this.$('#wordcloud-svg')[0]).select('#words-group');\n    }\n\n    var text = g.selectAll('text').data(words, function (d) {\n      return d.text;\n    });\n    var selectedWords = this.listView.model.get('selectedWords'); // enter selection\n\n    text.enter().append('text').classed('s-wordcloud-text', true).text(function (d) {\n      return d.text;\n    }).style('fill', function (d, i) {\n      return renderVals.fill(d.origSize);\n    }) // has this element been selected?\n    .classed('selected', function (d, i) {\n      if (_.contains(selectedWords, d.text)) {\n        return true;\n      }\n    }).attr('transform', function (d, i) {\n      // split into 4 groups to come from 4 diff directions\n      if (i < 15) {\n        return 'translate(' + [Math.random() * width, -height / 2] + ')';\n      }\n\n      if (i < 30) {\n        return 'translate(' + [Math.random() * width, +height / 2] + ')';\n      }\n\n      if (i < 45) {\n        return 'translate(' + [-width / 2, +Math.random() * height] + ')';\n      }\n\n      return 'translate(' + [width / 2, -Math.random() * height] + ')';\n    }); // exit selection\n\n    text.exit().style('opacity', 0).remove();\n    var that = this; // update selection\n\n    text.attr('font-size', function (d) {\n      return d.size;\n    }).style('fill', function (d, i) {\n      return renderVals.fill(d.origSize);\n    }).transition().duration(1000).attr('transform', function (d) {\n      return 'translate(' + [d.x, d.y] + ')';\n    });\n    this.$('.download').removeClass('hidden');\n  }\n});\nvar WordCloudModel = backbone__WEBPACK_IMPORTED_MODULE_1___default().Model.extend({\n  initialize: function initialize() {\n    var _this = this;\n\n    // if we have data, move along to build word model, otherwise reset\n    this.on('change:tfidfData', function (model) {\n      return model.has('tfidfData') ? _this.buildWCDict() : _this.reset(false);\n    });\n    this.on('change:currentSliderVal', this.buildWCDict);\n  },\n  defaults: {\n    // raw data\n    tfidfData: undefined,\n    currentSliderVal: 3,\n    // this is what the view uses to render a cloud\n    processedWordList: [],\n    renderVals: {\n      fill: undefined,\n      glowScale: undefined,\n      blur: undefined\n    },\n    // is this the right place to put this?\n    colorRange: ['#80E6FF', '#7575FF', '#7575FF', '#47008F'],\n    sliderRange: {\n      1: [1, 0],\n      2: [0.75, 0.25],\n      3: [0.5, 0.5],\n      4: [0.25, 0.75],\n      5: [0, 1]\n    }\n  },\n  reset: function reset() {\n    var silent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.set(this.defaults, {\n      silent: silent\n    });\n  },\n  buildWCDict: function buildWCDict() {\n    var dict;\n    var numWords;\n    var meanTF;\n    var meanIDF;\n    var wordDict;\n    var min;\n    var max;\n    var sliderRange;\n    var currentSliderVal;\n    var freq;\n    var idf;\n    var modifiedVal;\n    var wordList;\n    var renderVals;\n    dict = this.get('tfidfData');\n    numWords = _.size(dict);\n    meanTF = _.reduce(_.map(_.values(dict), function (x) {\n      return x.total_occurrences;\n    }), function (m, n) {\n      return m + n;\n    }, 0) / numWords;\n    meanIDF = _.reduce(_.map(_.values(dict), function (x) {\n      if (x.idf) {\n        return x.idf;\n      }\n\n      return 0;\n    }), function (m, n) {\n      return m + n;\n    }, 0) / numWords;\n    sliderRange = this.get('sliderRange');\n    currentSliderVal = this.get('currentSliderVal');\n    wordDict = _.map(dict, function (val, key) {\n      freq = val.total_occurrences / meanTF;\n      idf = val.idf / meanIDF;\n      modifiedVal = sliderRange[currentSliderVal][0] * idf + sliderRange[currentSliderVal][1] * freq; // some stuff might be NaN, so do || 0\n\n      return [key, modifiedVal || 0];\n    }); // sort to get 50 top candidates\n\n    wordDict = _.last(_.sortBy(wordDict, function (l) {\n      return l[1];\n    }), 50);\n    wordDict = _.object(wordDict);\n    min = _.min(_.values(wordDict));\n    max = _.max(_.values(wordDict));\n    wordList = [];\n    renderVals = {};\n    renderVals.fill = d3__WEBPACK_IMPORTED_MODULE_3___default().scale.log().domain([min, max]);\n    renderVals.fill.domain([0, 0.25, 0.5, 0.75, 1].map(renderVals.fill.invert)).range(this.get('colorRange')).clamp(true);\n    var pixelScale = d3__WEBPACK_IMPORTED_MODULE_3___default().scale.log().domain([min, max]).range([30, 70]);\n\n    for (var entry in wordDict) {\n      wordList.push({\n        text: entry,\n        size: pixelScale(wordDict[entry]),\n        select: false,\n        origSize: wordDict[entry]\n      });\n    }\n\n    this.set('renderVals', renderVals);\n    this.set('processedWordList', wordList);\n    this.set('downloadableData', dict);\n  }\n});\nvar WordCloudWidget = js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_5__[\"default\"].extend({\n  initialize: function initialize(options) {\n    options = options || {};\n    this.listView = new ListView();\n    this.model = new WordCloudModel();\n    this.view = new WordCloudView({\n      model: this.model,\n      listView: this.listView\n    });\n    this.max_rows = js_components_api_targets__WEBPACK_IMPORTED_MODULE_8__[\"default\"]._limits.ConceptCloud.limit;\n    this.on('all', this.onAllInternalEvents);\n    this.listenTo(this.listView, 'all', this.onAllInternalEvents);\n    this.listenTo(this.view, 'close-widget', _.bind(this.closeWidget, this));\n    this.listenTo(this.view, 'download', _.bind(this.download, this));\n    this.widgetName = 'wordcloud';\n    this.queryUpdater = new js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_9__[\"default\"](this.widgetName);\n  },\n  activate: function activate(beehive) {\n    _.bindAll(this, 'setCurrentQuery', 'processResponse');\n\n    this.setBeeHive(beehive);\n    var pubsub = this.getPubSub();\n    pubsub.subscribe(pubsub.INVITING_REQUEST, this.setCurrentQuery);\n    pubsub.subscribe(pubsub.DELIVERING_RESPONSE, this.processResponse); // on initialization, store the current query\n\n    if (this.getBeeHive().getObject('AppStorage')) {\n      this.setCurrentQuery(this.getBeeHive().getObject('AppStorage').getCurrentQuery());\n    }\n  },\n  // fetch data\n  renderWidgetForCurrentQuery: function renderWidgetForCurrentQuery() {\n    this.model.unset('tfidfData');\n    var query = this.getCurrentQuery();\n    var that = this; // if it's a bigquery, we need the bibcodes first\n\n    if (query.get('__qid')) {\n      // wordcloud endpoint can't handle bigquery right now\n      // otherwise modal is being closed AFTER this function is run\n      setTimeout(function () {\n        that.getPubSub().publish(that.getPubSub().ALERT, new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_11__[\"default\"]({\n          code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_11__[\"default\"].CODES.ALERT,\n          msg: 'The concept cloud endpoint cannot handle such a large query at this time',\n          modal: true\n        }), 1);\n      }); // query.set(\"fl\", \"bibcode\");\n      // //limit is 1000\n      // query.set(\"rows\", \"1000\");\n      // this.getPubSub().publish(this.getPubSub().DELIVERING_REQUEST, this.composeRequest(query));\n    } else {\n      var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n        target: marionette__WEBPACK_IMPORTED_MODULE_2___default().getOption(this, 'endpoint') || js_components_api_targets__WEBPACK_IMPORTED_MODULE_8__[\"default\"].SERVICE_WORDCLOUD,\n        query: this.customizeQuery(query),\n        options: {\n          type: 'POST',\n          contentType: 'application/json'\n        }\n      });\n      this.getPubSub().publish(this.getPubSub().DELIVERING_REQUEST, request);\n    }\n  },\n  // for now, called to show vis for library\n  renderWidgetForListOfBibcodes: function renderWidgetForListOfBibcodes(bibcodes) {\n    this.model.unset('tfidfData'); // for the moment, /tvrh endpoint can't handle more than 100 bibs\n\n    bibcodes = bibcodes.slice(0, 100);\n    var query = new js_components_api_query__WEBPACK_IMPORTED_MODULE_10__[\"default\"]();\n    query.unlock();\n    query.set('q', 'bibcode:(' + bibcodes.join(' OR ') + ')');\n    query.set('rows', this.max_rows);\n    var request = new js_components_api_request__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n      target: marionette__WEBPACK_IMPORTED_MODULE_2___default().getOption(this, 'endpoint') || js_components_api_targets__WEBPACK_IMPORTED_MODULE_8__[\"default\"].SERVICE_WORDCLOUD,\n      query: new js_components_api_query__WEBPACK_IMPORTED_MODULE_10__[\"default\"]({\n        query: JSON.stringify(query.toJSON())\n      }),\n      options: {\n        type: 'POST',\n        contentType: 'application/json'\n      }\n    });\n    this.getPubSub().publish(this.getPubSub().EXECUTE_REQUEST, request);\n  },\n  customizeQuery: function customizeQuery(apiQuery) {\n    var q = apiQuery.clone();\n    q.unlock();\n\n    if (this.defaultQueryArguments) {\n      q = this.composeQuery(this.defaultQueryArguments, q);\n    }\n\n    var r = this.max_rows;\n\n    if (q.has('rows')) {\n      r = q.get('rows')[0];\n    }\n\n    q.set('rows', Math.min(r, this.max_rows));\n    return q;\n  },\n  processResponse: function processResponse(jsonResponse) {\n    // it's a bigquery response with bibcodes, now request the vis data\n    try {\n      // this raises an error if responseHeader isn't there, should that be changed?\n      var qid = jsonResponse.get('responseHeader.params.__qid');\n      this.renderWidgetForListOfBibcodes(jsonResponse.get('response').docs.map(function (b) {\n        return b.bibcode;\n      }));\n    } catch (e) {\n      data = jsonResponse.toJSON();\n      this.model.set('tfidfData', data);\n    }\n  },\n  close: function close() {\n    this.listView.destroy();\n    this.view.destroy();\n    marionette__WEBPACK_IMPORTED_MODULE_2___default().Controller.prototype.destroy.apply(this, arguments);\n  },\n  setCurrentQuery: function setCurrentQuery() {\n    // make sure to reset the model's processed word list\n    this.listView.model.reset(); // resetting model\n\n    this.model.reset();\n    js_widgets_base_base_widget__WEBPACK_IMPORTED_MODULE_5__[\"default\"].prototype.setCurrentQuery.apply(this, arguments);\n  },\n  onAllInternalEvents: function onAllInternalEvents(ev) {\n    if (ev === 'submitFacet') {\n      var filterList;\n      var q;\n      var newQ;\n      filterList = this.listView.model.get('selectedWords');\n      q = this.getCurrentQuery();\n      q = q.clone();\n      q.unlock();\n      var qu = this.queryUpdater;\n      var newQ = filterList.map(function (x) {\n        return qu.quoteIfNecessary(x);\n      }).join(' OR ');\n\n      this._updateFq(q, newQ);\n\n      var ps = this.getPubSub();\n      ps.publish(ps.NAVIGATE, 'search-page', {\n        q: q\n      });\n    }\n  },\n  closeWidget: function closeWidget() {\n    this.getPubSub().publish(this.getPubSub().NAVIGATE, 'results-page');\n  },\n  download: function download() {\n    var data = this.model.get('downloadableData');\n    var output = 'data:text/csv;charset=utf-8,';\n    output += \"Word, Idf, Record Count, Total Occurrences\\n\";\n    Object.entries(data).forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          word = _ref2[0],\n          info = _ref2[1];\n\n      output += \"\".concat(word, \", \").concat(info.idf, \", \").concat(info.record_count, \", \").concat(info.total_occurrences, \"\\n\");\n    });\n    var encodedUri = encodeURI(output);\n    var link = document.getElementById('download-link');\n    link.setAttribute('download', 'wordcloud.csv');\n    link.setAttribute('href', encodedUri);\n    link.click();\n  },\n  _updateFq: function _updateFq(q, value) {\n    var filterName = 'fq_' + this.widgetName; // uncomment if we need adding to the existing conditions\n\n    q.unset(filterName);\n    this.queryUpdater.updateQuery(q, filterName, 'limit', value);\n    var fq = '{!type=aqp v=$' + filterName + '}';\n    var fqs = q.get('fq');\n\n    if (!fqs) {\n      q.set('fq', [fq]);\n    } else {\n      var i = _.indexOf(fqs, fq);\n\n      if (i == -1) {\n        fqs.push(fq);\n      }\n\n      q.set('fq', fqs);\n    }\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (WordCloudWidget);\n\n//# sourceURL=webpack://bumblebee/./src/js/widgets/wordcloud/widget.js?");

/***/ }),

/***/ "./src/js/wraps/abstract_page_manager/abstract-nav.html":
/*!**************************************************************!*\
  !*** ./src/js/wraps/abstract_page_manager/abstract-nav.html ***!
  \**************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.lambda, alias3=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <a href=\\\"\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"isActive\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.program(4, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":13},\"end\":{\"line\":6,\"column\":108}}})) != null ? stack1 : \"\")\n    + \"\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"isActive\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(6, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":110},\"end\":{\"line\":6,\"column\":168}}})) != null ? stack1 : \"\")\n    + \" data-widget-id=\\\"\"\n    + alias3(alias2((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \"\\\">\\n    <div class=\\\"abstract-nav s-nav \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"isSelected\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(8, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":35},\"end\":{\"line\":7,\"column\":81}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"isActive\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(10, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":82},\"end\":{\"line\":7,\"column\":134}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n            <span class=\\\"s-content\\\">\\n            \"\n    + alias3(alias2((depth0 != null ? lookupProperty(depth0,\"title\") : depth0), depth0))\n    + \"\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"showCount\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(12, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":12},\"end\":{\"line\":12,\"column\":19}}})) != null ? stack1 : \"\")\n    + \"            </span>\\n    </div>\\n    </a>\\n\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" #abs/\"\n    + alias2(alias1(((stack1 = (data && lookupProperty(data,\"root\"))) && lookupProperty(stack1,\"bibcode\")), depth0))\n    + \"/\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"path\") : depth0), depth0))\n    + \" \";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    return \" javascript:void(0); \";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    return \" aria-disabled=\\\"true\\\" \";\n},\"8\":function(container,depth0,helpers,partials,data) {\n    return \" s-nav-selected \";\n},\"10\":function(container,depth0,helpers,partials,data) {\n    return \" s-nav-inactive \";\n},\"12\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"            <span class=\\\"num-items\\\"> \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"numFound\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(13, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":37},\"end\":{\"line\":11,\"column\":84}}})) != null ? stack1 : \"\")\n    + \"</span>\\n\";\n},\"13\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"(\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"numFound\") : depth0), depth0))\n    + \")\";\n},\"15\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <a href=\\\"\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"isActive\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(16, data, 0, blockParams, depths),\"inverse\":container.program(4, data, 0, blockParams, depths),\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":13},\"end\":{\"line\":20,\"column\":105}}})) != null ? stack1 : \"\")\n    + \"\\\" data-widget-id=\\\"\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \"\\\" \"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"isActive\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(6, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":136},\"end\":{\"line\":20,\"column\":194}}})) != null ? stack1 : \"\")\n    + \">\\n      <div class=\\\"abstract-nav s-nav \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"isSelected\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(8, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":37},\"end\":{\"line\":21,\"column\":83}}})) != null ? stack1 : \"\")\n    + \" \"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"isActive\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(10, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":84},\"end\":{\"line\":21,\"column\":136}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n        <span class=\\\"content\\\">\\n          Export Citation\\n        </span>\\n      </div>\\n    </a>\\n\";\n},\"16\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" #abs/\"\n    + alias2(alias1((depths[1] != null ? lookupProperty(depths[1],\"bibcode\") : depths[1]), depth0))\n    + \"/\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"path\") : depth0), depth0))\n    + \" \";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n<nav aria-labelledby=\\\"abstract-nav-label\\\">\\n    <div class=\\\"s-nav-header s-view-nav\\\" id=\\\"abstract-nav-label\\\"> <i class=\\\"icon-list\\\" aria-hidden=\\\"true\\\"></i> <h3>view </h3> </div>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"view\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":4},\"end\":{\"line\":17,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"export\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(15, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":4},\"end\":{\"line\":27,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"</nav>\\n\";\n},\"useData\":true,\"useDepths\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/abstract_page_manager/abstract-nav.html?");

/***/ }),

/***/ "./src/js/wraps/abstract_page_manager/abstract-page-layout.html":
/*!**********************************************************************!*\
  !*** ./src/js/wraps/abstract_page_manager/abstract-page-layout.html ***!
  \**********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div id=\\\"abstract-page-layout\\\" class=\\\"s-abstract-page-layout\\\">\\n\\n    <div class=\\\"s-stable-search-bar-height\\\">\\n        <div class=\\\"s-search-bar-full-width-container\\\">\\n            <div class=\\\"col-xs-0 col-sm-12 col-md-2 s-back-button-container\\\"></div>\\n            <div class=\\\"col-xs-12 col-sm-9 col-md-7 s-search-bar-row\\\" id=\\\"search-bar-row\\\" data-widget=\\\"SearchWidget\\\"></div>\\n        </div>\\n    </div>\\n    <div class=\\\"nav-button-container s-nav-button-container\\\" id=\\\"nav-button-container\\\">\\n      <button id=\\\"abs-nav-menu-toggle\\\" class=\\\"btn btn-primary-faded toggle-menu s-toggle-menu \\\"> <i class=\\\"fa fa-bars\\\" aria-hidden=\\\"true\\\"></i> Show Menu </button>\\n      <button id=\\\"abs-full-txt-toggle\\\" class=\\\"s-abs-full-txt-toggle-btn btn btn-primary-faded \\\">Full Text Sources</button>\\n    </div>\\n    <div class=\\\"s-dynamic-page-body\\\" id=\\\"dynamic-page-body\\\">\\n        <div class=\\\"s-abstract-content\\\">\\n\\n            <div class=\\\"col-sm-2 nav-container s-nav-container\\\" id=\\\"left-column\\\"> </div>\\n\\n            <div class=\\\"col-sm-9 col-md-7 s-middle-column\\\" id=\\\"middle-column\\\">\\n                <!--id is for screen readers-->\\n                <div class=\\\"main-content-container s-main-content-container\\\" id=\\\"main-content\\\" tabindex=\\\"-1\\\">\\n\\n                    <div id=\\\"current-subview\\\">\\n                        <div data-widget=\\\"ShowAbstract\\\"/>\\n                        <div data-widget=\\\"ShowCitations\\\"/>\\n                        <div data-widget=\\\"ShowReferences\\\"/>\\n                        <div data-widget=\\\"ShowCoreads\\\"/>\\n                        <div data-widget=\\\"ShowSimilar\\\"/>\\n                        <div data-widget=\\\"ShowToc\\\"/>\\n                        <div data-widget=\\\"ShowGraphics\\\" />\\n                        <div data-widget=\\\"ShowExportcitation\\\" data-origin=\\\"abstract\\\"/>\\n                        <div data-widget=\\\"ShowMetrics\\\" data-allow-redirect=\\\"false\\\"/>\\n                        <div data-widget=\\\"MetaTagsWidget\\\"></div>\\n                    </div>\\n                </div>\\n            </div>\\n            <div class=\\\"col-sm-3\\\" id=\\\"resources-container\\\">\\n                <div class=\\\"resources-container\\\">\\n                    <div class=\\\"s-right-col-widget-container\\\" style=\\\"max-height: 50vh;\\n                    overflow-y: auto;\\\">\\n                        <div data-widget=\\\"ShowResources\\\" />\\n                        <div data-widget=\\\"ShowAssociated\\\"/>\\n                    </div>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"s-right-col-container col-sm-3 s-right-column\\\" id=\\\"right-col-container\\\">\\n                <div style=\\\"padding:10px;\\\">\\n                <div data-widget=\\\"ShowLibraryAdd\\\"/>\\n                <div data-widget=\\\"ShowGraphicsSidebar\\\"/>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"col-lg-1\\\"></div>\\n        </div>\\n    </div>\\n</div>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/abstract_page_manager/abstract-page-layout.html?");

/***/ }),

/***/ "./src/js/wraps/abstract_page_manager/abstract_page_manager.js":
/*!*********************************************************************!*\
  !*** ./src/js/wraps/abstract_page_manager/abstract_page_manager.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/page_managers/toc_controller */ \"./src/js/page_managers/toc_controller.js\");\n/* harmony import */ var js_page_managers_three_column_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/page_managers/three_column_view */ \"./src/js/page_managers/three_column_view.js\");\n/* harmony import */ var hbs_js_wraps_abstract_page_manager_abstract_page_layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hbs!js/wraps/abstract_page_manager/abstract-page-layout */ \"./src/js/wraps/abstract_page_manager/abstract-page-layout.html\");\n/* harmony import */ var hbs_js_wraps_abstract_page_manager_abstract_page_layout__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_abstract_page_manager_abstract_page_layout__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var hbs_js_wraps_abstract_page_manager_abstract_nav__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! hbs!js/wraps/abstract_page_manager/abstract-nav */ \"./src/js/wraps/abstract_page_manager/abstract-nav.html\");\n/* harmony import */ var hbs_js_wraps_abstract_page_manager_abstract_nav__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_abstract_page_manager_abstract_nav__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! utils */ \"./src/js/utils.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! analytics */ \"./src/js/components/analytics.js\");\n\n\n\n\n\n\nvar PageManager = js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  persistentWidgets: ['SearchWidget', 'ShowAbstract', 'ShowCitations', 'ShowToc', 'ShowReferences', 'tocWidget'],\n  TOCTemplate: (hbs_js_wraps_abstract_page_manager_abstract_nav__WEBPACK_IMPORTED_MODULE_3___default()),\n  initialize: function initialize() {\n    var _this = this;\n\n    js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.initialize.apply(this, arguments);\n    this.abstractTimer = new utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"].TimingEvent('abstract-loaded', 'workflow'); // observe scrolling and apply sticky menu\n\n    this.observer = new IntersectionObserver(function () {\n      _this.adjustStickyElements();\n    }, {\n      threshold: 0\n    });\n    this.observing = false; // observe resizing and apply sticky menu\n\n    _.bindAll(this, 'adjustStickyElements');\n\n    $(window).on('resize', _.throttle(this.adjustStickyElements, 200));\n  },\n  // Make menu bar and menus sticky\n  adjustStickyElements: function adjustStickyElements() {\n    // if single column and nav buttons container reached top of viewport, float nav button container and menu\n    if (window.matchMedia('(max-width: 788px)').matches && $('.s-search-bar-widget').get(0) && $('.s-search-bar-widget').get(0).getBoundingClientRect().bottom <= 0) {\n      var height = $('#nav-button-container').outerHeight(true);\n      this.stickElements(height); // without this abstract content will disappear with above elements fixed\n\n      $('.s-abstract-content').attr('style', 'overflow: unset');\n    } else {\n      this.unStickElements();\n      $('.s-abstract-content').attr('style', 'overflow: hidden');\n    }\n  },\n  stickElements: function stickElements(top) {\n    // button container\n    $('#nav-button-container').addClass('sticky'); // menu\n\n    $('.s-nav-container').attr('style', \"position:fixed;top:\".concat(top, \"px;left:0\")); // full text sources widget\n\n    $('#resources-container').attr('style', \"position:fixed;top:\".concat(top, \"px;left:100%\"));\n  },\n  unStickElements: function unStickElements() {\n    $('#nav-button-container').removeClass('sticky');\n    $('.s-nav-container').attr('style', '');\n    $('#resources-container').attr('style', '');\n  },\n  createView: function createView(options) {\n    options = options || {};\n    options.template = options.template || (hbs_js_wraps_abstract_page_manager_abstract_page_layout__WEBPACK_IMPORTED_MODULE_2___default());\n    return new js_page_managers_three_column_view__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n      template: (hbs_js_wraps_abstract_page_manager_abstract_page_layout__WEBPACK_IMPORTED_MODULE_2___default())\n    });\n  },\n  activate: function activate(beehive) {\n    var _this2 = this;\n\n    this.setBeeHive(beehive);\n    this.debug = beehive.getDebug(); // XXX:rca - think of st better\n\n    this.view = this.createView({\n      debug: this.debug,\n      widgets: this.widgets\n    });\n    var pubsub = this.getPubSub();\n    this.onDetailsPage = false;\n    pubsub.subscribe(pubsub.DISPLAY_DOCUMENTS, _.bind(this.onDisplayDocuments, this));\n    pubsub.subscribe(pubsub.NAVIGATE, function (name, data) {\n      _this2.onDetailsPage = data && data.href && data.href.indexOf('abs/') > -1;\n    });\n  },\n  assemble: function assemble(app) {\n    var self = this;\n    return js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.assemble.apply(this, arguments).done(function () {\n      self.addQuery(self.getCurrentQuery());\n\n      try {\n        _.forEach(_.keys(self.widgets), function (k) {\n          var w = self.widgets[k];\n\n          var handler = _.debounce(function () {\n            if (k === 'ShowAbstract' && $(self.widgetDoms[k]).text() !== '') {\n              self.abstractTimer.stop();\n            }\n          }, 300);\n\n          if (w.widgets && w.widgets.length > 0) {\n            _.forEach(w.widgets, function (sub) {\n              return sub.onIdle = handler;\n            });\n          }\n\n          w.onIdle = handler;\n        });\n      } catch (e) {// do nothing\n      }\n    });\n  },\n  addQuery: function addQuery(apiQuery) {\n    if (this.view.model) this.view.model.set('query', apiQuery.url());\n  },\n  show: function show(pageName) {\n    // hide drawers\n    $('#abs-full-txt-toggle').text('Full Text Sources');\n    $('#abs-nav-menu-toggle').html('<i class=\"fa fa-bars\" aria-hidden=\"true\"></i> Show Menu');\n    $('.s-nav-container').removeClass('show');\n    $('#resources-container').removeClass('show'); // Observe search bar\n\n    if (!this.observing && document.querySelector('.s-search-bar-widget')) {\n      this.observer.observe(document.querySelector('.s-search-bar-widget'));\n      this.observing = true;\n    }\n\n    var ret = js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.show.apply(this, arguments);\n    var href = this.getCurrentQuery().url();\n\n    if (!_.isEmpty(href)) {\n      ret.$el.find('.s-back-button-container').empty().html('<a href=\"#search/' + href + '\" class=\"back-button btn btn-sm btn-default\"> <i class=\"fa fa-arrow-left\" aria-hidden=\"true\"></i> Back to results</a>');\n    } // when arriving at the abstract page, scroll back to the top\n\n\n    if (pageName === 'ShowAbstract' && typeof window.scrollTo === 'function') {\n      window.scrollTo(0, 0);\n    }\n\n    return ret;\n  },\n  onDisplayDocuments: function onDisplayDocuments(apiQuery) {\n    var bibcode = this.parseIdentifierFromQuery(apiQuery);\n\n    if (bibcode === 'null') {\n      return;\n    }\n\n    this.widgets.tocWidget.model.set('bibcode', bibcode); // do not allow the timer to start again if we haven't left the abstract page\n\n    if (!this.onDetailsPage) {\n      this.abstractTimer.start();\n    }\n  },\n  navConfig: {\n    ShowAbstract: {\n      title: 'Abstract',\n      path: 'abstract',\n      showCount: false,\n      isSelected: true,\n      category: 'view',\n      alwaysThere: 'true',\n      order: 0\n    },\n    ShowCitations: {\n      title: 'Citations',\n      path: 'citations',\n      category: 'view',\n      order: 1\n    },\n    ShowReferences: {\n      title: 'References',\n      path: 'references',\n      category: 'view',\n      order: 2\n    },\n    ShowCoreads: {\n      title: 'Co-Reads',\n      path: 'coreads',\n      category: 'view',\n      showCount: false,\n      order: 3\n    },\n    ShowSimilar: {\n      title: 'Similar Papers',\n      path: 'similar',\n      category: 'view',\n      showCount: false,\n      order: 4\n    },\n    ShowToc: {\n      title: 'Volume Content',\n      path: 'toc',\n      category: 'view',\n      showCount: false,\n      order: 5\n    },\n    ShowGraphics: {\n      title: 'Graphics',\n      path: 'graphics',\n      showCount: false,\n      category: 'view',\n      order: 6\n    },\n    ShowMetrics: {\n      title: 'Metrics',\n      path: 'metrics',\n      showCount: false,\n      category: 'view',\n      order: 7\n    },\n    ShowExportcitation__default: {\n      title: 'Export',\n      path: 'exportcitation',\n      category: 'export',\n      alwaysThere: 'true',\n      order: 8\n    }\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (PageManager);\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/abstract_page_manager/abstract_page_manager.js?");

/***/ }),

/***/ "./src/js/wraps/alerts_mediator.js":
/*!*****************************************!*\
  !*** ./src/js/wraps/alerts_mediator.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_components_alerts_mediator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/alerts_mediator */ \"./src/js/components/alerts_mediator.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_widgets_widget_states__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/widgets/widget_states */ \"./src/js/widgets/widget_states.js\");\n/* harmony import */ var js_components_alerts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/alerts */ \"./src/js/components/alerts.js\");\n/* harmony import */ var js_components_api_response__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/components/api_response */ \"./src/js/components/api_response.js\");\n\n\n\n\n\n\n\nvar Mediator = js_components_alerts_mediator__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend({\n  activate: function activate(beehive, app) {\n    js_components_alerts_mediator__WEBPACK_IMPORTED_MODULE_2__[\"default\"].prototype.activate.apply(this, arguments);\n    var pubsub = this.getPubSub();\n    pubsub.subscribe(pubsub.APP_STARTED, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.displaySiteMessageWithDelay, this));\n  },\n  onAlert: function onAlert(apiFeedback, psk) {\n    this._dirty = true;\n    js_components_alerts_mediator__WEBPACK_IMPORTED_MODULE_2__[\"default\"].prototype.onAlert.apply(this, arguments);\n  },\n  displaySiteMessageWithDelay: function displaySiteMessageWithDelay() {\n    var self = this;\n    setTimeout(function () {\n      self.checkAndDisplaySiteMessage();\n    }, 500);\n  },\n  onDestroy: function onDestroy() {\n    clearInterval(this.timerId);\n  },\n  onStartSearch: function onStartSearch() {\n    this._dirty = false;\n  },\n  checkAndDisplaySiteMessage: function checkAndDisplaySiteMessage() {\n    var self = this;\n    var user = self.getBeeHive().getObject('User');\n\n    if (user) {\n      user.getSiteConfig('site_wide_message').done(function (val) {\n        // no site-wide message\n        if (!(val && underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isString(val))) return; // ignore it other alert is there\n\n        if (self._dirty) return; // ignore if it was already seen\n\n        if (user.isLoggedIn()) {\n          var uData = user.getUserData();\n          if (uData.last_seen_message == val) return;\n        } // if the user was not logged in, consult the local storage\n\n\n        var storage = self.getBeeHive().getService('PersistentStorage');\n\n        if (storage) {\n          var msg = storage.get('last_seen_message');\n\n          if (msg && msg == val) {\n            return;\n          }\n        } // display the site-wide message\n\n\n        self.alert(new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n          msg: val,\n          events: {\n            'click button.close': 'dismissed'\n          }\n        })).done(function (v) {\n          if (v == 'dismissed') {\n            if (user && user.isLoggedIn()) user.setMyADSData({\n              last_seen_message: val\n            });\n            if (storage) storage.set('last_seen_message', val);\n          }\n        });\n      });\n    }\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (Mediator);\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/alerts_mediator.js?");

/***/ }),

/***/ "./src/js/wraps/authentication_page_manager.js":
/*!*****************************************************!*\
  !*** ./src/js/wraps/authentication_page_manager.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/page_managers/controller */ \"./src/js/page_managers/controller.js\");\n/* harmony import */ var js_page_managers_one_column_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/page_managers/one_column_view */ \"./src/js/page_managers/one_column_view.js\");\n/* harmony import */ var hbs_js_page_managers_templates_authentication_page_layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hbs!js/page_managers/templates/authentication-page-layout */ \"./src/js/page_managers/templates/authentication-page-layout.html\");\n/* harmony import */ var hbs_js_page_managers_templates_authentication_page_layout__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hbs_js_page_managers_templates_authentication_page_layout__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nvar PageManager = js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  createView: function createView(options) {\n    options = options || {};\n    options.template = options.template || (hbs_js_page_managers_templates_authentication_page_layout__WEBPACK_IMPORTED_MODULE_2___default());\n    return new js_page_managers_one_column_view__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n      template: (hbs_js_page_managers_templates_authentication_page_layout__WEBPACK_IMPORTED_MODULE_2___default()),\n      className: 's-authentication-page-layout s-100-height',\n      id: 'user-page-layout'\n    });\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (PageManager);\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/authentication_page_manager.js?");

/***/ }),

/***/ "./src/js/wraps/author_network.js":
/*!****************************************!*\
  !*** ./src/js/wraps/author_network.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }\n/* harmony export */ });\n/* harmony import */ var js_widgets_network_vis_network_widget__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/widgets/network_vis/network_widget */ \"./src/js/widgets/network_vis/network_widget.js\");\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n\n\nvar options = {};\noptions.endpoint = js_components_api_targets__WEBPACK_IMPORTED_MODULE_1__[\"default\"].SERVICE_AUTHOR_NETWORK;\noptions.helpText = '<p>The circular graph shows you the main author groups within your results.' + 'These groups are generated by a community detection algorithm, and their sizes represent the cumulative ' + 'frequency of occurence in the result set of all their members. (In other words: people who ' + 'co-author papers together appear in the same cluster.) Click on either a name or a group to' + 'learn more about the papers by those particular authors. You can filter your current search results' + \"by clicking the 'add to filter' button in the detail view. </p>\";\noptions.networkType = 'author';\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__() {\n  return new js_widgets_network_vis_network_widget__WEBPACK_IMPORTED_MODULE_0__[\"default\"](options);\n}\n;\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/author_network.js?");

/***/ }),

/***/ "./src/js/wraps/discovery_mediator.js":
/*!********************************************!*\
  !*** ./src/js/wraps/discovery_mediator.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }\n/* harmony export */ });\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var js_components_feedback_mediator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/feedback_mediator */ \"./src/js/components/feedback_mediator.js\");\n/* harmony import */ var js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/components/api_feedback */ \"./src/js/components/api_feedback.js\");\n/* harmony import */ var js_widgets_widget_states__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! js/widgets/widget_states */ \"./src/js/widgets/widget_states.js\");\n/* harmony import */ var js_components_alerts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js/components/alerts */ \"./src/js/components/alerts.js\");\n/* harmony import */ var js_components_api_response__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! js/components/api_response */ \"./src/js/components/api_response.js\");\n/* harmony import */ var analytics__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! analytics */ \"./src/js/components/analytics.js\");\n\n\n\n\n\n\n\n\nvar handlers = {};\n\nhandlers[js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"].CODES.MAKE_SPACE] = function () {\n  this.getBeeHive().getService('PubSub').once(this.getPubSub().DELIVERING_REQUEST, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function (apiRequest, psk) {\n    if (this._tmp.callOnce[psk.getId()]) {\n      return;\n    }\n\n    this._tmp.callOnce[psk.getId()] = true;\n  }, this));\n};\n\nhandlers[js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"].CODES.SEARCH_CYCLE_STARTED] = function (feedback) {\n  this._tmp.cycle_started = true;\n  var app = this.getApp();\n\n  if (feedback.query) {\n    app.getObject('AppStorage').setCurrentQuery(feedback.query);\n    app.getObject('AppStorage').setCurrentNumFound(feedback.numFound);\n  } else {\n    app.getObject('AppStorage').setCurrentQuery(null);\n  } // this.getPubSub().publish(this.getPubSub().NAVIGATE, 'results-page');\n\n\n  if (feedback.request && feedback.request.get('target').indexOf('search') > -1 && feedback.query && !feedback.numFound) {\n    var q = feedback.query; // TODO: add in generic handler for this error\n\n    return; // do not bother with the rest\n  } // too many results\n\n\n  if (feedback.numFound > 1000) {\n    app.getWidget('SearchWidget').done(function (widget) {\n      // make the search form pulsate little bit\n      if (widget.view && widget.view.highlightFields) {\n        widget.view.highlightFields();\n      }\n    });\n  } // retrieve ids of all components that wait for a query\n\n\n  var ids = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(feedback.cycle.waiting); // remove alerts from previous searches\n\n\n  this.getAlerter().alert(new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n    type: js_components_alerts__WEBPACK_IMPORTED_MODULE_5__[\"default\"].TYPE.INFO,\n    msg: null\n  }));\n};\n/**\n * This applies to the first request submitted by the user; from the search\n * form. So it is (perhaps not always) admissible to bother them with modal\n * messages.\n */\n\n\nhandlers[js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"].CODES.SEARCH_CYCLE_FAILED_TO_START] = function (feedback) {\n  var apiRequest = feedback.request;\n  var xhr = feedback.error.jqXHR || {}; // when the response comes from cache, it's empty\n\n  var app = this.getApp();\n  var alerts = this.getAlerter();\n  var self = this;\n  var resolved = false;\n  var errorDetails = {\n    target: '',\n    msg: xhr.statusText\n  };\n\n  function getAccessTokenStump() {\n    var a = app.getService('Api');\n\n    if (a && a.access_token) {\n      return a.access_token.slice(30);\n    }\n\n    return 'no access token';\n  }\n\n  (0,analytics__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('send', 'event', 'error', 'search', xhr.statusText);\n\n  if (xhr && apiRequest) {\n    var target = apiRequest.get('target');\n    errorDetails.target = target;\n    errorDetails.query = apiRequest.get('query').toJSON();\n    console.log(xhr, apiRequest, errorDetails);\n\n    switch (xhr.status) {\n      case 403:\n        (0,analytics__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('send', 'event', 'error', 'access-denied', 'request=' + apiRequest.url() + ' token=...' + getAccessTokenStump());\n        alerts.alert(new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n          code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"].CODES.ALERT,\n          msg: xhr.responseJSON && xhr.responseJSON.error ? xhr.responseJSON.error : 'We are sorry, you do not have permission to access: ' + target + '. This is likely our fault (misconfiguration) and the ADS team has been notified.',\n          modal: true\n        }));\n        return;\n\n      case 429:\n        alerts.alert(new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n          code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"].CODES.ALERT,\n          msg: 'We are sorry, it looks like you have exhausted allowed quota for: ' + target + '. The limits will be reset in (usually) in 24 hours. If you believe this is an error or if you need to do something special, please contact us using the feedback button and describe what you are trying to accomplish. We may be able to help or provide efficient way of searching through ADS database. We also have an API that can be useful!',\n          modal: true\n        }));\n        return;\n\n      case 405:\n        // method not allowed\n        (0,analytics__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('send', 'event', 'error', 'access-denied', 'request=' + apiRequest.url() + ' token=...' + getAccessTokenStump);\n        alerts.alert(new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n          code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"].CODES.ALERT,\n          msg: 'I am afraid you have just discovered a glitch in our system. (Congratulations!). What you are trying to do should be possible. It is likely a mis-configuration. Please try to reload the webpage; if problem persists - then send us an angry email and wait for a day.',\n          modal: true\n        }));\n        return;\n\n      case 401:\n        // unauthorized\n        // check the Api is working\n        app.getApiAccess({\n          reconnect: true\n        }).done(function () {\n          // the access_token was refreshed, test the query\n          var api = app.getService('Api');\n          api.request(apiRequest, {\n            done: function done() {\n              // we've recovered - restart the search cycle\n              app.getController('QueryMediator').resetFailures();\n              var ps = self.getPubSub();\n\n              if (ps) {\n                ps.publish(ps.NAVIGATE, 'search-page', {\n                  q: apiRequest.get('query')\n                });\n              }\n            },\n            fail: function fail() {\n              (0,analytics__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('send', 'event', 'error', 'unauthorized', 'request=' + apiRequest.url() + ' token=...' + getAccessTokenStump());\n              alerts.alert(new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n                msg: 'Seems like you are not authorized to access: ' + target,\n                modal: true,\n                type: 'danger'\n              }));\n            }\n          });\n        }).fail(function () {\n          // TODO: check the status response (if API is down, we shouldn't tell them to reload)\n          alerts.alert(new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n            code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"].CODES.DANGER,\n            msg: 'The security token used to access our API has expired and we are unable to refresh it (though we tried). You will have to reload the webpage. Sorry about that!',\n            modal: true\n          }));\n        });\n        return;\n    }\n\n    if (target.indexOf('search') > -1) {\n      if (xhr.status == 400) {\n        // wrong query syntax\n        var apiQuery = apiRequest.get('query');\n        var msg = '';\n\n        if (xhr.responseJSON && xhr.responseJSON.error && xhr.responseJSON.error.msg) {\n          msg = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].escape(xhr.responseJSON.error.msg);\n\n          if (msg.indexOf('SyntaxError') > -1) {\n            // what will remain: Syntax Error, cannot parse doi:a* keyword_schema:arXiv:\n            msg = msg.replace('org.apache.solr.search.SyntaxError:', '');\n            msg = msg.replace('org.apache.solr.common.SolrException:', '');\n            msg = msg.replace('INVALID_SYNTAX_CANNOT_PARSE:', '');\n            msg = msg.replace(': The parser reported a syntax error, antlrqueryparser hates errors!', '');\n            msg = msg.trim();\n            msg = msg.replace('Syntax Error, cannot parse', 'Syntax Error, cannot parse<b>') + '</b>';\n          }\n        }\n\n        alerts.alert(new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n          msg: (msg || 'There is something wrong with the query:') + '<b><a href=\"#\">&nbsp;&nbsp;Try looking at the search examples on the home page</a></b> ' + ' or <b><a href=\"/help/search/search-syntax\" target=\"_blank\" rel=\"noreferrer noopener\">reading our help page</a>.</b>',\n          events: {\n            'click a#query-assistant': 'query-assistant'\n          }\n        })).done(function (name) {\n          if (name == 'query-assistant') {\n            var app = self.getApp();\n            app.getWidget('SearchWidget').done(function (widget) {\n              var q = apiQuery.get('q').join(' ');\n\n              if (q) {\n                widget.openQueryAssistant(q);\n              } else {\n                widget.openQueryAssistant('ooops, the query is complex (we are not yet ready for that)');\n              }\n            });\n          }\n        });\n        return; // stop here\n      }\n\n      if (xhr.status == 500) {\n        // server errors; some are recoverable\n        if (xhr.responseJSON) {\n          var r = xhr.responseJSON;\n\n          if (r.error && r.error.msg) {\n            if (r.error.msg.indexOf('maxClauseCount') > -1) {\n              // highlights failed, we can deliver response\n              var response = new js_components_api_response__WEBPACK_IMPORTED_MODULE_6__[\"default\"](r);\n              var cycle = feedback.cycle;\n\n              var key = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].keys(cycle.inprogress)[0];\n\n              var req = cycle.inprogress[key];\n              response.setApiQuery(req.request.get('query'));\n              cycle.done[key] = cycle.inprogress[key];\n              delete cycle.inprogress[key];\n              self.getPubSub().publish(self.getPubSub().DELIVERING_RESPONSE + key, response);\n              cycle.running = false;\n              app.getController('QueryMediator').startExecutingQueries();\n              return; // we are done!\n            }\n          }\n        }\n      }\n    }\n  } // generic situation; do not use modal - display stuff in the top area\n  // here we deal with a serious situation; the API is probably down or has\n  // problems; and this is likely the second time we are seeing it (usually\n  // query mediator has already tried to recover from these errors)\n\n\n  (0,analytics__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('send', 'event', 'error', 'unrecoverable-' + xhr.status, 'request=' + apiRequest.url() + ' token=...' + getAccessTokenStump);\n  var msg;\n  var msgArr = ['We are having trouble accessing: ' + target + '. The ADS backend service is probably down, or else weve been struck by an asteroid.', 'We are having trouble accessing: ' + target + '. A solar flare must have taken down our servers! Or else the ADS backend service is down momentarily.', 'Was that a supernova or are our servers just down? We are having trouble accessing: ' + target + ' but we should be back in a flash.', 'The alien mothership has arrived! Or else the ADS backend service is down momentarily. We are having trouble accessing: ' + target + ' but should be back up soon.', 'The server response seems to be highly redshifted, may require another observation to record. (The ADS backend service is down momentarily and we are having trouble accessing: ' + target + ' but we should be back up soon.)', 'A singularity has formed inside our server, and we are having trouble accessing: ' + target + '.', 'Universal Translator Malfunction: Unable to Communicate with ADS Droids. (The ADS backend service is down momentarily and we are having trouble accessing: ' + target + ' but we should be back up soon.', 'UV catastrophe detected! (The ADS backend service is down momentarily and we are having trouble accessing: ' + target + ' but we should be back up soon.)', 'The ADS Droids got distracted by the Missing Mass Problem instead of working on: ' + target + '. Be back in a minute.'];\n\n  function newMsg() {\n    var randomNumber = Math.floor(Math.random() * msgArr.length);\n    var msg = msgArr[randomNumber];\n    return msg;\n  }\n\n  switch (xhr.status) {\n    case 504: // gateway timeout\n\n    case 408:\n      // proxy timeout\n      msg = 'This particular query is taking too long. Please wait a moment and retry. If the problem persits, our backend is likely overwhelmed and will be sluggish for a little longer.';\n      break;\n\n    case 500: // server error\n\n    case 502: // bad gateway\n\n    case 503:\n      // service unavailable\n      msg = newMsg();\n      break;\n\n    default:\n      msg = \"Today, you are doubly unlucky. Not only are you experiencing an 'unrecoverable' error, but you have to read this default error message. Sorry about that! We have been notified about the problem.\";\n      break;\n  }\n\n  alerts.alert(new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n    code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"].CODES.ALERT,\n    msg: msg,\n    modal: false\n  }));\n};\n\nhandlers[js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"].CODES.API_REQUEST_ERROR] = function (feedback) {\n  var req = feedback.request;\n  var q = req.get('query');\n  var target = req.get('target');\n  var psk = feedback.psk;\n  var errorDetails = {\n    error: feedback.errorThrown,\n    errorCode: feedback.error.status,\n    destination: target,\n    // not all requests will have a query\n    query: q ? q.toJSON() : undefined\n  };\n  var app = this.getApp();\n  var alerter = this.getAlerter();\n  (0,analytics__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('send', 'event', 'error', 'api-request', JSON.stringify(errorDetails));\n\n  if (!psk) {\n    console.error(\"We are not going to handle the error (PSK is empty, can't identify the component\");\n    return;\n  }\n\n  var n = app.getPluginOrWidgetName(psk.getId());\n\n  if (n) {\n    console.error('Query failed for widget: ' + n, errorDetails); // If this is an ORCID response and it is an unauthorized response, we will want to tell the user\n    // that they should log back in, and deactivate any ORCID widgets.\n\n    if (/orcid/.exec(target) && feedback.error.status == 401) {\n      alerter.alert(new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n        code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"].CODES.ALERT,\n        msg: 'Your connection with Orcid is no longer valid, it may be that you revoked your token. To continue using this feature, please log back in to Orcid.',\n        modal: true\n      })); // Turn off ORCID modes\n\n      var orcidApi = app.getService('OrcidApi');\n      var user = app.getObject('User');\n      orcidApi.signOut();\n      user.setOrcidMode(0);\n      return; // We are done\n    } // var widgets = this.getWidgets([psk.getId()]);\n    // if (widgets && widgets.length == 0) {\n    //   return; // we can ignore it\n    // }\n    // this.changeWidgetsState(widgets, {state: WidgetStates.RESET});\n    // this.changeWidgetsState(widgets, {state: WidgetStates.ERRORED});\n\n\n    this._tmp.api_failures = this._tmp.api_failures || {};\n    this._tmp.api_failures[n] = this._tmp.api_failures[n] || 0;\n    this._tmp.api_failures[n] += 1;\n    var numErr = this._tmp.api_failures[n];\n  } else if (!feedback.beVerbose) return; // we'll not show messages until search cycle is over\n\n\n  if (!this._tmp.cycle_started) return;\n};\n\nhandlers[js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"].CODES.QUERY_ASSISTANT] = function (feedback) {\n  var app = this.getApp();\n  app.getWidget('SearchWidget').done(function (widget) {\n    var q = null;\n\n    if (feedback.query) {\n      q = feedback.query.get('q').join(' ');\n    }\n\n    widget.openQueryAssistant(q);\n  });\n};\n\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__() {\n  var mediator = new (js_components_feedback_mediator__WEBPACK_IMPORTED_MODULE_2__[\"default\"].extend({\n    _tmp: {},\n    activate: function activate() {\n      js_components_feedback_mediator__WEBPACK_IMPORTED_MODULE_2__[\"default\"].prototype.activate.apply(this, arguments);\n      var pubsub = this.getPubSub();\n      pubsub.subscribe(pubsub.INVITING_REQUEST, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.onNewCycle, this));\n      pubsub.subscribe(pubsub.ARIA_ANNOUNCEMENT, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.onPageChange, this));\n      pubsub.subscribe(pubsub.APP_EXIT, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.onAppExit, this));\n      pubsub.subscribeOnce(pubsub.APP_STARTING, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(this.onAppStarting, this));\n    },\n    onAppStarting: function onAppStarting() {\n      // get the unwrapped version of PubSub\n      var pubsub = this.getBeeHive().getService('PubSub');\n      var qm = this.getApp().getController('QueryMediator'); // remove the handler of START_SEARCH - we'll do it in place of search-mediator\n\n      pubsub.unsubscribe(qm.getPubSub().getCurrentPubSubKey(), pubsub.START_SEARCH); // insert our own handler\n\n      this.getPubSub().subscribe(pubsub.START_SEARCH, underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].bind(function (apiQuery, senderKey) {\n        var pubsub = this.getPubSub();\n        var app = this.getApp();\n        var qm;\n        var widget;\n        var storage;\n        if (!pubsub) return; // gone\n\n        qm = app.getController('QueryMediator');\n        if (!qm) return; // gone\n\n        storage = app.getObject('AppStorage');\n\n        if (storage && storage.getCurrentQuery()) {\n          try {\n            console.log('URL: ', storage.getCurrentQuery().url());\n          } catch (e) {// XXX:rca huh?\n          }\n        } // because we might be dealing with promises (not always)\n        // we have to do this ugly hack (and I didn't want to turn\n        // the whole function into async; who knows what ill-gotten\n        // effects that would have on backbone execution...)\n\n\n        var stupidGoAhead = true; // XXX:rca but when widgets are destroyed, there should be no data...\n        // XXX:rca verify this actually does what it is meant to do\n        // ignore repeated queries (if the widgets are loaded with data)\n\n        if (storage && storage.hasCurrentQuery() && apiQuery.url() == storage.getCurrentQuery().url() && app.getPluginOrWidgetName(senderKey.getId()) != 'widget:SearchWidget' && app.getWidgetRefCount('Results') >= 1) {\n          // simply navigate to search results page, widgets are already stocked with data\n          if (app.hasService('Navigator')) {\n            app.getService('Navigator').navigate('results-page', {\n              replace: true\n            });\n            stupidGoAhead = false;\n          }\n        }\n\n        if (this.getCurrentPage() !== 'SearchPage' && app.getWidgetRefCount('Results') <= 0) {\n          // switch immediately to the results page -make widgets listen to the START_SEARCH\n          var argz = arguments;\n          app.getService('Navigator').navigate('results-page', {\n            replace: false\n          }).then(function () {\n            qm.getQueryAndStartSearchCycle.apply(qm, argz);\n          });\n          stupidGoAhead = false;\n        }\n\n        if (stupidGoAhead) qm.getQueryAndStartSearchCycle.apply(qm, arguments);\n      }, this));\n    },\n    onNewCycle: function onNewCycle() {\n      this.reset();\n    },\n    onPageChange: function onPageChange(msg) {\n      msg = msg.replace('Switching to: ', '');\n      this._currentPage = msg;\n    },\n    getCurrentPage: function getCurrentPage() {\n      return this._currentPage || 'LandingPage';\n    },\n    onAppExit: function onAppExit(data) {\n      console.log('App exit requested to: ' + data); // TODO:rca - save the application history and persist it\n\n      var alerts = this.getAlerter();\n\n      if (data && data.url) {\n        if (data.type == 'orcid') {\n          alerts.alert(new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n            code: js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"].CODES.WARNING,\n            msg: '<p>You will be redirected to ORCID.</p> <p>Please sign in with your ORCID credentials and click on the \"authorize\" button.</p><button class=\"btn btn-primary\" id=\"okOrcid\">Take me to ORCID</button>',\n            modal: true,\n            events: {\n              'click button#okOrcid': 'OK'\n            }\n          })).done(function (resp) {\n            if (resp == 'OK') {\n              window.location = data.url;\n            }\n          });\n        } else {\n          window.location = data.url;\n        }\n      }\n    },\n    getAlerter: function getAlerter() {\n      return this.getApp().getController(this.alertsController || 'AlertsController');\n    },\n    createFeedback: function createFeedback(options) {\n      return new js_components_api_feedback__WEBPACK_IMPORTED_MODULE_3__[\"default\"](options);\n    },\n    reset: function reset() {\n      this._tmp = {\n        callOnce: {}\n      };\n    }\n  }))();\n\n  underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].each(underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pairs(handlers), function (pair) {\n    mediator.addFeedbackHandler(pair[0], pair[1]);\n  });\n\n  return mediator;\n}\n;\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/discovery_mediator.js?");

/***/ }),

/***/ "./src/js/wraps/error_page_manager/404.html":
/*!**************************************************!*\
  !*** ./src/js/wraps/error_page_manager/404.html ***!
  \**************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <p>\\n    Server responded with:\\n    <code>\"\n    + container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? lookupProperty(depth0,\"error\") : depth0)) != null ? lookupProperty(stack1,\"error\") : stack1), depth0))\n    + \"</code>\\n  </p>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div\\n  aria-live=\\\"assertive\\\"\\n  style=\\\"display: flex; align-items: center; flex-direction: column; margin-top: 2em\\\"\\n  class=\\\"alert alert-warning\\\"\\n>\\n  <p class=\\\"lead\\\" style=\\\"margin-bottom: 1rem\\\">\\n    \"\n    + ((stack1 = container.lambda(((stack1 = (depth0 != null ? lookupProperty(depth0,\"error\") : depth0)) != null ? lookupProperty(stack1,\"message\") : stack1), depth0)) != null ? stack1 : \"\")\n    + \"\\n  </p>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? lookupProperty(depth0,\"error\") : depth0)) != null ? lookupProperty(stack1,\"error\") : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":2},\"end\":{\"line\":14,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"  <p>\\n    Please contact our team at\\n    <a href=\\\"mailto=adshelp@cfa.harvard.edu\\\">adshelp@cfa.harvard.edu</a> for\\n    help!\\n  </p>\\n  <p>\\n    <a href=\\\"/\\\">Click here to reload Bumblebee</a> or use your browser's back\\n    button to go to a previous page.\\n  </p>\\n</div>\\n\\n<div>\\n  <img\\n    src=\\\"/styles/img/404.jpg\\\"\\n    class=\\\"img-responsive\\\"\\n    style=\\\"margin:auto;\\\"\\n    alt=\\\"incredibly cute 404 error image made by Jason Bitterman\\\"\\n  />\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/error_page_manager/404.html?");

/***/ }),

/***/ "./src/js/wraps/error_page_manager/error_page_manager.js":
/*!***************************************************************!*\
  !*** ./src/js/wraps/error_page_manager/error_page_manager.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/page_managers/controller */ \"./src/js/page_managers/controller.js\");\n/* harmony import */ var js_page_managers_one_column_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/page_managers/one_column_view */ \"./src/js/page_managers/one_column_view.js\");\n/* harmony import */ var hbs_js_wraps_error_page_manager_404__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hbs!js/wraps/error_page_manager/404 */ \"./src/js/wraps/error_page_manager/404.html\");\n/* harmony import */ var hbs_js_wraps_error_page_manager_404__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_error_page_manager_404__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! utils */ \"./src/js/utils.js\");\n\n\n\n\nvar initialState = {\n  error: {\n    message: 'Page Not Found'\n  }\n};\nvar PageManager = js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  createView: function createView(options) {\n    options = options || {};\n    return new js_page_managers_one_column_view__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n      template: (hbs_js_wraps_error_page_manager_404__WEBPACK_IMPORTED_MODULE_2___default()),\n      className: 'error-page-layout s-100-height',\n      model: new Backbone.Model(initialState),\n      modelEvents: {\n        change: 'render'\n      }\n    });\n  },\n  setMessage: function setMessage(_ref) {\n    var xhr = _ref.xhr,\n        message = _ref.message;\n    var error = utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].extractErrorMessageFromAjax(xhr);\n\n    if (typeof error === 'string' || typeof message === 'string') {\n      this.view.model.set('error', {\n        error: error,\n        message: message\n      });\n    }\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (PageManager);\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/error_page_manager/error_page_manager.js?");

/***/ }),

/***/ "./src/js/wraps/export_dropdown.js":
/*!*****************************************!*\
  !*** ./src/js/wraps/export_dropdown.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }\n/* harmony export */ });\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! underscore */ \"./node_modules/underscore/modules/index-all.js\");\n/* harmony import */ var js_widgets_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/widgets/config */ \"./src/js/widgets/config.js\");\n/* harmony import */ var js_widgets_dropdown_menu_widget__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/widgets/dropdown-menu/widget */ \"./src/js/widgets/dropdown-menu/widget.js\");\n\n\n\nvar links = [{\n  description: 'in BibTeX',\n  navEvent: 'export',\n  params: {\n    format: 'bibtex'\n  }\n}, {\n  description: 'in AASTeX',\n  navEvent: 'export',\n  params: {\n    format: 'aastex'\n  }\n}, {\n  description: 'in EndNote',\n  navEvent: 'export',\n  params: {\n    format: 'endnote'\n  }\n}, {\n  description: 'in RIS',\n  navEvent: 'export',\n  params: {\n    format: 'ris'\n  }\n}, {\n  description: 'Author Affiliation',\n  navEvent: 'show-author-affiliation-tool'\n}, {\n  description: 'Other Formats',\n  navEvent: 'export',\n  params: {\n    format: 'other'\n  }\n} // deactivated, needs the myads microservice\n// {href : '/export/query' , description : 'Export Query' , navEvent: 'export-query'}\n];\nvar btnType = 'btn-primary-faded';\nvar dropdownTitle = 'Export';\nvar iconClass = 'icon-export';\nvar rightAlign = false;\nvar selectedOption = true;\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__() {\n  var Dropdown = new js_widgets_dropdown_menu_widget__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n    links: links,\n    btnType: btnType,\n    dropdownTitle: dropdownTitle,\n    iconClass: iconClass,\n    rightAlign: rightAlign,\n    selectedOption: selectedOption,\n    updateLinks: function updateLinks(userData) {\n      var format = userData.defaultExportFormat;\n\n      var formatVal = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find(js_widgets_config__WEBPACK_IMPORTED_MODULE_1__[\"default\"].export.formats, {\n        label: format\n      }).value;\n\n      if (format) {\n        var match;\n\n        underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].forEach(links, function (link, idx) {\n          if (link.params && link.params.format && link.params.format === formatVal) {\n            match = idx;\n            return false;\n          }\n        });\n\n        if (match === 0) {\n          return links;\n        }\n\n        var newVal = underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, links[0], {\n          description: 'in ' + format,\n          params: underscore__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assign({}, links[0].params, {\n            format: formatVal\n          })\n        });\n\n        return match ? [newVal].concat(links.slice(0, match)).concat(links.slice(match + 1)) : [newVal].concat(links.slice(0));\n      }\n\n      return links;\n    }\n  });\n  return Dropdown;\n}\n;\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/export_dropdown.js?");

/***/ }),

/***/ "./src/js/wraps/home_page_manager/home-nav.html":
/*!******************************************************!*\
  !*** ./src/js/wraps/home_page_manager/home-nav.html ***!
  \******************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<nav aria-labelledby=\\\"home-page-label\\\">\\n  <h2 class=\\\"s-nav-top-title\\\" id=\\\"home-page-label\\\">\\n    <i class=\\\"fa fa-user\\\" aria-hidden=\\\"true\\\"></i> My Home Page\\n  </h2>\\n\\n  <div class=\\\"s-nav\\\">\\n    Nothing here yet! We are working on features such as:\\n    <ul>\\n      <li>a public profile with customized metrics</li>\\n      <li>a customized ads dashboard</li>\\n      <li>research notifications</li>\\n      <li>saved searches</li>\\n    </ul>\\n  </div>\\n</nav>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/home_page_manager/home-nav.html?");

/***/ }),

/***/ "./src/js/wraps/home_page_manager/home-page-layout.html":
/*!**************************************************************!*\
  !*** ./src/js/wraps/home_page_manager/home-page-layout.html ***!
  \**************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<section id=\\\"page-with-sidenav-layout\\\">\\n\\n  <!-- horizontal navbar -->\\n  <article data-widget=\\\"UserNavbarWidget\\\" />\\n\\n  <!-- mobile nav button -->\\n  <article class=\\\"nav-button-container s-nav-button-container\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary-faded toggle-menu s-toggle-menu \\\">\\n      <i class=\\\"fa fa-bars\\\" aria-hidden=\\\"true\\\"></i> Show Menu\\n    </button>\\n  </article>\\n\\n  <!-- main container -->\\n  <article class=\\\"s-darker-background user-pages__main\\\">\\n\\n    <!-- side nav -->\\n    <section class=\\\"nav-container s-nav-container user-pages__main-aside\\\"></section>\\n\\n    <!-- content -->\\n    <section class=\\\"user-pages__main-content full-width\\\"></section>\\n  </article>\\n</section>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/home_page_manager/home-page-layout.html?");

/***/ }),

/***/ "./src/js/wraps/home_page_manager/home_page_manager.js":
/*!*************************************************************!*\
  !*** ./src/js/wraps/home_page_manager/home_page_manager.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/page_managers/toc_controller */ \"./src/js/page_managers/toc_controller.js\");\n/* harmony import */ var js_page_managers_three_column_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/page_managers/three_column_view */ \"./src/js/page_managers/three_column_view.js\");\n/* harmony import */ var hbs_js_wraps_home_page_manager_home_page_layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hbs!js/wraps/home_page_manager/home-page-layout */ \"./src/js/wraps/home_page_manager/home-page-layout.html\");\n/* harmony import */ var hbs_js_wraps_home_page_manager_home_page_layout__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_home_page_manager_home_page_layout__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var hbs_js_wraps_home_page_manager_home_nav__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! hbs!js/wraps/home_page_manager/home-nav */ \"./src/js/wraps/home_page_manager/home-nav.html\");\n/* harmony import */ var hbs_js_wraps_home_page_manager_home_nav__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_home_page_manager_home_nav__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nvar PageManager = js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  TOCTemplate: (hbs_js_wraps_home_page_manager_home_nav__WEBPACK_IMPORTED_MODULE_3___default()),\n  createView: function createView(options) {\n    options = options || {};\n    options.template = options.template || (hbs_js_wraps_home_page_manager_home_page_layout__WEBPACK_IMPORTED_MODULE_2___default());\n    return new js_page_managers_three_column_view__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n      template: (hbs_js_wraps_home_page_manager_home_page_layout__WEBPACK_IMPORTED_MODULE_2___default()),\n      className: 's-home-layout s-100-height',\n      id: 'home-layout'\n    });\n  },\n  navConfig: []\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (PageManager);\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/home_page_manager/home_page_manager.js?");

/***/ }),

/***/ "./src/js/wraps/landing_page_manager/landing-page-layout.html":
/*!********************************************************************!*\
  !*** ./src/js/wraps/landing_page_manager/landing-page-layout.html ***!
  \********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div id=\\\"landing-page-layout\\\" class=\\\"s-landing-page-layout\\\">\\n  <div class=\\\"s-starry-background-wrapper\\\">\\n    <section class=\\\"s-logo-header\\\">\\n      <div>\\n        <img\\n          src=\\\"/styles/img/transparent_logo.svg\\\"\\n          alt=\\\"The Astrophysics Data System Logo\\\"\\n        />\\n        <b>astrophysics</b>&nbsp;data system\\n      </div>\\n    </section>\\n    <div class=\\\"nav-container s-landing-nav-container\\\"></div>\\n  </div>\\n\\n  <section class=\\\"s-search-bar-row  row\\\">\\n    <div class=\\\"search-bar-rows-container s-search-bar-rows-container row\\\">\\n      <br />\\n      <br />\\n      <div data-widget=\\\"SearchWidget\\\" />\\n      <div data-widget=\\\"ClassicSearchForm\\\" />\\n      <div data-widget=\\\"PaperSearchForm\\\" />\\n      <br />\\n      <div data-widget=\\\"RecommenderWidget\\\"></div>\\n    </div>\\n  </section>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/landing_page_manager/landing-page-layout.html?");

/***/ }),

/***/ "./src/js/wraps/landing_page_manager/landing-page-nav.html":
/*!*****************************************************************!*\
  !*** ./src/js/wraps/landing_page_manager/landing-page-nav.html ***!
  \*****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <li\\n      class=\\\"landing-tab \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"isSelected\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":25},\"end\":{\"line\":5,\"column\":63}}})) != null ? stack1 : \"\")\n    + \"\\\"\\n      aria-labelledby=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \"\\\"\\n    >\\n      <a href=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"path\") : depth0), depth0))\n    + \"\\\" data-widget-id=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \"\\\" id=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \"\\\">\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"title\") : depth0), depth0))\n    + \"\\n        <span class=\\\"hidden-xs\\\">\\n          Form\\n        </span>\\n      </a>\\n    </li>\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    return \" active \";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<nav class=\\\"s-landing-tabs\\\" role=\\\"navigation\\\">\\n  <ul style=\\\"padding-inline-start: 0;\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"tabs\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":4},\"end\":{\"line\":15,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"  </ul>\\n</nav>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/landing_page_manager/landing-page-nav.html?");

/***/ }),

/***/ "./src/js/wraps/landing_page_manager/landing_page_manager.js":
/*!*******************************************************************!*\
  !*** ./src/js/wraps/landing_page_manager/landing_page_manager.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/page_managers/toc_controller */ \"./src/js/page_managers/toc_controller.js\");\n/* harmony import */ var js_page_managers_one_column_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/page_managers/one_column_view */ \"./src/js/page_managers/one_column_view.js\");\n/* harmony import */ var hbs_js_wraps_landing_page_manager_landing_page_layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hbs!js/wraps/landing_page_manager/landing-page-layout */ \"./src/js/wraps/landing_page_manager/landing-page-layout.html\");\n/* harmony import */ var hbs_js_wraps_landing_page_manager_landing_page_layout__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_landing_page_manager_landing_page_layout__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var hbs_js_wraps_landing_page_manager_landing_page_nav__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! hbs!js/wraps/landing_page_manager/landing-page-nav */ \"./src/js/wraps/landing_page_manager/landing-page-nav.html\");\n/* harmony import */ var hbs_js_wraps_landing_page_manager_landing_page_nav__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_landing_page_manager_landing_page_nav__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nvar PageManager = js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  /**\n   * Attempt to get the current default home page from user data\n   */\n  getHomePageFromUserData: function getHomePageFromUserData() {\n    try {\n      var userData = this.getBeeHive().getObject('User').getUserData();\n      return userData.homePage;\n    } catch (e) {\n      return null;\n    }\n  },\n\n  /**\n   * Overrides activate to add subscription to user announcements about changes\n   * to the default home page.\n   */\n  activate: function activate() {\n    var _this = this;\n\n    js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.activate.apply(this, arguments);\n    var ps = this.getPubSub();\n    ps.subscribe(ps.USER_ANNOUNCEMENT, function (ev, data) {\n      if (ev === 'user_info_change' && data && data.homePage) {\n        _this.setHomePage(data.homePage);\n      }\n    });\n    var defaultHomePage = this.getHomePageFromUserData();\n\n    if (defaultHomePage) {\n      this.setHomePage(defaultHomePage);\n    }\n  },\n\n  /**\n   * Parse and find the navigation item from the navConfig object\n   * and set the property\n   * @param {string} page the name of the page\n   */\n  setHomePage: function setHomePage(page) {\n    var _this2 = this;\n\n    if (page) {\n      var name = page.split(' ')[0]; // find the page in the navConfig\n\n      var navItem = Object.keys(this.navConfig).filter(function (key) {\n        return _this2.navConfig[key].title === name;\n      });\n\n      if (navItem.length > 0) {\n        this.__defaultNavItem = navItem[0];\n      }\n    }\n  },\n\n  /**\n   * Override the setActive method to inject the default navItem, if we have one\n   * @param {string} navItem the navitem name\n   * @param {string} subView the subview item\n   * @param {object} extra additional flags/options\n   */\n  setActive: function setActive(navItem, subView, extra) {\n    if (extra && extra.origin === 'index-page' && this.__defaultNavItem) {\n      if (this.widgets.tocWidget.model.get('idAttribute') === this.__defaultNavItem) {\n        js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.setActive.call(this, 'SearchWidget', subView);\n      }\n\n      js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.setActive.call(this, this.__defaultNavItem, subView);\n    } else {\n      js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.setActive.apply(this, arguments);\n    }\n  },\n  TOCTemplate: (hbs_js_wraps_landing_page_manager_landing_page_nav__WEBPACK_IMPORTED_MODULE_3___default()),\n  className: 's-landing-page-layout',\n  id: 'landing-page-layout',\n  pageConfig: {\n    template: (hbs_js_wraps_landing_page_manager_landing_page_layout__WEBPACK_IMPORTED_MODULE_2___default()),\n    view: js_page_managers_one_column_view__WEBPACK_IMPORTED_MODULE_1__[\"default\"]\n  },\n  navConfig: {\n    ClassicSearchForm: {\n      title: 'Classic',\n      order: 1,\n      path: '/classic-form',\n      svg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"290px\" height=\"246px\" viewBox=\"0 0 290 246\" version=\"1.1\"><title>Artboard 1</title><desc>Created with Sketch.</desc><g stroke=\"none\" stroke-width=\"5\" fill=\"none\" fill-rule=\"evenodd\"><g class=\"svg-needs-stroke\" stroke-width=\"5\" fill=\"#FFFFFF\" fill-opacity=\"0\"><g transform=\"translate(80.000000, 53.000000)\"><rect x=\"0\" y=\"0\" width=\"129.999945\" height=\"139.429993\"/><rect x=\"13.4714969\" y=\"24.9222692\" width=\"42.4352152\" height=\"24.9222692\"/><rect x=\"74.0932328\" y=\"24.9222692\" width=\"42.4352152\" height=\"24.9222692\"/><rect x=\"13.4714969\" y=\"61.2953108\" width=\"103.056951\" height=\"16.1657963\"/><rect x=\"13.4714969\" y=\"89.5854542\" width=\"103.056951\" height=\"33.0051673\"/></g></g></g></svg>'\n    },\n    SearchWidget: {\n      title: 'Modern',\n      order: 2,\n      path: '/',\n      isSelected: 'true',\n      svg: '<svg class=\"modern-search\" xmlns=\"http://www.w3.org/2000/svg\" width=\"172px\" height=\"28px\" viewBox=\"0 0 172 28\" version=\"1.1\"><title>Rectangle 8 + Rectangle 8</title><desc>Created with Sketch.</desc><g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g transform=\"translate(-40.000000, -82.000000)\" class=\"svg-needs-fill\"><g transform=\"translate(40.000000, 82.000000)\"><path d=\"M4.26325641e-14 0L4.26325641e-14 27.0939606 164.990643 27.0939606C168.867791 27.0939606 172 23.9622017 172 20.0989813L172 6.9949793C172 3.13448997 168.861804 0 164.990643 0L4.26325641e-14 0ZM164.990643 3C167.205202 3 169 4.7916 169 6.9949793L169 20.0989813C169 22.3064289 167.209851 24.0939606 164.990643 24.0939606L3 24 3 3 164.990643 3Z\"/><g transform=\"translate(147.000000, 6.000000)\"><path d=\"M10.6047437 11.077395C9.59359708 11.8615052 8.32401807 12.3282675 6.9454209 12.3282675 3.64463092 12.3282675 0.968811942 9.65244849 0.968811942 6.35165851 0.968811942 3.05086853 3.64463092 0.375049553 6.9454209 0.375049553 10.2462109 0.375049553 12.9220299 3.05086853 12.9220299 6.35165851 12.9220299 7.26156094 12.7186956 8.12397211 12.354987 8.89593202L17.4624135 13.6586842C17.4624135 13.6586842 17.5766368 15.1532905 17.3179164 15.4307342 16.9425866 15.8332262 15.5602627 15.6984912 15.5602627 15.6984912L10.6047437 11.077395 10.6047437 11.077395ZM6.9454209 10.3360645C9.14594755 10.3360645 10.9298269 8.55218516 10.9298269 6.35165851 10.9298269 4.15113185 9.14594755 2.36725254 6.9454209 2.36725254 4.74489424 2.36725254 2.96101493 4.15113185 2.96101493 6.35165851 2.96101493 8.55218516 4.74489424 10.3360645 6.9454209 10.3360645Z\"/></g><path d=\"M138 2.5L138 25.5 138 27 141 27 141 25.5 141 2.5 141 1 138 1 138 2.5 138 2.5Z\"/></g></g></g></svg>'\n    },\n    PaperSearchForm: {\n      title: 'Paper',\n      order: 3,\n      path: '/paper-form',\n      svg: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"290px\" height=\"246px\" viewBox=\"0 0 290 246\" version=\"1.1\"><title>Artboard 1 Copy 2</title><desc>Created with Sketch.</desc><g stroke=\"none\" stroke-width=\"2\" fill=\"none\" fill-rule=\"evenodd\"><g><g transform=\"translate(80.000000, 50.000000)\"><path d=\"M11.1420871 139.441341L0 139.441341 0 0 119.984612 0 119.984612 8.26117318\" class=\"svg-needs-stroke\"stroke-width=\"5\" fill-opacity=\"0\" /><g transform=\"translate(9.289131, 6.536313)\"><rect class=\"svg-needs-stroke\"stroke-width=\"5\" fill-opacity=\"0\"  x=\"0\" y=\"0\" width=\"119.984612\" height=\"139.441341\"/><rect class=\"svg-needs-fill\" x=\"13.8443783\" y=\"27.5977654\" width=\"92.2958552\" height=\"5.81005587\"/><rect class=\"svg-needs-fill\" x=\"13.8443783\" y=\"41.396648\" width=\"92.2958552\" height=\"5.81005587\"/><rect class=\"svg-needs-fill\" x=\"13.8443783\" y=\"55.9217877\" width=\"92.2958552\" height=\"5.81005587\"/></g></g></g></g></svg>'\n    }\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (PageManager);\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/landing_page_manager/landing_page_manager.js?");

/***/ }),

/***/ "./src/js/wraps/libraries_page_manager/libraries-nav.html":
/*!****************************************************************!*\
  !*** ./src/js/wraps/libraries_page_manager/libraries-nav.html ***!
  \****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<nav class=\\\"library-nav\\\" aria-label=\\\"library navigation\\\">\\n  <div>\\n    <button class=\\\"btn btn-link create-library\\\">\\n      <i class=\\\"fa fa-plus\\\" aria-hidden=\\\"true\\\"></i>&nbsp;&nbsp;Add a library\\n    </button>\\n  </div>\\n  <div>\\n    <a href=\\\"#user/libraries\\\"\\n      ><i class=\\\"fa fa-list\\\" aria-hidden=\\\"true\\\"></i>&nbsp;&nbsp;View all\\n      libraries</a\\n    >\\n  </div>\\n  <div>\\n    <a\\n      href=\\\"/help/libraries/creating-libraries\\\"\\n      target=\\\"_blank\\\"\\n      rel=\\\"noreferrer noopener\\\"\\n    >\\n      <i class=\\\"fa fa-info-circle\\\" aria-hidden=\\\"true\\\"></i>&nbsp;&nbsp;Library\\n      Help\\n    </a>\\n  </div>\\n</nav>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/libraries_page_manager/libraries-nav.html?");

/***/ }),

/***/ "./src/js/wraps/libraries_page_manager/libraries-page-layout.html":
/*!************************************************************************!*\
  !*** ./src/js/wraps/libraries_page_manager/libraries-page-layout.html ***!
  \************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<section id=\\\"page-with-sidenav-layout\\\">\\n\\n  <!-- horizontal navbar -->\\n  <article data-widget=\\\"UserNavbarWidget\\\" />\\n\\n  <!-- mobile nav button -->\\n  <article class=\\\"nav-button-container s-nav-button-container\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary-faded toggle-menu s-toggle-menu \\\">\\n      <i class=\\\"fa fa-bars\\\" aria-hidden=\\\"true\\\"></i> Show Menu\\n    </button>\\n  </article>\\n\\n  <!-- main container -->\\n  <article class=\\\"s-darker-background user-pages__main\\\">\\n\\n    <!-- side nav -->\\n    <section class=\\\"nav-container s-nav-container user-pages__main-aside\\\"></section>\\n\\n    <!-- content -->\\n    <section class=\\\"user-pages__main-content full-width\\\">\\n      <div data-widget=\\\"IndividualLibraryWidget\\\" />\\n      <div data-widget=\\\"LibraryActionsWidget\\\" />\\n      <div data-widget=\\\"AllLibrariesWidget\\\" />\\n      <div data-widget=\\\"LibraryListWidget\\\" />\\n      <div\\n        data-widget=\\\"ExportWidget\\\"\\n        class=\\\"s-inner-div-background\\\"\\n        data-origin=\\\"library\\\"\\n      />\\n      <div\\n        data-widget=\\\"AuthorAffiliationTool\\\"\\n        class=\\\"s-inner-div-background\\\"\\n        data-origin=\\\"library\\\"\\n      />\\n      <div data-widget=\\\"Metrics\\\" class=\\\"s-inner-div-background\\\" />\\n      <div data-widget=\\\"AuthorNetwork\\\" class=\\\"s-inner-div-background\\\" />\\n      <div data-widget=\\\"PaperNetwork\\\" class=\\\"s-inner-div-background\\\" />\\n      <div data-widget=\\\"BubbleChart\\\" class=\\\"s-inner-div-background\\\" />\\n      <div data-widget=\\\"ConceptCloud\\\" class=\\\"s-inner-div-background\\\" />\\n      <div data-widget=\\\"CitationHelper\\\" class=\\\"s-inner-div-background\\\" />\\n\\n    </section>\\n  </article>\\n</section>\\n\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/libraries_page_manager/libraries-page-layout.html?");

/***/ }),

/***/ "./src/js/wraps/libraries_page_manager/libraries_page_manager.js":
/*!***********************************************************************!*\
  !*** ./src/js/wraps/libraries_page_manager/libraries_page_manager.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/page_managers/toc_controller */ \"./src/js/page_managers/toc_controller.js\");\n/* harmony import */ var js_page_managers_toc_widget__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/page_managers/toc_widget */ \"./src/js/page_managers/toc_widget.js\");\n/* harmony import */ var js_page_managers_three_column_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/page_managers/three_column_view */ \"./src/js/page_managers/three_column_view.js\");\n/* harmony import */ var hbs_js_wraps_libraries_page_manager_libraries_page_layout__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! hbs!js/wraps/libraries_page_manager/libraries-page-layout */ \"./src/js/wraps/libraries_page_manager/libraries-page-layout.html\");\n/* harmony import */ var hbs_js_wraps_libraries_page_manager_libraries_page_layout__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_libraries_page_manager_libraries_page_layout__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var hbs_js_wraps_libraries_page_manager_libraries_nav__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! hbs!js/wraps/libraries_page_manager/libraries-nav */ \"./src/js/wraps/libraries_page_manager/libraries-nav.html\");\n/* harmony import */ var hbs_js_wraps_libraries_page_manager_libraries_nav__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_libraries_page_manager_libraries_nav__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nvar PageManager = js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  TOCTemplate: (hbs_js_wraps_libraries_page_manager_libraries_nav__WEBPACK_IMPORTED_MODULE_4___default()),\n  TOCEvents: {\n    'click button.create-library': function clickButtonCreateLibrary() {\n      function createLib() {\n        var that = this; // prompt the user for the name of the new library\n\n        var name = window.prompt('Enter name for new library: '); // if user cancels the prompt, just kill it here\n\n        if (name === null) return; // don't allow a super long string\n\n        name = name.slice(0, 30);\n        this.getBeeHive().getObject('LibraryController').createLibrary({\n          name: name\n        }).done(function (data) {\n          that.getPubSub().publish(that.getPubSub().NAVIGATE, 'IndividualLibraryWidget', {\n            sub: 'library',\n            id: data.id\n          });\n        }).fail(function (res) {\n          if (res.responseJSON && res.responseJSON.error) {\n            alert('Library Not Created\\n' + res.responseJSON.error);\n          }\n        });\n      }\n\n      this.trigger('page-manager-event', 'apply-function', {\n        func: createLib\n      });\n    }\n  },\n  createView: function createView(options) {\n    options = options || {};\n    options.template = options.template || (hbs_js_wraps_libraries_page_manager_libraries_page_layout__WEBPACK_IMPORTED_MODULE_3___default());\n    return new js_page_managers_three_column_view__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n      template: (hbs_js_wraps_libraries_page_manager_libraries_page_layout__WEBPACK_IMPORTED_MODULE_3___default()),\n      className: 's-libraries-layout s-100-height',\n      id: 'libraries-layout'\n    });\n  },\n  navConfig: []\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (PageManager);\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/libraries_page_manager/libraries_page_manager.js?");

/***/ }),

/***/ "./src/js/wraps/orcid-instructions-page-manager/manager.js":
/*!*****************************************************************!*\
  !*** ./src/js/wraps/orcid-instructions-page-manager/manager.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/page_managers/controller */ \"./src/js/page_managers/controller.js\");\n/* harmony import */ var js_page_managers_one_column_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/page_managers/one_column_view */ \"./src/js/page_managers/one_column_view.js\");\n/* harmony import */ var hbs_js_wraps_orcid_instructions_page_manager_orcid_instructions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hbs!js/wraps/orcid-instructions-page-manager/orcid-instructions */ \"./src/js/wraps/orcid-instructions-page-manager/orcid-instructions.html\");\n/* harmony import */ var hbs_js_wraps_orcid_instructions_page_manager_orcid_instructions__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_orcid_instructions_page_manager_orcid_instructions__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bootstrap */ \"./src/libs/bootstrap/bootstrap.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nvar PageManager = js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  createView: function createView(options) {\n    options = options || {};\n    options.template = (hbs_js_wraps_orcid_instructions_page_manager_orcid_instructions__WEBPACK_IMPORTED_MODULE_2___default());\n    return new js_page_managers_one_column_view__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n      template: (hbs_js_wraps_orcid_instructions_page_manager_orcid_instructions__WEBPACK_IMPORTED_MODULE_2___default()),\n      className: 'orcid-info'\n    });\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (PageManager);\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/orcid-instructions-page-manager/manager.js?");

/***/ }),

/***/ "./src/js/wraps/orcid-instructions-page-manager/orcid-instructions.html":
/*!******************************************************************************!*\
  !*** ./src/js/wraps/orcid-instructions-page-manager/orcid-instructions.html ***!
  \******************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"orcid-info\\\">\\n\\n    <section class=\\\"orcid-info__intro col-sm-8 col-sm-offset-2\\\">\\n            <div class=\\\"header\\\">\\n                <div class=\\\"logos\\\">\\n                        <img src=\\\"../../styles/img/ads-orcid.svg\\\" alt=\\\"the ADS logo combined with the ORCID logo\\\" style=\\\"max-width: 150px;\\\">\\n\\n                </div>\\n\\n                <h1>ADS-ORCID Integration</h1>\\n\\n            </div>\\n\\n    </section>\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-sm-8 col-sm-offset-2\\\">\\n\\n            <!-- Nav tabs -->\\n            <ul class=\\\"nav nav-tabs\\\" role=\\\"tablist\\\">\\n                <li role=\\\"presentation\\\" class=\\\"active\\\"><a href=\\\"#orcid-instructions__claim\\\" data-dont-handle=\\\"true\\\" aria-controls=\\\"orcid-instructions__claim\\\" role=\\\"tab\\\" data-toggle=\\\"tab\\\">Claim Papers</a></li>\\n                <li role=\\\"presentation\\\"><a href=\\\"#orcid-instructions__search\\\" data-dont-handle=\\\"true\\\" aria-controls=\\\"#orcid-instructions__search\\\" role=\\\"tab\\\" data-toggle=\\\"tab\\\">Find Papers</a></li>\\n                <!--<li role=\\\"presentation\\\"><a href=\\\"#orcid-instructions__benefit\\\" aria-controls=\\\"#orcid-instructions__benefit\\\" role=\\\"tab\\\" data-toggle=\\\"tab\\\">Benefit</a></li>-->\\n            </ul>\\n\\n            <!-- Tab panes -->\\n            <div class=\\\"tab-content\\\">\\n                <div role=\\\"tabpanel\\\" class=\\\"tab-pane active\\\" id=\\\"orcid-instructions__claim\\\">\\n\\n                    <section class=\\\"orcid-info__instructions\\\">\\n\\n                        <h2 id=\\\"method-one-recommended-if-you-care-about-having-your-orcid-claims-searchable-in-the-ads\\\"><b>Recommended Method:</b> If you care about having your ORCID claims searchable in the ADS</h2>\\n                        <ol>\\n                            <li><h3 id=\\\"make-sure-you-re-signed-in-to-ads\\\">Make sure you&#39;re signed in to ADS</h3>\\n                                If you are not signed in already, <a href=\\\"#user/account/login\\\">sign in here</a> or <a\\n                                        href=\\\"#user/account/register\\\">create an account.</a>\\n                            <li><h3 id=\\\"authenticate-with-orcid\\\">Authenticate with ORCID</h3>\\n                                Click on the ORCID button in the top navigation bar and follow the instructions.</li>\\n                            <li><h3 id=\\\"enter-a-bit-of-extra-information-in-your-ads-user-profile\\\">Enter a bit of extra information in your ADS User Profile</h3>\\n                               If you haven't done this already, <a href=\\\"#user/settings/orcid\\\">go to the ORCID settings page in your ADS account</a>. Enter in 1) your current affiliation, and 2) any name variations under which you might have published. Submitting the form will grant ADS permission to track your claims, allowing us to put your data in our system and marking it as trusted so that others can find it.</li>\\n                            <li><h3 id=\\\"claim-papers-one-by-one-safe-but-slow-\\\">Claim papers one-by-one</h3>\\n                                <p>Search for your name variations in the search interface. Make sure ORCID mode is &quot;on&quot; (click on the ORCID button in the navigation bar to toggle the setting), and you will see a button underneath each search result allowing you to claim the paper.</p>\\n                            </li>\\n                            <!--<li><h3 id=\\\"bulk-claiming-your-papers-fast-and-slightly-less-safe-\\\">Bulk claiming your papers (fast and slightly less safe)</h3>-->\\n                                <!--<p>Because you are signed in, you have the option to use an ADS library to bulk export your papers to ORCID.-->\\n                                    <!--To create a library, perform a search for your name variations and for each page of results:</p>-->\\n                                <!--<ol>-->\\n                                    <!--<li>Click the &quot;select all&quot; checkbox at the top and de-select any papers that are not by you.</li>-->\\n                                    <!--<li>Open the &quot;add papers to library&quot; panel and either create a special library for your ORCID papers or add your papers to a pre-existing library.-->\\n                                        <!--Once you have collected all your papers in a library, go to your ADS Libraries page and open up the library with your ORCID papers in it. Go to the export dropdown and click &quot;ORCID&quot;.  This will send all papers in the library to ORCID as a single list.</li>-->\\n                                <!--</ol>-->\\n                            <!--</li>-->\\n                        </ol>\\n                        <hr>\\n                        <h2 id=\\\"method-two-if-you-just-want-to-use-ads-to-send-claims-to-your-orcid-profile-\\\"><b>Alternate Method: </b> If you just want to use ADS to send claims to your ORCID profile*</h2>\\n                        <ol>\\n                            <li><h3 id=\\\"authenticate-with-orcid\\\">Authenticate with ORCID</h3>\\n                                Click on the ORCID button in the top navigation bar and follow the instructions.</li>\\n                            <li><h3 id=\\\"claim-papers-one-by-one\\\">Claim papers one-by-one</h3>\\n                                Search for your name in the ADS and you&#39;ll get a list of search results. Make sure ORCID mode is &quot;on&quot; (click on the ORCID button in the navigation bar to toggle the setting). When the ORCID claiming mode is on, you&#39;ll see a button underneath each search result allowing you to claim the paper in ORCID.</li>\\n                            <li><h3 id=\\\"it-s-not-too-late-to-change-your-mind-\\\">It&#39;s not too late to change your mind!</h3>\\n                                <p> You can always sign into your ADS account (or create a new one) and  <a href=\\\"#user/settings/orcid\\\">submit the user profile information described above</a> to facilitate indexing your claims in ADS. Without performing this final step, some of your claims may not be properly indexed in ADS due to our inability to match your name variations against the published records.  </p>\\n                            </li>\\n                        </ol>\\n\\n                        <p>\\n                            * most of your papers will likely still be eventually findable in the ADS, but they will be marked as less trusted than papers claimed using Method #1\\n                        </p>\\n\\n                    </section>\\n\\n                </div>\\n                <div role=\\\"tabpanel\\\" class=\\\"tab-pane\\\" id=\\\"orcid-instructions__search\\\">\\n                    <section class=\\\"search\\\">\\n                        <br>\\n                        <p class=\\\"lead\\\">The ORCID claims you make will be indexed in ADS within 24 hours, and can be found by using the &quot;orcid&quot; search field.</p>\\n                        <hr>\\n                        <p>\\n                            e.g. to find Andrea Comastri's papers, search <a href=\\\"#search/q=orcid%3A0000-0003-3451-9970&sort=date+desc\\\"> orcid:0000-0003-3451-9970</a>.\\n                        </p>\\n                    </section>\\n                </div>\\n                <!--<div role=\\\"tabpanel\\\" class=\\\"tab-pane\\\" id=\\\"orcid-instructions__benefit\\\">-->\\n                    <!--<br>-->\\n                    <!--<p class=\\\"lead\\\">In the future, ORCID integration will be central to the ADS search interface.</p>-->\\n                    <!--<hr>-->\\n                    <!--<p>With data from ORCID, we can make our author searches smarter, reducing the problems caused by author name disambiguation.</p>-->\\n                    <!--<p>Once we can associate a user with the papers he or she has written, we can offer smarter notification and recommendation services.</p>-->\\n\\n                <!--</div>-->\\n            </div>\\n        </div>\\n    </div>\\n\\n\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/orcid-instructions-page-manager/orcid-instructions.html?");

/***/ }),

/***/ "./src/js/wraps/orcid_page_manager/orcid-page-layout.html":
/*!****************************************************************!*\
  !*** ./src/js/wraps/orcid_page_manager/orcid-page-layout.html ***!
  \****************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"row s-stable-search-bar-height\\\">\\n    <div class=\\\"s-search-bar-full-width-container\\\">\\n        <div class=\\\"col-sm-7 col-md-7 col-sm-offset-2 s-search-bar-row\\\" id=\\\"search-bar-row\\\"\\n             data-widget=\\\"SearchWidget\\\">\\n        </div>\\n    </div>\\n</div>\\n<div data-widget=\\\"OrcidBigWidget\\\"/>\\n\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/orcid_page_manager/orcid-page-layout.html?");

/***/ }),

/***/ "./src/js/wraps/orcid_page_manager/orcid_page_manager.js":
/*!***************************************************************!*\
  !*** ./src/js/wraps/orcid_page_manager/orcid_page_manager.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/page_managers/controller */ \"./src/js/page_managers/controller.js\");\n/* harmony import */ var js_page_managers_one_column_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/page_managers/one_column_view */ \"./src/js/page_managers/one_column_view.js\");\n/* harmony import */ var hbs_js_wraps_orcid_page_manager_orcid_page_layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hbs!js/wraps/orcid_page_manager/orcid-page-layout */ \"./src/js/wraps/orcid_page_manager/orcid-page-layout.html\");\n/* harmony import */ var hbs_js_wraps_orcid_page_manager_orcid_page_layout__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_orcid_page_manager_orcid_page_layout__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nvar PageManager = js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  createView: function createView(options) {\n    options = options || {};\n    options.template = (hbs_js_wraps_orcid_page_manager_orcid_page_layout__WEBPACK_IMPORTED_MODULE_2___default());\n    return new js_page_managers_one_column_view__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n      template: (hbs_js_wraps_orcid_page_manager_orcid_page_layout__WEBPACK_IMPORTED_MODULE_2___default()),\n      className: 's-orcid-layout',\n      id: 'orcid-page-layout'\n    });\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (PageManager);\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/orcid_page_manager/orcid_page_manager.js?");

/***/ }),

/***/ "./src/js/wraps/paper_network.js":
/*!***************************************!*\
  !*** ./src/js/wraps/paper_network.js ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }\n/* harmony export */ });\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marionette */ \"./src/libs/backbone.marionette.js\");\n/* harmony import */ var marionette__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(marionette__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_widgets_network_vis_network_widget__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/widgets/network_vis/network_widget */ \"./src/js/widgets/network_vis/network_widget.js\");\n/* harmony import */ var js_components_api_query_updater__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! js/components/api_query_updater */ \"./src/js/components/api_query_updater.js\");\n/* harmony import */ var hbs_js_wraps_templates_paper_network_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! hbs!js/wraps/templates/paper-network-data */ \"./src/js/wraps/templates/paper-network-data.html\");\n/* harmony import */ var hbs_js_wraps_templates_paper_network_data__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_templates_paper_network_data__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var hbs_js_wraps_templates_paper_network_container__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! hbs!js/wraps/templates/paper-network-container */ \"./src/js/wraps/templates/paper-network-container.html\");\n/* harmony import */ var hbs_js_wraps_templates_paper_network_container__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_templates_paper_network_container__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var hbs_js_widgets_network_vis_templates_not_enough_data_template__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! hbs!js/widgets/network_vis/templates/not-enough-data-template */ \"./src/js/widgets/network_vis/templates/not-enough-data-template.html\");\n/* harmony import */ var hbs_js_widgets_network_vis_templates_not_enough_data_template__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(hbs_js_widgets_network_vis_templates_not_enough_data_template__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var hbs_js_wraps_templates_paper_network_link_data__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! hbs!js/wraps/templates/paper-network-link-data */ \"./src/js/wraps/templates/paper-network-link-data.html\");\n/* harmony import */ var hbs_js_wraps_templates_paper_network_link_data__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_templates_paper_network_link_data__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var js_components_api_targets__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! js/components/api_targets */ \"./src/js/components/api_targets.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! bootstrap */ \"./src/libs/bootstrap/bootstrap.js\");\n/* harmony import */ var bootstrap__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(bootstrap__WEBPACK_IMPORTED_MODULE_8__);\n\n\n\n\n\n\n\n\n\nvar options = {};\noptions.endpoint = js_components_api_targets__WEBPACK_IMPORTED_MODULE_7__[\"default\"].SERVICE_PAPER_NETWORK;\noptions.networkType = 'paper';\noptions.helpText = '<p>Papers are grouped by shared references, because ' + ' they are more likely to discuss similar topics.</p>' + ' <p>If your search returned a large enough set of papers, you will see two views:' + ' a <span class=\"s-text-bold\">summary view</span>  with groups of tightly linked papers, and a <span class=\"s-text-bold\">detail view</span> ' + ' that gives you more information about the group </p>';\nvar GraphModel = Backbone.Model.extend({\n  defaults: function defaults() {\n    return {\n      // data from the api\n      graphData: {},\n      // keep track of selection state\n      selectedEntity: undefined,\n      cachedEntity: undefined,\n      linkLayer: false,\n      mode: 'occurrences'\n    };\n  }\n});\noptions.graphView = marionette__WEBPACK_IMPORTED_MODULE_0___default().ItemView.extend({\n  template: (hbs_js_wraps_templates_paper_network_container__WEBPACK_IMPORTED_MODULE_4___default()),\n  className: 'graph-view',\n  events: {\n    'change input[name=mode]': function changeInputNameMode(e) {\n      this.model.set('mode', e.target.value);\n    },\n    'change input[name=show-link]': function changeInputNameShowLink(e) {\n      this.model.set('linkLayer', e.target.checked);\n    },\n    'click .filter-remove': function clickFilterRemove(e) {\n      var id = this.model.get('selectedEntity');\n\n      var displayName = _.findWhere(this.model.get('graphData').summaryGraph.nodes, {\n        id: id\n      }).node_name; // showing display name\n\n\n      marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'filterCollection').remove({\n        id: displayName\n      }); // re-render detail sub view\n\n      this.showSelectedEntity();\n    },\n    'click .filter-add': function clickFilterAdd(e) {\n      var id = this.model.get('selectedEntity');\n\n      var displayName = _.findWhere(this.model.get('graphData').summaryGraph.nodes, {\n        id: id\n      }).node_name;\n\n      marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(this, 'filterCollection').add({\n        name: displayName\n      }); // re-render detail sub view\n\n      this.showSelectedEntity();\n    }\n  },\n  modelEvents: {\n    'change:graphData': 'renderGraph',\n    'change:selectedEntity': 'showSelectedEntity',\n    'change:mode': 'changeMode'\n  },\n  onRender: function onRender() {\n    if (this.model.get('graphData')) {\n      this.renderGraph();\n    }\n  },\n\n  /* functions to render the graph and overlay */\n  getConfig: function getConfig() {\n    // hold static config variables here\n    this.config = {\n      width: 300,\n      height: 300,\n      noGroupColor: 'hsl(0, 0%, 65%)'\n    };\n    this.config.radius = Math.min(this.config.width, this.config.height) / 1.5;\n    this.config.outerRadius = Math.min(this.config.width, this.config.height) * 0.33;\n    this.config.innerRadius = Math.min(this.config.width, this.config.height) * 0.21;\n  },\n  generateCachedVals: function generateCachedVals() {\n    var that = this; // these are d3 layouts/objects we cache for multiple functions\n\n    this.cachedVals = {\n      line: undefined,\n      bundle: undefined,\n      svg: undefined,\n      arc: undefined\n    };\n    this.cachedVals.bundle = d3.layout.bundle();\n    this.cachedVals.line = d3.svg.line.radial().interpolate('bundle').tension(0.3).radius(function (d) {\n      if (d.startAngle) {\n        return that.config.innerRadius + 10;\n      } // it's the center node\n\n\n      return 0;\n    }).angle(function (d) {\n      if (d.startAngle) {\n        return (d.startAngle + d.endAngle) / 2;\n      }\n\n      return 0;\n    });\n    this.cachedVals.svg = d3.select(this.$('svg.network-chart')[0]).attr('width', that.config.width).attr('height', that.config.height).append('g').attr('transform', 'translate(' + that.config.width / 2 + ',' + that.config.height / 2 + ')');\n    this.cachedVals.arc = d3.svg.arc().innerRadius(that.config.innerRadius).outerRadius(that.config.outerRadius);\n    this.cachedVals.pie = d3.layout.pie().value(function (d) {\n      return d.paper_count;\n    }).sort(function (a, b) {\n      return a.node_name - b.node_name;\n    });\n\n    that.cachedVals.groupTicks = function (d) {\n      return {\n        angle: (d.startAngle + d.endAngle) / 2,\n        label: d.data.node_label,\n        data: d\n      };\n    };\n  },\n  computeScales: function computeScales() {\n    var graphData = this.model.get('graphData').summaryGraph;\n    this.scales = {}; // get a  range for link weights\n\n    var weights = _.map(graphData.links, function (l) {\n      if (l.source !== l.target) {\n        return l.weight;\n      }\n    });\n\n    this.scales.tensionScale = d3.scale.linear().domain([d3.min(weights), d3.max(weights)]).range([0, 1]);\n    this.scales.linkScale = d3.scale.linear().domain([d3.min(weights), d3.max(weights)]).range([3, 22]);\n\n    var paperCounts = _.pluck(graphData.nodes, 'paper_count'); // set up initial font scale\n\n\n    this.scales.initialFontScale = d3.scale.linear().domain([d3.min(paperCounts), d3.max(paperCounts)]).range([9, 14]);\n    this.scales.fill = d3.scale.ordinal().domain([1, 2, 3, 4, 5, 6]).range(['hsl(282, 59%, 61%)', 'hsl(349, 54%, 57%)', 'hsl(26, 94%, 73%)', 'hsl(152, 40%, 52%)', 'hsl(193, 65%, 69%)', 'hsl(220, 70%, 65%)', 'hsl(250, 44%, 58%)']);\n  },\n  renderGraph: function renderGraph() {\n    this.getConfig();\n    this.computeScales();\n    this.generateCachedVals();\n    var svg = this.cachedVals.svg;\n    var graphData = this.model.get('graphData').summaryGraph;\n    var labelSum = [];\n    var that = this;\n\n    if (!graphData) {\n      this.$el.html(hbs_js_widgets_network_vis_templates_not_enough_data_template__WEBPACK_IMPORTED_MODULE_5___default()());\n    }\n\n    var pie = this.cachedVals.pie;\n    var arc = this.cachedVals.arc;\n    var data = pie(graphData.nodes); // can't be equal to zero or else the lines barf\n\n    _.findWhere(data, {\n      startAngle: 0\n    }).startAngle = 0.001;\n    svg.selectAll('rect').data(data).enter().append('rect').classed('node-path', true); // do this first so that the path data can layer over it slightly\n    // and make it look better\n\n    this.renderLinkLayer();\n    svg.selectAll('rect').remove();\n    svg.selectAll('.node-path').data(data).enter().append('path').classed('node-path', true).attr('fill', function (d, i) {\n      if (d.data.node_name > 7) {\n        return that.config.noGroupColor;\n      }\n\n      return that.scales.fill(d.data.node_name);\n    }).attr('d', arc) // for testing purposes, add the id\n    .attr('id', function (d, i) {\n      return 'vis-group-' + d.data.node_name;\n    }).on('mouseover', fade('mouseenter')).on('mouseout', fade('mouseleave')) // trigger group select events\n    .on('click', function (d, i) {\n      var groupId = d.data.id;\n      that.model.set('selectedEntity', this);\n    });\n    var ticks = svg.selectAll('.groupLabel').data(function () {\n      return _.map(data, function (d, i) {\n        return that.cachedVals.groupTicks(d);\n      });\n    }).enter().append('g').each(function (d) {\n      labelSum.push(d.data.value);\n    }).classed('groupLabel', true).attr('transform', function (d) {\n      return 'rotate(' + (d.angle * 180 / Math.PI - 90) + ')' + 'translate(' + that.config.outerRadius * 1 / 1 + ',0)';\n    });\n    labelSum = d3.sum(labelSum); // append labels\n\n    var text = ticks.append('g').attr('x', 0).attr('dy', '.5em').attr('transform', function (d, i) {\n      return 'rotate(' + -(d.angle * 180 / Math.PI - 90) + ')';\n    }).classed('summary-label-container', true).classed('hidden', function (d) {\n      if (d.data.value / labelSum < 0.08) {\n        return true;\n      }\n    }).selectAll('text').data(function (d, i) {\n      var data = _.pairs(d.label); // take top 4 with highest idf\n\n\n      data = _.sortBy(data, function (d) {\n        return -d[1];\n      });\n      data = data.slice(0, 5);\n      return _.map(data, function (wordList) {\n        wordList[2] = d.data.data.id;\n        return wordList;\n      });\n    }).enter().append('text').attr('x', 0).classed('paper-network-labels', true).attr('text-anchor', 'middle').attr('y', function (d, i, j) {\n      var size = _.findWhere(graphData.nodes, {\n        id: d[2]\n      }).paper_count;\n\n      return i * that.scales.initialFontScale(size) - 30;\n    }).attr('font-size', function (d, i, j) {\n      var size = _.findWhere(graphData.nodes, {\n        id: d[2]\n      }).paper_count;\n\n      return that.scales.initialFontScale(size) + 'px';\n    }).text(function (d, i) {\n      return d[0];\n    }); // show and fade labels\n\n    text.on('mouseover', fadeText('mouseenter')).on('mouseout', fadeText('mouseleave')); // trigger group select events\n\n    text.on('click', function (d) {\n      var nodeName = d3.select(this.parentNode).data()[0].data.data.node_name;\n      var nodePath = that.$('#vis-group-' + nodeName)[0];\n      that.model.set('selectedEntity', nodePath);\n    }); // Returns an event handler for fading a given chord group.\n\n    function fade(event) {\n      return function (g, i, j) {\n        // properly color the group background\n        if (event === 'mouseenter') {\n          if (g.data.node_name > 7) {\n            d3.select(this).attr('fill', d3.hsl(that.config.noGroupColor).darker(0.7));\n          } else {\n            d3.select(this).attr('fill', d3.hsl(that.scales.fill(g.data.node_name)).darker(0.7));\n          }\n        } else if (g.data.node_name > 7) {\n          d3.select(this).attr('fill', that.config.noGroupColor);\n        } else {\n          d3.select(this).attr('fill', that.scales.fill(g.data.node_name));\n        }\n      };\n    } // have to add this to the text or else it interferes with mouseover\n\n\n    function fadeText(event) {\n      return function (g, j, i) {\n        // properly color the group background\n        var nodeName = d3.select(this.parentNode).data()[0].data.data.node_name;\n        var pieNode = d3.selectAll('.node-path').filter(function (d) {\n          return d.data.node_name === nodeName;\n        })[0][0];\n\n        if (event === 'mouseenter') {\n          if (nodeName > 7) {\n            d3.select(pieNode).attr('fill', d3.hsl(that.config.noGroupColor).darker(0.7));\n          } else {\n            d3.select(pieNode).attr('fill', d3.hsl(that.scales.fill(nodeName)).darker(0.7));\n          }\n        } else if (nodeName > 7) {\n          d3.select(pieNode).attr('fill', d3.hsl(that.config.noGroupColor));\n        } else {\n          d3.select(pieNode).attr('fill', that.scales.fill(nodeName));\n        }\n      };\n    }\n  },\n  parseLinks: function parseLinks(links) {\n    var svg = this.cachedVals.svg;\n    var parentInCommon = {\n      name: 'fake'\n    };\n    links = _.chain(links).map(function (l) {\n      var linkData = {};\n      linkData.source = svg.selectAll('.node-path').filter(function (d, i) {\n        return d.data.stable_index == l.source;\n      })[0][0].__data__;\n      linkData.target = svg.selectAll('.node-path').filter(function (d, i) {\n        return d.data.stable_index == l.target;\n      })[0][0].__data__; // ignore self links\n\n      if (linkData.source === linkData.target) {\n        return undefined;\n      }\n\n      linkData.weight = l.weight;\n      linkData.source.parent = parentInCommon;\n      linkData.target.parent = parentInCommon;\n      return linkData;\n    }).filter(function (l) {\n      if (l) {\n        return true;\n      }\n    }).value();\n    return links;\n  },\n  updateLinkLayer: function updateLinkLayer() {\n    var that = this;\n    var svg = this.cachedVals.svg;\n    var links = that.model.get('graphData').summaryGraph.links;\n    var line;\n    links = this.parseLinks(links);\n    line = this.cachedVals.line;\n    svg.selectAll('.link').data(that.cachedVals.bundle(links)).transition().duration(1000).attr('d', function (d) {\n      return line(d);\n    });\n  },\n  renderLinkLayer: function renderLinkLayer() {\n    var that = this;\n    var svg = this.cachedVals.svg;\n    var links = that.model.get('graphData').summaryGraph.links;\n    var line;\n    var linkContainer;\n    links = this.parseLinks(links);\n    line = this.cachedVals.line;\n    linkContainer = svg.append('g').classed('link-container', true);\n    linkContainer.append('circle').attr('r', that.config.radius).classed('link-background', true);\n    linkContainer.selectAll('.link').data(that.cachedVals.bundle(links)).enter().append('path').attr('class', 'link').attr('d', function (d) {\n      return line(d);\n    }).attr('stroke-width', function (d) {\n      // get link weight\n      var weight = _.findWhere(links, function (l) {\n        return l.source == d[0] && l.target == d[d.length - 1] || l.target == d[0] && l.source == d[d.length - 1];\n      }).weight;\n\n      return that.scales.linkScale(weight);\n    }).on('click', function (d) {\n      // set the selected Entity to be the link\n      that.model.set('selectedEntity', [d[0], d[2]]);\n    });\n  },\n  showSelectedEntity: function showSelectedEntity() {\n    var that = this;\n    var data = {};\n    var topNodes; // expects the id, not the path itself\n\n    var entity = this.model.get('selectedEntity'); // it's a link\n\n    if (_.isArray(entity)) {\n      var id1;\n      var id2;\n      var links1;\n      var links2;\n      var allReferences1;\n      var allReferences2;\n      var shared = []; // find references in common\n\n      id1 = entity[0].data.id;\n      id2 = entity[1].data.id;\n      links1 = that.getAllLinks(id1);\n      links2 = that.getAllLinks(id2);\n      allReferences1 = _.flatten(_.pluck(links1, 'overlap'));\n      allReferences2 = _.flatten(_.pluck(links2, 'overlap'));\n\n      _.each(_.intersection(allReferences1, allReferences2), function (s) {\n        var percent1 = _.filter(allReferences1, function (b) {\n          return b == s;\n        }).length / allReferences1.length;\n        var percent2 = _.filter(allReferences2, function (b) {\n          return b == s;\n        }).length / allReferences2.length;\n        shared.push({\n          name: s,\n          percentOne: percent1 * 100,\n          percentTwo: percent2 * 100\n        });\n      });\n\n      shared = _.sortBy(shared, function (s) {\n        return s.percentOne * s.percentTwo;\n      }).reverse();\n      data.shared = shared;\n\n      _.each(data.shared, function (s, i) {\n        data.shared[i].percentOne = data.shared[i].percentOne.toFixed(2);\n        data.shared[i].percentTwo = data.shared[i].percentTwo.toFixed(2);\n      });\n\n      data.group1 = {\n        name: _.findWhere(this.model.get('graphData').summaryGraph.nodes, {\n          id: id1\n        }).node_name\n      };\n      data.group1.color = data.group1.name < 8 ? that.scales.fill(data.group1.name) : that.config.noGroupColor;\n      data.group2 = {\n        name: _.findWhere(this.model.get('graphData').summaryGraph.nodes, {\n          id: id2\n        }).node_name\n      };\n      data.group2.color = data.group1.name < 8 ? that.scales.fill(data.group2.name) : that.config.noGroupColor;\n      data.referencesLength = data.shared.length; // not actually located within this view, so slightly messy\n\n      $('.details-container #selected-item').html(hbs_js_wraps_templates_paper_network_link_data__WEBPACK_IMPORTED_MODULE_6___default()(data));\n    } // it's a node id\n    else {\n      // the network widget actually expects a path\n      var entity = entity.__data__.data.id;\n\n      var groupData = _.findWhere(that.model.get('graphData').summaryGraph.nodes, function (g) {\n        return g.id == entity;\n      }); // make a copy\n\n\n      var summaryData = $.extend({}, groupData);\n      summaryData.processedTopCommonReferences = [];\n      summaryData.titleWords = _.keys(groupData.node_label);\n\n      var groupBibs = _.pluck(that.getAllNodes(entity), 'node_name');\n\n      _.each(summaryData.top_common_references, function (v, k) {\n        var inGroup = !!_.contains(groupBibs, k);\n        summaryData.processedTopCommonReferences.push({\n          bibcode: k,\n          percent: (v * 100).toFixed(0),\n          inGroup: inGroup\n        });\n      });\n\n      summaryData.processedTopCommonReferences = _.sortBy(summaryData.processedTopCommonReferences, function (n) {\n        return n[1];\n      }).reverse(); // using OLD ID because it is the one that joins the group to the detail nodes\n\n      var filteredNodes = this.getAllNodes(groupData.id);\n      topNodes = _.sortBy(filteredNodes, function (o) {\n        return o.citation_count;\n      }).reverse();\n      data.morePapers = topNodes.length > 30;\n      data.summaryData = summaryData;\n      data.inFilter = !!marionette__WEBPACK_IMPORTED_MODULE_0___default().getOption(that, 'filterCollection').get(groupData.node_name);\n      data.topNodes = topNodes.slice(0, 30);\n      data.groupIdToShow = groupData.node_name;\n      data.borderColor = groupData.node_name < 8 ? that.scales.fill(groupData.node_name) : that.config.noGroupColor; // create a faded background color\n\n      data.backgroundColor = d3.hsl(data.borderColor).brighter();\n      $('.details-container #selected-item').html(hbs_js_wraps_templates_paper_network_data__WEBPACK_IMPORTED_MODULE_3___default()(data));\n    } // set the selected details tab as default\n\n\n    $(\".nav-tabs a[href='#selected-item']\").tab('show');\n  },\n  changeMode: function changeMode() {\n    var that = this;\n    var pie = this.cachedVals.pie;\n    var arc = this.cachedVals.arc;\n    var svg = this.cachedVals.svg;\n    var vals = [];\n    var fontScale;\n    var data;\n    var newData;\n    var groups;\n    var labelSum = [];\n    var graphData = this.model.get('graphData').summaryGraph;\n    var mode = this.model.get('mode');\n\n    function arcTween(d, i) {\n      var i = d3.interpolate({\n        startAngle: this.oldStartAngle,\n        endAngle: this.oldEndAngle\n      }, d);\n      return function (t) {\n        var b = i(t);\n        this.startAngle = b.startAngle;\n        this.endAngle = b.endAngle;\n        return arc(b);\n      };\n    }\n\n    pie.value(function (d) {\n      if (mode === 'references') {\n        var linkInfo = _.findWhere(graphData.links, function (l) {\n          if (l.source === d.stable_index && l.target === d.stable_index) {\n            return true;\n          }\n        });\n\n        vals.push(linkInfo.weight);\n        return linkInfo.weight;\n      }\n\n      vals.push(d[mode]);\n      return d[mode];\n    });\n    data = pie(graphData.nodes);\n    fontScale = d3.scale.linear().domain([d3.min(vals), d3.max(vals)]).range([7, 17]); // can't be equal to zero or else the lines barf\n\n    _.findWhere(data, {\n      startAngle: 0\n    }).startAngle = 0.001;\n    svg.selectAll('.node-path').each(function (d) {\n      // cache for the transition\n      this.oldStartAngle = d.startAngle;\n      this.oldEndAngle = d.endAngle;\n    }).data(data, function (d) {\n      return d.data.id;\n    }).transition().duration(1000).attrTween('d', arcTween); // take care of link placement\n\n    this.updateLinkLayer();\n    newData = _.map(data, function (d) {\n      labelSum.push(d.value);\n      return that.cachedVals.groupTicks(d);\n    });\n    labelSum = d3.sum(labelSum);\n    groups = svg.selectAll('.groupLabel').data(newData).transition().duration(1000).attr('transform', function (d) {\n      return 'rotate(' + (d.angle * 180 / Math.PI - 90) + ')' + 'translate(' + that.config.outerRadius + ',0)';\n    });\n    svg.selectAll('.summary-label-container') // why isn't this updating with the parent data ????\n    // WHYY?????\n    .data(newData).classed('hidden', function (d) {\n      if (d.data.value / labelSum < 0.08) {\n        return true;\n      }\n    }).transition().duration(1000).attr('transform', function (d, i) {\n      return 'rotate(' + -(d.angle * 180 / Math.PI - 90) + ')';\n    });\n    groups.selectAll('text').attr('y', function (d, i, j) {\n      var size = this.parentNode.__data__.data.value;\n      return i * fontScale(size) - 30;\n    }).attr('font-size', function (d, i, j) {\n      var size = this.parentNode.__data__.data.value;\n      return fontScale(size) + 'px';\n    });\n  },\n  getAllNodes: function getAllNodes(id) {\n    var fullGraph = this.model.get('graphData').fullGraph;\n    var filteredNodes = [];\n\n    _.each(fullGraph.nodes, function (n, i) {\n      if (n.group === id) {\n        filteredNodes.push(n);\n      }\n    });\n\n    return filteredNodes;\n  },\n  getAllLinks: function getAllLinks(id) {\n    var fullGraph = this.model.get('graphData').fullGraph;\n    var indexes = [];\n    var links = [];\n    var filteredNodes = [];\n\n    _.each(fullGraph.nodes, function (n, i) {\n      if (n.group === id) {\n        indexes.push(i);\n      }\n    });\n\n    _.each(fullGraph.links, function (l, i) {\n      if (indexes.indexOf(l.source) !== -1 || indexes.indexOf(l.target) !== -1) {\n        links.push(l);\n      }\n    });\n\n    return links;\n  }\n});\n\noptions.broadcastFilteredQuery = function () {\n  var graphData = this.model.get('graphData');\n  var that = this;\n  var filterBibcodes = [];\n  var newQuery = this.getCurrentQuery().clone(); // get associated bibcodes\n\n  this.filterCollection.each(function (model) {\n    var name = model.get('name');\n\n    var group = _.findWhere(graphData.summaryGraph.nodes, {\n      node_name: name\n    });\n\n    var bibcodes = that.view.graphView.getAllNodes(group.id);\n    bibcodes = _.pluck(bibcodes, 'node_name');\n    Array.prototype.push.apply(filterBibcodes, bibcodes);\n  });\n  newQuery.unlock();\n  newQuery.set('__bigquery', filterBibcodes);\n  this.resetWidget();\n  var ps = this.getPubSub();\n  ps.publish(ps.CUSTOM_EVENT, 'second-order-search/limit', {\n    ids: filterBibcodes\n  });\n};\n\noptions.widgetName = 'PaperNetwork';\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__() {\n  return new js_widgets_network_vis_network_widget__WEBPACK_IMPORTED_MODULE_1__[\"default\"](options);\n}\n;\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/paper_network.js?");

/***/ }),

/***/ "./src/js/wraps/public_libraries_page_manager/public-libraries-page-layout.html":
/*!**************************************************************************************!*\
  !*** ./src/js/wraps/public_libraries_page_manager/public-libraries-page-layout.html ***!
  \**************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"row s-darker-background\\\" style=\\\"margin-right:0;\\\"\\\">\\n  <div class=\\\"col-sm-12\\\">\\n    <div class=\\\"s-public-lib-descriptor\\\">\\n      <h3>\\n        <i\\n          class=\\\"fa fa-lg fa-unlock text-success\\\"\\n          title=\\\"This library is public\\\"\\n        ></i>\\n        ADS Public Library\\n      </h3>\\n      <a href=\\\"\\\"><i class=\\\"fa fa-icon-help\\\" aria-hidden=\\\"true\\\"></i></a\\n      ><i class=\\\"fa fa-icon-help\\\" aria-hidden=\\\"true\\\"></i>\\n    </div>\\n    <div data-widget=\\\"IndividualLibraryWidget\\\" />\\n    <div data-widget=\\\"LibraryActionsWidget\\\" />\\n    <div data-widget=\\\"LibraryListWidget\\\" />\\n\\n    <div data-widget=\\\"ExportWidget\\\" class=\\\"s-inner-div-background\\\" />\\n    <div data-widget=\\\"Metrics\\\" class=\\\"s-inner-div-background\\\" />\\n    <div data-widget=\\\"AuthorNetwork\\\" class=\\\"s-inner-div-background\\\" />\\n    <div data-widget=\\\"PaperNetwork\\\" class=\\\"s-inner-div-background\\\" />\\n    <!--<div data-widget=\\\"BubbleChart\\\" class=\\\"s-inner-div-background\\\"/>-->\\n    <div data-widget=\\\"ConceptCloud\\\" class=\\\"s-inner-div-background\\\" />\\n    <div data-widget=\\\"CitationHelper\\\" class=\\\"s-inner-div-background\\\" />\\n  </div>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/public_libraries_page_manager/public-libraries-page-layout.html?");

/***/ }),

/***/ "./src/js/wraps/public_libraries_page_manager/public_libraries_manager.js":
/*!********************************************************************************!*\
  !*** ./src/js/wraps/public_libraries_page_manager/public_libraries_manager.js ***!
  \********************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/page_managers/controller */ \"./src/js/page_managers/controller.js\");\n/* harmony import */ var js_page_managers_one_column_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/page_managers/one_column_view */ \"./src/js/page_managers/one_column_view.js\");\n/* harmony import */ var hbs_js_wraps_public_libraries_page_manager_public_libraries_page_layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hbs!js/wraps/public_libraries_page_manager/public-libraries-page-layout */ \"./src/js/wraps/public_libraries_page_manager/public-libraries-page-layout.html\");\n/* harmony import */ var hbs_js_wraps_public_libraries_page_manager_public_libraries_page_layout__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_public_libraries_page_manager_public_libraries_page_layout__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nvar PageManager = js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  createView: function createView(options) {\n    options = options || {};\n    options.template = (hbs_js_wraps_public_libraries_page_manager_public_libraries_page_layout__WEBPACK_IMPORTED_MODULE_2___default());\n    return new js_page_managers_one_column_view__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n      template: (hbs_js_wraps_public_libraries_page_manager_public_libraries_page_layout__WEBPACK_IMPORTED_MODULE_2___default()),\n      className: 's-public-libraries-layout s-libraries-layout',\n      id: 'landing-page-layout'\n    });\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (PageManager);\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/public_libraries_page_manager/public_libraries_manager.js?");

/***/ }),

/***/ "./src/js/wraps/results_page_manager.js":
/*!**********************************************!*\
  !*** ./src/js/wraps/results_page_manager.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/page_managers/controller */ \"./src/js/page_managers/controller.js\");\n/* harmony import */ var js_page_managers_three_column_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/page_managers/three_column_view */ \"./src/js/page_managers/three_column_view.js\");\n/* harmony import */ var hbs_js_page_managers_templates_results_page_layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hbs!js/page_managers/templates/results-page-layout */ \"./src/js/page_managers/templates/results-page-layout.html\");\n/* harmony import */ var hbs_js_page_managers_templates_results_page_layout__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hbs_js_page_managers_templates_results_page_layout__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var js_mixins_side_bar_manager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! js/mixins/side_bar_manager */ \"./src/js/mixins/side_bar_manager.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ \"./src/libs/jquery.js\");\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! utils */ \"./src/js/utils.js\");\n\n\n\n\n\n\nvar PageManager = js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  initialize: function initialize() {\n    var _this = this;\n\n    js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.initialize.apply(this, arguments);\n    this.resultsTimer = new utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].TimingEvent('all-results-loaded', 'workflow');\n    this.fullResultsTimer = new utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].TimingEvent('all-results-and-auxillary-loaded', 'workflow');\n    this._referrer = null; // observe scrolling and apply sticky menu\n\n    this.observer = new IntersectionObserver(function () {\n      _this.adjustStickyElements();\n    }, {\n      threshold: 0\n    });\n    this.observing = false; // observe resizing and apply sticky menu\n\n    _.bindAll(this, 'adjustStickyElements');\n\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()(window).on('resize', _.throttle(this.adjustStickyElements, 200));\n  },\n  persistentWidgets: ['PubtypeFacet', 'SearchWidget', 'BreadcrumbsWidget', 'Sort', 'ExportDropdown', 'VisualizationDropdown', 'AffiliationFacet', 'AuthorFacet', 'DatabaseFacet', 'RefereedFacet', 'KeywordFacet', 'BibstemFacet', 'BibgroupFacet', 'DataFacet', 'VizierFacet', 'GrantsFacet', 'Results', 'OrcidBigWidget', 'QueryInfo', 'GraphTabs', 'OrcidSelector'],\n  activate: function activate() {\n    js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.activate.apply(this, arguments);\n    var ps = this.getPubSub();\n    ps.subscribe(ps.START_SEARCH, _.bind(this.onStartSearch, this));\n    ps.subscribe(ps.USER_ANNOUNCEMENT, _.bind(this.onUserUpdate, this)); // calls the sideBarManager mixin init handler\n\n    this.init();\n  },\n  // Make menu bar and menus sticky\n  adjustStickyElements: function adjustStickyElements() {\n    // if single column and actions buttons container reached top of viewport\n    if (window.matchMedia('(max-width: 788px)').matches && jquery__WEBPACK_IMPORTED_MODULE_4___default()('#search-results-sort').get(0) && jquery__WEBPACK_IMPORTED_MODULE_4___default()('#search-results-sort').get(0).getBoundingClientRect().bottom <= 0) {\n      var height = jquery__WEBPACK_IMPORTED_MODULE_4___default()('#search-results-actions').outerHeight(true);\n      this.stickElements(height);\n    } else {\n      this.unStickElements();\n    }\n  },\n  stickElements: function stickElements(top) {\n    // button container\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('#search-results-actions').addClass('sticky'); // add to library widget\n\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('#query-info-container').attr('style', \"position:fixed;top:\".concat(top, \"px;right:0\"));\n  },\n  unStickElements: function unStickElements() {\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('#search-results-actions').removeClass('sticky');\n    jquery__WEBPACK_IMPORTED_MODULE_4___default()('#query-info-container').attr('style', '');\n  },\n  onStartSearch: function onStartSearch() {\n    this.resultsTimer.start();\n    this.fullResultsTimer.start();\n  },\n  onUserUpdate: function onUserUpdate(event) {\n    var user = this.getBeeHive().getObject('User');\n\n    if (event === user.USER_SIGNED_OUT) {\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()('#results-actions-toggle').addClass('disabled');\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()('#query-info-container').removeClass('show');\n      jquery__WEBPACK_IMPORTED_MODULE_4___default()('#results-actions-toggle').html('<i class=\"fa fa-book\" alt=\"open actions\"></i> Actions');\n    }\n  },\n  createView: function createView(options) {\n    options = options || {};\n    options.template = options.template || (hbs_js_page_managers_templates_results_page_layout__WEBPACK_IMPORTED_MODULE_2___default());\n    return new js_page_managers_three_column_view__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n      template: (hbs_js_page_managers_templates_results_page_layout__WEBPACK_IMPORTED_MODULE_2___default())\n    });\n  },\n  show: function show() {\n    var isLoggedIn = this.getBeeHive().getObject('User').isLoggedIn();\n    var ret = js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.show.apply(this, arguments);\n    var self = this;\n    var button = '<a href=\"javascript:void(0);\" class=\"back-button btn btn-sm btn-default\"> <i class=\"fa fa-arrow-left\" aria-hidden=\"true\"></i> Start New Search</a>';\n    var $btn = ret.$el.find('.s-back-button-container');\n    $btn.empty().off('click').html(button);\n    $btn.click(function () {\n      var ps = self.getPubSub();\n      ps.publish(ps.CUSTOM_EVENT, 'start-new-search');\n      ps.publish(ps.NAVIGATE, self._referrer || 'index-page');\n      self._referrer = null;\n      return false;\n    }); // Observe the item above sticky menu disappears\n\n    if (!this.observing && ret.$el.find('#search-results-sort')[0]) {\n      this.observer.observe(ret.$el.find('#search-results-sort')[0]);\n      this.observing = true;\n    } // close any drawers\n\n\n    var actionBtn = ret.$el.find('#results-actions-toggle')[0];\n    actionBtn.innerHTML = '<i class=\"fa fa-book\" alt=\"open actions\" aria-hidden=\"true\"></i> Actions';\n\n    if (!isLoggedIn) {\n      actionBtn.classList.add('disabled');\n    } else {\n      actionBtn.classList.remove('disabled');\n    }\n\n    ret.$el.find('#query-info-container')[0].classList.remove('show');\n    return ret;\n  },\n  provideContext: function provideContext(ctx) {\n    if (ctx.referrer) {\n      this._referrer = ctx.referrer;\n    }\n  },\n  setUpIntercepts: function setUpIntercepts() {\n    var _this2 = this;\n\n    var widgets = ['AuthorFacet', 'RefereedFacet', 'DatabaseFacet', 'GraphTabs'];\n\n    var interceptRequests = function interceptRequests(widget) {\n      var wid = widget; // check if the widget contains other widgets (like graphTabs)\n\n      if (widget.widgets && widget.widgets.length > 0) {\n        wid = widget.widgets[0];\n      }\n\n      var wps = wid.getPubSub();\n      var oldPublish = wps.publish; // override the publish method\n      // intercept any requests and cache it\n\n      wps.publish = function (ev) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        if (ev === wps.DELIVERING_REQUEST && !_this2.getSidebarState()) {\n          var to; // if there is a new search cycle, then stop watching for changes\n\n          wps.subscribeOnce(wps.INVITING_REQUEST, function () {\n            return window.clearTimeout(to);\n          }); // check for changes to sidebar state\n\n          var check = function check() {\n            if (_this2.getSidebarState()) {\n              // if the sidebars are shown, then go forward with the request\n              return oldPublish.call.apply(oldPublish, [wid, ev].concat(args));\n            }\n\n            to = setTimeout(function () {\n              return requestAnimationFrame(check);\n            }, 1000);\n          };\n\n          check(); // break out here so the request is caught\n\n          return;\n        }\n\n        oldPublish.call.apply(oldPublish, [wid, ev].concat(args));\n      };\n    };\n\n    widgets.map(function (k) {\n      return interceptRequests(_this2.widgets[k]);\n    });\n  },\n  assemble: function assemble() {\n    var self = this;\n    return js_page_managers_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype.assemble.apply(this, arguments).done(function () {\n      self.setUpIntercepts();\n\n      _.each(_.keys(self.widgets), function (w) {\n        self.listenTo(self.widgets[w], 'page-manager-event', _.bind(self.onPageManagerEvent, self, self.widgets[w]));\n      }, self);\n\n      self.setSidebarState(self._getUpdateFromUserData());\n      var defaultWidgets = ['Results', 'AuthorFacet', 'RefereedFacet', 'DatabaseFacet', 'GraphTabs'];\n\n      try {\n        _.forEach(_.keys(self.widgets), function (k) {\n          var w = self.widgets[k];\n\n          var handler = function handler() {\n            if (k === 'Results') {\n              self.resultsTimer.stop();\n            }\n\n            _.remove(defaultWidgets, function (t) {\n              return t === k;\n            });\n\n            if (defaultWidgets.length === 0) {\n              self.fullResultsTimer.stop();\n            }\n          };\n\n          if (w.widgets && w.widgets.length > 0) {\n            _.forEach(w.widgets, function (sub) {\n              sub.onIdle = handler;\n            });\n          }\n\n          w.onIdle = handler;\n        });\n      } catch (e) {// do nothing\n      }\n    });\n  },\n  broadcastTo: _.curry(function (widgets, event) {\n    var args = arguments;\n\n    var wids = _.pick(this.widgets, widgets);\n\n    _.each(wids, function (w) {\n      w.trigger.apply(w, ['page-manager-message', event].concat(_.toArray(args).slice(2)));\n    });\n  }, 2),\n  onPageManagerEvent: function onPageManagerEvent(widget, event, data) {\n    // this event is emitted from results widget\n    if (event === 'side-bars-update') {\n      this.setSidebarState(data);\n    }\n  }\n});\n\n_.extend(PageManager.prototype, js_mixins_side_bar_manager__WEBPACK_IMPORTED_MODULE_3__[\"default\"]);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (PageManager);\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/results_page_manager.js?");

/***/ }),

/***/ "./src/js/wraps/templates/paper-network-container.html":
/*!*************************************************************!*\
  !*** ./src/js/wraps/templates/paper-network-container.html ***!
  \*************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"s-network-control-panel\\\">\\n    <div class=\\\"detail-panel s-detail-panel\\\">\\n        <h4 style=\\\"display:inline-block\\\">Size wedges based on:</h4>\\n        <div class=\\\"btn-group network-sizes\\\" data-toggle=\\\"buttons\\\">\\n            <label class=\\\"btn btn-primary active\\\">\\n                <input type=\\\"radio\\\" name=\\\"mode\\\" value=\\\"paper_count\\\" checked autocomplete=\\\"off\\\"> Number of Papers\\n            </label>\\n            <label class=\\\"btn btn-primary\\\">\\n                <input type=\\\"radio\\\" name=\\\"mode\\\" value=\\\"total_citations\\\" autocomplete=\\\"off\\\"> Paper Citations\\n            </label>\\n            <label class=\\\"btn btn-primary\\\">\\n                <input type=\\\"radio\\\" name=\\\"mode\\\" value=\\\"total_reads\\\" autocomplete=\\\"off\\\"> Paper Downloads\\n            </label>\\n        </div>\\n    </div>\\n</div>\\n<div class=\\\"s-network-graph-div\\\">\\n    <svg class=\\\"network-chart s-network-chart\\\" width=\\\"400\\\"\\n         height=\\\"400\\\" viewBox=\\\"0 0 300 300\\\"\\n         id=\\\"network-viz-main-chart\\\"\\n         style=\\\"font-family:helvetica,arial,san-serif\\\"\\n    >\\n    </svg>\\n\\n    <a id=\\\"download-link\\\" class=\\\"hidden\\\"></a> \\n</div>\\n\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/templates/paper-network-container.html?");

/***/ }),

/***/ "./src/js/wraps/templates/paper-network-data.html":
/*!********************************************************!*\
  !*** ./src/js/wraps/templates/paper-network-data.html ***!
  \********************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" \"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(depth0 != null ? depth0 : (container.nullContext || {}),(data && lookupProperty(data,\"last\")),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":49},\"end\":{\"line\":9,\"column\":79}}})) != null ? stack1 : \"\")\n    + \"\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    return \", \";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    return \"      <button class=\\\"btn btn-xs btn-default filter-remove\\\">\\n        <i class=\\\"s-filter-image\\\"></i>remove group from filter\\n      </button>\\n\";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    return \"      <button class=\\\"btn btn-xs btn-default filter-add\\\">\\n        <i class=\\\"s-filter-image\\\"></i> add group to filter\\n      </button>\\n\";\n},\"8\":function(container,depth0,helpers,partials,data) {\n    return \"      <p><b>Top papers from this group include:</b></p>\\n\";\n},\"10\":function(container,depth0,helpers,partials,data) {\n    return \"      <p><b>Papers in this group: </b></p>\\n\";\n},\"12\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        <li title=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"node_name\") : depth0), depth0))\n    + \"\\\">\\n          <a\\n            href=\\\"#abs/\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"node_name\") : depth0), depth0))\n    + \"\\\"\\n            data-bypass\\n            target=\\\"_blank\\\"\\n            rel=\\\"noreferrer noopener\\\"\\n            ><b>\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"title\") : depth0), depth0))\n    + \"</b></a\\n          >; <i>\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"first_author\") : depth0), depth0))\n    + \"</i>\\n          (\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"citation_count\") : depth0), depth0))\n    + \" citations)\\n        </li>\\n\\n\";\n},\"14\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n        <li>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"inGroup\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(15, data, 0),\"inverse\":container.program(17, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":67,\"column\":10},\"end\":{\"line\":71,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"          <a\\n            href=\\\"#abs/\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"bibcode\") : depth0), depth0))\n    + \"\\\"\\n            data-bypass\\n            target=\\\"_blank\\\"\\n            rel=\\\"noreferrer noopener\\\"\\n            >\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"bibcode\") : depth0), depth0))\n    + \"</a\\n          >\\n          (cited by \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"percent\") : depth0), depth0))\n    + \"% of papers in this group)\\n        </li>\\n\\n\";\n},\"15\":function(container,depth0,helpers,partials,data) {\n    return \"          <i class=\\\"fa fa-star-o\\\" aria-hidden=\\\"true\\\"></i>\\n\";\n},\"17\":function(container,depth0,helpers,partials,data) {\n    return \"          <i class=\\\"fa fa-star-o no-show\\\" aria-hidden=\\\"true\\\"></i>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, alias5=container.lambda, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div style=\\\"padding: 0 -15px\\\">\\n  <div\\n    class=\\\"s-group-title clearfix\\\"\\n    style=\\\"border-bottom: 6px solid \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"borderColor\") || (depth0 != null ? lookupProperty(depth0,\"borderColor\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"borderColor\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":36},\"end\":{\"line\":4,\"column\":51}}}) : helper)))\n    + \";\\\"\\n  >\\n    <h3>\\n      Group \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"groupIdToShow\") || (depth0 != null ? lookupProperty(depth0,\"groupIdToShow\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"groupIdToShow\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":12},\"end\":{\"line\":7,\"column\":29}}}) : helper)))\n    + \":\\n      <span class=\\\"s-light-font\\\">\\n        \"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"summaryData\") : depth0)) != null ? lookupProperty(stack1,\"titleWords\") : stack1),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":8},\"end\":{\"line\":10,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"      </span>\\n    </h3>\\n\\n    <div class=\\\"pull-right print-hidden\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"inFilter\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.program(6, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":6},\"end\":{\"line\":23,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"    </div>\\n  </div>\\n\\n  <div class=\\\"s-group-content\\\">\\n    <p>\\n      This group consists of <b>\"\n    + alias4(alias5(((stack1 = (depth0 != null ? lookupProperty(depth0,\"summaryData\") : depth0)) != null ? lookupProperty(stack1,\"paper_count\") : stack1), depth0))\n    + \"</b> papers, which\\n      have been cited, in total, <b>\"\n    + alias4(alias5(((stack1 = (depth0 != null ? lookupProperty(depth0,\"summaryData\") : depth0)) != null ? lookupProperty(stack1,\"total_citations\") : stack1), depth0))\n    + \"</b> times.\\n    </p>\\n\\n    <div>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"morePapers\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(8, data, 0),\"inverse\":container.program(10, data, 0),\"data\":data,\"loc\":{\"start\":{\"line\":34,\"column\":6},\"end\":{\"line\":38,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"      <ul class=\\\"list-unstyled s-top-papers\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"topNodes\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(12, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":40,\"column\":8},\"end\":{\"line\":52,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"      </ul>\\n    </div>\\n\\n    <div>\\n      <p>\\n        <b> Papers highly referenced by papers in this group:</b> <br />\\n        (A <i class=\\\"fa fa-star-o\\\" aria-hidden=\\\"true\\\"></i> indicates that this\\n        paper is also a member of Group \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"groupIdToShow\") || (depth0 != null ? lookupProperty(depth0,\"groupIdToShow\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"groupIdToShow\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":60,\"column\":40},\"end\":{\"line\":60,\"column\":57}}}) : helper)))\n    + \")\\n      </p>\\n\\n      <ul class=\\\"list-unstyled\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,((stack1 = (depth0 != null ? lookupProperty(depth0,\"summaryData\") : depth0)) != null ? lookupProperty(stack1,\"processedTopCommonReferences\") : stack1),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(14, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":64,\"column\":8},\"end\":{\"line\":82,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"      </ul>\\n      <small\\n        >(Click on a link above to view the paper's abstract page in ADS in a\\n        new tab)</small\\n      >\\n    </div>\\n  </div>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/templates/paper-network-data.html?");

/***/ }),

/***/ "./src/js/wraps/templates/paper-network-link-data.html":
/*!*************************************************************!*\
  !*** ./src/js/wraps/templates/paper-network-link-data.html ***!
  \*************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        <tr>\\n            <td>\\n                <a href=\\\"#abs/\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":34,\"column\":30},\"end\":{\"line\":34,\"column\":38}}}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":34,\"column\":40},\"end\":{\"line\":34,\"column\":48}}}) : helper)))\n    + \"</a>\\n            </td>\\n            <td>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"percentOne\") || (depth0 != null ? lookupProperty(depth0,\"percentOne\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"percentOne\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":37,\"column\":16},\"end\":{\"line\":37,\"column\":30}}}) : helper)))\n    + \"%\\n            </td>\\n            <td>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"percentTwo\") || (depth0 != null ? lookupProperty(depth0,\"percentTwo\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"percentTwo\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":40,\"column\":16},\"end\":{\"line\":40,\"column\":30}}}) : helper)))\n    + \"%\\n            </td>\\n        </tr>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=container.lambda, alias2=container.escapeExpression, alias3=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"s-group-title s-paper-network-link-data-header\\\">\\n\\n    <h3>References From Both <span style=\\\"color:\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"group1\") : depth0)) != null ? lookupProperty(stack1,\"color\") : stack1), depth0))\n    + \"\\\"> Group \"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"group1\") : depth0)) != null ? lookupProperty(stack1,\"name\") : stack1), depth0))\n    + \" </span> and <span\\n            style=\\\"color:\"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"group2\") : depth0)) != null ? lookupProperty(stack1,\"color\") : stack1), depth0))\n    + \"\\\"> Group \"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"group2\") : depth0)) != null ? lookupProperty(stack1,\"name\") : stack1), depth0))\n    + \" </span></h3>\\n\\n</div>\\n\\n<div class=\\\"s-group-content\\\">\\n    <p>These groups have <b>\"\n    + alias2(((helper = (helper = lookupProperty(helpers,\"referencesLength\") || (depth0 != null ? lookupProperty(depth0,\"referencesLength\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(alias3,{\"name\":\"referencesLength\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":28},\"end\":{\"line\":9,\"column\":48}}}) : helper)))\n    + \" </b> unique references in common</p>\\n\\n    <p></p>\\n    <small>(Click on a link below to view the paper's abstract page in ADS in a new tab)</small>\\n    </p>\\n\\n\\n    <table class=\\\"table table-condensed\\\">\\n        <thead>\\n        <tr>\\n            <th>\\n                Paper\\n            </th>\\n            <th>\\n                Group \"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"group1\") : depth0)) != null ? lookupProperty(stack1,\"name\") : stack1), depth0))\n    + \"\\n            </th>\\n            <th>\\n                Group \"\n    + alias2(alias1(((stack1 = (depth0 != null ? lookupProperty(depth0,\"group2\") : depth0)) != null ? lookupProperty(stack1,\"name\") : stack1), depth0))\n    + \"\\n            </th>\\n        </tr>\\n        </thead>\\n        <tbody>\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"shared\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":31,\"column\":8},\"end\":{\"line\":43,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"        </tbody>\\n    </table>\\n\\n\\n</div>\\n\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/templates/paper-network-link-data.html?");

/***/ }),

/***/ "./src/js/wraps/user_settings_page_manager/user-settings-layout.html":
/*!***************************************************************************!*\
  !*** ./src/js/wraps/user_settings_page_manager/user-settings-layout.html ***!
  \***************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<section id=\\\"page-with-sidenav-layout\\\">\\n\\n  <!-- horizontal navbar -->\\n  <article data-widget=\\\"UserNavbarWidget\\\" />\\n\\n  <!-- mobile nav button -->\\n  <article class=\\\"nav-button-container s-nav-button-container\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary-faded toggle-menu s-toggle-menu \\\">\\n      <i class=\\\"fa fa-bars\\\" aria-hidden=\\\"true\\\"></i> Show Menu\\n    </button>\\n  </article>\\n\\n  <!-- main container -->\\n  <article class=\\\"s-darker-background user-pages__main\\\">\\n\\n    <!-- side nav -->\\n    <section class=\\\"nav-container s-nav-container user-pages__main-aside\\\"></section>\\n\\n    <!-- content -->\\n    <section class=\\\"user-pages__main-content full-width\\\">\\n      <div data-widget=\\\"LibraryImport\\\"/>\\n        <div data-widget=\\\"UserSettings\\\"/>\\n        <div data-widget=\\\"UserPreferences\\\"/>\\n        <div data-widget=\\\"MyAdsDashboard\\\"/>\\n    </section>\\n  </article>\\n</section>\\n\\n<!--show this when user enters information and navigates away-->\\n<div class=\\\"modal fade confirm-modal\\\">\\n  <div class=\\\"modal-dialog\\\">\\n    <div class=\\\"modal-content\\\">\\n      <div class=\\\"modal-header\\\">\\n        <button\\n          type=\\\"button\\\"\\n          class=\\\"close\\\"\\n          data-dismiss=\\\"modal\\\"\\n          aria-label=\\\"Close\\\"\\n        >\\n          <span aria-hidden=\\\"true\\\">&times;</span>\\n        </button>\\n        <h4 class=\\\"modal-title\\\">Confirm navigation</h4>\\n      </div>\\n      <div class=\\\"modal-body\\\">\\n        <p>\\n          You are leaving an unsubmitted form. The data you have entered will be\\n          lost.\\n        </p>\\n      </div>\\n      <div class=\\\"modal-footer\\\">\\n        <button\\n          type=\\\"button\\\"\\n          class=\\\"btn btn-default stay-on-form\\\"\\n          data-dismiss=\\\"modal\\\"\\n        >\\n          Stay on form\\n        </button>\\n        <button\\n          type=\\\"button\\\"\\n          class=\\\"btn btn-primary leave-form\\\"\\n          data-dismiss=\\\"modal\\\"\\n        >\\n          Leave form\\n        </button>\\n      </div>\\n    </div>\\n    <!-- /.modal-content -->\\n  </div>\\n  <!-- /.modal-dialog -->\\n</div>\\n<!-- /.modal -->\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/user_settings_page_manager/user-settings-layout.html?");

/***/ }),

/***/ "./src/js/wraps/user_settings_page_manager/user_nav.html":
/*!***************************************************************!*\
  !*** ./src/js/wraps/user_settings_page_manager/user_nav.html ***!
  \***************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        <a href=\\\"#\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"path\") : depth0), depth0))\n    + \"\\\" data-widget-id=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \"\\\"  >\\n        <div class=\\\"abstract-nav s-nav \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"isSelected\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":39},\"end\":{\"line\":12,\"column\":85}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n                <span class=\\\"s-content\\\">\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"title\") : depth0), depth0))\n    + \"\\n                </span>\\n        </div>\\n        </a>\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    return \" s-nav-selected \";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression, alias3=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n        <a href=\\\"#\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"path\") : depth0), depth0))\n    + \"\\\" data-widget-id=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"id\") : depth0), depth0))\n    + \"\\\">\\n        <div class=\\\"abstract-nav s-nav \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"isSelected\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":25,\"column\":39},\"end\":{\"line\":25,\"column\":85}}})) != null ? stack1 : \"\")\n    + \"\\\">\\n                <span class=\\\"s-content\\\">\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"title\") : depth0), depth0))\n    + \"\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(alias3,(depth0 != null ? lookupProperty(depth0,\"showCount\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":28,\"column\":16},\"end\":{\"line\":30,\"column\":23}}})) != null ? stack1 : \"\")\n    + \"                </span>\\n        </div>\\n        </a>\\n\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"                <span class=\\\"num-items\\\"> \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"numFound\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(6, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":29,\"column\":41},\"end\":{\"line\":29,\"column\":88}}})) != null ? stack1 : \"\")\n    + \"</span>\\n\";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    var lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"(\"\n    + container.escapeExpression(container.lambda((depth0 != null ? lookupProperty(depth0,\"numFound\") : depth0), depth0))\n    + \")\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {}), lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\n<nav aria-labelledby=\\\"customize-settings-label\\\">\\n\\n  <h2 class=\\\"s-nav-top-title\\\" id=\\\"customize-settings-label\\\">\\n    <i class=\\\"fa fa-cog\\\" aria-hidden=\\\"true\\\"></i> Settings\\n  </h2>\\n\\n    <div class=\\\"s-nav-header s-view-nav\\\">user preferences</div>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"preferences\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":4},\"end\":{\"line\":18,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"\\n    <div class=\\\"s-nav-header s-view-nav\\\">notification settings</div>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"notifications\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":22,\"column\":4},\"end\":{\"line\":35,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"\\n    <div class=\\\"s-nav-header s-view-nav\\\">account settings</div>\\n\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"settings\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":39,\"column\":4},\"end\":{\"line\":52,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"</nav>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/user_settings_page_manager/user_nav.html?");

/***/ }),

/***/ "./src/js/wraps/user_settings_page_manager/user_page_manager.js":
/*!**********************************************************************!*\
  !*** ./src/js/wraps/user_settings_page_manager/user_page_manager.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/page_managers/toc_controller */ \"./src/js/page_managers/toc_controller.js\");\n/* harmony import */ var js_page_managers_three_column_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! js/page_managers/three_column_view */ \"./src/js/page_managers/three_column_view.js\");\n/* harmony import */ var hbs_js_wraps_user_settings_page_manager_user_settings_layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hbs!js/wraps/user_settings_page_manager/user-settings-layout */ \"./src/js/wraps/user_settings_page_manager/user-settings-layout.html\");\n/* harmony import */ var hbs_js_wraps_user_settings_page_manager_user_settings_layout__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_user_settings_page_manager_user_settings_layout__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var hbs_js_wraps_user_settings_page_manager_user_nav__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! hbs!js/wraps/user_settings_page_manager/user_nav */ \"./src/js/wraps/user_settings_page_manager/user_nav.html\");\n/* harmony import */ var hbs_js_wraps_user_settings_page_manager_user_nav__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(hbs_js_wraps_user_settings_page_manager_user_nav__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nvar PageManager = js_page_managers_toc_controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"].extend({\n  TOCTemplate: (hbs_js_wraps_user_settings_page_manager_user_nav__WEBPACK_IMPORTED_MODULE_3___default()),\n  createView: function createView(options) {\n    options = options || {};\n    options.template = options.template || (hbs_js_wraps_user_settings_page_manager_user_settings_layout__WEBPACK_IMPORTED_MODULE_2___default());\n    return new js_page_managers_three_column_view__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n      template: (hbs_js_wraps_user_settings_page_manager_user_settings_layout__WEBPACK_IMPORTED_MODULE_2___default()),\n      className: 's-user-settings-page-layout s-100-height',\n      id: 'user-page-layout'\n    });\n  },\n  activate: function activate(beehive) {\n    this.setBeeHive(beehive);\n    this.debug = beehive.getDebug(); // XXX:rca - think of st better\n\n    this.view = this.createView({\n      debug: this.debug,\n      widgets: this.widgets\n    });\n  },\n  navConfig: {\n    UserPreferences__librarylink: {\n      title: 'Library Link Server',\n      path: 'user/settings/librarylink',\n      category: 'preferences'\n    },\n    UserPreferences__orcid: {\n      title: 'ORCID',\n      path: 'user/settings/orcid',\n      category: 'preferences'\n    },\n    LibraryImport: {\n      title: 'Import Libraries',\n      path: 'user/settings/libraryimport',\n      category: 'preferences'\n    },\n    UserPreferences__application: {\n      title: 'Search',\n      path: 'user/settings/application',\n      category: 'preferences'\n    },\n    UserPreferences__export: {\n      title: 'Export',\n      path: 'user/settings/export',\n      category: 'preferences'\n    },\n    UserSettings__email: {\n      title: 'Change Email',\n      path: 'user/settings/email',\n      category: 'settings'\n    },\n    UserSettings__password: {\n      title: 'Change Password',\n      path: 'user/settings/password',\n      category: 'settings'\n    },\n    UserSettings__token: {\n      title: 'API Token',\n      path: 'user/settings/token',\n      category: 'settings'\n    },\n    UserSettings__delete: {\n      title: 'Delete Account',\n      path: 'user/settings/delete',\n      category: 'settings'\n    },\n    MyAdsDashboard: {\n      title: 'myADS',\n      path: 'user/settings/myads',\n      category: 'notifications'\n    }\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (PageManager);\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/user_settings_page_manager/user_page_manager.js?");

/***/ }),

/***/ "./src/js/wraps/visualization_dropdown.js":
/*!************************************************!*\
  !*** ./src/js/wraps/visualization_dropdown.js ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* export default binding */ __WEBPACK_DEFAULT_EXPORT__; }\n/* harmony export */ });\n/* harmony import */ var js_widgets_dropdown_menu_widget__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js/widgets/dropdown-menu/widget */ \"./src/js/widgets/dropdown-menu/widget.js\");\n // config\n\nvar links = [{\n  section: 'Visualizations'\n}, {\n  description: 'Citation Metrics',\n  navEvent: 'show-metrics'\n}, {\n  description: 'Author Network',\n  navEvent: 'show-author-network'\n}, {\n  description: 'Paper Network',\n  navEvent: 'show-paper-network'\n}, {\n  description: 'Concept Cloud',\n  navEvent: 'show-concept-cloud'\n}, {\n  description: 'Results Graph',\n  navEvent: 'show-bubble-chart'\n}, {\n  divider: true\n}, {\n  section: 'Operations',\n  icon: {\n    class: 'icon-help',\n    href: '/help/search/second-order',\n    description: 'Discover more about second-order operators'\n  }\n}, {\n  description: 'Co-reads',\n  pubsubEvent: 'second-order-search/trending'\n}, {\n  description: 'Reviews',\n  pubsubEvent: 'second-order-search/reviews'\n}, {\n  description: 'Useful',\n  pubsubEvent: 'second-order-search/useful'\n}, {\n  description: 'Similar',\n  pubsubEvent: 'second-order-search/similar'\n}];\nvar btnType = 'btn-primary-faded';\nvar dropdownTitle = 'Explore';\nvar iconClass = 'icon-explore';\nvar rightAlign = true;\nvar selectedOption = true;\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__() {\n  var VisDropdown = new js_widgets_dropdown_menu_widget__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    links: links,\n    btnType: btnType,\n    dropdownTitle: dropdownTitle,\n    iconClass: iconClass,\n    rightAlign: rightAlign,\n    selectedOption: selectedOption\n  });\n  return VisDropdown;\n}\n;\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/visualization_dropdown.js?");

/***/ }),

/***/ "./src/js/wraps/widget/loading/template.html":
/*!***************************************************!*\
  !*** ./src/js/wraps/widget/loading/template.html ***!
  \***************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var Handlebars = __webpack_require__(/*! ../../../../../node_modules/handlebars/runtime.js */ \"./node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"  <div class=\\\"close-widget close-circle\\\">\\n    <a href=\\\"javascript:void(0)\\\"\\n      ><i class=\\\"fa fa-times fa-lg\\\" aria-hidden=\\\"true\\\"></i\\n    ></a>\\n  </div>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"loading-container\\\">\\n\"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"hideCloseButton\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":2},\"end\":{\"line\":8,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"  <div class=\\\"loading\\\">\\n    <div\\n      class=\\\"loading-icon-\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"widgetLoadingSize\") || (depth0 != null ? lookupProperty(depth0,\"widgetLoadingSize\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"widgetLoadingSize\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":26},\"end\":{\"line\":11,\"column\":47}}}) : helper)))\n    + \" fa fa-spinner fa-spin\\\"\\n      aria-hidden=\\\"true\\\"\\n    ></div>\\n    <div class=\\\"loading-text loading-text-\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"widgetLoadingSize\") || (depth0 != null ? lookupProperty(depth0,\"widgetLoadingSize\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"widgetLoadingSize\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":14,\"column\":42},\"end\":{\"line\":14,\"column\":63}}}) : helper)))\n    + \"\\\">\\n      Loading...\\n    </div>\\n  </div>\\n</div>\\n\";\n},\"useData\":true});\n\n//# sourceURL=webpack://bumblebee/./src/js/wraps/widget/loading/template.html?");

/***/ }),

/***/ "./src/libs/requirejs-plugins sync recursive":
/*!******************************************!*\
  !*** ./src/libs/requirejs-plugins/ sync ***!
  \******************************************/
/***/ (function(module) {

eval("function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = \"./src/libs/requirejs-plugins sync recursive\";\nmodule.exports = webpackEmptyContext;\n\n//# sourceURL=webpack://bumblebee/./src/libs/requirejs-plugins/_sync?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	!function() {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = function(result, chunkIds, fn, priority) {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var chunkIds = deferred[i][0];
/******/ 				var fn = deferred[i][1];
/******/ 				var priority = deferred[i][2];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	!function() {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = function(module) {
/******/ 			var getter = module && module.__esModule ?
/******/ 				function() { return module['default']; } :
/******/ 				function() { return module; };
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	!function() {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = function(exports, definition) {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	!function() {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	!function() {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = function(exports) {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/node module decorator */
/******/ 	!function() {
/******/ 		__webpack_require__.nmd = function(module) {
/******/ 			module.paths = [];
/******/ 			if (!module.children) module.children = [];
/******/ 			return module;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	!function() {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"app": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = function(parentChunkLoadingFunction, data) {
/******/ 			var chunkIds = data[0];
/******/ 			var moreModules = data[1];
/******/ 			var runtime = data[2];
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = self["webpackChunkbumblebee"] = self["webpackChunkbumblebee"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	}();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["vendor"], function() { return __webpack_require__("./src/config/webpack-entry.js"); })
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;